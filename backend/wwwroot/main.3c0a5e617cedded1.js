(self.webpackChunkmarketing_form=self.webpackChunkmarketing_form||[]).push([[792],{64:(uf,hf,X)=>{"use strict";function Xr(t,n,e,i,o,r,s){try{var l=t[r](s),c=l.value}catch(u){return void e(u)}l.done?n(c):Promise.resolve(c).then(i,o)}function de(t){return function(){var n=this,e=arguments;return new Promise(function(i,o){var r=t.apply(n,e);function s(c){Xr(r,i,o,s,l,"next",c)}function l(c){Xr(r,i,o,s,l,"throw",c)}s(void 0)})}}let xe=null,He=1;const zo=Symbol("SIGNAL");function ke(t){const n=xe;return xe=t,n}function gf(t){if((!rn(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==He)){if(!t.producerMustRecompute(t)&&!gl(t))return t.dirty=!1,void(t.lastCleanEpoch=He);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=He}}function gl(t){_n(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(gf(e),i!==e.version))return!0}return!1}function ea(t,n){if(function mf(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),_n(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)ea(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],o=t.liveConsumerNode[n];_n(o),o.producerIndexOfThis[i]=n}}function rn(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _n(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Me=null;function Ke(t){return"function"==typeof t}function _l(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const na=_l(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Mr(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class An{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const r of e)r.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(Ke(i))try{i()}catch(r){n=r instanceof na?r.errors:[r]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const r of o)try{Dd(r)}catch(s){n=n??[],s instanceof na?n=[...n,...s.errors]:n.push(s)}}if(n)throw new na(n)}}add(n){var e;if(n&&n!==this)if(this.closed)Dd(n);else{if(n instanceof An){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Mr(e,n)}remove(n){const{_finalizers:e}=this;e&&Mr(e,n),n instanceof An&&n._removeParent(this)}}An.EMPTY=(()=>{const t=new An;return t.closed=!0,t})();const Cd=An.EMPTY;function vl(t){return t instanceof An||t&&"closed"in t&&Ke(t.remove)&&Ke(t.add)&&Ke(t.unsubscribe)}function Dd(t){Ke(t)?t():t.unsubscribe()}const Wo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yl={setTimeout(t,n,...e){const{delegate:i}=yl;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=yl;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yf(t){yl.setTimeout(()=>{const{onUnhandledError:n}=Wo;if(!n)throw t;n(t)})}function kr(){}const bf=bl("C",void 0,void 0);function bl(t,n,e){return{kind:t,value:n,error:e}}let qo=null;function wl(t){if(Wo.useDeprecatedSynchronousErrorHandling){const n=!qo;if(n&&(qo={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=qo;if(qo=null,e)throw i}}else t()}class ia extends An{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,vl(n)&&n.add(this)):this.destination=Sf}static create(n,e,i){return new Sd(n,e,i)}next(n){this.isStopped?Dl(function a_(t){return bl("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Dl(function wf(t){return bl("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Dl(bf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Df=Function.prototype.bind;function Td(t,n){return Df.call(t,n)}class oa{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Cl(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Cl(i)}else Cl(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Cl(e)}}}class Sd extends ia{constructor(n,e,i){let o;if(super(),Ke(n)||!n)o={next:n??void 0,error:e??void 0,complete:i??void 0};else{let r;this&&Wo.useDeprecatedNextContext?(r=Object.create(n),r.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&Td(n.next,r),error:n.error&&Td(n.error,r),complete:n.complete&&Td(n.complete,r)}):o=n}this.destination=new oa(o)}}function Cl(t){Wo.useDeprecatedSynchronousErrorHandling?function Cf(t){Wo.useDeprecatedSynchronousErrorHandling&&qo&&(qo.errorThrown=!0,qo.error=t)}(t):yf(t)}function Dl(t,n){const{onStoppedNotification:e}=Wo;e&&yl.setTimeout(()=>e(t,n))}const Sf={closed:!0,next:kr,error:function Tf(t){throw t},complete:kr},Md="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ji(t){return t}function Mf(t){return 0===t.length?Ji:1===t.length?t[0]:function(e){return t.reduce((i,o)=>o(i),e)}}let rt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,o){const r=function c_(t){return t&&t instanceof ia||function kd(t){return t&&Ke(t.next)&&Ke(t.error)&&Ke(t.complete)}(t)&&vl(t)}(e)?e:new Sd(e,i,o);return wl(()=>{const{operator:s,source:l}=this;r.add(s?s.call(r,l):l?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=kf(i))((o,r)=>{const s=new Sd({next:l=>{try{e(l)}catch(c){r(c),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Md](){return this}pipe(...e){return Mf(e)(this)}toPromise(e){return new(e=kf(e))((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return t.create=n=>new t(n),t})();function kf(t){var n;return null!==(n=t??Wo.Promise)&&void 0!==n?n:Promise}const d_=_l(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ge=(()=>{class t extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ef(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new d_}next(e){wl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){wl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){wl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:o,observers:r}=this;return i||o?Cd:(this.currentObservers=null,r.push(e),new An(()=>{this.currentObservers=null,Mr(r,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:o,isStopped:r}=this;i?e.error(o):r&&e.complete()}asObservable(){const e=new rt;return e.source=this,e}}return t.create=(n,e)=>new Ef(n,e),t})();class Ef extends Ge{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Cd}}class vt extends Ge{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function ge(t){return Ke(t?.lift)}function Ot(t){return n=>{if(ge(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function st(t,n,e,i,o){return new xf(t,n,e,i,o)}class xf extends ia{constructor(n,e,i,o,r,s){super(n),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=e?function(l){try{e(l)}catch(c){n.error(c)}}:super._next,this._error=o?function(l){try{o(l)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function le(t,n){return Ot((e,i)=>{let o=0;e.subscribe(st(i,r=>{i.next(t.call(n,r,o++))}))})}const Ed="https://g.co/ng/security#xss";class F extends Error{constructor(n,e){super(function Er(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function _o(t){return{toString:t}.toString()}const ns="__parameters__";function os(t,n,e){return _o(()=>{const i=function Id(t){return function(...e){if(t){const i=t(...e);for(const o in i)this[o]=i[o]}}}(n);function o(...r){if(this instanceof o)return i.apply(this,r),this;const s=new o(...r);return l.annotation=s,l;function l(c,u,f){const _=c.hasOwnProperty(ns)?c[ns]:Object.defineProperty(c,ns,{value:[]})[ns];for(;_.length<=f;)_.push(null);return(_[f]=_[f]||[]).push(s),c}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const We=globalThis;function Ye(t){for(let n in t)if(t[n]===Ye)return n;throw Error("Could not find renamed property on target object.")}function et(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function rs(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ss=Ye({__forward_ref__:Ye});function qe(t){return t.__forward_ref__=qe,t.toString=function(){return Oe(this())},t}function K(t){return St(t)?t():t}function St(t){return"function"==typeof t&&t.hasOwnProperty(ss)&&t.__forward_ref__===qe}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ae(t){return{providers:t.providers||[],imports:t.imports||[]}}function at(t){return Ml(t,Xi)||Ml(t,ds)}function Ml(t,n){return t.hasOwnProperty(n)?t[n]:null}function cs(t){return t&&(t.hasOwnProperty(la)||t.hasOwnProperty(vn))?t[la]:null}const Xi=Ye({\u0275prov:Ye}),la=Ye({\u0275inj:Ye}),ds=Ye({ngInjectableDef:Ye}),vn=Ye({ngInjectorDef:Ye});class ee{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=W({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xr(t){return t&&!!t.\u0275providers}const us=Ye({\u0275cmp:Ye}),Fd=Ye({\u0275dir:Ye}),ca=Ye({\u0275pipe:Ye}),$f=Ye({\u0275mod:Ye}),to=Ye({\u0275fac:Ye}),da=Ye({__NG_ELEMENT_ID__:Ye}),Hf=Ye({__NG_ENV_ID__:Ye});function Ce(t){return"string"==typeof t?t:null==t?"":String(t)}function Il(t,n){throw new F(-201,!1)}var Le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Le||{});let Ld;function Bd(){return Ld}function Un(t){const n=Ld;return Ld=t,n}function Gf(t,n,e){const i=at(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Le.Optional?null:void 0!==n?n:void Il()}const ua={},Nl="__NG_DI_FLAG__",ha="ngTempTokenPath",Nr=/\n/gm,hs="__source";let yn;function bo(t){const n=yn;return yn=t,n}function __(t,n=Le.Default){if(void 0===yn)throw new F(-203,!1);return null===yn?Gf(t,void 0,n):yn.get(t,n&Le.Optional?null:void 0,n)}function oe(t,n=Le.Default){return(Bd()||__)(K(t),n)}function N(t,n=Le.Default){return oe(t,Al(n))}function Al(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Rl(t){const n=[];for(let e=0;e<t.length;e++){const i=K(t[e]);if(Array.isArray(i)){if(0===i.length)throw new F(900,!1);let o,r=Le.Default;for(let s=0;s<i.length;s++){const l=i[s],c=xi(l);"number"==typeof c?-1===c?o=l.token:r|=c:o=l}n.push(oe(o,r))}else n.push(oe(i))}return n}function fa(t,n){return t[Nl]=n,t.prototype[Nl]=n,t}function xi(t){return t[Nl]}const Fl=fa(os("Optional"),8),Ll=fa(os("SkipSelf"),4);function Zo(t,n){return t.hasOwnProperty(to)?t[to]:null}function ri(t,n){t.forEach(e=>Array.isArray(e)?ri(e,n):n(e))}function ga(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Vl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function si(t,n,e){let i=Co(t,n);return i>=0?t[1|i]=e:(i=~i,function Zf(t,n,e,i){let o=t.length;if(o==n)t.push(e,i);else if(1===o)t.push(i,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Ii(t,n){const e=Co(t,n);if(e>=0)return t[1|e]}function Co(t,n){return function jl(t,n,e){let i=0,o=t.length>>e;for(;o!==i;){const r=i+(o-i>>1),s=t[r<<e];if(n===s)return r<<e;s>n?o=r:i=r+1}return~(o<<e)}(t,n,1)}const ai={},Ue=[],no=new ee(""),Or=new ee("",-1),ms=new ee("");class _s{get(n,e=ua){if(e===ua){const i=new Error(`NullInjectorError: No provider for ${Oe(n)}!`);throw i.name="NullInjectorError",i}return e}}var _a=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_a||{}),Ni=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ni||{}),Je=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Je||{});function b_(t,n,e){let i=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const r=n.length;if(o+r===i||t.charCodeAt(o+r)<=32)return o}e=o+1}}function $l(t,n,e){let i=0;for(;i<e.length;){const o=e[i];if("number"==typeof o){if(0!==o)break;i++;const r=e[i++],s=e[i++],l=e[i++];t.setAttribute(n,s,l,r)}else{const r=o,s=e[++i];jd(r)?t.setProperty(n,r,s):t.setAttribute(n,r,s),i++}}return i}function Kf(t){return 3===t||4===t||6===t}function jd(t){return 64===t.charCodeAt(0)}function va(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const o=n[i];"number"==typeof o?e=o:0===e||Oi(t,e,o,null,-1===e||2===e?n[++i]:null)}}return t}function Oi(t,n,e,i,o){let r=0,s=t.length;if(-1===n)s=-1;else for(;r<t.length;){const l=t[r++];if("number"==typeof l){if(l===n){s=-1;break}if(l>n){s=r-1;break}}}for(;r<t.length;){const l=t[r];if("number"==typeof l)break;if(l===e){if(null===i)return void(null!==o&&(t[r+1]=o));if(i===t[r+1])return void(t[r+2]=o)}r++,null!==i&&r++,null!==o&&r++}-1!==s&&(t.splice(s,0,n),r=s+1),t.splice(r++,0,e),null!==i&&t.splice(r++,0,i),null!==o&&t.splice(r++,0,o)}const ya="ng-template";function w_(t,n,e,i){let o=0;if(i){for(;o<n.length&&"string"==typeof n[o];o+=2)if("class"===n[o]&&-1!==b_(n[o+1].toLowerCase(),e,0))return!0}else if(vs(t))return!1;if(o=n.indexOf(1,o),o>-1){let r;for(;++o<n.length&&"string"==typeof(r=n[o]);)if(r.toLowerCase()===e)return!0}return!1}function vs(t){return 4===t.type&&t.value!==ya}function C_(t,n,e){return n===(4!==t.type||e?t.value:ya)}function Yf(t,n,e){let i=4;const o=t.attrs,r=null!==o?function Jf(t){for(let n=0;n<t.length;n++)if(Kf(t[n]))return n;return t.length}(o):0;let s=!1;for(let l=0;l<n.length;l++){const c=n[l];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!C_(t,c,e)||""===c&&1===n.length){if(Pi(i))return!1;s=!0}}else if(8&i){if(null===o||!w_(t,o,c,e)){if(Pi(i))return!1;s=!0}}else{const u=n[++l],f=ba(c,o,vs(t),e);if(-1===f){if(Pi(i))return!1;s=!0;continue}if(""!==u){let _;if(_=f>r?"":o[f+1].toLowerCase(),2&i&&u!==_){if(Pi(i))return!1;s=!0}}}}else{if(!s&&!Pi(i)&&!Pi(c))return!1;if(s&&Pi(c))continue;s=!1,i=c|1&i}}return Pi(i)||s}function Pi(t){return!(1&t)}function ba(t,n,e,i){if(null===n)return-1;let o=0;if(i||!e){let r=!1;for(;o<n.length;){const s=n[o];if(s===t)return o;if(3===s||6===s)r=!0;else{if(1===s||2===s){let l=n[++o];for(;"string"==typeof l;)l=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=r?1:2}return-1}return function Xf(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function Qf(t,n,e=!1){for(let i=0;i<n.length;i++)if(Yf(t,n[i],e))return!0;return!1}function D_(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let o=0;o<t.length;o++)if(t[o]!==i[o])continue e;return!0}}return!1}function io(t,n){return t?":not("+n.trim()+")":n}function ep(t){let n=t[0],e=1,i=2,o="",r=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&i){const l=t[++e];o+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&i?o+="."+s:4&i&&(o+=" "+s);else""!==o&&!Pi(s)&&(n+=io(r,o),o=""),i=s,r=r||!Pi(i);e++}return""!==o&&(n+=io(r,o)),n}function Ft(t){return _o(()=>{const n=Hd(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_a.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ni.Emulated,styles:t.styles||Ue,_:null,schemas:t.schemas||null,tView:null,id:""};Ud(e);const i=t.dependencies;return e.directiveDefs=Ul(i,!1),e.pipeDefs=Ul(i,!0),e.id=function d(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const o of e)n=Math.imul(31,n)+o.charCodeAt(0)|0;return n+=2147483648,"c"+n}(e),e})}function Hl(t){return Re(t)||Wt(t)}function Ca(t){return null!==t}function nt(t){return _o(()=>({type:t.type,bootstrap:t.bootstrap||Ue,declarations:t.declarations||Ue,imports:t.imports||Ue,exports:t.exports||Ue,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $d(t,n){if(null==t)return ai;const e={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i];let r,s,l=Je.None;Array.isArray(o)?(l=o[0],r=o[1],s=o[2]??r):(r=o,s=o),n?(e[r]=l!==Je.None?[i,l]:i,n[r]=s):e[r]=i}return e}function te(t){return _o(()=>{const n=Hd(t);return Ud(n),n})}function zn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Re(t){return t[us]||null}function Wt(t){return t[Fd]||null}function sn(t){return t[ca]||null}function Rn(t,n){const e=t[$f]||null;if(!e&&!0===n)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return e}function Hd(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||ai,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ue,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$d(t.inputs,n),outputs:$d(t.outputs),debugInfo:null}}function Ud(t){t.features?.forEach(n=>n(t))}function Ul(t,n){if(!t)return null;const e=n?sn:Hl;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(Ca)}function g(...t){return{\u0275providers:y(0,t),\u0275fromNgModule:!0}}function y(t,...n){const e=[],i=new Set;let o;const r=s=>{e.push(s)};return ri(n,s=>{const l=s;E(l,r,[],i)&&(o||=[],o.push(l))}),void 0!==o&&D(o,r),e}function D(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:o}=t[e];V(o,r=>{n(r,i)})}}function E(t,n,e,i){if(!(t=K(t)))return!1;let o=null,r=cs(t);const s=!r&&Re(t);if(r||s){if(s&&!s.standalone)return!1;o=t}else{const c=t.ngModule;if(r=cs(c),!r)return!1;o=c}const l=i.has(o);if(s){if(l)return!1;if(i.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)E(u,n,e,i)}}else{if(!r)return!1;{if(null!=r.imports&&!l){let u;i.add(o);try{ri(r.imports,f=>{E(f,n,e,i)&&(u||=[],u.push(f))})}finally{}void 0!==u&&D(u,n)}if(!l){const u=Zo(o)||(()=>new o);n({provide:o,useFactory:u,deps:Ue},o),n({provide:ms,useValue:o,multi:!0},o),n({provide:no,useValue:()=>oe(o),multi:!0},o)}const c=r.providers;if(null!=c&&!l){const u=t;V(c,f=>{n(f,u)})}}}return o!==t&&void 0!==t.providers}function V(t,n){for(let e of t)xr(e)&&(e=e.\u0275providers),Array.isArray(e)?V(e,n):n(e)}const G=Ye({provide:String,useValue:Ye});function se(t){return null!==t&&"object"==typeof t&&G in t}function Ht(t){return"function"==typeof t}const Yn=new ee(""),bn={},bs={};let zd;function zl(){return void 0===zd&&(zd=new _s),zd}class wn{}class Pr extends wn{get destroyed(){return this._destroyed}constructor(n,e,i,o){super(),this.parent=e,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gl(n,s=>this.processProvider(s)),this.records.set(Or,ws(void 0,this)),o.has("environment")&&this.records.set(wn,ws(void 0,this));const r=this.records.get(Yn);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(ms,Ue,Le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=ke(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ke(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=bo(this),i=Un(void 0);try{return n()}finally{bo(e),Un(i)}}get(n,e=ua,i=Le.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Hf))return n[Hf](this);i=Al(i);const r=bo(this),s=Un(void 0);try{if(!(i&Le.SkipSelf)){let c=this.records.get(n);if(void 0===c){const u=function Wd(t){return"function"==typeof t||"object"==typeof t&&t instanceof ee}(n)&&at(n);c=u&&this.injectableDefInScope(u)?ws(Gd(n),bn):null,this.records.set(n,c)}if(null!=c)return this.hydrate(n,c)}return(i&Le.Self?zl():this.parent).get(n,e=i&Le.Optional&&e===ua?null:e)}catch(l){if("NullInjectorError"===l.name){if((l[ha]=l[ha]||[]).unshift(Oe(n)),r)throw l;return function fs(t,n,e,i){const o=t[ha];throw n[hs]&&o.unshift(n[hs]),t.message=function v_(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=Oe(n);if(Array.isArray(n))o=n.map(Oe).join(" -> ");else if("object"==typeof n){let r=[];for(let s in n)if(n.hasOwnProperty(s)){let l=n[s];r.push(s+":"+("string"==typeof l?JSON.stringify(l):Oe(l)))}o=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${o}]: ${t.replace(Nr,"\n  ")}`}("\n"+t.message,o,e,i),t.ngTokenPath=o,t[ha]=null,t}(l,n,"R3InjectorError",this.source)}throw l}finally{Un(s),bo(r)}}resolveInjectorInitializers(){const n=ke(null),e=bo(this),i=Un(void 0);try{const r=this.get(no,Ue,Le.Self);for(const s of r)s()}finally{bo(e),Un(i),ke(n)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(Oe(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(n){let e=Ht(n=K(n))?n:K(n&&n.provide);const i=function qt(t){return se(t)?ws(void 0,t.useValue):ws(Da(t),bn)}(n);if(!Ht(n)&&!0===n.multi){let o=this.records.get(e);o||(o=ws(void 0,bn,!0),o.factory=()=>Rl(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,i)}hydrate(n,e){const i=ke(null);try{return e.value===bn&&(e.value=bs,e.value=e.factory()),"object"==typeof e.value&&e.value&&function S_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ke(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=K(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Gd(t){const n=at(t),e=null!==n?n.factory:Zo(t);if(null!==e)return e;if(t instanceof ee)throw new F(204,!1);if(t instanceof Function)return function np(t){if(t.length>0)throw new F(204,!1);const e=function Pd(t){return t&&(t[Xi]||t[ds])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new F(204,!1)}function Da(t,n,e){let i;if(Ht(t)){const o=K(t);return Zo(o)||Gd(o)}if(se(t))i=()=>K(t.useValue);else if(function Be(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Rl(t.deps||[]));else if(function be(t){return!(!t||!t.useExisting)}(t))i=()=>oe(K(t.useExisting));else{const o=K(t&&(t.useClass||t.provide));if(!function T_(t){return!!t.deps}(t))return Zo(o)||Gd(o);i=()=>new o(...Rl(t.deps))}return i}function ws(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Gl(t,n){for(const e of t)Array.isArray(e)?Gl(e,n):e&&xr(e)?Gl(e.\u0275providers,n):n(e)}function oo(t,n){t instanceof Pr&&t.assertNotDestroyed();const i=bo(t),o=Un(void 0);try{return n()}finally{bo(i),Un(o)}}function _w(){return void 0!==Bd()||null!=function qf(){return yn}()}const Lt=0,Y=1,me=2,Yt=3,To=4,Qn=5,Ai=6,ql=7,Mt=8,ln=9,So=10,De=11,Kd=12,yw=13,Zl=14,Ut=15,Yd=16,Kl=17,Ar=18,Qd=19,bw=20,Cs=21,op=22,Ta=23,Ee=25,k_=1,Yo=7,Yl=9,Qt=10;var E_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(E_||{});function Jn(t){return Array.isArray(t)&&"object"==typeof t[k_]}function Xn(t){return Array.isArray(t)&&!0===t[k_]}function x_(t){return!!(4&t.flags)}function Sa(t){return t.componentOffset>-1}function sp(t){return!(1&~t.flags)}function Mo(t){return!!t.template}function I_(t){return!!(512&t[me])}class GA{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Tw(t,n,e,i){null!==n?n.applyValueToInputSignal(n,i):t[e]=i}function Dn(){return Sw}function Sw(t){return t.type.prototype.ngOnChanges&&(t.setInput=qA),WA}function WA(){const t=kw(this),n=t?.current;if(n){const e=t.previous;if(e===ai)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function qA(t,n,e,i,o){const r=this.declaredInputs[i],s=kw(t)||function ZA(t,n){return t[Mw]=n}(t,{previous:ai,current:null}),l=s.current||(s.current={}),c=s.previous,u=c[r];l[r]=new GA(u&&u.currentValue,e,c===ai),Tw(t,n,o,e)}Dn.ngInherit=!0;const Mw="__ngSimpleChanges__";function kw(t){return t[Mw]||null}const Qo=function(t,n,e){};let Iw=!1;function yt(t){for(;Array.isArray(t);)t=t[Lt];return t}function Xd(t,n){return yt(n[t])}function li(t,n){return yt(n[t.index])}function eu(t,n){return t.data[n]}function Ql(t,n){return t[n]}function Ri(t,n){const e=n[t];return Jn(e)?e:e[Lt]}function R_(t){return!(128&~t[me])}function Jo(t,n){return null==n?null:t[n]}function Nw(t){t[Kl]=0}function e2(t){1024&t[me]||(t[me]|=1024,R_(t)&&tu(t))}function F_(t){return!!(9216&t[me]||t[Ta]?.dirty)}function L_(t){t[So].changeDetectionScheduler?.notify(1),F_(t)?tu(t):64&t[me]&&(function YA(){return Iw}()?(t[me]|=1024,tu(t)):t[So].changeDetectionScheduler?.notify())}function tu(t){t[So].changeDetectionScheduler?.notify();let n=Ma(t);for(;null!==n&&!(8192&n[me])&&(n[me]|=8192,R_(n));)n=Ma(n)}function ap(t,n){if(!(256&~t[me]))throw new F(911,!1);null===t[Cs]&&(t[Cs]=[]),t[Cs].push(n)}function Ma(t){const n=t[Yt];return Xn(n)?n[Yt]:n}const Te={lFrame:$w(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Aw(){return Te.bindingsEnabled}function Jl(){return null!==Te.skipHydrationRootTNode}function $(){return Te.lFrame.lView}function ze(){return Te.lFrame.tView}function Q(t){return Te.lFrame.contextLView=t,t[Mt]}function J(t){return Te.lFrame.contextLView=null,t}function ht(){let t=Rw();for(;null!==t&&64===t.type;)t=t.parent;return t}function Rw(){return Te.lFrame.currentTNode}function Xo(t,n){const e=Te.lFrame;e.currentTNode=t,e.isParent=n}function V_(){return Te.lFrame.isParent}function j_(){Te.lFrame.isParent=!1}function ci(){const t=Te.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ko(){return Te.lFrame.bindingIndex++}function Fr(t){const n=Te.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function u2(t,n){const e=Te.lFrame;e.bindingIndex=e.bindingRootIndex=t,$_(n)}function $_(t){Te.lFrame.currentDirectiveIndex=t}function U_(){return Te.lFrame.currentQueryIndex}function lp(t){Te.lFrame.currentQueryIndex=t}function f2(t){const n=t[Y];return 2===n.type?n.declTNode:1===n.type?t[Qn]:null}function Vw(t,n,e){if(e&Le.SkipSelf){let o=n,r=t;for(;!(o=o.parent,null!==o||e&Le.Host||(o=f2(r),null===o||(r=r[Zl],10&o.type))););if(null===o)return!1;n=o,t=r}const i=Te.lFrame=jw();return i.currentTNode=n,i.lView=t,!0}function z_(t){const n=jw(),e=t[Y];Te.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function jw(){const t=Te.lFrame,n=null===t?null:t.child;return null===n?$w(t):n}function $w(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Hw(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Uw=Hw;function G_(){const t=Hw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ei(){return Te.lFrame.selectedIndex}function ka(t){Te.lFrame.selectedIndex=t}function kt(){const t=Te.lFrame;return eu(t.tView,t.selectedIndex)}let Gw=!0;function iu(){return Gw}function er(t){Gw=t}function cp(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const r=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=r;s&&(t.contentHooks??=[]).push(-e,s),l&&((t.contentHooks??=[]).push(e,l),(t.contentCheckHooks??=[]).push(e,l)),c&&(t.viewHooks??=[]).push(-e,c),u&&((t.viewHooks??=[]).push(e,u),(t.viewCheckHooks??=[]).push(e,u)),null!=f&&(t.destroyHooks??=[]).push(e,f)}}function dp(t,n,e){Ww(t,n,3,e)}function up(t,n,e,i){(3&t[me])===e&&Ww(t,n,e,i)}function W_(t,n){let e=t[me];(3&e)===n&&(e&=16383,e+=1,t[me]=e)}function Ww(t,n,e,i){const r=i??-1,s=n.length-1;let l=0;for(let c=void 0!==i?65535&t[Kl]:0;c<s;c++)if("number"==typeof n[c+1]){if(l=n[c],null!=i&&l>=i)break}else n[c]<0&&(t[Kl]+=65536),(l<r||-1==r)&&(b2(t,e,n,c),t[Kl]=(4294901760&t[Kl])+c+2),c++}function qw(t,n){Qo(4,t,n);const e=ke(null);try{n.call(t)}finally{ke(e),Qo(5,t,n)}}function b2(t,n,e,i){const o=e[i]<0,r=e[i+1],l=t[o?-e[i]:e[i]];o?t[me]>>14<t[Kl]>>16&&(3&t[me])===n&&(t[me]+=16384,qw(l,r)):qw(l,r)}const Xl=-1;class ou{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Z_(t){return t!==Xl}function ru(t){return 32767&t}function su(t,n){let e=function S2(t){return t>>16}(t),i=n;for(;e>0;)i=i[Zl],e--;return i}let K_=!0;function hp(t){const n=K_;return K_=t,n}const Zw=255,Kw=5;let M2=0;const tr={};function fp(t,n){const e=Yw(t,n);if(-1!==e)return e;const i=n[Y];i.firstCreatePass&&(t.injectorIndex=n.length,Y_(i.data,t),Y_(n,null),Y_(i.blueprint,null));const o=pp(t,n),r=t.injectorIndex;if(Z_(o)){const s=ru(o),l=su(o,n),c=l[Y].data;for(let u=0;u<8;u++)n[r+u]=l[s+u]|c[s+u]}return n[r+8]=o,r}function Y_(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Yw(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function pp(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,o=n;for(;null!==o;){if(i=iC(o),null===i)return Xl;if(e++,o=o[Zl],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Xl}function Q_(t,n,e){!function k2(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(da)&&(i=e[da]),null==i&&(i=e[da]=M2++);const o=i&Zw;n.data[t+(o>>Kw)]|=1<<o}(t,n,e)}function Qw(t,n,e){if(e&Le.Optional||void 0!==t)return t;Il()}function Jw(t,n,e,i){if(e&Le.Optional&&void 0===i&&(i=null),!(e&(Le.Self|Le.Host))){const o=t[ln],r=Un(void 0);try{return o?o.get(n,i,e&Le.Optional):Gf(n,i,e&Le.Optional)}finally{Un(r)}}return Qw(i,0,e)}function Xw(t,n,e,i=Le.Default,o){if(null!==t){if(2048&n[me]&&!(i&Le.Self)){const s=function O2(t,n,e,i,o){let r=t,s=n;for(;null!==r&&null!==s&&2048&s[me]&&!(512&s[me]);){const l=eC(r,s,e,i|Le.Self,tr);if(l!==tr)return l;let c=r.parent;if(!c){const u=s[bw];if(u){const f=u.get(e,tr,i);if(f!==tr)return f}c=iC(s),s=s[Zl]}r=c}return o}(t,n,e,i,tr);if(s!==tr)return s}const r=eC(t,n,e,i,tr);if(r!==tr)return r}return Jw(n,e,i,o)}function eC(t,n,e,i,o){const r=function I2(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(da)?t[da]:void 0;return"number"==typeof n?n>=0?n&Zw:N2:n}(e);if("function"==typeof r){if(!Vw(n,t,i))return i&Le.Host?Qw(o,0,i):Jw(n,e,i,o);try{let s;if(s=r(i),null!=s||i&Le.Optional)return s;Il()}finally{Uw()}}else if("number"==typeof r){let s=null,l=Yw(t,n),c=Xl,u=i&Le.Host?n[Ut][Qn]:null;for((-1===l||i&Le.SkipSelf)&&(c=-1===l?pp(t,n):n[l+8],c!==Xl&&nC(i,!1)?(s=n[Y],l=ru(c),n=su(c,n)):l=-1);-1!==l;){const f=n[Y];if(tC(r,l,f.data)){const _=x2(l,n,e,s,i,u);if(_!==tr)return _}c=n[l+8],c!==Xl&&nC(i,n[Y].data[l+8]===u)&&tC(r,l,n)?(s=f,l=ru(c),n=su(c,n)):l=-1}}return o}function x2(t,n,e,i,o,r){const s=n[Y],l=s.data[t+8],f=gp(l,s,e,null==i?Sa(l)&&K_:i!=s&&!!(3&l.type),o&Le.Host&&r===l);return null!==f?Ea(n,s,f,l):tr}function gp(t,n,e,i,o){const r=t.providerIndexes,s=n.data,l=1048575&r,c=t.directiveStart,f=r>>20,w=o?l+f:t.directiveEnd;for(let C=i?l:l+f;C<w;C++){const T=s[C];if(C<c&&e===T||C>=c&&T.type===e)return C}if(o){const C=s[c];if(C&&Mo(C)&&C.type===e)return c}return null}function Ea(t,n,e,i){let o=t[e];const r=n.data;if(function w2(t){return t instanceof ou}(o)){const s=o;s.resolving&&function Uf(t,n){throw n&&n.join(" > "),new F(-200,t)}(function tt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ce(t)}(r[e]));const l=hp(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Un(s.injectImpl):null;Vw(t,i,Le.Default);try{o=t[e]=s.factory(void 0,r,t,i),n.firstCreatePass&&e>=i.directiveStart&&function y2(t,n,e){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=n.type.prototype;if(i){const s=Sw(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}o&&(e.preOrderHooks??=[]).push(0-t,o),r&&((e.preOrderHooks??=[]).push(t,r),(e.preOrderCheckHooks??=[]).push(t,r))}(e,r[e],n)}finally{null!==u&&Un(u),hp(l),s.resolving=!1,Uw()}}return o}function tC(t,n,e){return!!(e[n+(t>>Kw)]&1<<t)}function nC(t,n){return!(t&Le.Self||t&Le.Host&&n)}class Tn{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Xw(this._tNode,this._lView,n,Al(i),e)}}function N2(){return new Tn(ht(),$())}function Et(t){return _o(()=>{const n=t.prototype.constructor,e=n[to]||J_(n),i=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==i;){const r=o[to]||J_(o);if(r&&r!==e)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function J_(t){return St(t)?()=>{const n=J_(K(t));return n&&n()}:Zo(t)}function iC(t){const n=t[Y],e=n.type;return 2===e?n.declTNode:1===e?t[Qn]:null}function lC(t,n=null,e=null,i){const o=cC(t,n,e,i);return o.resolveInjectorInitializers(),o}function cC(t,n=null,e=null,i,o=new Set){const r=[e||Ue,g(t)];return i=i||("object"==typeof t?void 0:Oe(t)),new Pr(r,n||zl(),i||null,o)}let Sn=(()=>{class t{static{this.THROW_IF_NOT_FOUND=ua}static{this.NULL=new _s}static create(e,i){if(Array.isArray(e))return lC({name:""},i,e,"");{const o=e.name??"";return lC({name:o},e.parent,e.providers,o)}}static{this.\u0275prov=W({token:t,providedIn:"any",factory:()=>oe(Or)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function ev(t){return t.ngOriginalError}class nr{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&ev(n);for(;e&&ev(e);)e=ev(e);return e||null}}const uC=new ee("",{providedIn:"root",factory:()=>N(nr).handleError.bind(void 0)});let ir=(()=>{class t{static{this.__NG_ELEMENT_ID__=$2}static{this.__NG_ENV_ID__=e=>e}}return t})();class j2 extends ir{constructor(n){super(),this._lView=n}onDestroy(n){return ap(this._lView,n),()=>function B_(t,n){if(null===t[Cs])return;const e=t[Cs].indexOf(n);-1!==e&&t[Cs].splice(e,1)}(this._lView,n)}}function $2(){return new j2($())}function H2(){return nc(ht(),$())}function nc(t,n){return new ft(li(t,n))}let ft=(()=>{class t{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=H2}}return t})();function fC(t){return t instanceof ft?t.nativeElement:t}function tv(t){return n=>{setTimeout(t,void 0,n)}}const fe=class U2 extends Ge{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,_w()&&(this.destroyRef=N(ir,{optional:!0})??void 0)}emit(n){const e=ke(null);try{super.next(n)}finally{ke(e)}}subscribe(n,e,i){let o=n,r=e||(()=>null),s=i;if(n&&"object"==typeof n){const c=n;o=c.next?.bind(c),r=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(r=tv(r),o&&(o=tv(o)),s&&(s=tv(s)));const l=super.subscribe({next:o,error:r,complete:s});return n instanceof An&&n.add(l),l}};function z2(){return this._results[Symbol.iterator]()}class nv{get changes(){return this._changes??=new fe}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=nv.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=z2)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;const i=function Kn(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Bl(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i],r=n[i];if(e&&(o=e(o),r=e(r)),r!==o)return!1}return!0}(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function _p(t){return!(128&~t.flags)}const iv=new Map;let W2=0;const rv="__ngContext__";function ti(t,n){Jn(n)?(t[rv]=n[Qd],function Z2(t){iv.set(t[Qd],t)}(n)):t[rv]=n}function DC(t){return SC(t[Kd])}function TC(t){return SC(t[To])}function SC(t){for(;null!==t&&!Xn(t);)t=t[To];return t}let sv;function Ts(){if(void 0!==sv)return sv;if(typeof document<"u")return document;throw new F(210,!1)}const bp=new ee("",{providedIn:"root",factory:()=>hR}),hR="ng",PC=new ee(""),Ss=new ee("",{providedIn:"platform",factory:()=>"unknown"}),AC=new ee(""),RC=new ee("",{providedIn:"root",factory:()=>Ts().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let FC=()=>null;function pv(t,n,e=!1){return FC(t,n,e)}const $C=new ee("",{providedIn:"root",factory:()=>!1});let kp,Ep;function rc(t){return function vv(){if(void 0===kp&&(kp=null,We.trustedTypes))try{kp=We.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kp}()?.createHTML(t)||t}function yv(){if(void 0===Ep&&(Ep=null,We.trustedTypes))try{Ep=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ep}function UC(t){return yv()?.createHTML(t)||t}function GC(t){return yv()?.createScriptURL(t)||t}class WC{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ed})`}}function Ms(t){return t instanceof WC?t.changingThisBreaksApplicationSecurity:t}function fu(t,n){const e=function NR(t){return t instanceof WC&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Ed})`)}return e===n}class OR{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(rc(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class PR{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=rc(n),e}}const RR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bv(t){return(t=String(t)).match(RR)?t:"unsafe:"+t}function Lr(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function pu(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const ZC=Lr("area,br,col,hr,img,wbr"),KC=Lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),YC=Lr("rp,rt"),wv=pu(ZC,pu(KC,Lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pu(YC,Lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pu(YC,KC)),Cv=Lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),QC=pu(Cv,Lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),FR=Lr("script,style,template");class LR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0,o=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)o.push(e),e=jR(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=VR(e);if(r){e=r;break}e=o.pop()}return this.buf.join("")}startElement(n){const e=JC(n).toLowerCase();if(!wv.hasOwnProperty(e))return this.sanitizedSomething=!0,!FR.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let o=0;o<i.length;o++){const r=i.item(o),s=r.name,l=s.toLowerCase();if(!QC.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let c=r.value;Cv[l]&&(c=bv(c)),this.buf.push(" ",s,'="',eD(c),'"')}return this.buf.push(">"),!0}endElement(n){const e=JC(n).toLowerCase();wv.hasOwnProperty(e)&&!ZC.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(eD(n))}}function VR(t){const n=t.nextSibling;if(n&&t!==n.previousSibling)throw XC(n);return n}function jR(t){const n=t.firstChild;if(n&&function BR(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,n))throw XC(n);return n}function JC(t){const n=t.nodeName;return"string"==typeof n?n:"FORM"}function XC(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const $R=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,HR=/([^\#-~ |!])/g;function eD(t){return t.replace(/&/g,"&amp;").replace($R,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(HR,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xp;function Dv(t){return"content"in t&&function zR(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sc||{});function Tv(t){const n=gu();return n?UC(n.sanitize(sc.HTML,t)||""):fu(t,"HTML")?UC(Ms(t)):function UR(t,n){let e=null;try{xp=xp||function qC(t){const n=new PR(t);return function AR(){try{return!!(new window.DOMParser).parseFromString(rc(""),"text/html")}catch{return!1}}()?new OR(n):n}(t);let i=n?String(n):"";e=xp.getInertBodyElement(i);let o=5,r=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=r,r=e.innerHTML,e=xp.getInertBodyElement(i)}while(i!==r);return rc((new LR).sanitizeChildren(Dv(e)||e))}finally{if(e){const i=Dv(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(Ts(),Ce(t))}function tD(t){const n=gu();return n?n.sanitize(sc.URL,t)||"":fu(t,"URL")?Ms(t):bv(Ce(t))}function nD(t){const n=gu();if(n)return GC(n.sanitize(sc.RESOURCE_URL,t)||"");if(fu(t,"ResourceURL"))return GC(Ms(t));throw new F(904,!1)}function gu(){const t=$();return t&&t[So].sanitizer}const YR=/^>|^->|<!--|-->|--!>|<!-$/g,QR=/(<|>)/g,JR="\u200b$1\u200b";function Fi(t){return t instanceof Function?t():t}var ks=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ks||{});let Ev;function xv(t,n){return Ev(t,n)}function lc(t,n,e,i,o){if(null!=i){let r,s=!1;Xn(i)?r=i:Jn(i)&&(s=!0,i=i[Lt]);const l=yt(i);0===t&&null!==e?null==o?gD(n,e,l):xa(n,e,l,o||null,!0):1===t&&null!==e?xa(n,e,l,o||null,!0):2===t?function vu(t,n,e){const i=Ap(t,n);i&&function _F(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,l,s):3===t&&n.destroyNode(l),null!=r&&function bF(t,n,e,i,o){const r=e[Yo];r!==yt(e)&&lc(n,t,i,r,o);for(let l=Qt;l<e.length;l++){const c=e[l];Fp(c[Y],c,t,n,i,r)}}(n,t,r,e,o)}}function Nv(t,n){return t.createComment(function oD(t){return t.replace(YR,n=>n.replace(QR,JR))}(n))}function Op(t,n,e){return t.createElement(n,e)}function hD(t,n){n[So].changeDetectionScheduler?.notify(1),Fp(t,n,n[De],2,null,null)}function fD(t,n){const e=t[Yl],i=e.indexOf(n);e.splice(i,1)}function mu(t,n){if(t.length<=Qt)return;const e=Qt+n,i=t[e];if(i){const o=i[Yd];null!==o&&o!==t&&fD(o,i),n>0&&(t[e-1][To]=i[To]);const r=Vl(t,Qt+n);!function dF(t,n){hD(t,n),n[Lt]=null,n[Qn]=null}(i[Y],i);const s=r[Ar];null!==s&&s.detachView(r[Y]),i[Yt]=null,i[To]=null,i[me]&=-129}return i}function Pp(t,n){if(!(256&n[me])){const e=n[De];e.destroyNode&&Fp(t,n,e,3,null,null),function hF(t){let n=t[Kd];if(!n)return Ov(t[Y],t);for(;n;){let e=null;if(Jn(n))e=n[Kd];else{const i=n[Qt];i&&(e=i)}if(!e){for(;n&&!n[To]&&n!==t;)Jn(n)&&Ov(n[Y],n),n=n[Yt];null===n&&(n=t),Jn(n)&&Ov(n[Y],n),e=n&&n[To]}n=e}}(n)}}function Ov(t,n){if(256&n[me])return;const e=ke(null);try{n[me]&=-129,n[me]|=256,n[Ta]&&function yd(t){if(_n(t),rn(t))for(let n=0;n<t.producerNode.length;n++)ea(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(n[Ta]),function mF(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const o=n[e[i]];if(!(o instanceof ou)){const r=e[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){const l=o[r[s]],c=r[s+1];Qo(4,l,c);try{c.call(l)}finally{Qo(5,l,c)}}else{Qo(4,o,r);try{r.call(o)}finally{Qo(5,o,r)}}}}}(t,n),function gF(t,n){const e=t.cleanup,i=n[ql];if(null!==e)for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const s=e[r+3];s>=0?i[s]():i[-s].unsubscribe(),r+=2}else e[r].call(i[e[r+1]]);null!==i&&(n[ql]=null);const o=n[Cs];if(null!==o){n[Cs]=null;for(let r=0;r<o.length;r++)(0,o[r])()}}(t,n),1===n[Y].type&&n[De].destroy();const i=n[Yd];if(null!==i&&Xn(n[Yt])){i!==n[Yt]&&fD(i,n);const o=n[Ar];null!==o&&o.detachView(t)}!function K2(t){iv.delete(t[Qd])}(n)}finally{ke(e)}}function Pv(t,n,e){return function pD(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[Lt];{const{componentOffset:o}=i;if(o>-1){const{encapsulation:r}=t.data[i.directiveStart+o];if(r===Ni.None||r===Ni.Emulated)return null}return li(i,e)}}(t,n.parent,e)}function xa(t,n,e,i,o){t.insertBefore(n,e,i,o)}function gD(t,n,e){t.appendChild(n,e)}function mD(t,n,e,i,o){null!==i?xa(t,n,e,i,o):gD(t,n,e)}function Ap(t,n){return t.parentNode(n)}function _D(t,n,e){return yD(t,n,e)}let Av,yD=function vD(t,n,e){return 40&t.type?li(t,e):null};function Rp(t,n,e,i){const o=Pv(t,i,n),r=n[De],l=_D(i.parent||n[Qn],i,n);if(null!=o)if(Array.isArray(e))for(let c=0;c<e.length;c++)mD(r,o,e[c],l,!1);else mD(r,o,e,l,!1);void 0!==Av&&Av(r,i,n,e,o)}function _u(t,n){if(null!==n){const e=n.type;if(3&e)return li(n,t);if(4&e)return Rv(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return _u(t,i);{const o=t[n.index];return Xn(o)?Rv(-1,o):yt(o)}}if(32&e)return xv(n,t)()||yt(t[n.index]);{const i=wD(t,n);return null!==i?Array.isArray(i)?i[0]:_u(Ma(t[Ut]),i):_u(t,n.next)}}return null}function wD(t,n){return null!==n?t[Ut][Qn].projection[n.projection]:null}function Rv(t,n){const e=Qt+t+1;if(e<n.length){const i=n[e],o=i[Y].firstChild;if(null!==o)return _u(i,o)}return n[Yo]}function Fv(t,n,e,i,o,r,s){for(;null!=e;){const l=i[e.index],c=e.type;if(s&&0===n&&(l&&ti(yt(l),i),e.flags|=2),32&~e.flags)if(8&c)Fv(t,n,e.child,i,o,r,!1),lc(n,t,o,l,r);else if(32&c){const u=xv(e,i);let f;for(;f=u();)lc(n,t,o,f,r);lc(n,t,o,l,r)}else 16&c?DD(t,n,i,e,o,r):lc(n,t,o,l,r);e=s?e.projectionNext:e.next}}function Fp(t,n,e,i,o,r){Fv(e,i,t.firstChild,n,o,r,!1)}function DD(t,n,e,i,o,r){const s=e[Ut],c=s[Qn].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)lc(n,t,o,c[u],r);else{let u=c;const f=s[Yt];_p(i)&&(u.flags|=128),Fv(t,n,u,f,o,r,!0)}}function TD(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function SD(t,n,e){const{mergedAttrs:i,classes:o,styles:r}=e;null!==i&&$l(t,n,i),null!==o&&TD(t,n,o),null!==r&&function CF(t,n,e){t.setAttribute(n,"style",e)}(t,n,r)}const Ne={};function b(t=1){MD(ze(),$(),ei()+t,!1)}function MD(t,n,e,i){if(!i)if(3&~n[me]){const r=t.preOrderHooks;null!==r&&up(n,r,0,e)}else{const r=t.preOrderCheckHooks;null!==r&&dp(n,r,e)}ka(e)}function j(t,n=Le.Default){const e=$();return null===e?oe(t,n):Xw(ht(),e,K(t),n)}function ED(t,n,e,i,o,r){const s=ke(null);try{let l=null;o&Je.SignalBased&&(l=n[i][zo]),null!==l&&void 0!==l.transformFn&&(r=l.transformFn(r)),o&Je.HasDecoratorInputTransform&&(r=t.inputTransforms[i].call(n,r)),null!==t.setInput?t.setInput(n,l,r,e,i):Tw(n,l,i,r)}finally{ke(s)}}function Lp(t,n,e,i,o,r,s,l,c,u,f){const _=n.blueprint.slice();return _[Lt]=o,_[me]=204|i,(null!==u||t&&2048&t[me])&&(_[me]|=2048),Nw(_),_[Yt]=_[Zl]=t,_[Mt]=e,_[So]=s||t&&t[So],_[De]=l||t&&t[De],_[ln]=c||t&&t[ln]||null,_[Qn]=r,_[Qd]=function q2(){return W2++}(),_[Ai]=f,_[bw]=u,_[Ut]=2==n.type?t[Ut]:_,_}function cc(t,n,e,i,o){let r=t.data[n];if(null===r)r=function Lv(t,n,e,i,o){const r=Rw(),s=V_(),c=t.data[n]=function IF(t,n,e,i,o,r){let s=n?n.injectorIndex:-1,l=0;return Jl()&&(l|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?r:r&&r.parent,e,n,i,o);return null===t.firstChild&&(t.firstChild=c),null!==r&&(s?null==r.child&&null!==c.parent&&(r.child=c):null===r.next&&(r.next=c,c.prev=r)),c}(t,n,e,i,o),function d2(){return Te.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=e,r.value=i,r.attrs=o;const s=function nu(){const t=Te.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();r.injectorIndex=null===s?-1:s.injectorIndex}return Xo(r,!0),r}function yu(t,n,e,i){if(0===e)return-1;const o=n.length;for(let r=0;r<e;r++)n.push(i),t.blueprint.push(i),t.data.push(null);return o}function xD(t,n,e,i,o){const r=ei(),s=2&i;try{ka(-1),s&&n.length>Ee&&MD(t,n,Ee,!1),Qo(s?2:0,o),e(i,o)}finally{ka(r),Qo(s?3:1,o)}}function Bv(t,n,e){if(x_(n)){const i=ke(null);try{const r=n.directiveEnd;for(let s=n.directiveStart;s<r;s++){const l=t.data[s];l.contentQueries&&l.contentQueries(1,e[s],s)}}finally{ke(i)}}}function Vv(t,n,e){Aw()&&(function LF(t,n,e,i){const o=e.directiveStart,r=e.directiveEnd;Sa(e)&&function zF(t,n,e){const i=li(n,t),o=ID(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const l=Bp(t,Lp(t,o,null,s,i,n,null,t[So].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=l}(n,e,t.data[o+e.componentOffset]),t.firstCreatePass||fp(e,n),ti(i,n);const s=e.initialInputs;for(let l=o;l<r;l++){const c=t.data[l],u=Ea(n,t,l,e);ti(u,n),null!==s&&GF(0,l-o,u,c,0,s),Mo(c)&&(Ri(e.index,n)[Mt]=Ea(n,t,l,e))}}(t,n,e,li(e,n)),!(64&~e.flags)&&RD(t,n,e))}function jv(t,n,e=li){const i=n.localNames;if(null!==i){let o=n.index+1;for(let r=0;r<i.length;r+=2){const s=i[r+1],l=-1===s?e(n,t):t[s];t[o++]=l}}}function ID(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=$v(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function $v(t,n,e,i,o,r,s,l,c,u,f){const _=Ee+i,w=_+o,C=function TF(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ne);return e}(_,w),T="function"==typeof u?u():u;return C[Y]={type:t,blueprint:C,template:e,queries:null,viewQuery:l,declTNode:n,data:C.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let ND=()=>null;function OD(t,n,e,i,o){for(let r in n){if(!n.hasOwnProperty(r))continue;const s=n[r];if(void 0===s)continue;i??={};let l,c=Je.None;Array.isArray(s)?(l=s[0],c=s[1]):l=s;let u=r;if(null!==o){if(!o.hasOwnProperty(r))continue;u=o[r]}0===t?PD(i,e,u,l,c):PD(i,e,u,l)}return i}function PD(t,n,e,i,o){let r;t.hasOwnProperty(e)?(r=t[e]).push(n,i):r=t[e]=[n,i],void 0!==o&&r.push(o)}function bi(t,n,e,i,o,r,s,l){const c=li(n,e);let f,u=n.inputs;!l&&null!=u&&(f=u[i])?(Wv(t,e,f,i,o),Sa(n)&&function PF(t,n){const e=Ri(n,t);16&e[me]||(e[me]|=64)}(e,n.index)):3&n.type&&(i=function OF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),o=null!=s?s(o,n.value||"",i):o,r.setProperty(c,i,o))}function Hv(t,n,e,i){if(Aw()){const o=null===i?null:{"":-1},r=function VF(t,n){const e=t.directiveRegistry;let i=null,o=null;if(e)for(let r=0;r<e.length;r++){const s=e[r];if(Qf(n,s.selectors,!1))if(i||(i=[]),Mo(s))if(null!==s.findHostDirectiveDefs){const l=[];o=o||new Map,s.findHostDirectiveDefs(s,l,o),i.unshift(...l,s),Uv(t,n,l.length)}else i.unshift(s),Uv(t,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,i,o),i.push(s)}return null===i?null:[i,o]}(t,e);let s,l;null===r?s=l=null:[s,l]=r,null!==s&&AD(t,n,e,s,o,l),o&&function jF(t,n,e){if(n){const i=t.localNames=[];for(let o=0;o<n.length;o+=2){const r=e[n[o+1]];if(null==r)throw new F(-301,!1);i.push(n[o],r)}}}(e,i,o)}e.mergedAttrs=va(e.mergedAttrs,e.attrs)}function AD(t,n,e,i,o,r){for(let u=0;u<i.length;u++)Q_(fp(e,n),t,i[u].type);!function HF(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let u=0;u<i.length;u++){const f=i[u];f.providersResolver&&f.providersResolver(f)}let s=!1,l=!1,c=yu(t,n,i.length,null);for(let u=0;u<i.length;u++){const f=i[u];e.mergedAttrs=va(e.mergedAttrs,f.hostAttrs),UF(t,e,n,c,f),$F(c,f,o),null!==f.contentQueries&&(e.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(e.flags|=64);const _=f.type.prototype;!s&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),s=!0),!l&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),l=!0),c++}!function NF(t,n,e){const o=n.directiveEnd,r=t.data,s=n.attrs,l=[];let c=null,u=null;for(let f=n.directiveStart;f<o;f++){const _=r[f],w=e?e.get(_):null,T=w?w.outputs:null;c=OD(0,_.inputs,f,c,w?w.inputs:null),u=OD(1,_.outputs,f,u,T);const S=null===c||null===s||vs(n)?null:WF(c,f,s);l.push(S)}null!==c&&(c.hasOwnProperty("class")&&(n.flags|=8),c.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=l,n.inputs=c,n.outputs=u}(t,e,r)}function RD(t,n,e){const i=e.directiveStart,o=e.directiveEnd,r=e.index,s=function h2(){return Te.lFrame.currentDirectiveIndex}();try{ka(r);for(let l=i;l<o;l++){const c=t.data[l],u=n[l];$_(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&BF(c,u)}}finally{ka(-1),$_(s)}}function BF(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Uv(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function $F(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Mo(n)&&(e[""]=t)}}function UF(t,n,e,i,o){t.data[i]=o;const r=o.factory||(o.factory=Zo(o.type)),s=new ou(r,Mo(o),j);t.blueprint[i]=s,e[i]=s,function RF(t,n,e,i,o){const r=o.hostBindings;if(r){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~n.index;(function FF(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(e,i,r)}}(t,n,i,yu(t,e,o.hostVars,Ne),o)}function or(t,n,e,i,o,r){const s=li(t,n);!function zv(t,n,e,i,o,r,s){if(null==r)t.removeAttribute(n,o,e);else{const l=null==s?Ce(r):s(r,i||"",o);t.setAttribute(n,o,l,e)}}(n[De],s,r,t.value,e,i,o)}function GF(t,n,e,i,o,r){const s=r[n];if(null!==s)for(let l=0;l<s.length;)ED(i,e,s[l++],s[l++],s[l++],s[l++])}function WF(t,n,e){let i=null,o=0;for(;o<e.length;){const r=e[o];if(0!==r)if(5!==r){if("number"==typeof r)break;if(t.hasOwnProperty(r)){null===i&&(i=[]);const s=t[r];for(let l=0;l<s.length;l+=3)if(s[l]===n){i.push(r,s[l+1],s[l+2],e[o+1]);break}}o+=2}else o+=2;else o+=4}return i}function FD(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function LD(t,n){const e=t.contentQueries;if(null!==e){const i=ke(null);try{for(let o=0;o<e.length;o+=2){const s=e[o+1];if(-1!==s){const l=t.data[s];lp(e[o]),l.contentQueries(2,n[s],s)}}}finally{ke(i)}}}function Bp(t,n){return t[Kd]?t[yw][To]=n:t[Kd]=n,t[yw]=n,n}function Gv(t,n,e){lp(0);const i=ke(null);try{n(t,e)}finally{ke(i)}}function BD(t){return t[ql]||(t[ql]=[])}function VD(t){return t.cleanup||(t.cleanup=[])}function Vp(t,n){const e=t[ln],i=e?e.get(nr,null):null;i&&i.handleError(n)}function Wv(t,n,e,i,o){for(let r=0;r<e.length;){const s=e[r++],l=e[r++],c=e[r++];ED(t.data[s],n[s],i,l,c,o)}}function Br(t,n,e){const i=Xd(n,t);!function uD(t,n,e){t.setValue(n,e)}(t[De],i,e)}function qF(t,n){const e=Ri(n,t),i=e[Y];!function ZF(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const o=e[Lt];null!==o&&null===e[Ai]&&(e[Ai]=pv(o,e[ln])),qv(i,e,e[Mt])}function qv(t,n,e){z_(n);try{const i=t.viewQuery;null!==i&&Gv(1,i,e);const o=t.template;null!==o&&xD(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Ar]?.finishViewCreation(t),t.staticContentQueries&&LD(t,n),t.staticViewQueries&&Gv(2,t.viewQuery,e);const r=t.components;null!==r&&function KF(t,n){for(let e=0;e<n.length;e++)qF(t,n[e])}(n,r)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[me]&=-5,G_()}}function dc(t,n){return!n||null===n.firstChild||_p(t)}function wu(t,n,e,i=!0){const o=n[Y];if(function fF(t,n,e,i){const o=Qt+i,r=e.length;i>0&&(e[o-1][To]=n),i<r-Qt?(n[To]=e[o],ga(e,Qt+i,n)):(e.push(n),n[To]=null),n[Yt]=e;const s=n[Yd];null!==s&&e!==s&&function pF(t,n){const e=t[Yl];n[Ut]!==n[Yt][Yt][Ut]&&(t[me]|=E_.HasTransplantedViews),null===e?t[Yl]=[n]:e.push(n)}(s,n);const l=n[Ar];null!==l&&l.insertView(t),L_(n),n[me]|=128}(o,n,t,e),i){const s=Rv(e,t),l=n[De],c=Ap(l,t[Yo]);null!==c&&function uF(t,n,e,i,o,r){i[Lt]=o,i[Qn]=n,Fp(t,i,e,1,o,r)}(o,t[Qn],l,n,c,s)}const r=n[Ai];null!==r&&null!==r.firstChild&&(r.firstChild=null)}function Cu(t,n,e,i,o=!1){for(;null!==e;){const r=n[e.index];null!==r&&i.push(yt(r)),Xn(r)&&HD(r,i);const s=e.type;if(8&s)Cu(t,n,e.child,i);else if(32&s){const l=xv(e,n);let c;for(;c=l();)i.push(c)}else if(16&s){const l=wD(n,e);if(Array.isArray(l))i.push(...l);else{const c=Ma(n[Ut]);Cu(c[Y],c,l,i,!0)}}e=o?e.projectionNext:e.next}return i}function HD(t,n){for(let e=Qt;e<t.length;e++){const i=t[e],o=i[Y].firstChild;null!==o&&Cu(i[Y],i,o,n)}t[Yo]!==t[Lt]&&n.push(t[Yo])}let UD=[];const XF={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{tu(t.lView)},consumerOnSignalRead(){this.lView[Ta]=this}},zD=100;function jp(t,n=!0,e=0){const i=t[So],o=i.rendererFactory;o.begin?.();try{!function eL(t,n){Kv(t,n);let e=0;for(;F_(t);){if(e===zD)throw new F(103,!1);e++,Kv(t,1)}}(t,e)}catch(s){throw n&&Vp(t,s),s}finally{o.end?.(),i.inlineEffectRunner?.flush()}}function tL(t,n,e,i){const o=n[me];if(!(256&~o))return;n[So].inlineEffectRunner?.flush(),z_(n);let s=null,l=null;(function nL(t){return 2!==t.type})(t)&&(l=function YF(t){return t[Ta]??function QF(t){const n=UD.pop()??Object.create(XF);return n.lView=t,n}(t)}(n),s=function Xs(t){return t&&(t.nextProducerIndex=0),ke(t)}(l));try{Nw(n),function Lw(t){return Te.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&xD(t,n,e,2,i);const c=!(3&~o);if(c){const _=t.preOrderCheckHooks;null!==_&&dp(n,_,null)}else{const _=t.preOrderHooks;null!==_&&up(n,_,0,null),W_(n,0)}if(function iL(t){for(let n=DC(t);null!==n;n=TC(n)){if(!(n[me]&E_.HasTransplantedViews))continue;const e=n[Yl];for(let i=0;i<e.length;i++){e2(e[i])}}}(n),GD(n,0),null!==t.contentQueries&&LD(t,n),c){const _=t.contentCheckHooks;null!==_&&dp(n,_)}else{const _=t.contentHooks;null!==_&&up(n,_,1),W_(n,1)}!function DF(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const o=e[i];if(o<0)ka(~o);else{const r=o,s=e[++i],l=e[++i];u2(s,r),l(2,n[r])}}}finally{ka(-1)}}(t,n);const u=t.components;null!==u&&qD(n,u,0);const f=t.viewQuery;if(null!==f&&Gv(2,f,i),c){const _=t.viewCheckHooks;null!==_&&dp(n,_)}else{const _=t.viewHooks;null!==_&&up(n,_,2),W_(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[op]){for(const _ of n[op])_();n[op]=null}n[me]&=-73}catch(c){throw tu(n),c}finally{null!==l&&(function pl(t,n){if(ke(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(rn(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)ea(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(l,s),function JF(t){t.lView[Ta]!==t&&(t.lView=null,UD.push(t))}(l)),G_()}}function GD(t,n){for(let e=DC(t);null!==e;e=TC(e))for(let i=Qt;i<e.length;i++)WD(e[i],n)}function oL(t,n,e){WD(Ri(n,t),e)}function WD(t,n){R_(t)&&Kv(t,n)}function Kv(t,n){const i=t[Y],o=t[me],r=t[Ta];let s=!!(0===n&&16&o);if(s||=!!(64&o&&0===n),s||=!!(1024&o),s||=!(!r?.dirty||!gl(r)),r&&(r.dirty=!1),t[me]&=-9217,s)tL(i,t,i.template,t[Mt]);else if(8192&o){GD(t,1);const l=i.components;null!==l&&qD(t,l,1)}}function qD(t,n,e){for(let i=0;i<n.length;i++)oL(t,n[i],e)}function Du(t){for(t[So].changeDetectionScheduler?.notify();t;){t[me]|=64;const n=Ma(t);if(I_(t)&&!n)return t;t=n}return null}class Tu{get rootNodes(){const n=this._lView,e=n[Y];return Cu(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mt]}set context(n){this._lView[Mt]=n}get destroyed(){return!(256&~this._lView[me])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Yt];if(Xn(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(mu(n,i),Vl(e,i))}this._attachedToViewContainer=!1}Pp(this._lView[Y],this._lView)}onDestroy(n){ap(this._lView,n)}markForCheck(){Du(this._cdRefInjectingView||this._lView)}detach(){this._lView[me]&=-129}reattach(){L_(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,jp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,hD(this._lView[Y],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=n,L_(this._lView)}}let cn=(()=>{class t{static{this.__NG_ELEMENT_ID__=aL}}return t})();const rL=cn,sL=class extends rL{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const o=function bu(t,n,e,i){const o=ke(null);try{const r=n.tView,c=Lp(t,r,e,4096&t[me]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[Yd]=t[n.index];const f=t[Ar];return null!==f&&(c[Ar]=f.createEmbeddedView(r)),qv(r,c,e),c}finally{ke(o)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new Tu(o)}};function aL(){return $p(ht(),$())}function $p(t,n){return 4&t.type?new sL(n,t,nc(t,n)):null}class Wp{}class NL{}class eT{}class PL{resolveComponentFactory(n){throw function OL(t){const n=Error(`No component factory found for ${Oe(t)}.`);return n.ngComponent=t,n}(n)}}let qp=(()=>{class t{static{this.NULL=new PL}}return t})();class ty{}let Vr=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function AL(){const t=$(),e=Ri(ht().index,t);return(Jn(e)?e:t)[De]}()}}return t})(),RL=(()=>{class t{static{this.\u0275prov=W({token:t,providedIn:"root",factory:()=>null})}}return t})();const ny={},nT=new Set;function rr(t){nT.has(t)||(nT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function iT(...t){}class $e{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fe(!1),this.onMicrotaskEmpty=new fe(!1),this.onStable=new fe(!1),this.onError=new fe(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&e,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function FL(){const t="function"==typeof We.requestAnimationFrame;let n=We[t?"requestAnimationFrame":"setTimeout"],e=We[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function VL(t){const n=()=>{!function BL(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(We,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,oy(t),t.isCheckStableRunning=!0,iy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),oy(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,o,r,s,l)=>{if(function jL(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(l))return e.invokeTask(o,r,s,l);try{return oT(t),e.invokeTask(o,r,s,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||t.shouldCoalesceRunChangeDetection)&&n(),rT(t)}},onInvoke:(e,i,o,r,s,l,c)=>{try{return oT(t),e.invoke(o,r,s,l,c)}finally{t.shouldCoalesceRunChangeDetection&&n(),rT(t)}},onHasTask:(e,i,o,r)=>{e.hasTask(o,r),i===o&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,oy(t),iy(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,o,r)=>(e.handleError(o,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$e.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if($e.isInAngularZone())throw new F(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,o){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,n,LL,iT,iT);try{return r.runTask(s,e,i)}finally{r.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const LL={};function iy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function oy(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function oT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rT(t){t._nesting--,iy(t)}class sT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fe,this.onMicrotaskEmpty=new fe,this.onStable=new fe,this.onError=new fe}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,o){return n.apply(e,i)}}var Ia=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ia||{});const aT={destroy(){}};function sy(t,n){!n&&function qd(t){if(!_w())throw new F(-203,!1)}();const e=n?.injector??N(Sn);if(!function Eo(t){return"browser"===(t??N(Sn)).get(Ss)}(e))return aT;rr("NgAfterNextRender");const i=e.get(xu),o=i.handler??=new cT,r=n?.phase??Ia.MixedReadWrite,s=()=>{o.unregister(c),l()},l=e.get(ir).onDestroy(s),c=oo(e,()=>new lT(r,()=>{s(),t()}));return o.register(c),{destroy:s}}class lT{constructor(n,e){this.phase=n,this.callbackFn=e,this.zone=N($e),this.errorHandler=N(nr,{optional:!0}),N(Wp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class cT{constructor(){this.executingCallbacks=!1,this.buckets={[Ia.EarlyRead]:new Set,[Ia.Write]:new Set,[Ia.MixedReadWrite]:new Set,[Ia.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const e of n)e.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let xu=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Kp(t,n,e){let i=e?t.styles:null,o=e?t.classes:null,r=0;if(null!==n)for(let s=0;s<n.length;s++){const l=n[s];"number"==typeof l?r=l:1==r?o=rs(o,l):2==r&&(i=rs(i,l+": "+n[++s]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=o:t.classesWithoutHost=o}class hT extends qp{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Re(n);return new Ou(e,this.ngModule)}}function fT(t){const n=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e];void 0!==i&&n.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return n}class Yp{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=Al(i);const o=this.injector.get(n,ny,i);return o!==ny||e===ny?o:this.parentInjector.get(n,e,i)}}class Ou extends eT{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=fT(n.inputs);if(null!==e)for(const o of i)e.hasOwnProperty(o.propName)&&(o.transform=e[o.propName]);return i}get outputs(){return fT(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function tp(t){return t.map(ep).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,o){const r=ke(null);try{let s=(o=o||this.ngModule)instanceof wn?o:o?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const l=s?new Yp(n,s):n,c=l.get(ty,null);if(null===c)throw new F(407,!1);const u=l.get(RL,null),w={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l.get(xu,null),changeDetectionScheduler:l.get(Wp,null)},C=c.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=i?function SF(t,n,e,i){const r=i.get($C,!1)||e===Ni.ShadowDom,s=t.selectRootElement(n,r);return function MF(t){ND(t)}(s),s}(C,i,this.componentDef.encapsulation,l):Op(C,T,function GL(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(T));let x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let O=null;null!==S&&(O=pv(S,l,!0));const P=$v(0,null,null,1,0,null,null,null,null,null,null),H=Lp(null,P,null,x,null,null,w,C,l,null,O);let z,ie;z_(H);try{const ae=this.componentDef;let pe,we=null;ae.findHostDirectiveDefs?(pe=[],we=new Map,ae.findHostDirectiveDefs(ae,pe,we),pe.push(ae)):pe=[ae];const mt=function qL(t,n){const e=t[Y],i=Ee;return t[i]=n,cc(e,i,2,"#host",null)}(H,S),Ct=function ZL(t,n,e,i,o,r,s){const l=o[Y];!function KL(t,n,e,i){for(const o of t)n.mergedAttrs=va(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(Kp(n,n.mergedAttrs,!0),null!==e&&SD(i,e,n))}(i,t,n,s);let c=null;null!==n&&(c=pv(n,o[ln]));const u=r.rendererFactory.createRenderer(n,e);let f=16;e.signals?f=4096:e.onPush&&(f=64);const _=Lp(o,ID(e),null,f,o[t.index],t,r,u,null,null,c);return l.firstCreatePass&&Uv(l,t,i.length-1),Bp(o,_),o[t.index]=_}(mt,S,ae,pe,H,w,C);ie=eu(P,Ee),S&&function QL(t,n,e,i){if(i)$l(t,e,["ng-version","17.3.12"]);else{const{attrs:o,classes:r}=function wa(t){const n=[],e=[];let i=1,o=2;for(;i<t.length;){let r=t[i];if("string"==typeof r)2===o?""!==r&&n.push(r,t[++i]):8===o&&e.push(r);else{if(!Pi(o))break;o=r}i++}return{attrs:n,classes:e}}(n.selectors[0]);o&&$l(t,e,o),r&&r.length>0&&TD(t,e,r.join(" "))}}(C,ae,S,i),void 0!==e&&function JL(t,n,e){const i=t.projection=[];for(let o=0;o<n.length;o++){const r=e[o];i.push(null!=r?Array.from(r):null)}}(ie,this.ngContentSelectors,e),z=function YL(t,n,e,i,o,r){const s=ht(),l=o[Y],c=li(s,o);AD(l,o,s,e,null,i);for(let f=0;f<e.length;f++)ti(Ea(o,l,s.directiveStart+f,s),o);RD(l,o,s),c&&ti(c,o);const u=Ea(o,l,s.directiveStart+s.componentOffset,s);if(t[Mt]=o[Mt]=u,null!==r)for(const f of r)f(u,n);return Bv(l,s,o),u}(Ct,ae,pe,we,H,[XL]),qv(P,H,null)}finally{G_()}return new WL(this.componentType,z,nc(ie,H),H,ie)}finally{ke(r)}}}class WL extends NL{constructor(n,e,i,o,r){super(),this.location=i,this._rootLView=o,this._tNode=r,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Tu(o,void 0,!1),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const r=this._rootLView;Wv(r[Y],r,o,n,e),this.previousInputValues.set(n,e),Du(Ri(this._tNode.index,r))}}get injector(){return new Tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function XL(){const t=ht();cp($()[Y],t)}let Li=(()=>{class t{static{this.__NG_ELEMENT_ID__=e3}}return t})();function e3(){return mT(ht(),$())}const t3=Li,pT=class extends t3{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Tn(this._hostTNode,this._hostLView)}get parentInjector(){const n=pp(this._hostTNode,this._hostLView);if(Z_(n)){const e=su(n,this._hostLView),i=ru(n);return new Tn(e[Y].data[i+8],e)}return new Tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=gT(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(n,e,i){let o,r;"number"==typeof i?o=i:null!=i&&(o=i.index,r=i.injector);const l=n.createEmbeddedViewImpl(e||{},r,null);return this.insertImpl(l,o,dc(this._hostTNode,null)),l}createComponent(n,e,i,o,r){const s=n&&!function Zd(t){return"function"==typeof t}(n);let l;if(s)l=e;else{const T=e||{};l=T.index,i=T.injector,o=T.projectableNodes,r=T.environmentInjector||T.ngModuleRef}const c=s?n:new Ou(Re(n)),u=i||this.parentInjector;if(!r&&null==c.ngModule){const S=(s?u:this.parentInjector).get(wn,null);S&&(r=S)}Re(c.componentType??{});const C=c.create(u,o,null,r);return this.insertImpl(C.hostView,l,dc(this._hostTNode,null)),C}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){const o=n._lView;if(function XA(t){return Xn(t[Yt])}(o)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const c=o[Yt],u=new pT(c,c[Qn],c[Yt]);u.detach(u.indexOf(n))}}const r=this._adjustIndex(e),s=this._lContainer;return wu(s,o,r,i),n.attachToViewContainerRef(),ga(cy(s),r,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=gT(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=mu(this._lContainer,e);i&&(Vl(cy(this._lContainer),e),Pp(i[Y],i))}detach(n){const e=this._adjustIndex(n,-1),i=mu(this._lContainer,e);return i&&null!=Vl(cy(this._lContainer),e)?new Tu(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function gT(t){return t[8]}function cy(t){return t[8]||(t[8]=[])}function mT(t,n){let e;const i=n[t.index];return Xn(i)?e=i:(e=FD(i,n,null,t),n[t.index]=e,Bp(n,e)),_T(e,n,t,i),new pT(e,t,n)}let _T=function yT(t,n,e,i){if(t[Yo])return;let o;o=8&e.type?yt(i):function n3(t,n){const e=t[De],i=e.createComment(""),o=li(n,t);return xa(e,Ap(e,o),i,function vF(t,n){return t.nextSibling(n)}(e,o),!1),i}(n,e),t[Yo]=o},dy=()=>!1;class uy{constructor(n){this.queryList=n,this.matches=null}clone(){return new uy(this.queryList)}setDirty(){this.queryList.setDirty()}}class hy{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let r=0;r<i;r++){const s=e.getByIndex(r);o.push(this.queries[s.indexInDeclarationView].clone())}return new hy(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==_y(n,e).matches&&this.queries[e].setDirty()}}class bT{constructor(n,e,i=null){this.flags=e,this.read=i,this.predicate="string"==typeof n?function d3(t){return t.split(",").map(n=>n.trim())}(n):n}}class fy{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const o=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(n,o);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new fy(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class py{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new py(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const r=i[o];this.matchTNodeWithReadOption(n,e,s3(e,r)),this.matchTNodeWithReadOption(n,e,gp(e,n,r,!1,!1))}else i===cn?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,gp(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===ft||o===Li||o===cn&&4&e.type)this.addMatch(e.index,-2);else{const r=gp(e,n,o,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function s3(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function l3(t,n,e,i){return-1===e?function a3(t,n){return 11&t.type?nc(t,n):4&t.type?$p(t,n):null}(n,t):-2===e?function c3(t,n,e){return e===ft?nc(n,t):e===cn?$p(n,t):e===Li?mT(n,t):void 0}(t,n,i):Ea(t,t[Y],e,n)}function wT(t,n,e,i){const o=n[Ar].queries[i];if(null===o.matches){const r=t.data,s=e.matches,l=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];l.push(u<0?null:l3(n,r[u],s[c+1],e.metadata.read))}o.matches=l}return o.matches}function gy(t,n,e,i){const o=t.queries.getByIndex(e),r=o.matches;if(null!==r){const s=wT(t,n,o,e);for(let l=0;l<r.length;l+=2){const c=r[l];if(c>0)i.push(s[l/2]);else{const u=r[l+1],f=n[-c];for(let _=Qt;_<f.length;_++){const w=f[_];w[Yd]===w[Yt]&&gy(w[Y],w,u,i)}if(null!==f[Yl]){const _=f[Yl];for(let w=0;w<_.length;w++){const C=_[w];gy(C[Y],C,u,i)}}}}}return i}function CT(t,n,e){const i=new nv(!(4&~e));return function xF(t,n,e,i){const o=BD(n);o.push(e),t.firstCreatePass&&VD(t).push(i,o.length-1)}(t,n,i,i.destroy),(n[Ar]??=new hy).queries.push(new uy(i))-1}function ST(t,n,e){null===t.queries&&(t.queries=new fy),t.queries.track(new py(n,e))}function _y(t,n){return t.queries.getByIndex(n)}function MT(t,n){const e=t[Y],i=_y(e,n);return i.crossesNgTemplate?gy(e,t,n,[]):wT(e,t,i,n)}function xT(t){return function kT(t){return"function"==typeof t&&void 0!==t[zo]}(t)&&"function"==typeof t.set}function ot(t){let n=function jT(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let o;if(Mo(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new F(903,!1);o=n.\u0275dir}if(o){if(e){i.push(o);const s=t;s.inputs=Jp(t.inputs),s.inputTransforms=Jp(t.inputTransforms),s.declaredInputs=Jp(t.declaredInputs),s.outputs=Jp(t.outputs);const l=o.hostBindings;l&&M3(t,l);const c=o.viewQuery,u=o.contentQueries;if(c&&T3(t,c),u&&S3(t,u),C3(t,o),et(t.outputs,o.outputs),Mo(o)&&o.data.animation){const f=t.data;f.animation=(f.animation||[]).concat(o.data.animation)}}const r=o.features;if(r)for(let s=0;s<r.length;s++){const l=r[s];l&&l.ngInherit&&l(t),l===ot&&(e=!1)}}n=Object.getPrototypeOf(n)}!function D3(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const o=t[i];o.hostVars=n+=o.hostVars,o.hostAttrs=va(o.hostAttrs,e=va(e,o.hostAttrs))}}(i)}function C3(t,n){for(const e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;const i=n.inputs[e];if(void 0!==i&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e],null!==n.inputTransforms)){const o=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(o))continue;t.inputTransforms??={},t.inputTransforms[o]=n.inputTransforms[o]}}}function Jp(t){return t===ai?{}:t===Ue?[]:t}function T3(t,n){const e=t.viewQuery;t.viewQuery=e?(i,o)=>{n(i,o),e(i,o)}:n}function S3(t,n){const e=t.contentQueries;t.contentQueries=e?(i,o,r)=>{n(i,o,r),e(i,o,r)}:n}function M3(t,n){const e=t.hostBindings;t.hostBindings=e?(i,o)=>{n(i,o),e(i,o)}:n}function zT(t){const n=t.inputConfig,e={};for(const i in n)if(n.hasOwnProperty(i)){const o=n[i];Array.isArray(o)&&o[3]&&(e[i]=o[3])}t.inputTransforms=e}class Na{}class GT{}class by extends Na{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hT(this);const o=Rn(n);this._bootstrapComponents=Fi(o.bootstrap),this._r3Injector=cC(n,e,[{provide:Na,useValue:this},{provide:qp,useValue:this.componentFactoryResolver},...i],Oe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class wy extends GT{constructor(n){super(),this.moduleType=n}create(n){return new by(this.moduleType,n,[])}}class WT extends Na{constructor(n){super(),this.componentFactoryResolver=new hT(this),this.instance=null;const e=new Pr([...n.providers,{provide:Na,useValue:this},{provide:qp,useValue:this.componentFactoryResolver}],n.parent||zl(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Xp(t,n,e=null){return new WT({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let Is=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new vt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function tg(t){return!!function Cy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function sr(t,n,e){return t[n]=e}function Jt(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Oa(t,n,e,i){const o=Jt(t,n,e);return Jt(t,n+1,i)||o}function R(t,n,e,i,o,r,s,l){const c=$(),u=ze(),f=t+Ee,_=u.firstCreatePass?function B3(t,n,e,i,o,r,s,l,c){const u=n.consts,f=cc(n,t,4,s||null,Jo(u,l));Hv(n,e,f,Jo(u,c)),cp(n,f);const _=f.tView=$v(2,f,i,o,r,n.directiveRegistry,n.pipeRegistry,null,n.schemas,u,null);return null!==n.queries&&(n.queries.template(n,f),_.queries=n.queries.embeddedTView(f)),f}(f,u,c,n,e,i,o,r,s):u.data[f];Xo(_,!1);const w=qT(u,c,_,t);iu()&&Rp(u,c,w,_),ti(w,c);const C=FD(w,c,w,_);return c[f]=C,Bp(c,C),function vT(t,n,e){return dy(t,n,e)}(C,_,c),sp(_)&&Vv(u,c,_),null!=s&&jv(c,_,l),R}let qT=function ZT(t,n,e,i){return er(!0),n[De].createComment("")};function bt(t,n,e,i){const o=$();return Jt(o,ko(),n)&&(ze(),or(kt(),o,t,n,e,i)),bt}function bc(t,n,e,i){return Jt(t,ko(),e)?n+Ce(e)+i:Ne}function wc(t,n,e,i,o,r){const l=Oa(t,function Rr(){return Te.lFrame.bindingIndex}(),e,o);return Fr(2),l?n+Ce(e)+i+Ce(o)+r:Ne}function lg(t,n){return t<<17|n<<2}function Os(t){return t>>17&32767}function Oy(t){return 2|t}function Aa(t){return(131068&t)>>2}function Py(t,n){return-131069&t|n<<2}function Ay(t){return 1|t}function SS(t,n,e,i){const o=t[e+1],r=null===n;let s=i?Os(o):Aa(o),l=!1;for(;0!==s&&(!1===l||r);){const u=t[s+1];T5(t[s],n)&&(l=!0,t[s+1]=i?Ay(u):Oy(u)),s=i?Os(u):Aa(u)}l&&(t[e+1]=i?Oy(o):Ay(o))}function T5(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Co(t,n)>=0}const Mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MS(t){return t.substring(Mn.key,Mn.keyEnd)}function kS(t,n){const e=Mn.textEnd;return e===n?-1:(n=Mn.keyEnd=function E5(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Mn.key=n,e),Ec(t,n,e))}function Ec(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function M(t,n,e){const i=$();return Jt(i,ko(),n)&&bi(ze(),kt(),i,t,n,i[De],e,!1),M}function Ry(t,n,e,i,o){const s=o?"class":"style";Wv(t,e,n.inputs[s],s,i)}function jr(t,n,e){return xo(t,n,e,!1),jr}function Z(t,n){return xo(t,n,null,!0),Z}function Ra(t){Io(L5,lr,t,!0)}function lr(t,n){for(let e=function M5(t){return function xS(t){Mn.key=0,Mn.keyEnd=0,Mn.value=0,Mn.valueEnd=0,Mn.textEnd=t.length}(t),kS(t,Ec(t,0,Mn.textEnd))}(n);e>=0;e=kS(n,e))si(t,MS(n),!0)}function xo(t,n,e,i){const o=$(),r=ze(),s=Fr(2);r.firstUpdatePass&&PS(r,t,s,i),n!==Ne&&Jt(o,s,n)&&RS(r,r.data[ei()],o,o[De],t,o[s+1]=function V5(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Oe(Ms(t)))),t}(n,e),i,s)}function Io(t,n,e,i){const o=ze(),r=Fr(2);o.firstUpdatePass&&PS(o,null,r,i);const s=$();if(e!==Ne&&Jt(s,r,e)){const l=o.data[ei()];if(LS(l,i)&&!OS(o,r)){let c=i?l.classesWithoutHost:l.stylesWithoutHost;null!==c&&(e=rs(c,e||"")),Ry(o,l,s,e,i)}else!function B5(t,n,e,i,o,r,s,l){o===Ne&&(o=Ue);let c=0,u=0,f=0<o.length?o[0]:null,_=0<r.length?r[0]:null;for(;null!==f||null!==_;){const w=c<o.length?o[c+1]:void 0,C=u<r.length?r[u+1]:void 0;let S,T=null;f===_?(c+=2,u+=2,w!==C&&(T=_,S=C)):null===_||null!==f&&f<_?(c+=2,T=f):(u+=2,T=_,S=C),null!==T&&RS(t,n,e,i,T,S,s,l),f=c<o.length?o[c]:null,_=u<r.length?r[u]:null}}(o,l,s,s[De],s[r+1],s[r+1]=function F5(t,n,e){if(null==e||""===e)return Ue;const i=[],o=Ms(e);if(Array.isArray(o))for(let r=0;r<o.length;r++)t(i,o[r],!0);else if("object"==typeof o)for(const r in o)o.hasOwnProperty(r)&&t(i,r,o[r]);else"string"==typeof o&&n(i,o);return i}(t,n,e),i,r)}}function OS(t,n){return n>=t.expandoStartIndex}function PS(t,n,e,i){const o=t.data;if(null===o[e+1]){const r=o[ei()],s=OS(t,e);LS(r,i)&&null===n&&!s&&(n=!1),n=function O5(t,n,e,i){const o=function H_(t){const n=Te.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let r=i?n.residualClasses:n.residualStyles;if(null===o)0===(i?n.classBindings:n.styleBindings)&&(e=Vu(e=Fy(null,t,n,e,i),n.attrs,i),r=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==o)if(e=Fy(o,t,n,e,i),null===r){let c=function P5(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Aa(i))return t[Os(i)]}(t,n,i);void 0!==c&&Array.isArray(c)&&(c=Fy(null,t,n,c[1],i),c=Vu(c,n.attrs,i),function A5(t,n,e,i){t[Os(e?n.classBindings:n.styleBindings)]=i}(t,n,i,c))}else r=function R5(t,n,e){let i;const o=n.directiveEnd;for(let r=1+n.directiveStylingLast;r<o;r++)i=Vu(i,t[r].hostAttrs,e);return Vu(i,n.attrs,e)}(t,n,i)}return void 0!==r&&(i?n.residualClasses=r:n.residualStyles=r),e}(o,r,n,i),function C5(t,n,e,i,o,r){let s=r?n.classBindings:n.styleBindings,l=Os(s),c=Aa(s);t[i]=e;let f,u=!1;if(Array.isArray(e)?(f=e[1],(null===f||Co(e,f)>0)&&(u=!0)):f=e,o)if(0!==c){const w=Os(t[l+1]);t[i+1]=lg(w,l),0!==w&&(t[w+1]=Py(t[w+1],i)),t[l+1]=function b5(t,n){return 131071&t|n<<17}(t[l+1],i)}else t[i+1]=lg(l,0),0!==l&&(t[l+1]=Py(t[l+1],i)),l=i;else t[i+1]=lg(c,0),0===l?l=i:t[c+1]=Py(t[c+1],i),c=i;u&&(t[i+1]=Oy(t[i+1])),SS(t,f,i,!0),SS(t,f,i,!1),function D5(t,n,e,i,o){const r=o?t.residualClasses:t.residualStyles;null!=r&&"string"==typeof n&&Co(r,n)>=0&&(e[i+1]=Ay(e[i+1]))}(n,f,t,i,r),s=lg(l,c),r?n.classBindings=s:n.styleBindings=s}(o,r,n,e,s,i)}}function Fy(t,n,e,i,o){let r=null;const s=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<s&&(r=n[l],i=Vu(i,r.hostAttrs,o),r!==t);)l++;return null!==t&&(e.directiveStylingLast=l),i}function Vu(t,n,e){const i=e?1:2;let o=-1;if(null!==n)for(let r=0;r<n.length;r++){const s=n[r];"number"==typeof s?o=s:o===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),si(t,s,!!e||n[++r]))}return void 0===t?null:t}function L5(t,n,e){const i=String(n);""!==i&&!i.includes(" ")&&si(t,i,e)}function RS(t,n,e,i,o,r,s,l){if(!(3&n.type))return;const c=t.data,u=c[l+1],f=function w5(t){return!(1&~t)}(u)?FS(c,n,e,o,Aa(u),s):void 0;cg(f)||(cg(r)||function y5(t){return!(2&~t)}(u)&&(r=FS(c,null,e,o,l,s)),function wF(t,n,e,i,o){if(n)o?t.addClass(e,i):t.removeClass(e,i);else{let r=-1===i.indexOf("-")?void 0:ks.DashCase;null==o?t.removeStyle(e,i,r):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=ks.Important),t.setStyle(e,i,o,r))}}(i,s,Xd(ei(),e),o,r))}function FS(t,n,e,i,o,r){const s=null===n;let l;for(;o>0;){const c=t[o],u=Array.isArray(c),f=u?c[1]:c,_=null===f;let w=e[o+1];w===Ne&&(w=_?Ue:void 0);let C=_?Ii(w,i):f===i?w:void 0;if(u&&!cg(C)&&(C=Ii(c,i)),cg(C)&&(l=C,s))return l;const T=t[o+1];o=s?Os(T):Aa(T)}if(null!==n){let c=r?n.residualClasses:n.residualStyles;null!=c&&(l=Ii(c,i))}return l}function cg(t){return void 0!==t}function LS(t,n){return!!(t.flags&(n?8:16))}function m(t,n,e,i){const o=$(),r=ze(),s=Ee+t,l=o[De],c=r.firstCreatePass?function i4(t,n,e,i,o,r){const s=n.consts,c=cc(n,t,2,i,Jo(s,o));return Hv(n,e,c,Jo(s,r)),null!==c.attrs&&Kp(c,c.attrs,!1),null!==c.mergedAttrs&&Kp(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(s,r,o,n,e,i):r.data[s],u=HS(r,o,c,l,n,t);o[s]=u;const f=sp(c);return Xo(c,!0),SD(l,u,c),!function Ru(t){return!(32&~t.flags)}(c)&&iu()&&Rp(r,o,u,c),0===function t2(){return Te.lFrame.elementDepthCount}()&&ti(u,o),function n2(){Te.lFrame.elementDepthCount++}(),f&&(Vv(r,o,c),Bv(r,c,o)),null!==i&&jv(o,c),m}function p(){let t=ht();V_()?j_():(t=t.parent,Xo(t,!1));const n=t;(function o2(t){return Te.skipHydrationRootTNode===t})(n)&&function l2(){Te.skipHydrationRootTNode=null}(),function i2(){Te.lFrame.elementDepthCount--}();const e=ze();return e.firstCreatePass&&(cp(e,t),x_(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function D2(t){return!!(8&t.flags)}(n)&&Ry(e,n,$(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function T2(t){return!!(16&t.flags)}(n)&&Ry(e,n,$(),n.stylesWithoutHost,!1),p}function k(t,n,e,i){return m(t,n,e,i),p(),k}let HS=(t,n,e,i,o,r)=>(er(!0),Op(i,o,function zw(){return Te.lFrame.currentNamespace}()));function xc(t,n,e){const i=$(),o=ze(),r=t+Ee,s=o.firstCreatePass?function s4(t,n,e,i,o){const r=n.consts,s=Jo(r,i),l=cc(n,t,8,"ng-container",s);return null!==s&&Kp(l,s,!0),Hv(n,e,l,Jo(r,o)),null!==n.queries&&n.queries.elementStart(n,l),l}(r,o,i,n,e):o.data[r];Xo(s,!0);const l=zS(o,i,s,t);return i[r]=l,iu()&&Rp(o,i,l,s),ti(l,i),sp(s)&&(Vv(o,i,s),Bv(o,s,i)),null!=e&&jv(i,s),xc}function Ic(){let t=ht();const n=ze();return V_()?j_():(t=t.parent,Xo(t,!1)),n.firstCreatePass&&(cp(n,t),x_(t)&&n.queries.elementEnd(t)),Ic}let zS=(t,n,e,i)=>(er(!0),Nv(n[De],""));function ve(){return $()}const Fa=void 0;var d4=["en",[["a","p"],["AM","PM"],Fa],[["AM","PM"],Fa,Fa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fa,"{1} 'at' {0}",Fa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function c4(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Nc={};function di(t){const n=function u4(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=qS(n);if(e)return e;const i=n.split("-")[0];if(e=qS(i),e)return e;if("en"===i)return d4;throw new F(701,!1)}function qS(t){return t in Nc||(Nc[t]=We.ng&&We.ng.common&&We.ng.common.locales&&We.ng.common.locales[t]),Nc[t]}var xt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(xt||{});const Oc="en-US";let ZS=Oc;function B(t,n,e,i){const o=$(),r=ze(),s=ht();return Uy(r,o,o[De],s,t,n,i),B}function Uy(t,n,e,i,o,r,s){const l=sp(i),u=t.firstCreatePass&&VD(t),f=n[Mt],_=BD(n);let w=!0;if(3&i.type||s){const S=li(i,n),x=s?s(S):S,O=_.length,P=s?z=>s(yt(z[i.index])):i.index;let H=null;if(!s&&l&&(H=function sB(t,n,e,i){const o=t.cleanup;if(null!=o)for(let r=0;r<o.length-1;r+=2){const s=o[r];if(s===e&&o[r+1]===i){const l=n[ql],c=o[r+2];return l.length>c?l[c]:null}"string"==typeof s&&(r+=2)}return null}(t,n,o,i.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=r,H.__ngLastListenerFn__=r,w=!1;else{r=CM(i,n,f,r,!1);const z=e.listen(x,o,r);_.push(r,z),u&&u.push(o,P,O,O+1)}}else r=CM(i,n,f,r,!1);const C=i.outputs;let T;if(w&&null!==C&&(T=C[o])){const S=T.length;if(S)for(let x=0;x<S;x+=2){const ie=n[T[x]][T[x+1]].subscribe(r),ae=_.length;_.push(r,ie),u&&u.push(o,i.index,ae,-(ae+1))}}}function wM(t,n,e,i){const o=ke(null);try{return Qo(6,n,e),!1!==e(i)}catch(r){return Vp(t,r),!1}finally{Qo(7,n,e),ke(o)}}function CM(t,n,e,i,o){return function r(s){if(s===Function)return i;Du(t.componentOffset>-1?Ri(t.index,n):n);let c=wM(n,e,i,s),u=r.__ngNextListenerFn__;for(;u;)c=wM(n,e,u,s)&&c,u=u.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function I(t=1){return function p2(t){return(Te.lFrame.contextLView=function Ow(t,n){for(;t>0;)n=n[Zl],t--;return n}(t,Te.lFrame.contextLView))[Mt]}(t)}function aB(t,n){let e=null;const i=function ys(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let o=0;o<n.length;o++){const r=n[o];if("*"!==r){if(null===i?Qf(t,r,!0):D_(i,r))return o}else e=o}return e}function kn(t,n,e,i){!function TT(t,n,e,i){const o=ze();if(o.firstCreatePass){const r=ht();ST(o,new bT(n,e,i),r.index),function u3(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),!(2&~e)&&(o.staticContentQueries=!0)}return CT(o,$(),e)}(t,n,e,i)}function La(t,n,e){!function DT(t,n,e){const i=ze();return i.firstCreatePass&&(ST(i,new bT(t,n,e),-1),!(2&~n)&&(i.staticViewQueries=!0)),CT(i,$(),n)}(t,n,e)}function Pt(t){const n=$(),e=ze(),i=U_();lp(i+1);const o=_y(e,i);if(t.dirty&&function JA(t){return!(4&~t[me])}(n)===!(2&~o.metadata.flags)){if(null===o.matches)t.reset([]);else{const r=MT(n,i);t.reset(r,fC),t.notifyOnChanges()}return!0}return!1}function At(){return function my(t,n){return t[Ar].queries[n].queryList}($(),U_())}function v(t,n=""){const e=$(),i=ze(),o=t+Ee,r=i.firstCreatePass?cc(i,o,1,n,null):i.data[o],s=UM(i,e,r,n,t);e[o]=s,iu()&&Rp(i,e,s,r),Xo(r,!1)}let UM=(t,n,e,i,o)=>(er(!0),function Iv(t,n){return t.createText(n)}(n[De],i));function ne(t){return q("",t,""),ne}function q(t,n,e){const i=$(),o=bc(i,t,n,e);return o!==Ne&&Br(i,ei(),o),q}function Ps(t,n,e,i,o){const r=$(),s=wc(r,t,n,e,i,o);return s!==Ne&&Br(r,ei(),s),Ps}function Ci(t,n,e){xT(n)&&(n=n());const i=$();return Jt(i,ko(),n)&&bi(ze(),kt(),i,t,n,i[De],e,!1),Ci}function Vi(t,n){const e=xT(t);return e&&t.set(n),e}function Di(t,n){const e=$(),i=ze(),o=ht();return Uy(i,e,e[De],o,t,n),Di}function Gy(t,n,e,i,o){if(t=K(t),Array.isArray(t))for(let r=0;r<t.length;r++)Gy(t[r],n,e,i,o);else{const r=ze(),s=$(),l=ht();let c=Ht(t)?t:K(t.provide);const u=Da(t),f=1048575&l.providerIndexes,_=l.directiveStart,w=l.providerIndexes>>20;if(Ht(t)||!t.multi){const C=new ou(u,o,j),T=qy(c,n,o?f:f+w,_);-1===T?(Q_(fp(l,s),r,c),Wy(r,t,n.length),n.push(c),l.directiveStart++,l.directiveEnd++,o&&(l.providerIndexes+=1048576),e.push(C),s.push(C)):(e[T]=C,s[T]=C)}else{const C=qy(c,n,f+w,_),T=qy(c,n,f,f+w),x=T>=0&&e[T];if(o&&!x||!o&&!(C>=0&&e[C])){Q_(fp(l,s),r,c);const O=function MB(t,n,e,i,o){const r=new ou(t,e,j);return r.multi=[],r.index=n,r.componentProviders=0,QM(r,o,i&&!e),r}(o?SB:TB,e.length,o,i,u);!o&&x&&(e[T].providerFactory=O),Wy(r,t,n.length,0),n.push(c),l.directiveStart++,l.directiveEnd++,o&&(l.providerIndexes+=1048576),e.push(O),s.push(O)}else Wy(r,t,C>-1?C:T,QM(e[o?T:C],u,!o&&i));!o&&i&&x&&e[T].componentProviders++}}}function Wy(t,n,e,i){const o=Ht(n),r=function an(t){return!!t.useClass}(n);if(o||r){const c=(r?K(n.useClass):n).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const f=u.indexOf(e);-1===f?u.push(e,[i,c]):u[f+1].push(i,c)}else u.push(e,c)}}}function QM(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function qy(t,n,e,i){for(let o=e;o<i;o++)if(n[o]===t)return o;return-1}function TB(t,n,e,i){return Zy(this.multi,[])}function SB(t,n,e,i){const o=this.multi;let r;if(this.providerFactory){const s=this.providerFactory.componentProviders,l=Ea(e,e[Y],this.providerFactory.index,i);r=l.slice(0,s),Zy(o,r);for(let c=s;c<l.length;c++)r.push(l[c])}else r=[],Zy(o,r);return r}function Zy(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function pt(t,n=[]){return e=>{e.providersResolver=(i,o)=>function DB(t,n,e){const i=ze();if(i.firstCreatePass){const o=Mo(t);Gy(e,i.data,i.blueprint,o,!0),Gy(n,i.data,i.blueprint,o,!1)}}(i,o?o(t):t,n)}}let kB=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=y(0,e.type),o=i.length>0?Xp([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(oe(wn))})}}return t})();function No(t){rr("NgStandalone"),t.getStandaloneInjector=n=>n.get(kB).getOrCreateStandaloneInjector(t)}function qu(t,n,e){const i=ci()+t,o=$();return o[i]===Ne?sr(o,i,e?n.call(e):n()):function Au(t,n){return t[n]}(o,i)}function As(t,n,e,i){return XM($(),ci(),t,n,e,i)}function Zu(t,n){const e=t[n];return e===Ne?void 0:e}function XM(t,n,e,i,o,r){const s=n+e;return Jt(t,s,o)?sr(t,s+1,r?i.call(r,o):i(o)):Zu(t,s+1)}function Ba(t,n){const e=ze();let i;const o=t+Ee;e.firstCreatePass?(i=function FB(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[o]=i,i.onDestroy&&(e.destroyHooks??=[]).push(o,i.onDestroy)):i=e.data[o];const r=i.factory||(i.factory=Zo(i.type)),l=Un(j);try{const c=hp(!1),u=r();return hp(c),function uB(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,$(),o,u),u}finally{Un(l)}}function Yy(t,n,e){const i=t+Ee,o=$(),r=Ql(o,i);return Yu(o,i)?XM(o,ci(),n,r.transform,e,r):r.transform(e)}function Ku(t,n,e,i){const o=t+Ee,r=$(),s=Ql(r,o);return Yu(r,o)?function ek(t,n,e,i,o,r,s){const l=n+e;return Oa(t,l,o,r)?sr(t,l+2,s?i.call(s,o,r):i(o,r)):Zu(t,l+2)}(r,ci(),n,s.transform,e,i,s):s.transform(e,i)}function Yu(t,n){return t[Y].data[n].pure}let yk=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Tk=new ee(""),vg=new ee("");let ob,nb=(()=>{class t{constructor(e,i,o){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ob||(function OV(t){ob=t}(o),o.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,o){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==r),e()},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:o})}whenStable(e,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,o){return[]}static{this.\u0275fac=function(i){return new(i||t)(oe($e),oe(ib),oe(vg))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})(),ib=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return ob?.findTestabilityInTree(this,e,i)??null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function eh(t){return!!t&&"function"==typeof t.then}function Sk(t){return!!t&&"function"==typeof t.subscribe}const rb=new ee("");let sb=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=N(rb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const o of this.appInits){const r=o();if(eh(r))e.push(r);else if(Sk(r)){const s=new Promise((l,c)=>{r.subscribe({complete:l,error:c})});e.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(o=>{this.reject(o)}),0===e.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const ab=new ee("");function Ek(t,n){return Array.isArray(n)?n.reduce(Ek,t):{...t,...n}}let Hr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(uC),this.afterRenderEffectManager=N(xu),this.externalTestViews=new Set,this.beforeRender=new Ge,this.afterTick=new Ge,this.componentTypes=[],this.components=[],this.isStable=N(Is).hasPendingTasks.pipe(le(e=>!e)),this._injector=N(wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const o=e instanceof eT;if(!this._injector.get(sb).done)throw!o&&function Do(t){const n=Re(t)||Wt(t)||sn(t);return null!==n&&n.standalone}(e),new F(405,!1);let s;s=o?e:this._injector.get(qp).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const l=function PV(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Na),u=s.create(Sn.NULL,[],i||s.selector,l),f=u.location.nativeElement,_=u.injector.get(Tk,null);return _?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),yg(this.components,u),_?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new F(101,!1);const i=ke(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,ke(i)}}detectChangesInAttachedViews(e){let i=0;const o=this.afterRenderEffectManager;for(;;){if(i===zD)throw new F(103,!1);if(e){const r=0===i;this.beforeRender.next(r);for(let{_lView:s,notifyErrorHandler:l}of this._views)RV(s,r,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>lb(r))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>lb(r))))break}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;yg(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(ab,[]);[...this._bootstrapListeners,...i].forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>yg(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new F(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function yg(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function RV(t,n,e){!n&&!lb(t)||function FV(t,n,e){let i;e?(i=0,t[me]|=1024):i=64&t[me]?0:1,jp(t,n,i)}(t,e,n)}function lb(t){return F_(t)}class LV{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let xk=(()=>{class t{compileModuleSync(e){return new wy(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),r=Fi(Rn(e).declarations).reduce((s,l)=>{const c=Re(l);return c&&s.push(new Ou(c)),s},[]);return new LV(i,r)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),jV=(()=>{class t{constructor(){this.zone=N($e),this.applicationRef=N(Hr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $V(){const t=N($e),n=N(nr);return e=>t.runOutsideAngular(()=>n.handleError(e))}let UV=(()=>{class t{constructor(){this.subscription=new An,this.initialized=!1,this.zone=N($e),this.pendingTasks=N(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const fr=new ee("",{providedIn:"root",factory:()=>N(fr,Le.Optional|Le.SkipSelf)||function zV(){return typeof $localize<"u"&&$localize.locale||Oc}()}),cb=new ee("");let Pk=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const o=function $L(t="zone.js",n){return"noop"===t?new sT:"zone.js"===t?new $e(n):t}(i?.ngZone,function Ok(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{const r=function O3(t,n,e){return new by(t,n,e)}(e.moduleType,this.injector,function Nk(t){return[{provide:$e,useFactory:t},{provide:no,multi:!0,useFactory:()=>{const n=N(jV,{optional:!0});return()=>n.initialize()}},{provide:no,multi:!0,useFactory:()=>{const n=N(UV);return()=>{n.initialize()}}},{provide:uC,useFactory:$V}]}(()=>o)),s=r.injector.get(nr,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:c=>{s.handleError(c)}});r.onDestroy(()=>{yg(this._modules,r),l.unsubscribe()})}),function kk(t,n,e){try{const i=e();return eh(i)?i.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(s,o,()=>{const l=r.injector.get(sb);return l.runInitializers(),l.donePromise.then(()=>(function KS(t){"string"==typeof t&&(ZS=t.toLowerCase().replace(/_/g,"-"))}(r.injector.get(fr,Oc)||Oc),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,i=[]){const o=Ek({},i);return function VV(t,n,e){const i=new wy(e);return Promise.resolve(i)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,o))}_moduleDoBootstrap(e){const i=e.injector.get(Hr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new F(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(cb,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||t)(oe(Sn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Rs=null;const Ak=new ee("");function Rk(t,n,e=[]){const i=`Platform: ${n}`,o=new ee(i);return(r=[])=>{let s=db();if(!s||s.injector.get(Ak,!1)){const l=[...e,...r,{provide:o,useValue:!0}];t?t(l):function qV(t){if(Rs&&!Rs.get(Ak,!1))throw new F(400,!1);(function Mk(){!function Zn(t){Me=t}(()=>{throw new F(600,!1)})})(),Rs=t;const n=t.get(Pk);(function Lk(t){t.get(PC,null)?.forEach(e=>e())})(t)}(function Fk(t=[],n){return Sn.create({name:n,providers:[{provide:Yn,useValue:"platform"},{provide:cb,useValue:new Set([()=>Rs=null])},...t]})}(l,i))}return function ZV(t){const n=db();if(!n)throw new F(401,!1);return n}()}}function db(){return Rs?.get(Pk)??null}let ji=(()=>{class t{static{this.__NG_ELEMENT_ID__=YV}}return t})();function YV(t){return function QV(t,n,e){if(Sa(t)&&!e){const i=Ri(t.index,n);return new Tu(i,i)}return 47&t.type?new Tu(n[Ut],n):null}(ht(),$(),!(16&~t))}class Hk{constructor(){}supports(n){return tg(n)}create(n){return new n8(n)}}const t8=(t,n)=>n;class n8{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||t8}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,o=0,r=null;for(;e||i;){const s=!i||e&&e.currentIndex<zk(i,o,r)?e:i,l=zk(s,o,r),c=s.currentIndex;if(s===i)o--,i=i._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{r||(r=[]);const u=l-o,f=c-o;if(u!=f){for(let w=0;w<u;w++){const C=w<r.length?r[w]:r[w]=0,T=C+w;f<=T&&T<u&&(r[w]=C+1)}r[s.previousIndex]=f-u}}l!==c&&n(s,l,c)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!tg(n))throw new F(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,r,s,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)r=n[l],s=this._trackByFn(l,r),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,r,s,l)),Object.is(e.item,r)||this._addIdentityChange(e,r)):(e=this._mismatch(e,r,s,l),i=!0),e=e._next}else o=0,function F3(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,l=>{s=this._trackByFn(o,l),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,l,s,o)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,s,o),i=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,o){let r;return null===n?r=this._itTail:(r=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,r,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,r,o)):n=this._addAfter(new i8(e,i),r,o),n}_verifyReinsertion(n,e,i,o){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?n=this._reinsertAfter(r,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,r=n._nextRemoved;return null===o?this._removalsHead=r:o._nextRemoved=r,null===r?this._removalsTail=o:r._prevRemoved=o,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new Uk),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Uk),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class i8{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class o8{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class Uk{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new o8,this.map.set(e,i)),i.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zk(t,n,e){const i=t.previousIndex;if(null===i)return i;let o=0;return e&&i<e.length&&(o=e[i]),i+n+o}function Wk(){return new gb([new Hk])}let gb=(()=>{class t{static{this.\u0275prov=W({token:t,providedIn:"root",factory:Wk})}constructor(e){this.factories=e}static create(e,i){if(null!=i){const o=i.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||Wk()),deps:[[t,new Ll,new Fl]]}}find(e){const i=this.factories.find(o=>o.supports(e));if(null!=i)return i;throw new F(901,!1)}}return t})();const c8=Rk(null,"core",[]);let d8=(()=>{class t{constructor(e){}static{this.\u0275fac=function(i){return new(i||t)(oe(Hr))}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();function Fc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function vb(t,n){const e=Re(t),i=n.elementInjector||zl();return new Ou(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}let mE=null;function Fs(){return mE}class q8{}const tn=new ee("");let yb=(()=>{class t{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(K8),providedIn:"platform"})}}return t})();const Z8=new ee("");let K8=(()=>{class t extends yb{constructor(){super(),this._doc=N(tn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fs().getBaseHref(this._doc)}onPopState(e){const i=Fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){this._history.pushState(e,i,o)}replaceState(e,i,o){this._history.replaceState(e,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function bb(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function _E(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Ur(t){return t&&"?"!==t[0]?"?"+t:t}let ja=(()=>{class t{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(yE),providedIn:"root"})}}return t})();const vE=new ee("");let yE=(()=>{class t extends ja{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??N(tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bb(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Ur(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,r){const s=this.prepareExternalUrl(o+Ur(r));this._platformLocation.pushState(e,i,s)}replaceState(e,i,o,r){const s=this.prepareExternalUrl(o+Ur(r));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||t)(oe(yb),oe(vE,8))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Y8=(()=>{class t extends ja{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=bb(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,o,r){let s=this.prepareExternalUrl(o+Ur(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,o,r){let s=this.prepareExternalUrl(o+Ur(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||t)(oe(yb),oe(vE,8))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})(),ih=(()=>{class t{constructor(e){this._subject=new fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function X8(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(_E(bE(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ur(i))}normalize(e){return t.stripTrailingSlash(function J8(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,bE(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ur(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ur(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i,complete:o})}static{this.normalizeQueryParams=Ur}static{this.joinWithSlash=bb}static{this.stripTrailingSlash=_E}static{this.\u0275fac=function(i){return new(i||t)(oe(ja))}}static{this.\u0275prov=W({token:t,factory:()=>function Q8(){return new ih(oe(ja))}(),providedIn:"root"})}}return t})();function bE(t){return t.replace(/\/index.html$/,"")}var xg=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(xg||{}),Ln=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ln||{}),it=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(it||{}),$i=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}($i||{});const dn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ig(t,n){return lo(di(t)[xt.DateFormat],n)}function Ng(t,n){return lo(di(t)[xt.TimeFormat],n)}function Og(t,n){return lo(di(t)[xt.DateTimeFormat],n)}function ao(t,n){const e=di(t),i=e[xt.NumberSymbols][n];if(typeof i>"u"){if(n===dn.CurrencyDecimal)return e[xt.NumberSymbols][dn.Decimal];if(n===dn.CurrencyGroup)return e[xt.NumberSymbols][dn.Group]}return i}function DE(t){if(!t[xt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[xt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function lo(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function Db(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const u6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pg={},h6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(zr||{}),lt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(lt||{}),ct=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ct||{});function TE(t,n,e,i){let o=function w6(t){if(kE(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[o,r=1,s=1]=t.split("-").map(l=>+l);return Ag(o,r-1,s)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(u6))return function C6(t){const n=new Date(0);let e=0,i=0;const o=t[8]?n.setUTCFullYear:n.setFullYear,r=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),o.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-e,l=Number(t[5]||0)-i,c=Number(t[6]||0),u=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return r.call(n,s,l,c,u),n}(i)}const n=new Date(t);if(!kE(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=Gr(e,n)||n;let l,s=[];for(;n;){if(l=h6.exec(n),!l){s.push(n);break}{s=s.concat(l.slice(1));const f=s.pop();if(!f)break;n=f}}let c=o.getTimezoneOffset();i&&(c=ME(i,c),o=function b6(t,n,e){const i=e?-1:1,o=t.getTimezoneOffset();return function y6(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(ME(n,o)-o))}(o,i,!0));let u="";return s.forEach(f=>{const _=function v6(t){if(Sb[t])return Sb[t];let n;switch(t){case"G":case"GG":case"GGG":n=It(ct.Eras,it.Abbreviated);break;case"GGGG":n=It(ct.Eras,it.Wide);break;case"GGGGG":n=It(ct.Eras,it.Narrow);break;case"y":n=un(lt.FullYear,1,0,!1,!0);break;case"yy":n=un(lt.FullYear,2,0,!0,!0);break;case"yyy":n=un(lt.FullYear,3,0,!1,!0);break;case"yyyy":n=un(lt.FullYear,4,0,!1,!0);break;case"Y":n=Bg(1);break;case"YY":n=Bg(2,!0);break;case"YYY":n=Bg(3);break;case"YYYY":n=Bg(4);break;case"M":case"L":n=un(lt.Month,1,1);break;case"MM":case"LL":n=un(lt.Month,2,1);break;case"MMM":n=It(ct.Months,it.Abbreviated);break;case"MMMM":n=It(ct.Months,it.Wide);break;case"MMMMM":n=It(ct.Months,it.Narrow);break;case"LLL":n=It(ct.Months,it.Abbreviated,Ln.Standalone);break;case"LLLL":n=It(ct.Months,it.Wide,Ln.Standalone);break;case"LLLLL":n=It(ct.Months,it.Narrow,Ln.Standalone);break;case"w":n=Tb(1);break;case"ww":n=Tb(2);break;case"W":n=Tb(1,!0);break;case"d":n=un(lt.Date,1);break;case"dd":n=un(lt.Date,2);break;case"c":case"cc":n=un(lt.Day,1);break;case"ccc":n=It(ct.Days,it.Abbreviated,Ln.Standalone);break;case"cccc":n=It(ct.Days,it.Wide,Ln.Standalone);break;case"ccccc":n=It(ct.Days,it.Narrow,Ln.Standalone);break;case"cccccc":n=It(ct.Days,it.Short,Ln.Standalone);break;case"E":case"EE":case"EEE":n=It(ct.Days,it.Abbreviated);break;case"EEEE":n=It(ct.Days,it.Wide);break;case"EEEEE":n=It(ct.Days,it.Narrow);break;case"EEEEEE":n=It(ct.Days,it.Short);break;case"a":case"aa":case"aaa":n=It(ct.DayPeriods,it.Abbreviated);break;case"aaaa":n=It(ct.DayPeriods,it.Wide);break;case"aaaaa":n=It(ct.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":n=It(ct.DayPeriods,it.Abbreviated,Ln.Standalone,!0);break;case"bbbb":n=It(ct.DayPeriods,it.Wide,Ln.Standalone,!0);break;case"bbbbb":n=It(ct.DayPeriods,it.Narrow,Ln.Standalone,!0);break;case"B":case"BB":case"BBB":n=It(ct.DayPeriods,it.Abbreviated,Ln.Format,!0);break;case"BBBB":n=It(ct.DayPeriods,it.Wide,Ln.Format,!0);break;case"BBBBB":n=It(ct.DayPeriods,it.Narrow,Ln.Format,!0);break;case"h":n=un(lt.Hours,1,-12);break;case"hh":n=un(lt.Hours,2,-12);break;case"H":n=un(lt.Hours,1);break;case"HH":n=un(lt.Hours,2);break;case"m":n=un(lt.Minutes,1);break;case"mm":n=un(lt.Minutes,2);break;case"s":n=un(lt.Seconds,1);break;case"ss":n=un(lt.Seconds,2);break;case"S":n=un(lt.FractionalSeconds,1);break;case"SS":n=un(lt.FractionalSeconds,2);break;case"SSS":n=un(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=Fg(zr.Short);break;case"ZZZZZ":n=Fg(zr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=Fg(zr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=Fg(zr.Long);break;default:return null}return Sb[t]=n,n}(f);u+=_?_(o,e,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Ag(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function Gr(t,n){const e=function t6(t){return di(t)[xt.LocaleId]}(t);if(Pg[e]??={},Pg[e][n])return Pg[e][n];let i="";switch(n){case"shortDate":i=Ig(t,$i.Short);break;case"mediumDate":i=Ig(t,$i.Medium);break;case"longDate":i=Ig(t,$i.Long);break;case"fullDate":i=Ig(t,$i.Full);break;case"shortTime":i=Ng(t,$i.Short);break;case"mediumTime":i=Ng(t,$i.Medium);break;case"longTime":i=Ng(t,$i.Long);break;case"fullTime":i=Ng(t,$i.Full);break;case"short":const o=Gr(t,"shortTime"),r=Gr(t,"shortDate");i=Rg(Og(t,$i.Short),[o,r]);break;case"medium":const s=Gr(t,"mediumTime"),l=Gr(t,"mediumDate");i=Rg(Og(t,$i.Medium),[s,l]);break;case"long":const c=Gr(t,"longTime"),u=Gr(t,"longDate");i=Rg(Og(t,$i.Long),[c,u]);break;case"full":const f=Gr(t,"fullTime"),_=Gr(t,"fullDate");i=Rg(Og(t,$i.Full),[f,_])}return i&&(Pg[e][n]=i),i}function Rg(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function Oo(t,n,e="-",i,o){let r="";(t<0||o&&t<=0)&&(o?t=1-t:(t=-t,r=e));let s=String(t);for(;s.length<n;)s="0"+s;return i&&(s=s.slice(s.length-n)),r+s}function un(t,n,e=0,i=!1,o=!1){return function(r,s){let l=function p6(t,n){switch(t){case lt.FullYear:return n.getFullYear();case lt.Month:return n.getMonth();case lt.Date:return n.getDate();case lt.Hours:return n.getHours();case lt.Minutes:return n.getMinutes();case lt.Seconds:return n.getSeconds();case lt.FractionalSeconds:return n.getMilliseconds();case lt.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,r);if((e>0||l>-e)&&(l+=e),t===lt.Hours)0===l&&-12===e&&(l=12);else if(t===lt.FractionalSeconds)return function f6(t,n){return Oo(t,3).substring(0,n)}(l,n);const c=ao(s,dn.MinusSign);return Oo(l,n,c,i,o)}}function It(t,n,e=Ln.Format,i=!1){return function(o,r){return function g6(t,n,e,i,o,r){switch(e){case ct.Months:return function wb(t,n,e){const i=di(t),r=lo([i[xt.MonthsFormat],i[xt.MonthsStandalone]],n);return lo(r,e)}(n,o,i)[t.getMonth()];case ct.Days:return function CE(t,n,e){const i=di(t),r=lo([i[xt.DaysFormat],i[xt.DaysStandalone]],n);return lo(r,e)}(n,o,i)[t.getDay()];case ct.DayPeriods:const s=t.getHours(),l=t.getMinutes();if(r){const u=function s6(t){const n=di(t);return DE(n),(n[xt.ExtraData][2]||[]).map(i=>"string"==typeof i?Db(i):[Db(i[0]),Db(i[1])])}(n),f=function a6(t,n,e){const i=di(t);DE(i);const r=lo([i[xt.ExtraData][0],i[xt.ExtraData][1]],n)||[];return lo(r,e)||[]}(n,o,i),_=u.findIndex(w=>{if(Array.isArray(w)){const[C,T]=w,S=s>=C.hours&&l>=C.minutes,x=s<T.hours||s===T.hours&&l<T.minutes;if(C.hours<T.hours){if(S&&x)return!0}else if(S||x)return!0}else if(w.hours===s&&w.minutes===l)return!0;return!1});if(-1!==_)return f[_]}return function n6(t,n,e){const i=di(t),r=lo([i[xt.DayPeriodsFormat],i[xt.DayPeriodsStandalone]],n);return lo(r,e)}(n,o,i)[s<12?0:1];case ct.Eras:return function i6(t,n){return lo(di(t)[xt.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(o,r,t,n,e,i)}}function Fg(t){return function(n,e,i){const o=-1*i,r=ao(e,dn.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case zr.Short:return(o>=0?"+":"")+Oo(s,2,r)+Oo(Math.abs(o%60),2,r);case zr.ShortGMT:return"GMT"+(o>=0?"+":"")+Oo(s,1,r);case zr.Long:return"GMT"+(o>=0?"+":"")+Oo(s,2,r)+":"+Oo(Math.abs(o%60),2,r);case zr.Extended:return 0===i?"Z":(o>=0?"+":"")+Oo(s,2,r)+":"+Oo(Math.abs(o%60),2,r);default:throw new Error(`Unknown zone width "${t}"`)}}}const m6=0,Lg=4;function SE(t){const n=t.getDay(),e=0===n?-3:Lg-n;return Ag(t.getFullYear(),t.getMonth(),t.getDate()+e)}function Tb(t,n=!1){return function(e,i){let o;if(n){const r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();o=1+Math.floor((s+r)/7)}else{const r=SE(e),s=function _6(t){const n=Ag(t,m6,1).getDay();return Ag(t,0,1+(n<=Lg?Lg:Lg+7)-n)}(r.getFullYear()),l=r.getTime()-s.getTime();o=1+Math.round(l/6048e5)}return Oo(o,t,ao(i,dn.MinusSign))}}function Bg(t,n=!1){return function(e,i){return Oo(SE(e).getFullYear(),t,ao(i,dn.MinusSign),n)}}const Sb={};function ME(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function kE(t){return t instanceof Date&&!isNaN(t.valueOf())}const D6=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function xb(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function NE(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[o,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===n)return decodeURIComponent(r)}return null}const Nb=/\s+/,OE=[];let Ob=(()=>{class t{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=OE,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Nb):OE}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Nb):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],o=e[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Nb).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(i){return new(i||t)(j(ft),j(Vr))}}static{this.\u0275dir=te({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Je.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();class R6{constructor(n,e,i,o){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wr=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((o,r,s)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new R6(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===r?void 0:r);else if(null!==r){const l=i.get(r);i.move(l,s),AE(l,o)}});for(let o=0,r=i.length;o<r;o++){const l=i.get(o).context;l.index=o,l.count=r,l.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{AE(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||t)(j(Li),j(cn),j(gb))}}static{this.\u0275dir=te({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function AE(t,n){t.context.$implicit=n.item}let co=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new F6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){RE("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){RE("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||t)(j(Li),j(cn))}}static{this.\u0275dir=te({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class F6{constructor(){this.$implicit=null,this.ngIf=null}}function RE(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Oe(n)}'.`)}function Po(t,n){return new F(2100,!1)}const J6=new ee(""),X6=new ee("");let LE=(()=>{class t{constructor(e,i,o){this.locale=e,this.defaultTimezone=i,this.defaultOptions=o}transform(e,i,o,r){if(null==e||""===e||e!=e)return null;try{return TE(e,i??this.defaultOptions?.dateFormat??"mediumDate",r||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw Po()}}static{this.\u0275fac=function(i){return new(i||t)(j(fr,16),j(J6,24),j(X6,24))}}static{this.\u0275pipe=zn({name:"date",type:t,pure:!0,standalone:!0})}}return t})(),Rb=(()=>{class t{constructor(e){this._locale=e}transform(e,i,o){if(!function Fb(t){return!(null==t||""===t||t!=t)}(e))return null;o||=this._locale;try{return function x6(t,n,e){return function kb(t,n,e,i,o,r,s=!1){let l="",c=!1;if(isFinite(t)){let u=function N6(t){let i,o,r,s,l,n=Math.abs(t)+"",e=0;for((o=n.indexOf("."))>-1&&(n=n.replace(".","")),(r=n.search(/e/i))>0?(o<0&&(o=r),o+=+n.slice(r+1),n=n.substring(0,r)):o<0&&(o=n.length),r=0;"0"===n.charAt(r);r++);if(r===(l=n.length))i=[0],o=1;else{for(l--;"0"===n.charAt(l);)l--;for(o-=r,i=[],s=0;r<=l;r++,s++)i[s]=Number(n.charAt(r))}return o>22&&(i=i.splice(0,21),e=o-1,o=1),{digits:i,exponent:e,integerLen:o}}(t);s&&(u=function I6(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(u));let f=n.minInt,_=n.minFrac,w=n.maxFrac;if(r){const P=r.match(D6);if(null===P)throw new Error(`${r} is not a valid digit info`);const H=P[1],z=P[3],ie=P[5];null!=H&&(f=xb(H)),null!=z&&(_=xb(z)),null!=ie?w=xb(ie):null!=z&&_>w&&(w=_)}!function O6(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,o=i.length-t.integerLen;const r=Math.min(Math.max(n,o),e);let s=r+t.integerLen,l=i[s];if(s>0){i.splice(Math.max(t.integerLen,s));for(let _=s;_<i.length;_++)i[_]=0}else{o=Math.max(0,o),t.integerLen=1,i.length=Math.max(1,s=r+1),i[0]=0;for(let _=1;_<s;_++)i[_]=0}if(l>=5)if(s-1<0){for(let _=0;_>s;_--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[s-1]++;for(;o<Math.max(0,r);o++)i.push(0);let c=0!==r;const u=n+t.integerLen,f=i.reduceRight(function(_,w,C,T){return T[C]=(w+=_)<10?w:w-10,c&&(0===T[C]&&C>=u?T.pop():c=!1),w>=10?1:0},0);f&&(i.unshift(f),t.integerLen++)}(u,_,w);let C=u.digits,T=u.integerLen;const S=u.exponent;let x=[];for(c=C.every(P=>!P);T<f;T++)C.unshift(0);for(;T<0;T++)C.unshift(0);T>0?x=C.splice(T,C.length):(x=C,C=[0]);const O=[];for(C.length>=n.lgSize&&O.unshift(C.splice(-n.lgSize,C.length).join(""));C.length>n.gSize;)O.unshift(C.splice(-n.gSize,C.length).join(""));C.length&&O.unshift(C.join("")),l=O.join(ao(e,i)),x.length&&(l+=ao(e,o)+x.join("")),S&&(l+=ao(e,dn.Exponential)+"+"+S)}else l=ao(e,dn.Infinity);return l=t<0&&!c?n.negPre+l+n.negSuf:n.posPre+l+n.posSuf,l}(t,function Eb(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),o=i[0],r=i[1],s=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],l=s[0],c=s[1]||"";e.posPre=l.substring(0,l.indexOf("#"));for(let f=0;f<c.length;f++){const _=c.charAt(f);"0"===_?e.minFrac=e.maxFrac=f+1:"#"===_?e.maxFrac=f+1:e.posSuf+=_}const u=l.split(",");if(e.gSize=u[1]?u[1].length:0,e.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,r){const f=o.length-e.posPre.length-e.posSuf.length,_=r.indexOf("#");e.negPre=r.substring(0,_).replace(/'/g,""),e.negSuf=r.slice(_+f).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}(function Cb(t,n){return di(t)[xt.NumberFormats][n]}(n,xg.Decimal),ao(n,dn.MinusSign)),n,dn.Group,dn.Decimal,e)}(function Lb(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),o,i)}catch(r){throw Po()}}static{this.\u0275fac=function(i){return new(i||t)(j(fr,16))}}static{this.\u0275pipe=zn({name:"number",type:t,pure:!0,standalone:!0})}}return t})();let lj=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();const VE="browser";function jE(t){return"server"===t}let fj=(()=>{class t{static{this.\u0275prov=W({token:t,providedIn:"root",factory:()=>function hj(t){return t===VE}(N(Ss))?new pj(N(tn),window):new mj})}}return t})();class pj{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){const e=function gj(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const r=o.shadowRoot;if(r){const s=r.getElementById(n)||r.querySelector(`[name="${n}"]`);if(s)return s}o=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],o-r[1])}}class mj{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}}class $E{}class zj extends q8{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vb extends zj{static makeCurrent(){!function W8(t){mE??=t}(new Vb)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function Gj(){return lh=lh||document.querySelector("base"),lh?lh.getAttribute("href"):null}();return null==e?null:function Wj(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){lh=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return NE(document.cookie,n)}}let lh=null,Zj=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const jb=new ee("");let YE=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o){return this._findPluginFor(i).addEventListener(e,i,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||t)(oe(jb),oe($e))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();class QE{constructor(n){this._doc=n}}const $b="ng-app-id";let JE=(()=>{class t{constructor(e,i,o,r={}){this.doc=e,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jE(r),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(o=>o.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${$b}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(e,i){const o=this.styleRef;if(o.has(e)){const r=o.get(e);return r.usage+=i,r.usage}return o.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===e)return o.delete(i),r.removeAttribute($b),r;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute($b,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){const o=this.getStyleElement(e,i),r=this.styleRef,s=r.get(i)?.elements;s?s.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||t)(oe(tn),oe(bp),oe(RC,8),oe(Ss))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const Hb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ub=/%COMP%/g,Jj=new ee("",{providedIn:"root",factory:()=>!0});function ex(t,n){return n.map(e=>e.replace(Ub,t))}let zb=(()=>{class t{constructor(e,i,o,r,s,l,c,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=jE(l),this.defaultRenderer=new Gb(e,s,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ni.ShadowDom&&(i={...i,encapsulation:Ni.Emulated});const o=this.getOrCreateRenderer(e,i);return o instanceof nx?o.applyToHost(e):o instanceof Wb&&o.applyStyles(),o}getOrCreateRenderer(e,i){const o=this.rendererByCompId;let r=o.get(i.id);if(!r){const s=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(i.encapsulation){case Ni.Emulated:r=new nx(c,u,i,this.appId,f,s,l,_);break;case Ni.ShadowDom:return new n$(c,u,e,i,s,l,this.nonce,_);default:r=new Wb(c,u,i,f,s,l,_)}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||t)(oe(YE),oe(JE),oe(bp),oe(Jj),oe(tn),oe(Ss),oe($e),oe(RC))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();class Gb{constructor(n,e,i,o){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Hb[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(tx(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(tx(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new F(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,o){if(o){e=o+":"+e;const r=Hb[o];r?n.setAttributeNS(r,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const o=Hb[i];o?n.removeAttributeNS(o,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,o){o&(ks.DashCase|ks.Important)?n.style.setProperty(e,i,o&ks.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&ks.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=Fs().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function tx(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class n$ extends Gb{constructor(n,e,i,o,r,s,l,c){super(n,r,s,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ex(o.id,o.styles);for(const f of u){const _=document.createElement("style");l&&_.setAttribute("nonce",l),_.textContent=f,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wb extends Gb{constructor(n,e,i,o,r,s,l,c){super(n,r,s,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o,this.styles=c?ex(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nx extends Wb{constructor(n,e,i,o,r,s,l,c){const u=o+"-"+i.id;super(n,e,i,r,s,l,c,u),this.contentAttr=function Xj(t){return"_ngcontent-%COMP%".replace(Ub,t)}(u),this.hostAttr=function e$(t){return"_nghost-%COMP%".replace(Ub,t)}(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let i$=(()=>{class t extends QE{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o){return e.addEventListener(i,o,!1),()=>this.removeEventListener(e,i,o)}removeEventListener(e,i,o){return e.removeEventListener(i,o)}static{this.\u0275fac=function(i){return new(i||t)(oe(tn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const ix=["alt","control","meta","shift"],o$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let s$=(()=>{class t extends QE{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,o){const r=t.parseEventName(i),s=t.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fs().onAndCancel(e,r.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const r=t._normalizeKey(i.pop());let s="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),s="code."),ix.forEach(u=>{const f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=r,0!=i.length||0===r.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(e,i){let o=o$[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(o=e.code,r="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ix.forEach(s=>{s!==o&&(0,r$[s])(e)&&(r+=s+".")}),r+=o,r===i)}static eventCallback(e,i,o){return r=>{t.matchEventFullKeyCode(r,e)&&o.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(i){return new(i||t)(oe(tn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const d$=Rk(c8,"browser",[{provide:Ss,useValue:VE},{provide:PC,useValue:function a$(){Vb.makeCurrent()},multi:!0},{provide:tn,useFactory:function c$(){return function uR(t){sv=t}(document),document},deps:[]}]),u$=new ee(""),sx=[{provide:vg,useClass:class qj{addToWindow(n){We.getAngularTestability=(i,o=!0)=>{const r=n.findTestabilityInTree(i,o);if(null==r)throw new F(5103,!1);return r},We.getAllAngularTestabilities=()=>n.getAllTestabilities(),We.getAllAngularRootElements=()=>n.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(i=>{const o=We.getAllAngularTestabilities();let r=o.length;const s=function(){r--,0==r&&i()};o.forEach(l=>{l.whenStable(s)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?Fs().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Tk,useClass:nb,deps:[$e,ib,vg]},{provide:nb,useClass:nb,deps:[$e,ib,vg]}],ax=[{provide:Yn,useValue:"root"},{provide:nr,useFactory:function l$(){return new nr},deps:[]},{provide:jb,useClass:i$,multi:!0,deps:[tn,$e,Ss]},{provide:jb,useClass:s$,multi:!0,deps:[tn]},zb,JE,YE,{provide:ty,useExisting:zb},{provide:$E,useClass:Zj,deps:[]},[]];let lx=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:bp,useValue:e.appId}]}}static{this.\u0275fac=function(i){return new(i||t)(oe(u$,12))}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({providers:[...ax,...sx],imports:[lj,d8]})}}return t})(),h$=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||t)(oe(tn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Se=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Se||{});const qr="*";function m$(t,n){return{type:Se.Trigger,name:t,definitions:n,options:{}}}function hx(t,n=null){return{type:Se.Animate,styles:n,timings:t}}function Ug(t){return{type:Se.Style,styles:t,offset:null}}function fx(t,n,e){return{type:Se.State,name:t,styles:n,options:e}}function px(t,n,e=null){return{type:Se.Transition,expr:t,animation:n,options:e}}class dh{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class gx{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,o=0;const r=this.players.length;0==r?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==r&&this._onFinish()}),s.onDestroy(()=>{++i==r&&this._onDestroy()}),s.onStart(()=>{++o==r&&this._onStart()})}),this.totalTime=this.players.reduce((s,l)=>Math.max(s,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const o=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(o)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function mx(t){return new F(3e3,!1)}function Ls(t){switch(t.length){case 0:return new dh;case 1:return t[0];default:return new gx(t)}}function _x(t,n,e=new Map,i=new Map){const o=[],r=[];let s=-1,l=null;if(n.forEach(c=>{const u=c.get("offset"),f=u==s,_=f&&l||new Map;c.forEach((w,C)=>{let T=C,S=w;if("offset"!==C)switch(T=t.normalizePropertyName(T,o),S){case"!":S=e.get(C);break;case qr:S=i.get(C);break;default:S=t.normalizeStyleValue(C,T,S,o)}_.set(T,S)}),f||r.push(_),l=_,s=u}),o.length)throw function z$(t){return new F(3502,!1)}();return r}function Zb(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&Kb(e,"start",t)));break;case"done":t.onDone(()=>i(e&&Kb(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&Kb(e,"destroy",t)))}}function Kb(t,n,e){const r=Yb(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),s=t._data;return null!=s&&(r._data=s),r}function Yb(t,n,e,i,o="",r=0,s){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:o,totalTime:r,disabled:!!s}}function Hi(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function vx(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const nH=typeof document>"u"?null:document.documentElement;function Qb(t){const n=t.parentNode||t.host||null;return n===nH?null:n}let $a=null,yx=!1;function bx(t,n){for(;n;){if(n===t)return!0;n=Qb(n)}return!1}function wx(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let Jb=(()=>{class t{validateStyleProperty(e){return function oH(t){$a||($a=function rH(){return typeof document<"u"?document.body:null}()||{},yx=!!$a.style&&"WebkitAppearance"in $a.style);let n=!0;return $a.style&&!function iH(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in $a.style,!n&&yx&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in $a.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return bx(e,i)}getParentElement(e){return Qb(e)}query(e,i,o){return wx(e,i,o)}computeStyle(e,i,o){return o||""}animate(e,i,o,r,s,l=[],c){return new dh(o,r)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();class Xb{static{this.NOOP=new Jb}}class e0{}const aH=1e3,t0="ng-enter",zg="ng-leave",Gg="ng-trigger",Wg=".ng-trigger",Dx="ng-animating",n0=".ng-animating";function Zr(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:o0(parseFloat(n[1]),n[2])}function o0(t,n){return"s"===n?t*aH:t}function qg(t,n,e){return t.hasOwnProperty("duration")?t:function cH(t,n,e){let o,r=0,s="";if("string"==typeof t){const l=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(mx()),{duration:0,delay:0,easing:""};o=o0(parseFloat(l[1]),l[2]);const c=l[3];null!=c&&(r=o0(parseFloat(c),l[4]));const u=l[5];u&&(s=u)}else o=t;if(!e){let l=!1,c=n.length;o<0&&(n.push(function C$(){return new F(3100,!1)}()),l=!0),r<0&&(n.push(function D$(){return new F(3101,!1)}()),l=!0),l&&n.splice(c,0,mx())}return{duration:o,delay:r,easing:s}}(t,n,e)}function pr(t,n,e){n.forEach((i,o)=>{const r=s0(o);e&&!e.has(o)&&e.set(o,t.style[r]),t.style[r]=i})}function Ha(t,n){n.forEach((e,i)=>{const o=s0(i);t.style[o]=""})}function uh(t){return Array.isArray(t)?1==t.length?t[0]:function _$(t,n=null){return{type:Se.Sequence,steps:t,options:n}}(t):t}const r0=new RegExp("{{\\s*(.+?)\\s*}}","g");function Sx(t){let n=[];if("string"==typeof t){let e;for(;e=r0.exec(t);)n.push(e[1]);r0.lastIndex=0}return n}function hh(t,n,e){const i=`${t}`,o=i.replace(r0,(r,s)=>{let l=n[s];return null==l&&(e.push(function S$(t){return new F(3003,!1)}()),l=""),l.toString()});return o==i?t:o}const hH=/-+([a-z0-9])/g;function s0(t){return t.replace(hH,(...n)=>n[1].toUpperCase())}function Ui(t,n,e){switch(n.type){case Se.Trigger:return t.visitTrigger(n,e);case Se.State:return t.visitState(n,e);case Se.Transition:return t.visitTransition(n,e);case Se.Sequence:return t.visitSequence(n,e);case Se.Group:return t.visitGroup(n,e);case Se.Animate:return t.visitAnimate(n,e);case Se.Keyframes:return t.visitKeyframes(n,e);case Se.Style:return t.visitStyle(n,e);case Se.Reference:return t.visitReference(n,e);case Se.AnimateChild:return t.visitAnimateChild(n,e);case Se.AnimateRef:return t.visitAnimateRef(n,e);case Se.Query:return t.visitQuery(n,e);case Se.Stagger:return t.visitStagger(n,e);default:throw function M$(t){return new F(3004,!1)}()}}function a0(t,n){return window.getComputedStyle(t)[n]}const gH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Mx extends e0{normalizePropertyName(n,e){return s0(n)}normalizeStyleValue(n,e,i,o){let r="";const s=i.toString().trim();if(gH.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&o.push(function k$(t,n){return new F(3005,!1)}())}return s+r}}const Zg="*";const Kg=new Set(["true","1"]),Yg=new Set(["false","0"]);function kx(t,n){const e=Kg.has(t)||Yg.has(t),i=Kg.has(n)||Yg.has(n);return(o,r)=>{let s=t==Zg||t==o,l=n==Zg||n==r;return!s&&e&&"boolean"==typeof o&&(s=o?Kg.has(t):Yg.has(t)),!l&&i&&"boolean"==typeof r&&(l=r?Kg.has(n):Yg.has(n)),s&&l}}const yH=new RegExp("s*:selfs*,?","g");function l0(t,n,e,i){return new bH(t).build(n,e,i)}class bH{constructor(n){this._driver=n}build(n,e,i){const o=new DH(e);return this._resetContextStyleTimingState(o),Ui(this,uh(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,o=e.depCount=0;const r=[],s=[];return"@"==n.name.charAt(0)&&e.errors.push(function E$(){return new F(3006,!1)}()),n.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),l.type==Se.State){const c=l,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,r.push(this.visitState(c,e))}),c.name=u}else if(l.type==Se.Transition){const c=this.visitTransition(l,e);i+=c.queryCount,o+=c.depCount,s.push(c)}else e.errors.push(function x$(){return new F(3007,!1)}())}),{type:Se.Trigger,name:n.name,states:r,transitions:s,queryCount:i,depCount:o,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(i.containsDynamicStyles){const r=new Set,s=o||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(c=>{Sx(c).forEach(u=>{s.hasOwnProperty(u)||r.add(u)})})}),r.size&&e.errors.push(function I$(t,n){return new F(3008,!1)}(0,r.values()))}return{type:Se.State,name:n.name,style:i,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Ui(this,uh(n.animation),e),o=function mH(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function _H(t,n,e){if(":"==t[0]){const c=function vH(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function j$(t){return new F(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof c)return void n.push(c);t=c}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function V$(t){return new F(3015,!1)}()),n;const o=i[1],r=i[2],s=i[3];n.push(kx(o,s)),"<"==r[0]&&(o!=Zg||s!=Zg)&&n.push(kx(s,o))}(i,e,n)):e.push(t),e}(n.expr,e.errors);return{type:Se.Transition,matchers:o,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ua(n.options)}}visitSequence(n,e){return{type:Se.Sequence,steps:n.steps.map(i=>Ui(this,i,e)),options:Ua(n.options)}}visitGroup(n,e){const i=e.currentTime;let o=0;const r=n.steps.map(s=>{e.currentTime=i;const l=Ui(this,s,e);return o=Math.max(o,e.currentTime),l});return e.currentTime=o,{type:Se.Group,steps:r,options:Ua(n.options)}}visitAnimate(n,e){const i=function SH(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return c0(qg(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=c0(0,0,"");return r.dynamic=!0,r.strValue=e,r}const o=qg(e,n);return c0(o.duration,o.delay,o.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let o,r=n.styles?n.styles:Ug({});if(r.type==Se.Keyframes)o=this.visitKeyframes(r,e);else{let s=n.styles,l=!1;if(!s){l=!0;const u={};i.easing&&(u.easing=i.easing),s=Ug(u)}e.currentTime+=i.duration+i.delay;const c=this.visitStyle(s,e);c.isEmptyStep=l,o=c}return e.currentAnimateTimings=null,{type:Se.Animate,timings:i,style:o,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let l of o)"string"==typeof l?l===qr?i.push(l):e.errors.push(new F(3002,!1)):i.push(new Map(Object.entries(l)));let r=!1,s=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(s=l.get("easing"),l.delete("easing")),!r))for(let c of l.values())if(c.toString().indexOf("{{")>=0){r=!0;break}}),{type:Se.Style,styles:i,easing:s,offset:n.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let o=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),n.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,c)=>{const u=e.collectedStyles.get(e.currentQuerySelector),f=u.get(c);let _=!0;f&&(r!=o&&r>=f.startTime&&o<=f.endTime&&(e.errors.push(function O$(t,n,e,i,o){return new F(3010,!1)}()),_=!1),r=f.startTime),_&&u.set(c,{startTime:r,endTime:o}),e.options&&function uH(t,n,e){const i=n.params||{},o=Sx(t);o.length&&o.forEach(r=>{i.hasOwnProperty(r)||e.push(function T$(t){return new F(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:Se.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function P$(){return new F(3011,!1)}()),i;let r=0;const s=[];let l=!1,c=!1,u=0;const f=n.steps.map(O=>{const P=this._makeStyleAst(O,e);let H=null!=P.offset?P.offset:function TH(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(P.styles),z=0;return null!=H&&(r++,z=P.offset=H),c=c||z<0||z>1,l=l||z<u,u=z,s.push(z),P});c&&e.errors.push(function A$(){return new F(3012,!1)}()),l&&e.errors.push(function R$(){return new F(3200,!1)}());const _=n.steps.length;let w=0;r>0&&r<_?e.errors.push(function F$(){return new F(3202,!1)}()):0==r&&(w=1/(_-1));const C=_-1,T=e.currentTime,S=e.currentAnimateTimings,x=S.duration;return f.forEach((O,P)=>{const H=w>0?P==C?1:w*P:s[P],z=H*x;e.currentTime=T+S.delay+z,S.duration=z,this._validateStyleAst(O,e),O.offset=H,i.styles.push(O)}),i}visitReference(n,e){return{type:Se.Reference,animation:Ui(this,uh(n.animation),e),options:Ua(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:Se.AnimateChild,options:Ua(n.options)}}visitAnimateRef(n,e){return{type:Se.AnimateRef,animation:this.visitReference(n.animation,e),options:Ua(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;const[r,s]=function wH(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(yH,"")),t=t.replace(/@\*/g,Wg).replace(/@\w+/g,e=>Wg+"-"+e.slice(1)).replace(/:animating/g,n0),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+r:r,Hi(e.collectedStyles,e.currentQuerySelector,new Map);const l=Ui(this,uh(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Se.Query,selector:r,limit:o.limit||0,optional:!!o.optional,includeSelf:s,animation:l,originalSelector:n.selector,options:Ua(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function L$(){return new F(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:qg(n.timings,e.errors,!0);return{type:Se.Stagger,animation:Ui(this,uh(n.animation),e),timings:i,options:null}}}class DH{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ua(t){return t?(t={...t}).params&&(t.params=function CH(t){return t?{...t}:null}(t.params)):t={},t}function c0(t,n,e){return{duration:t,delay:n,easing:e}}function d0(t,n,e,i,o,r,s=null,l=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:o,delay:r,totalTime:o+r,easing:s,subTimeline:l}}class Qg{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const EH=new RegExp(":enter","g"),IH=new RegExp(":leave","g");function u0(t,n,e,i,o,r=new Map,s=new Map,l,c,u=[]){return(new NH).buildKeyframes(t,n,e,i,o,r,s,l,c,u)}class NH{buildKeyframes(n,e,i,o,r,s,l,c,u,f=[]){u=u||new Qg;const _=new h0(n,e,u,o,r,f,[]);_.options=c;const w=c.delay?Zr(c.delay):0;_.currentTimeline.delayNextStep(w),_.currentTimeline.setStyles([s],null,_.errors,c),Ui(this,i,_);const C=_.timelines.filter(T=>T.containsAnimation());if(C.length&&l.size){let T;for(let S=C.length-1;S>=0;S--){const x=C[S];if(x.element===e){T=x;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([l],null,_.errors,c)}return C.length?C.map(T=>T.buildKeyframes()):[d0(e,[],[],[],0,w,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const o=e.createSubContext(n.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,o,o.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const o of n){const r=o?.delay;if(r){const s="number"==typeof r?r:Zr(hh(r,o?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(n,e,i){let r=e.currentTimeline.currentTime;const s=null!=i.duration?Zr(i.duration):null,l=null!=i.delay?Zr(i.delay):null;return 0!==s&&n.forEach(c=>{const u=e.appendInstructionToTimeline(c,s,l);r=Math.max(r,u.duration+u.delay)}),r}visitReference(n,e){e.updateOptions(n.options,!0),Ui(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let o=e;const r=n.options;if(r&&(r.params||r.delay)&&(o=e.createSubContext(r),o.transformIntoNewTimeline(),null!=r.delay)){o.previousNode.type==Se.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Jg);const s=Zr(r.delay);o.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>Ui(this,s,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let o=e.currentTimeline.currentTime;const r=n.options&&n.options.delay?Zr(n.options.delay):0;n.steps.forEach(s=>{const l=e.createSubContext(n.options);r&&l.delayNextStep(r),Ui(this,s,l),o=Math.max(o,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return qg(e.params?hh(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),o.snapshotCurrentStyles());const r=n.style;r.type==Se.Keyframes?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,o=e.currentAnimateTimings;!o&&i.hasCurrentStyleProperties()&&i.forwardFrame();const r=o&&o.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(r):i.setStyles(n.styles,r,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,o=e.currentTimeline.duration,r=i.duration,l=e.createSubContext().currentTimeline;l.easing=i.easing,n.styles.forEach(c=>{l.forwardTime((c.offset||0)*r),l.setStyles(c.styles,c.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(o+r),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,o=n.options||{},r=o.delay?Zr(o.delay):0;r&&(e.previousNode.type===Se.Style||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Jg);let s=i;const l=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=l.length;let c=null;l.forEach((u,f)=>{e.currentQueryIndex=f;const _=e.createSubContext(n.options,u);r&&_.delayNextStep(r),u===e.element&&(c=_.currentTimeline),Ui(this,n.animation,_),_.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,_.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,o=e.currentTimeline,r=n.timings,s=Math.abs(r.duration),l=s*(e.currentQueryTotal-1);let c=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":c=l-c;break;case"full":c=i.currentStaggerTime}const f=e.currentTimeline;c&&f.delayNextStep(c);const _=f.currentTime;Ui(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=o.currentTime-_+(o.startTime-i.currentTimeline.startTime)}}const Jg={};class h0{constructor(n,e,i,o,r,s,l,c){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=r,this.errors=s,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Xg(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let o=this.options;null!=i.duration&&(o.duration=Zr(i.duration)),null!=i.delay&&(o.delay=Zr(i.delay));const r=i.params;if(r){let s=o.params;s||(s=this.options.params={}),Object.keys(r).forEach(l=>{(!e||!s.hasOwnProperty(l))&&(s[l]=hh(r[l],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(o=>{i[o]=e[o]})}}return n}createSubContext(n=null,e,i){const o=e||this.element,r=new h0(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(n),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(n){return this.previousNode=Jg,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},r=new OH(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(r),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,o,r,s){let l=[];if(o&&l.push(this.element),n.length>0){n=(n=n.replace(EH,"."+this._enterClassName)).replace(IH,"."+this._leaveClassName);let u=this._driver.query(this.element,n,1!=i);0!==i&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),l.push(...u)}return!r&&0==l.length&&s.push(function B$(t){return new F(3014,!1)}()),l}}class Xg{constructor(n,e,i,o){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new Xg(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||qr),this._currentKeyframe.set(e,qr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,o){e&&this._previousKeyframe.set("easing",e);const r=o&&o.params||{},s=function PH(t,n){const e=new Map;let i;return t.forEach(o=>{if("*"===o){i??=n.keys();for(let r of i)e.set(r,qr)}else for(let[r,s]of o)e.set(r,s)}),e}(n,this._globalTimelineStyles);for(let[l,c]of s){const u=hh(c,r,i);this._pendingStyles.set(l,u),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??qr),this._updateStyle(l,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const o=this._styleSummary.get(i);(!o||e.time>o.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((l,c)=>{const u=new Map([...this._backFill,...l]);u.forEach((f,_)=>{"!"===f?n.add(_):f===qr&&e.add(_)}),i||u.set("offset",c/this.duration),o.push(u)});const r=[...n.values()],s=[...e.values()];if(i){const l=o[0],c=new Map(l);l.set("offset",0),c.set("offset",1),o=[l,c]}return d0(this.element,o,r,s,this.duration,this.startTime,this.easing,!1)}}class OH extends Xg{constructor(n,e,i,o,r,s,l=!1){super(n,e,s.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=r,this._stretchStartingKeyframe=l,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=i+e,l=e/s,c=new Map(n[0]);c.set("offset",0),r.push(c);const u=new Map(n[0]);u.set("offset",Ix(l)),r.push(u);const f=n.length-1;for(let _=1;_<=f;_++){let w=new Map(n[_]);const C=w.get("offset");w.set("offset",Ix((e+C*i)/s)),r.push(w)}i=s,e=0,o="",n=r}return d0(this.element,n,this.preStyleProps,this.postStyleProps,i,e,o,!0)}}function Ix(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}function Nx(t,n,e,i,o,r,s,l,c,u,f,_,w){return{type:0,element:t,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:r,toState:i,toStyles:s,timelines:l,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:_,errors:w}}const f0={};class Ox{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,o){return function AH(t,n,e,i,o){return t.some(r=>r(n,e,i,o))}(this.ast.matchers,n,e,i,o)}buildStyles(n,e,i){let o=this._stateStyles.get("*");return void 0!==n&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,i):new Map}build(n,e,i,o,r,s,l,c,u,f){const _=[],w=this.ast.options&&this.ast.options.params||f0,T=this.buildStyles(i,l&&l.params||f0,_),S=c&&c.params||f0,x=this.buildStyles(o,S,_),O=new Set,P=new Map,H=new Map,z="void"===o,ie={params:Px(S,w),delay:this.ast.options?.delay},ae=f?[]:u0(n,e,this.ast.animation,r,s,T,x,ie,u,_);let pe=0;return ae.forEach(we=>{pe=Math.max(we.duration+we.delay,pe)}),_.length?Nx(e,this._triggerName,i,o,z,T,x,[],[],P,H,pe,_):(ae.forEach(we=>{const mt=we.element,Ct=Hi(P,mt,new Set);we.preStyleProps.forEach(In=>Ct.add(In));const xn=Hi(H,mt,new Set);we.postStyleProps.forEach(In=>xn.add(In)),mt!==e&&O.add(mt)}),Nx(e,this._triggerName,i,o,z,T,x,ae,[...O.values()],P,H,pe))}}function Px(t,n){const e={...n};return Object.entries(t).forEach(([i,o])=>{null!=o&&(e[i]=o)}),e}class RH{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,o=Px(n,this.defaultParams);return this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((s,l)=>{s&&(s=hh(s,o,e));const c=this.normalizer.normalizePropertyName(l,e);s=this.normalizer.normalizeStyleValue(l,c,s,e),i.set(l,s)})}),i}}class LH{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{this.states.set(o.name,new RH(o.style,o.options&&o.options.params||{},i))}),Ax(this.states,"true","1"),Ax(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new Ox(n,o,this.states))}),this.fallbackTransition=function BH(t,n,e){return new Ox(t,{type:Se.Transition,animation:{type:Se.Sequence,steps:[],options:null},matchers:[(s,l)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,o){return this.transitionFactories.find(s=>s.match(n,e,i,o))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function Ax(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const VH=new Qg;class jH{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],r=l0(this._driver,e,i,[]);if(i.length)throw function G$(t){return new F(3503,!1)}();this._animations.set(n,r)}_buildPlayer(n,e,i){const o=n.element,r=_x(this._normalizer,n.keyframes,e,i);return this._driver.animate(o,r,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const o=[],r=this._animations.get(n);let s;const l=new Map;if(r?(s=u0(this._driver,e,r,t0,zg,new Map,new Map,i,VH,o),s.forEach(f=>{const _=Hi(l,f.element,new Map);f.postStyleProps.forEach(w=>_.set(w,null))})):(o.push(function W$(){return new F(3300,!1)}()),s=[]),o.length)throw function q$(t){return new F(3504,!1)}();l.forEach((f,_)=>{f.forEach((w,C)=>{f.set(C,this._driver.computeStyle(_,C,qr))})});const u=Ls(s.map(f=>{const _=l.get(f.element);return this._buildPlayer(f,new Map,_)}));return this._playersById.set(n,u),u.onDestroy(()=>this.destroy(n)),this.players.push(u),u}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function Z$(t){return new F(3301,!1)}();return e}listen(n,e,i,o){const r=Yb(e,"","","");return Zb(this._getPlayer(n),i,r,o),()=>{}}command(n,e,i,o){if("register"==i)return void this.register(n,o[0]);if("create"==i)return void this.create(n,e,o[0]||{});const r=this._getPlayer(n);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const Rx="ng-animate-queued",p0="ng-animate-disabled",GH=[],Fx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},WH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ao="__ng_removed";class g0{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function YH(t){return t??null}(i?n.value:n),i){const{value:r,...s}=n;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(o=>{null==i[o]&&(i[o]=e[o])})}}}const fh="void",m0=new g0(fh);class qH{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,uo(e,this._hostClassName)}listen(n,e,i,o){if(!this._triggers.has(e))throw function K$(t,n){return new F(3302,!1)}();if(null==i||0==i.length)throw function Y$(t){return new F(3303,!1)}();if(!function QH(t){return"start"==t||"done"==t}(i))throw function Q$(t,n){return new F(3400,!1)}();const r=Hi(this._elementListeners,n,[]),s={name:e,phase:i,callback:o};r.push(s);const l=Hi(this._engine.statesByElement,n,new Map);return l.has(e)||(uo(n,Gg),uo(n,Gg+"-"+e),l.set(e,m0)),()=>{this._engine.afterFlush(()=>{const c=r.indexOf(s);c>=0&&r.splice(c,1),this._triggers.has(e)||l.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function J$(t){return new F(3401,!1)}();return e}trigger(n,e,i,o=!0){const r=this._getTrigger(e),s=new _0(this.id,e,n);let l=this._engine.statesByElement.get(n);l||(uo(n,Gg),uo(n,Gg+"-"+e),this._engine.statesByElement.set(n,l=new Map));let c=l.get(e);const u=new g0(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),l.set(e,u),c||(c=m0),u.value!==fh&&c.value===u.value){if(!function eU(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let o=0;o<e.length;o++){const r=e[o];if(!n.hasOwnProperty(r)||t[r]!==n[r])return!1}return!0}(c.params,u.params)){const S=[],x=r.matchStyles(c.value,c.params,S),O=r.matchStyles(u.value,u.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{Ha(n,x),pr(n,O)})}return}const w=Hi(this._engine.playersByElement,n,[]);w.forEach(S=>{S.namespaceId==this.id&&S.triggerName==e&&S.queued&&S.destroy()});let C=r.matchTransition(c.value,u.value,n,u.params),T=!1;if(!C){if(!o)return;C=r.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:C,fromState:c,toState:u,player:s,isFallbackTransition:T}),T||(uo(n,Rx),s.onStart(()=>{Bc(n,Rx)})),s.onDone(()=>{let S=this.players.indexOf(s);S>=0&&this.players.splice(S,1);const x=this._engine.playersByElement.get(n);if(x){let O=x.indexOf(s);O>=0&&x.splice(O,1)}}),this.players.push(s),w.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Wg,!0);i.forEach(o=>{if(o[Ao])return;const r=this._engine.fetchNamespacesByElement(o);r.size?r.forEach(s=>s.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,i,o){const r=this._engine.statesByElement.get(n),s=new Map;if(r){const l=[];if(r.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){const f=this.trigger(n,u,fh,o);f&&l.push(f)}}),l.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),i&&Ls(l).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const o=new Set;e.forEach(r=>{const s=r.name;if(o.has(s))return;o.add(s);const c=this._triggers.get(s).fallbackTransition,u=i.get(s)||m0,f=new g0(fh),_=new _0(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:c,fromState:u,toState:f,player:_,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(n):[];if(r&&r.length)o=!0;else{let s=n;for(;s=s.parentNode;)if(i.statesByElement.get(s)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)i.markElementAsRemoved(this.id,n,!1,e);else{const r=n[Ao];(!r||r===Fx)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){uo(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const o=i.player;if(o.destroyed)return;const r=i.element,s=this._elementListeners.get(r);s&&s.forEach(l=>{if(l.name==i.triggerName){const c=Yb(r,i.triggerName,i.fromState.value,i.toState.value);c._data=n,Zb(i.player,l.phase,c,l.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(i)}),this._queue=[],e.sort((i,o)=>{const r=i.transition.ast.depCount,s=o.transition.ast.depCount;return 0==r||0==s?r-s:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class ZH{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i,o){this.bodyNode=n,this.driver=e,this._normalizer=i,this.scheduler=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new qH(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,o=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,l=this.driver.getParentElement(e);for(;l;){const c=o.get(l);if(c){const u=i.indexOf(c);i.splice(u+1,0,n),s=!0;break}l=this.driver.getParentElement(l)}s||i.unshift(n)}else i.push(n);return o.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let o=this._namespaceLookup[n];o&&o.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let o of i.values())if(o.namespaceId){const r=this._fetchNamespace(o.namespaceId);r&&e.add(r)}return e}trigger(n,e,i,o){if(em(e)){const r=this._fetchNamespace(n);if(r)return r.trigger(e,i,o),!0}return!1}insertNode(n,e,i,o){if(!em(e))return;const r=e[Ao];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(e,i)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),uo(n,p0)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Bc(n,p0))}removeNode(n,e,i){if(em(e)){this.scheduler?.notify();const o=n?this._fetchNamespace(n):null;o?o.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const r=this.namespacesByHostElement.get(e);r&&r.id!==n&&r.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,o,r){this.collectedLeaveElements.push(e),e[Ao]={namespaceId:n,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(n,e,i,o,r){return em(e)?this._fetchNamespace(n).listen(e,i,o,r):()=>{}}_buildInstruction(n,e,i,o,r){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,o,n.fromState.options,n.toState.options,e,r)}destroyInnerAnimations(n){let e=this.driver.query(n,Wg,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,n0,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Ls(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Ao];if(e&&e.setForRemoval){if(n[Ao]=Fx,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(p0)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)uo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Ls(e).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(n){throw function X$(t){return new F(3402,!1)}()}_flushAnimations(n,e){const i=new Qg,o=[],r=new Map,s=[],l=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(re=>{f.add(re);const he=this.driver.query(re,".ng-animate-queued",!0);for(let ye=0;ye<he.length;ye++)f.add(he[ye])});const _=this.bodyNode,w=Array.from(this.statesByElement.keys()),C=Vx(w,this.collectedEnterElements),T=new Map;let S=0;C.forEach((re,he)=>{const ye=t0+S++;T.set(he,ye),re.forEach(je=>uo(je,ye))});const x=[],O=new Set,P=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){const he=this.collectedLeaveElements[re],ye=he[Ao];ye&&ye.setForRemoval&&(x.push(he),O.add(he),ye.hasAnimation?this.driver.query(he,".ng-star-inserted",!0).forEach(je=>O.add(je)):P.add(he))}const H=new Map,z=Vx(w,Array.from(O));z.forEach((re,he)=>{const ye=zg+S++;H.set(he,ye),re.forEach(je=>uo(je,ye))}),n.push(()=>{C.forEach((re,he)=>{const ye=T.get(he);re.forEach(je=>Bc(je,ye))}),z.forEach((re,he)=>{const ye=H.get(he);re.forEach(je=>Bc(je,ye))}),x.forEach(re=>{this.processLeaveNode(re)})});const ie=[],ae=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(e).forEach(ye=>{const je=ye.player,Gt=ye.element;if(ie.push(je),this.collectedEnterElements.length){const on=Gt[Ao];if(on&&on.setForMove){if(on.previousTriggersValues&&on.previousTriggersValues.has(ye.triggerName)){const gi=on.previousTriggersValues.get(ye.triggerName),oi=this.statesByElement.get(ye.element);if(oi&&oi.has(ye.triggerName)){const md=oi.get(ye.triggerName);md.value=gi,oi.set(ye.triggerName,md)}}return void je.destroy()}}const ki=!_||!this.driver.containsElement(_,Gt),On=H.get(Gt),Yi=T.get(Gt),dt=this._buildInstruction(ye,i,Yi,On,ki);if(dt.errors&&dt.errors.length)return void ae.push(dt);if(ki)return je.onStart(()=>Ha(Gt,dt.fromStyles)),je.onDestroy(()=>pr(Gt,dt.toStyles)),void o.push(je);if(ye.isFallbackTransition)return je.onStart(()=>Ha(Gt,dt.fromStyles)),je.onDestroy(()=>pr(Gt,dt.toStyles)),void o.push(je);const Uo=[];dt.timelines.forEach(on=>{on.stretchStartingKeyframe=!0,this.disabledNodes.has(on.element)||Uo.push(on)}),dt.timelines=Uo,i.append(Gt,dt.timelines),s.push({instruction:dt,player:je,element:Gt}),dt.queriedElements.forEach(on=>Hi(l,on,[]).push(je)),dt.preStyleProps.forEach((on,gi)=>{if(on.size){let oi=c.get(gi);oi||c.set(gi,oi=new Set),on.forEach((md,ul)=>oi.add(ul))}}),dt.postStyleProps.forEach((on,gi)=>{let oi=u.get(gi);oi||u.set(gi,oi=new Set),on.forEach((md,ul)=>oi.add(ul))})});if(ae.length){const re=[];ae.forEach(he=>{re.push(function eH(t,n){return new F(3505,!1)}())}),ie.forEach(he=>he.destroy()),this.reportError(re)}const pe=new Map,we=new Map;s.forEach(re=>{const he=re.element;i.has(he)&&(we.set(he,he),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,pe))}),o.forEach(re=>{const he=re.element;this._getPreviousPlayers(he,!1,re.namespaceId,re.triggerName,null).forEach(je=>{Hi(pe,he,[]).push(je),je.destroy()})});const mt=x.filter(re=>$x(re,c,u)),Ct=new Map;Bx(Ct,this.driver,P,u,qr).forEach(re=>{$x(re,c,u)&&mt.push(re)});const In=new Map;C.forEach((re,he)=>{Bx(In,this.driver,new Set(re),c,"!")}),mt.forEach(re=>{const he=Ct.get(re),ye=In.get(re);Ct.set(re,new Map([...he?.entries()??[],...ye?.entries()??[]]))});const Nn=[],Cr=[],Dr={};s.forEach(re=>{const{element:he,player:ye,instruction:je}=re;if(i.has(he)){if(f.has(he))return ye.onDestroy(()=>pr(he,je.toStyles)),ye.disabled=!0,ye.overrideTotalTime(je.totalTime),void o.push(ye);let Gt=Dr;if(we.size>1){let On=he;const Yi=[];for(;On=On.parentNode;){const dt=we.get(On);if(dt){Gt=dt;break}Yi.push(On)}Yi.forEach(dt=>we.set(dt,Gt))}const ki=this._buildAnimation(ye.namespaceId,je,pe,r,In,Ct);if(ye.setRealPlayer(ki),Gt===Dr)Nn.push(ye);else{const On=this.playersByElement.get(Gt);On&&On.length&&(ye.parentPlayer=Ls(On)),o.push(ye)}}else Ha(he,je.fromStyles),ye.onDestroy(()=>pr(he,je.toStyles)),Cr.push(ye),f.has(he)&&o.push(ye)}),Cr.forEach(re=>{const he=r.get(re.element);if(he&&he.length){const ye=Ls(he);re.setRealPlayer(ye)}}),o.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<x.length;re++){const he=x[re],ye=he[Ao];if(Bc(he,zg),ye&&ye.hasAnimation)continue;let je=[];if(l.size){let ki=l.get(he);ki&&ki.length&&je.push(...ki);let On=this.driver.query(he,n0,!0);for(let Yi=0;Yi<On.length;Yi++){let dt=l.get(On[Yi]);dt&&dt.length&&je.push(...dt)}}const Gt=je.filter(ki=>!ki.destroyed);Gt.length?JH(this,he,Gt):this.processLeaveNode(he)}return x.length=0,Nn.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();const he=this.players.indexOf(re);this.players.splice(he,1)}),re.play()}),Nn}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,o,r){let s=[];if(e){const l=this.playersByQueriedElement.get(n);l&&(s=l)}else{const l=this.playersByElement.get(n);if(l){const c=!r||r==fh;l.forEach(u=>{u.queued||!c&&u.triggerName!=o||s.push(u)})}}return(i||o)&&(s=s.filter(l=>!(i&&i!=l.namespaceId||o&&o!=l.triggerName))),s}_beforeAnimationBuild(n,e,i){const r=e.element,s=e.isRemovalTransition?void 0:n,l=e.isRemovalTransition?void 0:e.triggerName;for(const c of e.timelines){const u=c.element,f=u!==r,_=Hi(i,u,[]);this._getPreviousPlayers(u,f,s,l,e.toState).forEach(C=>{const T=C.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),C.destroy(),_.push(C)})}Ha(r,e.fromStyles)}_buildAnimation(n,e,i,o,r,s){const l=e.triggerName,c=e.element,u=[],f=new Set,_=new Set,w=e.timelines.map(T=>{const S=T.element;f.add(S);const x=S[Ao];if(x&&x.removedBeforeQueried)return new dh(T.duration,T.delay);const O=S!==c,P=function XH(t){const n=[];return jx(t,n),n}((i.get(S)||GH).map(pe=>pe.getRealPlayer())).filter(pe=>!!pe.element&&pe.element===S),H=r.get(S),z=s.get(S),ie=_x(this._normalizer,T.keyframes,H,z),ae=this._buildPlayer(T,ie,P);if(T.subTimeline&&o&&_.add(S),O){const pe=new _0(n,l,S);pe.setRealPlayer(ae),u.push(pe)}return ae});u.forEach(T=>{Hi(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function KH(t,n,e){let i=t.get(n);if(i){if(i.length){const o=i.indexOf(e);i.splice(o,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>uo(T,Dx));const C=Ls(w);return C.onDestroy(()=>{f.forEach(T=>Bc(T,Dx)),pr(c,e.toStyles)}),_.forEach(T=>{Hi(o,T,[]).push(C)}),C}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new dh(n.duration,n.delay)}}class _0{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new dh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(o=>Zb(n,i,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Hi(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function em(t){return t&&1===t.nodeType}function Lx(t,n){const e=t.style.display;return t.style.display=n??"none",e}function Bx(t,n,e,i,o){const r=[];e.forEach(c=>r.push(Lx(c)));const s=[];i.forEach((c,u)=>{const f=new Map;c.forEach(_=>{const w=n.computeStyle(u,_,o);f.set(_,w),(!w||0==w.length)&&(u[Ao]=WH,s.push(u))}),t.set(u,f)});let l=0;return e.forEach(c=>Lx(c,r[l++])),s}function Vx(t,n){const e=new Map;if(t.forEach(l=>e.set(l,[])),0==n.length)return e;const o=new Set(n),r=new Map;function s(l){if(!l)return 1;let c=r.get(l);if(c)return c;const u=l.parentNode;return c=e.has(u)?u:o.has(u)?1:s(u),r.set(l,c),c}return n.forEach(l=>{const c=s(l);1!==c&&e.get(c).push(l)}),e}function uo(t,n){t.classList?.add(n)}function Bc(t,n){t.classList?.remove(n)}function JH(t,n,e){Ls(e).onDone(()=>t.processLeaveNode(n))}function jx(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof gx?jx(i.players,n):n.push(i)}}function $x(t,n,e){const i=e.get(t);if(!i)return!1;let o=n.get(t);return o?i.forEach(r=>o.add(r)):n.set(t,i),e.delete(t),!0}class ph{constructor(n,e,i,o){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new ZH(n.body,e,i,o),this._timelineEngine=new jH(n.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(n,e,i,o,r){const s=n+"-"+o;let l=this._triggerCache[s];if(!l){const c=[],f=l0(this._driver,r,c,[]);if(c.length)throw function U$(t,n){return new F(3404,!1)}();l=function FH(t,n,e){return new LH(t,n,e)}(o,f,this._normalizer),this._triggerCache[s]=l}this._transitionEngine.registerTrigger(e,o,l)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,o){this._transitionEngine.insertNode(n,e,i,o)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,o){if("@"==i.charAt(0)){const[r,s]=vx(i);this._timelineEngine.command(r,e,s,o)}else this._transitionEngine.trigger(n,e,i,o)}listen(n,e,i,o,r){if("@"==i.charAt(0)){const[s,l]=vx(i);return this._timelineEngine.listen(s,e,l,r)}return this._transitionEngine.listen(n,e,i,o,r)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}class gh{static{this.initialStylesByElement=new WeakMap}constructor(n,e,i){this._element=n,this._startStyles=e,this._endStyles=i,this._state=0;let o=gh.initialStylesByElement.get(n);o||gh.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pr(this._element,this._initialStyles),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(gh.initialStylesByElement.delete(this._element),this._startStyles&&(Ha(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ha(this._element,this._endStyles),this._endStyles=null),pr(this._element,this._initialStyles),this._state=3)}}function v0(t){let n=null;return t.forEach((e,i)=>{(function nU(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class Hx{constructor(n,e,i,o){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,o)=>{"offset"!==o&&n.set(o,this._finished?i:a0(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Ux{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return bx(n,e)}getParentElement(n){return Qb(n)}query(n,e,i){return wx(n,e,i)}computeStyle(n,e,i){return a0(n,e)}animate(n,e,i,o,r,s=[]){const c={duration:i,delay:o,fill:0==o?"both":"forwards"};r&&(c.easing=r);const u=new Map,f=s.filter(C=>C instanceof Hx);(function fH(t,n){return 0===t||0===n})(i,o)&&f.forEach(C=>{C.currentSnapshot.forEach((T,S)=>u.set(S,T))});let _=function dH(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}(e).map(C=>new Map(C));_=function pH(t,n,e){if(e.size&&n.length){let i=n[0],o=[];if(e.forEach((r,s)=>{i.has(s)||o.push(s),i.set(s,r)}),o.length)for(let r=1;r<n.length;r++){let s=n[r];o.forEach(l=>s.set(l,a0(t,l)))}}return n}(n,_,u);const w=function tU(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=v0(n[0]),n.length>1&&(i=v0(n[n.length-1]))):n instanceof Map&&(e=v0(n)),e||i?new gh(t,e,i):null}(n,_);return new Hx(n,_,c,w)}}const zx="@.disabled";class Gx{constructor(n,e,i,o){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,o=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,o){this.delegate.setAttribute(n,e,i,o)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,o){this.delegate.setStyle(n,e,i,o)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==zx?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class iU extends Gx{constructor(n,e,i,o,r){super(e,i,o,r),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==zx?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const o=function oU(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let r=e.slice(1),s="";return"@"!=r.charAt(0)&&([r,s]=function rU(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(r)),this.engine.listen(this.namespaceId,o,r,s,l=>{this.factory.scheduleListenerCallback(l._data||-1,i,l)})}return this.delegate.listen(n,e,i)}}class sU{constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(o,r)=>{const s=r?.parentNode(o);s&&r.removeChild(s,o)}}createRenderer(n,e){const o=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){const u=this._rendererCache;let f=u.get(o);return f||(f=new Gx("",o,this.engine,()=>u.delete(o)),u.set(o,f)),f}const r=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(r,s,n,u.name,u)};return e.data.animation.forEach(l),new iU(this,s,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>e(i));const o=this._animationCallbacksBuffer;0==o.length&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(r=>{const[s,l]=r;s(l)}),this._animationCallbacksBuffer=[]})}),o.push([e,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const Wx=[{provide:e0,useFactory:function lU(){return new Mx}},{provide:ph,useClass:(()=>{class t extends ph{constructor(e,i,o){super(e,i,o,N(Wp,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||t)(oe(tn),oe(Xb),oe(e0))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})()},{provide:ty,useFactory:function cU(t,n,e){return new sU(t,n,e)},deps:[zb,ph,$e]}],y0=[{provide:Xb,useFactory:()=>new Ux},{provide:AC,useValue:"BrowserAnimations"},...Wx],qx=[{provide:Xb,useClass:Jb},{provide:AC,useValue:"NoopAnimations"},...Wx];let dU=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?qx:y0}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({providers:y0,imports:[lx]})}}return t})();function Zx(t){return t&&Ke(t.schedule)}function b0(t){return t[t.length-1]}function nm(t){return Ke(b0(t))?t.pop():void 0}function mh(t){return Zx(b0(t))?t.pop():void 0}function Bs(t){return this instanceof Bs?(this.v=t,this):new Bs(t)}function Jx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function T0(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=t[r]&&function(s){return new Promise(function(l,c){!function o(r,s,l,c){Promise.resolve(c).then(function(u){r({value:u,done:l})},s)}(l,c,(s=t[r](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const M0=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Xx(t){return Ke(t?.then)}function eI(t){return Ke(t[Md])}function tI(t){return Symbol.asyncIterator&&Ke(t?.[Symbol.asyncIterator])}function nI(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const iI=function BU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function oI(t){return Ke(t?.[iI])}function rI(t){return function Qx(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=e.apply(t,n||[]),r=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",function s(C){return function(T){return Promise.resolve(T).then(C,_)}}),o[Symbol.asyncIterator]=function(){return this},o;function l(C,T){i[C]&&(o[C]=function(S){return new Promise(function(x,O){r.push([C,S,x,O])>1||c(C,S)})},T&&(o[C]=T(o[C])))}function c(C,T){try{!function u(C){C.value instanceof Bs?Promise.resolve(C.value.v).then(f,_):w(r[0][2],C)}(i[C](T))}catch(S){w(r[0][3],S)}}function f(C){c("next",C)}function _(C){c("throw",C)}function w(C,T){C(T),r.shift(),r.length&&c(r[0][0],r[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:o}=yield Bs(e.read());if(o)return yield Bs(void 0);yield yield Bs(i)}}finally{e.releaseLock()}})}function sI(t){return Ke(t?.getReader)}function Bn(t){if(t instanceof rt)return t;if(null!=t){if(eI(t))return function VU(t){return new rt(n=>{const e=t[Md]();if(Ke(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(M0(t))return function jU(t){return new rt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Xx(t))return function $U(t){return new rt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,yf)})}(t);if(tI(t))return aI(t);if(oI(t))return function HU(t){return new rt(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(sI(t))return function UU(t){return aI(rI(t))}(t)}throw nI(t)}function aI(t){return new rt(n=>{(function zU(t,n){var e,i,o,r;return function Kx(t,n,e,i){return new(e||(e=Promise))(function(r,s){function l(f){try{u(i.next(f))}catch(_){s(_)}}function c(f){try{u(i.throw(f))}catch(_){s(_)}}function u(f){f.done?r(f.value):function o(r){return r instanceof e?r:new e(function(s){s(r)})}(f.value).then(l,c)}u((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Jx(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=e.return)&&(yield r.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Kr(t,n,e,i=0,o=!1){const r=n.schedule(function(){e(),o?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(r),!o)return r}function lI(t,n=0){return Ot((e,i)=>{e.subscribe(st(i,o=>Kr(i,t,()=>i.next(o),n),()=>Kr(i,t,()=>i.complete(),n),o=>Kr(i,t,()=>i.error(o),n)))})}function cI(t,n=0){return Ot((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function dI(t,n){if(!t)throw new Error("Iterable cannot be null");return new rt(e=>{Kr(e,n,()=>{const i=t[Symbol.asyncIterator]();Kr(e,n,()=>{i.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function hn(t,n){return n?function YU(t,n){if(null!=t){if(eI(t))return function GU(t,n){return Bn(t).pipe(cI(n),lI(n))}(t,n);if(M0(t))return function qU(t,n){return new rt(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Xx(t))return function WU(t,n){return Bn(t).pipe(cI(n),lI(n))}(t,n);if(tI(t))return dI(t,n);if(oI(t))return function ZU(t,n){return new rt(e=>{let i;return Kr(e,n,()=>{i=t[iI](),Kr(e,n,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(s){return void e.error(s)}r?e.complete():e.next(o)},0,!0)}),()=>Ke(i?.return)&&i.return()})}(t,n);if(sI(t))return function KU(t,n){return dI(rI(t),n)}(t,n)}throw nI(t)}(t,n):Bn(t)}function ue(...t){return hn(t,mh(t))}function Vn(t,n,e=1/0){return Ke(n)?Vn((i,o)=>le((r,s)=>n(i,r,o,s))(Bn(t(i,o))),e):("number"==typeof n&&(e=n),Ot((i,o)=>function QU(t,n,e,i,o,r,s,l){const c=[];let u=0,f=0,_=!1;const w=()=>{_&&!c.length&&!u&&n.complete()},C=S=>u<i?T(S):c.push(S),T=S=>{r&&n.next(S),u++;let x=!1;Bn(e(S,f++)).subscribe(st(n,O=>{o?.(O),r?C(O):n.next(O)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<i;){const O=c.shift();s?Kr(n,s,()=>T(O)):T(O)}w()}catch(O){n.error(O)}}))};return t.subscribe(st(n,C,()=>{_=!0,w()})),()=>{l?.()}}(i,o,t,e)))}function Vc(t,n){return Ke(n)?Vn(t,n,1):Vn(t,1)}function nn(t,n){return Ot((e,i)=>{let o=0;e.subscribe(st(i,r=>t.call(n,r,o++)&&i.next(r)))})}function _h(t){return Ot((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function ni(t,n){return Ot((e,i)=>{let o=null,r=0,s=!1;const l=()=>s&&!o&&i.complete();e.subscribe(st(i,c=>{o?.unsubscribe();let u=0;const f=r++;Bn(t(c,f)).subscribe(o=st(i,_=>i.next(n?n(c,_,f,u++):_),()=>{o=null,l()}))},()=>{s=!0,l()}))})}class im{}class om{}class hi{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const o=e.slice(0,i),r=o.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(o,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof hi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new hi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof hi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":const r=n.value;if(r){let s=this.headers.get(e);if(!s)return;s=s.filter(l=>-1===r.indexOf(l)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),o=n.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class JU{encodeKey(n){return uI(n)}encodeValue(n){return uI(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const e7=/%(\d[a-f0-9])/gi,t7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uI(t){return encodeURIComponent(t).replace(e7,(n,e)=>t7[e]??n)}function rm(t){return`${t}`}class Vs{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new JU,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XU(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const r=o.indexOf("="),[s,l]=-1==r?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,r)),n.decodeValue(o.slice(r+1))],c=e.get(s)||[];c.push(l),e.set(s,c)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],o=Array.isArray(i)?i.map(rm):[rm(i)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const o=n[i];Array.isArray(o)?o.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Vs({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(rm(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const o=i.indexOf(rm(n.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class n7{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function hI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function fI(t){return typeof Blob<"u"&&t instanceof Blob}function pI(t){return typeof FormData<"u"&&t instanceof FormData}class vh{constructor(n,e,i,o){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function i7(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,r=o):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new hi,this.context??=new n7,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+s}}else this.params=new Vs,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||hI(this.body)||fI(this.body)||pI(this.body)||function o7(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Vs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pI(this.body)?null:fI(this.body)?this.body.type||null:hI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,r=n.transferCache??this.transferCache,s=void 0!==n.body?n.body:this.body,l=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress;let u=n.headers||this.headers,f=n.params||this.params;const _=n.context??this.context;return void 0!==n.setHeaders&&(u=Object.keys(n.setHeaders).reduce((w,C)=>w.set(C,n.setHeaders[C]),u)),n.setParams&&(f=Object.keys(n.setParams).reduce((w,C)=>w.set(C,n.setParams[C]),f)),new vh(e,i,s,{params:f,headers:u,context:_,reportProgress:c,responseType:o,withCredentials:l,transferCache:r})}}var js=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(js||{});class k0{constructor(n,e=yh.Ok,i="OK"){this.headers=n.headers||new hi,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class sm extends k0{constructor(n={}){super(n),this.type=js.ResponseHeader}clone(n={}){return new sm({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class za extends k0{constructor(n={}){super(n),this.type=js.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new za({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class jc extends k0{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}var yh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(yh||{});function E0(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let ho=(()=>{class t{constructor(e){this.handler=e}request(e,i,o={}){let r;if(e instanceof vh)r=e;else{let c,u;c=o.headers instanceof hi?o.headers:new hi(o.headers),o.params&&(u=o.params instanceof Vs?o.params:new Vs({fromObject:o.params})),r=new vh(e,i,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}const s=ue(r).pipe(Vc(c=>this.handler.handle(c)));if(e instanceof vh||"events"===o.observe)return s;const l=s.pipe(nn(c=>c instanceof za));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return l.pipe(le(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(le(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(le(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return l.pipe(le(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Vs).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,E0(o,i))}post(e,i,o={}){return this.request("POST",e,E0(o,i))}put(e,i,o={}){return this.request("PUT",e,E0(o,i))}static{this.\u0275fac=function(i){return new(i||t)(oe(im))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();function mI(t,n){return n(t)}function c7(t,n){return(e,i)=>n.intercept(e,{handle:o=>t(o,i)})}const _I=new ee(""),bh=new ee(""),vI=new ee(""),yI=new ee("");function u7(){let t=null;return(n,e)=>{null===t&&(t=(N(_I,{optional:!0})??[]).reduceRight(c7,mI));const i=N(Is),o=i.add();return t(n,e).pipe(_h(()=>i.remove(o)))}}let bI=(()=>{class t extends im{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=N(Is);const o=N(yI,{optional:!0});this.backend=o??e}handle(e){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(bh),...this.injector.get(vI,[])]));this.chain=o.reduceRight((r,s)=>function d7(t,n,e){return(i,o)=>oo(e,()=>n(i,r=>t(r,o)))}(r,s,this.injector),mI)}const i=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(_h(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||t)(oe(om),oe(wn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const m7=/^\)\]\}',?\n/;let CI=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new F(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?hn(i.\u0275loadImpl()):ue(null)).pipe(ni(()=>new rt(r=>{const s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((S,x)=>s.setRequestHeader(S,x.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const S=e.detectContentTypeHeader();null!==S&&s.setRequestHeader("Content-Type",S)}if(e.responseType){const S=e.responseType.toLowerCase();s.responseType="json"!==S?S:"text"}const l=e.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const S=s.statusText||"OK",x=new hi(s.getAllResponseHeaders()),O=function _7(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||e.url;return c=new sm({headers:x,status:s.status,statusText:S,url:O}),c},f=()=>{let{headers:S,status:x,statusText:O,url:P}=u(),H=null;x!==yh.NoContent&&(H=typeof s.response>"u"?s.responseText:s.response),0===x&&(x=H?yh.Ok:0);let z=x>=200&&x<300;if("json"===e.responseType&&"string"==typeof H){const ie=H;H=H.replace(m7,"");try{H=""!==H?JSON.parse(H):null}catch(ae){H=ie,z&&(z=!1,H={error:ae,text:H})}}z?(r.next(new za({body:H,headers:S,status:x,statusText:O,url:P||void 0})),r.complete()):r.error(new jc({error:H,headers:S,status:x,statusText:O,url:P||void 0}))},_=S=>{const{url:x}=u(),O=new jc({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});r.error(O)};let w=!1;const C=S=>{w||(r.next(u()),w=!0);let x={type:js.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),"text"===e.responseType&&s.responseText&&(x.partialText=s.responseText),r.next(x)},T=S=>{let x={type:js.UploadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),r.next(x)};return s.addEventListener("load",f),s.addEventListener("error",_),s.addEventListener("timeout",_),s.addEventListener("abort",_),e.reportProgress&&(s.addEventListener("progress",C),null!==l&&s.upload&&s.upload.addEventListener("progress",T)),s.send(l),r.next({type:js.Sent}),()=>{s.removeEventListener("error",_),s.removeEventListener("abort",_),s.removeEventListener("load",f),s.removeEventListener("timeout",_),e.reportProgress&&(s.removeEventListener("progress",C),null!==l&&s.upload&&s.upload.removeEventListener("progress",T)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||t)(oe($E))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const N0=new ee(""),DI=new ee("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),TI=new ee("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class SI{}let b7=(()=>{class t{constructor(e,i,o){this.doc=e,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=NE(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||t)(oe(tn),oe(Ss),oe(DI))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();function w7(t,n){const e=t.url.toLowerCase();if(!N(N0)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=N(SI).getToken(),o=N(TI);return null!=i&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,i)})),n(t)}var $s=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}($s||{});function Ga(t,n){return{\u0275kind:t,\u0275providers:n}}function C7(...t){const n=[ho,CI,bI,{provide:im,useExisting:bI},{provide:om,useExisting:CI},{provide:bh,useValue:w7,multi:!0},{provide:N0,useValue:!0},{provide:SI,useClass:b7}];for(const e of t)n.push(...e.\u0275providers);return function h(t){return{\u0275providers:t}}(n)}const MI=new ee("");let T7=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({providers:[C7(Ga($s.LegacyInterceptors,[{provide:MI,useFactory:u7},{provide:bh,useExisting:MI,multi:!0}]))]})}}return t})();const{isArray:I7}=Array,{getPrototypeOf:N7,prototype:O7,keys:P7}=Object;function AI(t){if(1===t.length){const n=t[0];if(I7(n))return{args:n,keys:null};if(function A7(t){return t&&"object"==typeof t&&N7(t)===O7}(n)){const e=P7(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:R7}=Array;function O0(t){return le(n=>function F7(t,n){return R7(n)?t(...n):t(n)}(t,n))}function RI(t,n){return t.reduce((e,i,o)=>(e[i]=n[o],e),{})}let FI=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||t)(j(Vr),j(ft))}}static{this.\u0275dir=te({type:t})}}return t})(),Wa=(()=>{class t extends FI{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,features:[ot]})}}return t})();const Ti=new ee(""),B7={provide:Ti,useExisting:qe(()=>wh),multi:!0};let wh=(()=>{class t extends Wa{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){1&i&&B("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[pt([B7]),ot]})}}return t})();const V7={provide:Ti,useExisting:qe(()=>fo),multi:!0},$7=new ee("");let fo=(()=>{class t extends FI{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function j7(){const t=Fs()?Fs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||t)(j(Vr),j(ft),j($7,8))}}static{this.\u0275dir=te({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){1&i&&B("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[pt([V7]),ot]})}}return t})();function Hs(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function LI(t){return null!=t&&"number"==typeof t.length}const Gn=new ee(""),Us=new ee(""),H7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ce{static min(n){return BI(n)}static max(n){return VI(n)}static required(n){return jI(n)}static requiredTrue(n){return function $I(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function HI(t){return Hs(t.value)||H7.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function UI(t){return n=>Hs(n.value)||!LI(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return zI(n)}static pattern(n){return function GI(t){if(!t)return lm;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Hs(i.value))return null;const o=i.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return QI(n)}static composeAsync(n){return JI(n)}}function BI(t){return n=>{if(Hs(n.value)||Hs(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}function VI(t){return n=>{if(Hs(n.value)||Hs(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}function jI(t){return Hs(t.value)?{required:!0}:null}function zI(t){return n=>LI(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}function lm(t){return null}function WI(t){return null!=t}function qI(t){return eh(t)?hn(t):t}function ZI(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function KI(t,n){return n.map(e=>e(t))}function YI(t){return t.map(n=>function U7(t){return!t.validate}(n)?n:e=>n.validate(e))}function QI(t){if(!t)return null;const n=t.filter(WI);return 0==n.length?null:function(e){return ZI(KI(e,n))}}function P0(t){return null!=t?QI(YI(t)):null}function JI(t){if(!t)return null;const n=t.filter(WI);return 0==n.length?null:function(e){return function L7(...t){const n=nm(t),{args:e,keys:i}=AI(t),o=new rt(r=>{const{length:s}=e;if(!s)return void r.complete();const l=new Array(s);let c=s,u=s;for(let f=0;f<s;f++){let _=!1;Bn(e[f]).subscribe(st(r,w=>{_||(_=!0,u--),l[f]=w},()=>c--,void 0,()=>{(!c||!_)&&(u||r.next(i?RI(i,l):l),r.complete())}))}});return n?o.pipe(O0(n)):o}(KI(e,n).map(qI)).pipe(le(ZI))}}function A0(t){return null!=t?JI(YI(t)):null}function XI(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function eN(t){return t._rawValidators}function tN(t){return t._rawAsyncValidators}function R0(t){return t?Array.isArray(t)?t:[t]:[]}function cm(t,n){return Array.isArray(t)?t.includes(n):t===n}function nN(t,n){const e=R0(n);return R0(t).forEach(o=>{cm(e,o)||e.push(o)}),e}function iN(t,n){return R0(n).filter(e=>!cm(t,e))}class oN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=P0(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=A0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class fi extends oN{get formDirective(){return null}get path(){return null}}class zs extends oN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rN{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ro=(()=>{class t extends rN{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||t)(j(zs,2))}}static{this.\u0275dir=te({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){2&i&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ot]})}}return t})(),Gs=(()=>{class t extends rN{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||t)(j(fi,10))}}static{this.\u0275dir=te({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){2&i&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[ot]})}}return t})();const Ch="VALID",um="INVALID",$c="PENDING",Dh="DISABLED";function B0(t){return(hm(t)?t.validators:t)||null}function V0(t,n){return(hm(n)?n.asyncValidators:t)||null}function hm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function aN(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new F(1e3,"");if(!i[e])throw new F(1001,"")}function lN(t,n,e){t._forEachChild((i,o)=>{if(void 0===e[o])throw new F(1002,"")})}class fm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Ch}get invalid(){return this.status===um}get pending(){return this.status==$c}get disabled(){return this.status===Dh}get enabled(){return this.status!==Dh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(nN(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(nN(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(iN(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(iN(n,this._rawAsyncValidators))}hasValidator(n){return cm(this._rawValidators,n)}hasAsyncValidator(n){return cm(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=$c,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Dh,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Ch,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ch||this.status===$c)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dh:Ch}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=$c,this._hasOwnPendingAsyncValidator=!0;const e=qI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new fe,this.statusChanges=new fe}_calculateStatus(){return this._allControlsDisabled()?Dh:this.errors?um:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($c)?$c:this._anyControlsHaveStatus(um)?um:Ch}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){hm(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function q7(t){return Array.isArray(t)?P0(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function Z7(t){return Array.isArray(t)?A0(t):t||null}(this._rawAsyncValidators)}}class Th extends fm{constructor(n,e,i){super(B0(e),V0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){lN(this,0,n),Object.keys(n).forEach(i=>{aN(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const o=this.controls[i];o&&o.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,o)=>{i.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((o,r)=>{i=e(i,o,r)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class cN extends Th{}const qa=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>Sh}),Sh="always";function pm(t,n){return[...n.path,t]}function Mh(t,n,e=Sh){j0(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function Y7(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&dN(t,n)})}(t,n),function J7(t,n){const e=(i,o)=>{n.valueAccessor.writeValue(i),o&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function Q7(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&dN(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function K7(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function gm(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),_m(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function mm(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function j0(t,n){const e=eN(t);null!==n.validator?t.setValidators(XI(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=tN(t);null!==n.asyncValidator?t.setAsyncValidators(XI(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const o=()=>t.updateValueAndValidity();mm(n._rawValidators,o),mm(n._rawAsyncValidators,o)}function _m(t,n){let e=!1;if(null!==t){if(null!==n.validator){const o=eN(t);if(Array.isArray(o)&&o.length>0){const r=o.filter(s=>s!==n.validator);r.length!==o.length&&(e=!0,t.setValidators(r))}}if(null!==n.asyncValidator){const o=tN(t);if(Array.isArray(o)&&o.length>0){const r=o.filter(s=>s!==n.asyncValidator);r.length!==o.length&&(e=!0,t.setAsyncValidators(r))}}}const i=()=>{};return mm(n._rawValidators,i),mm(n._rawAsyncValidators,i),e}function dN(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uN(t,n){j0(t,n)}function H0(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function hN(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function U0(t,n){if(!n)return null;let e,i,o;return Array.isArray(n),n.forEach(r=>{r.constructor===fo?e=r:function tz(t){return Object.getPrototypeOf(t.constructor)===Wa}(r)?i=r:o=r}),o||i||e||null}const iz={provide:fi,useExisting:qe(()=>vm)},kh=Promise.resolve();let vm=(()=>{class t extends fi{constructor(e,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new fe,this.form=new Th({},P0(e),A0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){kh.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Mh(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){kh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){kh.then(()=>{const i=this._findContainer(e.path),o=new Th({});uN(o,e),i.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){kh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){kh.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,hN(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||t)(j(Gn,10),j(Us,10),j(qa,8))}}static{this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){1&i&&B("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Je.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pt([iz]),ot]})}}return t})();function fN(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function pN(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Eh=class extends fm{constructor(n=null,e,i){super(B0(e),V0(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hm(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=pN(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){fN(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){fN(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){pN(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},sz={provide:zs,useExisting:qe(()=>Hc)},_N=Promise.resolve();let Hc=(()=>{class t extends zs{constructor(e,i,o,r,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this.control=new Eh,this._registered=!1,this.name="",this.update=new fe,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=U0(0,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),H0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Mh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){_N.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,o=0!==i&&Fc(i);_N.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?pm(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||t)(j(fi,9),j(Gn,10),j(Us,10),j(Ti,10),j(ji,8),j(qa,8))}}static{this.\u0275dir=te({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Je.None,"disabled","isDisabled"],model:[Je.None,"ngModel","model"],options:[Je.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pt([sz]),ot,Dn]})}}return t})(),Ws=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();const az={provide:Ti,useExisting:qe(()=>Uc),multi:!0};let Uc=(()=>{class t extends Wa{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){1&i&&B("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[pt([az]),ot]})}}return t})();const z0=new ee(""),hz={provide:fi,useExisting:qe(()=>Yr)};let Yr=(()=>{class t extends fi{constructor(e,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new fe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_m(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Mh(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){gm(e.control||null,e,!1),function nz(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,hN(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,o=this.form.get(e.path);i!==o&&(gm(i||null,e),(t=>t instanceof Eh)(o)&&(Mh(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);uN(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function X7(t,n){return _m(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){j0(this.form,this),this._oldForm&&_m(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(i){return new(i||t)(j(Gn,10),j(Us,10),j(qa,8))}}static{this.\u0275dir=te({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,o){1&i&&B("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[Je.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pt([hz]),ot,Dn]})}}return t})();const gz={provide:zs,useExisting:qe(()=>qs)};let qs=(()=>{class t extends zs{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,o,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new fe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=U0(0,r)}ngOnChanges(e){this._added||this._setUpControl(),H0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return pm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||t)(j(fi,13),j(Gn,10),j(Us,10),j(Ti,10),j(z0,8))}}static{this.\u0275dir=te({type:t,selectors:[["","formControlName",""]],inputs:{name:[Je.None,"formControlName","name"],isDisabled:[Je.None,"disabled","isDisabled"],model:[Je.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pt([gz]),ot,Dn]})}}return t})();const mz={provide:Ti,useExisting:qe(()=>Zs),multi:!0};function CN(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Zs=(()=>{class t extends Wa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=CN(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function _z(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){1&i&&B("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[pt([mz]),ot]})}}return t})(),Za=(()=>{class t{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(CN(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||t)(j(ft),j(Vr),j(Zs,9))}}static{this.\u0275dir=te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();const vz={provide:Ti,useExisting:qe(()=>q0),multi:!0};function DN(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let q0=(()=>{class t extends Wa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const o=e.map(r=>this._getOptionId(r));i=(r,s)=>{r._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const o=[],r=i.selectedOptions;if(void 0!==r){const s=r;for(let l=0;l<s.length;l++){const u=this._getOptionValue(s[l].value);o.push(u)}}else{const s=i.options;for(let l=0;l<s.length;l++){const c=s[l];if(c.selected){const u=this._getOptionValue(c.value);o.push(u)}}}this.value=o,e(o)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function yz(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){1&i&&B("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[pt([vz]),ot]})}}return t})(),Ka=(()=>{class t{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(DN(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(DN(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||t)(j(ft),j(Vr),j(q0,9))}}static{this.\u0275dir=te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();function SN(t){return"number"==typeof t?t:parseFloat(t)}let Ya=(()=>{class t{constructor(){this._validator=lm}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):lm,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=te({type:t,features:[Dn]})}}return t})();const bz={provide:Gn,useExisting:qe(()=>ym),multi:!0};let ym=(()=>{class t extends Ya{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>SN(e),this.createValidator=e=>VI(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){2&i&&bt("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[pt([bz]),ot]})}}return t})();const wz={provide:Gn,useExisting:qe(()=>xh),multi:!0};let xh=(()=>{class t extends Ya{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>SN(e),this.createValidator=e=>BI(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){2&i&&bt("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[pt([wz]),ot]})}}return t})();const Cz={provide:Gn,useExisting:qe(()=>bm),multi:!0};let bm=(()=>{class t extends Ya{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fc,this.createValidator=e=>jI}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){2&i&&bt("required",o._enabled?"":null)},inputs:{required:"required"},features:[pt([Cz]),ot]})}}return t})();const Mz={provide:Gn,useExisting:qe(()=>Ih),multi:!0};let Ih=(()=>{class t extends Ya{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function TN(t){return"number"==typeof t?t:parseInt(t,10)}(e),this.createValidator=e=>zI(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275dir=te({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,o){2&i&&bt("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[pt([Mz]),ot]})}}return t})(),IN=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();class NN extends fm{constructor(n,e,i){super(B0(e),V0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let o=this._adjustIndex(n);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){lN(this,0,n),n.forEach((i,o)=>{aN(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,o)=>{i.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function ON(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let zc=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const o=this._reduceControls(e);let r={};return ON(i)?r=i:null!==i&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new Th(o,r)}record(e,i=null){const o=this._reduceControls(e);return new cN(o,i)}control(e,i,o){let r={};return this.useNonNullable?(ON(i)?r=i:(r.validators=i,r.asyncValidators=o),new Eh(e,{...r,nonNullable:!0})):new Eh(e,i,o)}array(e,i,o){const r=e.map(s=>this._createControl(s));return new NN(r,i,o)}_reduceControls(e){const i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){return e instanceof Eh||e instanceof fm?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ez=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:qa,useValue:e.callSetDisabledState??Sh}]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({imports:[IN]})}}return t})(),xz=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:z0,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:qa,useValue:e.callSetDisabledState??Sh}]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({imports:[IN]})}}return t})();function wm(...t){const n=mh(t),e=nm(t),{args:i,keys:o}=AI(t);if(0===i.length)return hn([],n);const r=new rt(function Nz(t,n,e=Ji){return i=>{PN(n,()=>{const{length:o}=t,r=new Array(o);let s=o,l=o;for(let c=0;c<o;c++)PN(n,()=>{const u=hn(t[c],n);let f=!1;u.subscribe(st(i,_=>{r[c]=_,f||(f=!0,l--),l||i.next(e(r.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,n,o?s=>RI(o,s):Ji));return e?r.pipe(O0(e)):r}function PN(t,n,e){t?Kr(e,t,n):n()}const Cm=_l(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Gc(t=1/0){return Vn(Ji,t)}function Nh(...t){return function Oz(){return Gc(1)}()(hn(t,mh(t)))}function AN(t){return new rt(n=>{Bn(t()).subscribe(n)})}function Fo(t,n){const e=Ke(t)?t:()=>t,i=o=>o.error(e());return new rt(n?o=>n.schedule(i,0,o):i)}const zi=new rt(t=>t.complete());function Z0(){return Ot((t,n)=>{let e=null;t._refCount++;const i=st(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,r=e;e=null,o&&(!r||o===r)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class RN extends rt{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ge(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new An;const e=this.getSubject();n.add(this.source.subscribe(st(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=An.EMPTY)}return n}refCount(){return Z0()(this)}}function ii(t){return t<=0?()=>zi:Ot((n,e)=>{let i=0;n.subscribe(st(e,o=>{++i<=t&&(e.next(o),t<=i&&e.complete())}))})}function K0(...t){const n=mh(t);return Ot((e,i)=>{(n?Nh(t,e,n):Nh(t,e)).subscribe(i)})}function Dm(t){return Ot((n,e)=>{let i=!1;n.subscribe(st(e,o=>{i=!0,e.next(o)},()=>{i||e.next(t),e.complete()}))})}function FN(t=Az){return Ot((n,e)=>{let i=!1;n.subscribe(st(e,o=>{i=!0,e.next(o)},()=>i?e.complete():e.error(t())))})}function Az(){return new Cm}function Qa(t,n){const e=arguments.length>=2;return i=>i.pipe(t?nn((o,r)=>t(o,r,i)):Ji,ii(1),e?Dm(n):FN(()=>new Cm))}function jn(t,n,e){const i=Ke(t)||n||e?{next:t,error:n,complete:e}:t;return i?Ot((o,r)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let l=!0;o.subscribe(st(r,c=>{var u;null===(u=i.next)||void 0===u||u.call(i,c),r.next(c)},()=>{var c;l=!1,null===(c=i.complete)||void 0===c||c.call(i),r.complete()},c=>{var u;l=!1,null===(u=i.error)||void 0===u||u.call(i,c),r.error(c)},()=>{var c,u;l&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(u=i.finalize)||void 0===u||u.call(i)}))}):Ji}function Bt(t){return Ot((n,e)=>{let r,i=null,o=!1;i=n.subscribe(st(e,void 0,void 0,s=>{r=Bn(t(s,Bt(t)(n))),i?(i.unsubscribe(),i=null,r.subscribe(e)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(e))})}function Y0(t){return t<=0?()=>zi:Ot((n,e)=>{let i=[];n.subscribe(st(e,o=>{i.push(o),t<i.length&&i.shift()},()=>{for(const o of i)e.next(o);e.complete()},void 0,()=>{i=null}))})}function Vt(t){return Ot((n,e)=>{Bn(t).subscribe(st(e,()=>e.complete(),kr)),!e.closed&&n.subscribe(e)})}const Ve="primary",Oh=Symbol("RouteTitle");class Bz{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Wc(t){return new Bz(t)}function Vz(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const o={};for(let r=0;r<i.length;r++){const s=i[r],l=t[r];if(s.startsWith(":"))o[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,i.length),posParams:o}}function gr(t,n){const e=t?Q0(t):void 0,i=n?Q0(n):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let r=0;r<e.length;r++)if(o=e[r],!BN(t[o],n[o]))return!1;return!0}function Q0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function BN(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((o,r)=>i[r]===o)}return t===n}function VN(t){return t.length>0?t[t.length-1]:null}function Ks(t){return function Iz(t){return!!t&&(t instanceof rt||Ke(t.lift)&&Ke(t.subscribe))}(t)?t:eh(t)?hn(Promise.resolve(t)):ue(t)}const $z={exact:function HN(t,n,e){if(!Ja(t.segments,n.segments)||!Tm(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!HN(t.children[i],n.children[i],e))return!1;return!0},subset:UN},jN={exact:function Hz(t,n){return gr(t,n)},subset:function Uz(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>BN(t[e],n[e]))},ignored:()=>!0};function $N(t,n,e){return $z[e.paths](t.root,n.root,e.matrixParams)&&jN[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function UN(t,n,e){return zN(t,n,n.segments,e)}function zN(t,n,e,i){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!Ja(o,e)||n.hasChildren()||!Tm(o,e,i))}if(t.segments.length===e.length){if(!Ja(t.segments,e)||!Tm(t.segments,e,i))return!1;for(const o in n.children)if(!t.children[o]||!UN(t.children[o],n.children[o],i))return!1;return!0}{const o=e.slice(0,t.segments.length),r=e.slice(t.segments.length);return!!(Ja(t.segments,o)&&Tm(t.segments,o,i)&&t.children[Ve])&&zN(t.children[Ve],n,r,i)}}function Tm(t,n,e){return n.every((i,o)=>jN[e](t[o].parameters,i.parameters))}class qc{constructor(n=new wt([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Wc(this.queryParams),this._queryParamMap}toString(){return Wz.serialize(this)}}class wt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sm(this)}}class Ph{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Wc(this.parameters),this._parameterMap}toString(){return qN(this)}}function Ja(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Zc=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>new J0,providedIn:"root"})}}return t})();class J0{parse(n){const e=new i9(n);return new qc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ah(n.root,!0)}`,i=function Kz(t){const n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(o=>`${Mm(e)}=${Mm(o)}`).join("&"):`${Mm(e)}=${Mm(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function qz(t){return encodeURI(t)}(n.fragment)}`:""}`}}const Wz=new J0;function Sm(t){return t.segments.map(n=>qN(n)).join("/")}function Ah(t,n){if(!t.hasChildren())return Sm(t);if(n){const e=t.children[Ve]?Ah(t.children[Ve],!1):"",i=[];return Object.entries(t.children).forEach(([o,r])=>{o!==Ve&&i.push(`${o}:${Ah(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Gz(t,n){let e=[];return Object.entries(t.children).forEach(([i,o])=>{i===Ve&&(e=e.concat(n(o,i)))}),Object.entries(t.children).forEach(([i,o])=>{i!==Ve&&(e=e.concat(n(o,i)))}),e}(t,(i,o)=>o===Ve?[Ah(t.children[Ve],!1)]:[`${o}:${Ah(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ve]?`${Sm(t)}/${e[0]}`:`${Sm(t)}/(${e.join("//")})`}}function GN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mm(t){return GN(t).replace(/%3B/gi,";")}function X0(t){return GN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function km(t){return decodeURIComponent(t)}function WN(t){return km(t.replace(/\+/g,"%20"))}function qN(t){return`${X0(t.path)}${function Zz(t){return Object.entries(t).map(([n,e])=>`;${X0(n)}=${X0(e)}`).join("")}(t.parameters)}`}const Yz=/^[^\/()?;#]+/;function e1(t){const n=t.match(Yz);return n?n[0]:""}const Qz=/^[^\/()?;=#]+/,Xz=/^[^=?&#]+/,t9=/^[^&#]+/;class i9{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Ve]=new wt(n,e)),i}parseSegment(){const n=e1(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(n),new Ph(km(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function Jz(t){const n=t.match(Qz);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=e1(this.remaining);o&&(i=o,this.capture(i))}n[km(e)]=km(i)}parseQueryParam(n){const e=function e9(t){const n=t.match(Xz);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=function n9(t){const n=t.match(t9);return n?n[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const o=WN(e),r=WN(i);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(r)}else n[o]=r}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=e1(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new F(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):n&&(r=Ve);const s=this.parseChildren();e[r]=1===Object.keys(s).length?s[Ve]:new wt([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new F(4011,!1)}}function ZN(t){return t.segments.length>0?new wt([],{[Ve]:t}):t}function KN(t){const n={};for(const[i,o]of Object.entries(t.children)){const r=KN(o);if(i===Ve&&0===r.segments.length&&r.hasChildren())for(const[s,l]of Object.entries(r.children))n[s]=l;else(r.segments.length>0||r.hasChildren())&&(n[i]=r)}return function o9(t){if(1===t.numberOfChildren&&t.children[Ve]){const n=t.children[Ve];return new wt(t.segments.concat(n.segments),n.children)}return t}(new wt(t.segments,n))}function Kc(t){return t instanceof qc}function YN(t){let n;const o=ZN(function e(r){const s={};for(const c of r.children){const u=e(c);s[c.outlet]=u}const l=new wt(r.url,s);return r===t&&(n=l),l}(t.root));return n??o}function QN(t,n,e,i){let o=t;for(;o.parent;)o=o.parent;if(0===n.length)return t1(o,o,o,e,i);const r=function s9(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new XN(!0,0,t);let n=0,e=!1;const i=t.reduce((o,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const l={};return Object.entries(r.outlets).forEach(([c,u])=>{l[c]="string"==typeof u?u.split("/"):u}),[...o,{outlets:l}]}if(r.segmentPath)return[...o,r.segmentPath]}return"string"!=typeof r?[...o,r]:0===s?(r.split("/").forEach((l,c)=>{0==c&&"."===l||(0==c&&""===l?e=!0:".."===l?n++:""!=l&&o.push(l))}),o):[...o,r]},[]);return new XN(e,n,i)}(n);if(r.toRoot())return t1(o,o,new wt([],{}),e,i);const s=function a9(t,n,e){if(t.isAbsolute)return new xm(n,!0,0);if(!e)return new xm(n,!1,NaN);if(null===e.parent)return new xm(e,!0,0);const i=Em(t.commands[0])?0:1;return function l9(t,n,e){let i=t,o=n,r=e;for(;r>o;){if(r-=o,i=i.parent,!i)throw new F(4005,!1);o=i.segments.length}return new xm(i,!1,o-r)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(r,o,t),l=s.processChildren?Fh(s.segmentGroup,s.index,r.commands):eO(s.segmentGroup,s.index,r.commands);return t1(o,s.segmentGroup,l,e,i)}function Em(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rh(t){return"object"==typeof t&&null!=t&&t.outlets}function t1(t,n,e,i,o){let s,r={};i&&Object.entries(i).forEach(([c,u])=>{r[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),s=t===n?e:JN(t,n,e);const l=ZN(KN(s));return new qc(l,r,o)}function JN(t,n,e){const i={};return Object.entries(t.children).forEach(([o,r])=>{i[o]=r===n?e:JN(r,n,e)}),new wt(t.segments,i)}class XN{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Em(i[0]))throw new F(4003,!1);const o=i.find(Rh);if(o&&o!==VN(i))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xm{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function eO(t,n,e){if(t??=new wt([],{}),0===t.segments.length&&t.hasChildren())return Fh(t,n,e);const i=function d9(t,n,e){let i=0,o=n;const r={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(i>=e.length)return r;const s=t.segments[o],l=e[i];if(Rh(l))break;const c=`${l}`,u=i<e.length-1?e[i+1]:null;if(o>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!nO(c,u,s))return r;i+=2}else{if(!nO(c,{},s))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(t,n,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const r=new wt(t.segments.slice(0,i.pathIndex),{});return r.children[Ve]=new wt(t.segments.slice(i.pathIndex),t.children),Fh(r,0,o)}return i.match&&0===o.length?new wt(t.segments,{}):i.match&&!t.hasChildren()?n1(t,n,e):i.match?Fh(t,0,o):n1(t,n,e)}function Fh(t,n,e){if(0===e.length)return new wt(t.segments,{});{const i=function c9(t){return Rh(t[0])?t[0].outlets:{[Ve]:t}}(e),o={};if(Object.keys(i).some(r=>r!==Ve)&&t.children[Ve]&&1===t.numberOfChildren&&0===t.children[Ve].segments.length){const r=Fh(t.children[Ve],n,e);return new wt(t.segments,r.children)}return Object.entries(i).forEach(([r,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[r]=eO(t.children[r],n,s))}),Object.entries(t.children).forEach(([r,s])=>{void 0===i[r]&&(o[r]=s)}),new wt(t.segments,o)}}function n1(t,n,e){const i=t.segments.slice(0,n);let o=0;for(;o<e.length;){const r=e[o];if(Rh(r)){const c=u9(r.outlets);return new wt(i,c)}if(0===o&&Em(e[0])){i.push(new Ph(t.segments[n].path,tO(e[0]))),o++;continue}const s=Rh(r)?r.outlets[Ve]:`${r}`,l=o<e.length-1?e[o+1]:null;s&&l&&Em(l)?(i.push(new Ph(s,tO(l))),o+=2):(i.push(new Ph(s,{})),o++)}return new wt(i,{})}function u9(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=n1(new wt([],{}),0,i))}),n}function tO(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function nO(t,n,e){return t==e.path&&gr(n,e.parameters)}const Lh="imperative";var Xe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Xe||{});class mr{constructor(n,e){this.id=n,this.url=e}}class Im extends mr{constructor(n,e,i="imperative",o=null){super(n,e),this.type=Xe.NavigationStart,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lo extends mr{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=Xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Gi=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Gi||{}),Nm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Nm||{});class Yc extends mr{constructor(n,e,i,o){super(n,e),this.reason=i,this.code=o,this.type=Xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qc extends mr{constructor(n,e,i,o){super(n,e),this.reason=i,this.code=o,this.type=Xe.NavigationSkipped}}class Om extends mr{constructor(n,e,i,o){super(n,e),this.error=i,this.target=o,this.type=Xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iO extends mr{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=Xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h9 extends mr{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=Xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f9 extends mr{constructor(n,e,i,o,r){super(n,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r,this.type=Xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class p9 extends mr{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=Xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g9 extends mr{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=Xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m9{constructor(n){this.route=n,this.type=Xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _9{constructor(n){this.route=n,this.type=Xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class v9{constructor(n){this.snapshot=n,this.type=Xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y9{constructor(n){this.snapshot=n,this.type=Xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b9{constructor(n){this.snapshot=n,this.type=Xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w9{constructor(n){this.snapshot=n,this.type=Xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oO{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=Xe.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class i1{}class o1{constructor(n){this.url=n}}class C9{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bh,this.attachRef=null}}let Bh=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new C9,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class rO{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=r1(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=r1(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=s1(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return s1(n,this._root).map(e=>e.value)}}function r1(t,n){if(t===n.value)return n;for(const e of n.children){const i=r1(t,e);if(i)return i}return null}function s1(t,n){if(t===n.value)return[n];for(const e of n.children){const i=s1(t,e);if(i.length)return i.unshift(n),i}return[]}class Bo{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jc(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class sO extends rO{constructor(n,e){super(n),this.snapshot=e,c1(this,n)}toString(){return this.snapshot.toString()}}function aO(t){const n=function D9(t){const r=new l1([],{},{},"",{},Ve,t,null,{});return new lO("",new Bo(r,[]))}(t),e=new vt([new Ph("",{})]),i=new vt({}),o=new vt({}),r=new vt({}),s=new vt(""),l=new Xc(e,i,r,s,o,Ve,t,n.root);return l.snapshot=n.root,new sO(new Bo(l,[]),n)}class Xc{constructor(n,e,i,o,r,s,l,c){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=s,this.component=l,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(u=>u[Oh]))??ue(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(n=>Wc(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(n=>Wc(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function a1(t,n,e="emptyOnly"){let i;const{routeConfig:o}=t;return i=null===n||"always"!==e&&""!==o?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.data,...o?.data,...t._resolvedData}},o&&dO(o)&&(i.resolve[Oh]=o.title),i}class l1{get title(){return this.data?.[Oh]}constructor(n,e,i,o,r,s,l,c,u){this.url=n,this.params=e,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=s,this.component=l,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lO extends rO{constructor(n,e){super(e),this.url=n,c1(this,e)}toString(){return cO(this._root)}}function c1(t,n){n.value._routerState=t,n.children.forEach(e=>c1(t,e))}function cO(t){const n=t.children.length>0?` { ${t.children.map(cO).join(", ")} } `:"";return`${t.value}${n}`}function d1(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,gr(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),gr(n.params,e.params)||t.paramsSubject.next(e.params),function jz(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!gr(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),gr(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function u1(t,n){const e=gr(t.params,n.params)&&function zz(t,n){return Ja(t,n)&&t.every((e,i)=>gr(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||u1(t.parent,n.parent))}function dO(t){return"string"==typeof t.title||null===t.title}let h1=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ve,this.activateEvents=new fe,this.deactivateEvents=new fe,this.attachEvents=new fe,this.detachEvents=new fe,this.parentContexts=N(Bh),this.location=N(Li),this.changeDetector=N(ji),this.environmentInjector=N(wn),this.inputBinder=N(Pm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new f1(e,l,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=te({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Dn]})}}return t})();class f1{__ngOutletInjector(n){return new f1(this.route,this.childContexts,n)}constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Xc?this.route:n===Bh?this.childContexts:this.parent.get(n,e)}}const Pm=new ee("");let uO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,o=wm([i.queryParams,i.params,i.data]).pipe(ni(([r,s,l],c)=>(l={...r,...s,...l},0===c?ue(l):Promise.resolve(l)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const s=function G8(t){const n=Re(t);if(!n)return null;const e=new Ou(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(s)for(const{templateName:l}of s.inputs)e.activatedComponentRef.setInput(l,r[l]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();function Vh(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const o=function S9(t,n,e){return n.children.map(i=>{for(const o of e.children)if(t.shouldReuseRoute(i.value,o.value.snapshot))return Vh(t,i,o);return Vh(t,i)})}(t,n,e);return new Bo(i,o)}{if(t.shouldAttach(n.value)){const r=t.retrieve(n.value);if(null!==r){const s=r.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(l=>Vh(t,l)),s}}const i=function M9(t){return new Xc(new vt(t.url),new vt(t.params),new vt(t.queryParams),new vt(t.fragment),new vt(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(r=>Vh(t,r));return new Bo(i,o)}}const hO="ngNavigationCancelingError";function fO(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=Kc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=pO(!1,Gi.Redirect);return o.url=e,o.navigationBehaviorOptions=i,o}function pO(t,n){const e=new Error(`NavigationCancelingError: ${t||""}`);return e[hO]=!0,e.cancellationCode=n,e}function gO(t){return!!t&&t[hO]}let mO=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ft({type:t,selectors:[["ng-component"]],standalone:!0,features:[No],decls:1,vars:0,template:function(i,o){1&i&&k(0,"router-outlet")},dependencies:[h1],encapsulation:2})}}return t})();function p1(t){const n=t.children&&t.children.map(p1),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Ve&&(e.component=mO),e}function _r(t){return t.outlet||Ve}function jh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class A9{constructor(n,e,i,o,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),d1(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const o=Jc(e);n.children.forEach(r=>{const s=r.value.outlet;this.deactivateRoutes(r,o[s],i),delete o[s]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(n,e,i){const o=n.value,r=e?e.value:null;if(o===r)if(o.component){const s=i.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),o=i&&n.value.component?i.children:e,r=Jc(n);for(const s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);if(i&&i.outlet){const s=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:l})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),o=i&&n.value.component?i.children:e,r=Jc(n);for(const s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const o=Jc(e);n.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new w9(r.value.snapshot))}),n.children.length&&this.forwardEvent(new y9(n.value.snapshot))}activateRoutes(n,e,i){const o=n.value,r=e?e.value:null;if(d1(o),o===r)if(o.component){const s=i.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,i);else if(o.component){const s=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),d1(l.route.value),this.activateChildRoutes(n,null,s.children)}else{const l=jh(o.snapshot);s.attachRef=null,s.route=o,s.injector=l,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,i)}}class _O{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Am{constructor(n,e){this.component=n,this.route=e}}function R9(t,n,e){const i=t._root;return $h(i,n?n._root:null,e,[i.value])}function ed(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function Vf(t){return null!==at(t)}(t)?n.get(t):t:i}function $h(t,n,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=Jc(n);return t.children.forEach(s=>{(function L9(t,n,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=t.value,s=n?n.value:null,l=e?e.getContext(t.value.outlet):null;if(s&&r.routeConfig===s.routeConfig){const c=function B9(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Ja(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Ja(t.url,n.url)||!gr(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u1(t,n)||!gr(t.queryParams,n.queryParams);default:return!u1(t,n)}}(s,r,r.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new _O(i)):(r.data=s.data,r._resolvedData=s._resolvedData),$h(t,n,r.component?l?l.children:null:e,i,o),c&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new Am(l.outlet.component,s))}else s&&Hh(n,l,o),o.canActivateChecks.push(new _O(i)),$h(t,null,r.component?l?l.children:null:e,i,o)})(s,r[s.value.outlet],e,i.concat([s.value]),o),delete r[s.value.outlet]}),Object.entries(r).forEach(([s,l])=>Hh(l,e.getContext(s),o)),o}function Hh(t,n,e){const i=Jc(t),o=t.value;Object.entries(i).forEach(([r,s])=>{Hh(s,o.component?n?n.children.getContext(r):null:n,e)}),e.canDeactivateChecks.push(new Am(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Uh(t){return"function"==typeof t}function vO(t){return t instanceof Cm||"EmptyError"===t?.name}const Rm=Symbol("INITIAL_VALUE");function td(){return ni(t=>wm(t.map(n=>n.pipe(ii(1),K0(Rm)))).pipe(le(n=>{for(const e of n)if(!0!==e){if(e===Rm)return Rm;if(!1===e||e instanceof qc)return e}return!0}),nn(n=>n!==Rm),ii(1)))}function yO(t){return function l_(...t){return Mf(t)}(jn(n=>{if(Kc(n))throw fO(0,n)}),le(n=>!0===n))}class g1{constructor(n){this.segmentGroup=n||null}}class m1 extends Error{constructor(n){super(),this.urlTree=n}}function nd(t){return Fo(new g1(t))}class iG{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return ue(i);if(o.numberOfChildren>1||!o.children[Ve])return Fo(new F(4e3,!1));o=o.children[Ve]}}applyRedirectCommands(n,e,i){const o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if(e.startsWith("/"))throw new m1(o);return o}applyRedirectCreateUrlTree(n,e,i,o){const r=this.createSegmentGroup(n,e.root,i,o);return new qc(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([o,r])=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);i[o]=e[l]}else i[o]=r}),i}createSegmentGroup(n,e,i,o){const r=this.createSegments(n,e.segments,i,o);let s={};return Object.entries(e.children).forEach(([l,c])=>{s[l]=this.createSegmentGroup(n,c,i,o)}),new wt(r,s)}createSegments(n,e,i,o){return e.map(r=>r.path.startsWith(":")?this.findPosParam(n,r,o):this.findOrReturn(r,i))}findPosParam(n,e,i){const o=i[e.path.substring(1)];if(!o)throw new F(4001,!1);return o}findOrReturn(n,e){let i=0;for(const o of e){if(o.path===n.path)return e.splice(i),o;i++}return n}}const _1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oG(t,n,e,i,o){const r=v1(t,n,e);return r.matched?(i=function E9(t,n){return t.providers&&!t._injector&&(t._injector=Xp(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function eG(t,n,e,i){const o=n.canMatch;return o&&0!==o.length?ue(o.map(s=>{const l=ed(s,t);return Ks(function z9(t){return t&&Uh(t.canMatch)}(l)?l.canMatch(n,e):oo(t,()=>l(n,e)))})).pipe(td(),yO()):ue(!0)}(i,n,e).pipe(le(s=>!0===s?r:{..._1}))):ue(r)}function v1(t,n,e){if("**"===n.path)return function rG(t){return{matched:!0,parameters:t.length>0?VN(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{..._1}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||Vz)(e,t,n);if(!o)return{..._1};const r={};Object.entries(o.posParams??{}).forEach(([l,c])=>{r[l]=c.path});const s=o.consumed.length>0?{...r,...o.consumed[o.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function bO(t,n,e,i){return e.length>0&&function lG(t,n,e){return e.some(i=>Fm(t,n,i)&&_r(i)!==Ve)}(t,e,i)?{segmentGroup:new wt(n,aG(i,new wt(e,t.children))),slicedSegments:[]}:0===e.length&&function cG(t,n,e){return e.some(i=>Fm(t,n,i))}(t,e,i)?{segmentGroup:new wt(t.segments,sG(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new wt(t.segments,t.children),slicedSegments:e}}function sG(t,n,e,i){const o={};for(const r of e)if(Fm(t,n,r)&&!i[_r(r)]){const s=new wt([],{});o[_r(r)]=s}return{...i,...o}}function aG(t,n){const e={};e[Ve]=n;for(const i of t)if(""===i.path&&_r(i)!==Ve){const o=new wt([],{});e[_r(i)]=o}return e}function Fm(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class hG{}class gG{constructor(n,e,i,o,r,s,l){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new iG(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new F(4002,`'${n.segmentGroup}'`)}recognize(){const n=bO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(le(e=>{const i=new l1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ve,this.rootComponentType,null,{}),o=new Bo(i,e),r=new lO("",o),s=function r9(t,n,e=null,i=null){return QN(YN(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(r._root,null),{state:r,tree:s}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,Ve).pipe(Bt(i=>{if(i instanceof m1)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof g1?this.noMatchError(i):i}))}inheritParamsAndData(n,e){const i=n.value,o=a1(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(o.params),i.data=Object.freeze(o.data),n.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(n,e,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,o,!0).pipe(le(r=>r instanceof Bo?[r]:[]))}processChildren(n,e,i){const o=[];for(const r of Object.keys(i.children))"primary"===r?o.unshift(r):o.push(r);return hn(o).pipe(Vc(r=>{const s=i.children[r],l=function O9(t,n){const e=t.filter(i=>_r(i)===n);return e.push(...t.filter(i=>_r(i)!==n)),e}(e,r);return this.processSegmentGroup(n,l,s,r)}),function Fz(t,n){return Ot(function Rz(t,n,e,i,o){return(r,s)=>{let l=e,c=n,u=0;r.subscribe(st(s,f=>{const _=u++;c=l?t(c,f,_):(l=!0,f),i&&s.next(c)},o&&(()=>{l&&s.next(c),s.complete()})))}}(t,n,arguments.length>=2,!0))}((r,s)=>(r.push(...s),r)),Dm(null),function Lz(t,n){const e=arguments.length>=2;return i=>i.pipe(t?nn((o,r)=>t(o,r,i)):Ji,Y0(1),e?Dm(n):FN(()=>new Cm))}(),Vn(r=>{if(null===r)return nd(i);const s=wO(r);return function mG(t){t.sort((n,e)=>n.value.outlet===Ve?-1:e.value.outlet===Ve?1:n.value.outlet.localeCompare(e.value.outlet))}(s),ue(s)}))}processSegment(n,e,i,o,r,s){return hn(e).pipe(Vc(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,o,r,s).pipe(Bt(c=>{if(c instanceof g1)return ue(null);throw c}))),Qa(l=>!!l),Bt(l=>{if(vO(l))return function uG(t,n,e){return 0===n.length&&!t.children[e]}(i,o,r)?ue(new hG):nd(i);throw l}))}processSegmentAgainstRoute(n,e,i,o,r,s,l){return function dG(t,n,e,i){return!!(_r(t)===i||i!==Ve&&Fm(n,e,t))&&v1(n,t,e).matched}(i,o,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,o,i,r,s):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,i,r,s):nd(o):nd(o)}expandSegmentAgainstRouteUsingRedirect(n,e,i,o,r,s){const{matched:l,consumedSegments:c,positionalParamSegments:u,remainingSegments:f}=v1(e,o,r);if(!l)return nd(e);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const _=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return this.applyRedirects.lineralizeSegments(o,_).pipe(Vn(w=>this.processSegment(n,i,e,w.concat(f),s,!1)))}matchSegmentAgainstRoute(n,e,i,o,r){const s=oG(e,i,o,n);return"**"===i.path&&(e.children={}),s.pipe(ni(l=>l.matched?this.getChildConfig(n=i._injector??n,i,o).pipe(ni(({routes:c})=>{const u=i._loadedInjector??n,{consumedSegments:f,remainingSegments:_,parameters:w}=l,C=new l1(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function vG(t){return t.data||{}}(i),_r(i),i.component??i._loadedComponent??null,i,function yG(t){return t.resolve||{}}(i)),{segmentGroup:T,slicedSegments:S}=bO(e,f,_,c);if(0===S.length&&T.hasChildren())return this.processChildren(u,c,T).pipe(le(O=>null===O?null:new Bo(C,O)));if(0===c.length&&0===S.length)return ue(new Bo(C,[]));const x=_r(i)===r;return this.processSegment(u,c,T,S,x?Ve:r,!0).pipe(le(O=>new Bo(C,O instanceof Bo?[O]:[])))})):nd(e)))}getChildConfig(n,e,i){return e.children?ue({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?ue({routes:e._loadedRoutes,injector:e._loadedInjector}):function X9(t,n,e,i){const o=n.canLoad;return void 0===o||0===o.length?ue(!0):ue(o.map(s=>{const l=ed(s,t);return Ks(function j9(t){return t&&Uh(t.canLoad)}(l)?l.canLoad(n,e):oo(t,()=>l(n,e)))})).pipe(td(),yO())}(n,e,i).pipe(Vn(o=>o?this.configLoader.loadChildren(n,e).pipe(jn(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):function nG(t){return Fo(pO(!1,Gi.GuardRejected))}())):ue({routes:[],injector:n})}}function _G(t){const n=t.value.routeConfig;return n&&""===n.path}function wO(t){const n=[],e=new Set;for(const i of t){if(!_G(i)){n.push(i);continue}const o=n.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==o?(o.children.push(...i.children),e.add(o)):n.push(i)}for(const i of e){const o=wO(i.children);n.push(new Bo(i.value,o))}return n.filter(i=>!e.has(i))}function wG(t,n){return Vn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return ue(e);const r=new Set(o.map(c=>c.route)),s=new Set;for(const c of r)if(!s.has(c))for(const u of CO(c))s.add(u);let l=0;return hn(s).pipe(Vc(c=>r.has(c)?function CG(t,n,e,i){const o=t.routeConfig,r=t._resolve;return void 0!==o?.title&&!dO(o)&&(r[Oh]=o.title),function DG(t,n,e,i){const o=Q0(t);if(0===o.length)return ue({});const r={};return hn(o).pipe(Vn(s=>function TG(t,n,e,i){const o=jh(n)??i,r=ed(t,o);return Ks(r.resolve?r.resolve(n,e):oo(o,()=>r(n,e)))}(t[s],n,e,i).pipe(Qa(),jn(l=>{r[s]=l}))),Y0(1),function LN(t){return le(()=>t)}(r),Bt(s=>vO(s)?zi:Fo(s)))}(r,t,n,i).pipe(le(s=>(t._resolvedData=s,t.data=a1(t,t.parent,e).resolve,null)))}(c,i,t,n):(c.data=a1(c,c.parent,t).resolve,ue(void 0))),jn(()=>l++),Y0(1),Vn(c=>l===s.size?ue(e):zi))})}function CO(t){const n=t.children.map(e=>CO(e)).flat();return[t,...n]}function y1(t){return ni(n=>{const e=t(n);return e?hn(e).pipe(le(()=>n)):ue(n)})}let DO=(()=>{class t{buildTitle(e){let i,o=e.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===Ve);return i}getResolvedTitleForRoute(e){return e.data[Oh]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(SG),providedIn:"root"})}}return t})(),SG=(()=>{class t extends DO{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||t)(oe(h$))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const id=new ee("",{providedIn:"root",factory:()=>({})}),od=new ee("");let b1=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(xk)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ue(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Ks(e.loadComponent()).pipe(le(TO),jn(r=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=r}),_h(()=>{this.componentLoaders.delete(e)})),o=new RN(i,()=>new Ge).pipe(Z0());return this.componentLoaders.set(e,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ue({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=function MG(t,n,e,i){return Ks(t.loadChildren()).pipe(le(TO),Vn(o=>o instanceof GT||Array.isArray(o)?ue(o):hn(n.compileModuleAsync(o))),le(o=>{i&&i(t);let r,s,l=!1;return Array.isArray(o)?(s=o,!0):(r=o.create(e).injector,s=r.get(od,[],{optional:!0,self:!0}).flat()),{routes:s.map(p1),injector:r}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(_h(()=>{this.childrenLoaders.delete(i)})),s=new RN(r,()=>new Ge).pipe(Z0());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function TO(t){return function kG(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let w1=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(EG),providedIn:"root"})}}return t})(),EG=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const SO=new ee(""),MO=new ee("");function xG(t,n,e){const i=t.get(MO),o=t.get(tn);return t.get($e).runOutsideAngular(()=>{if(!o.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let r;const s=new Promise(u=>{r=u}),l=o.startViewTransition(()=>(r(),function IG(t){return new Promise(n=>{sy(n,{injector:t})})}(t))),{onViewTransitionCreated:c}=i;return c&&oo(t,()=>c({transition:l,from:n,to:e})),s})}let Lm=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=N(b1),this.environmentInjector=N(wn),this.urlSerializer=N(Zc),this.rootContexts=N(Bh),this.location=N(ih),this.inputBindingEnabled=null!==N(Pm,{optional:!0}),this.titleStrategy=N(DO),this.options=N(id,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(w1),this.createViewTransition=N(SO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new _9(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new m9(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,o){return this.transitions=new vt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lh,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(nn(r=>0!==r.id),le(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ni(r=>{let s=!1,l=!1;return ue(r).pipe(ni(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gi.SupersededByNewNavigation),zi;this.currentTransition=r,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const _="";return this.events.next(new Qc(c.id,this.urlSerializer.serialize(c.rawUrl),_,Nm.IgnoredSameUrlNavigation)),c.resolve(null),zi}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(ni(_=>{const w=this.transitions?.getValue();return this.events.next(new Im(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),w!==this.transitions?.getValue()?zi:Promise.resolve(_)}),function bG(t,n,e,i,o,r){return Vn(s=>function fG(t,n,e,i,o,r,s="emptyOnly"){return new gG(t,n,e,i,o,s,r).recognize()}(t,n,e,i,s.extractedUrl,o,r).pipe(le(({state:l,tree:c})=>({...s,targetSnapshot:l,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),jn(_=>{r.targetSnapshot=_.targetSnapshot,r.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const w=new iO(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:_,extractedUrl:w,source:C,restoredState:T,extras:S}=c,x=new Im(_,this.urlSerializer.serialize(w),C,T);this.events.next(x);const O=aO(this.rootComponentType).snapshot;return this.currentTransition=r={...c,targetSnapshot:O,urlAfterRedirects:w,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=w,ue(r)}{const _="";return this.events.next(new Qc(c.id,this.urlSerializer.serialize(c.extractedUrl),_,Nm.IgnoredByUrlHandlingStrategy)),c.resolve(null),zi}}),jn(c=>{const u=new h9(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),le(c=>(this.currentTransition=r={...c,guards:R9(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},r)),function G9(t,n){return Vn(e=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:s}}=e;return 0===s.length&&0===r.length?ue({...e,guardsResult:!0}):function W9(t,n,e,i){return hn(t).pipe(Vn(o=>function J9(t,n,e,i,o){const r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?ue(r.map(l=>{const c=jh(n)??o,u=ed(l,c);return Ks(function U9(t){return t&&Uh(t.canDeactivate)}(u)?u.canDeactivate(t,n,e,i):oo(c,()=>u(t,n,e,i))).pipe(Qa())})).pipe(td()):ue(!0)}(o.component,o.route,e,n,i)),Qa(o=>!0!==o,!0))}(s,i,o,t).pipe(Vn(l=>l&&function V9(t){return"boolean"==typeof t}(l)?function q9(t,n,e,i){return hn(n).pipe(Vc(o=>Nh(function K9(t,n){return null!==t&&n&&n(new v9(t)),ue(!0)}(o.route.parent,i),function Z9(t,n){return null!==t&&n&&n(new b9(t)),ue(!0)}(o.route,i),function Q9(t,n,e){const i=n[n.length-1],r=n.slice(0,n.length-1).reverse().map(s=>function F9(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>AN(()=>ue(s.guards.map(c=>{const u=jh(s.node)??e,f=ed(c,u);return Ks(function H9(t){return t&&Uh(t.canActivateChild)}(f)?f.canActivateChild(i,t):oo(u,()=>f(i,t))).pipe(Qa())})).pipe(td())));return ue(r).pipe(td())}(t,o.path,e),function Y9(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return ue(!0);const o=i.map(r=>AN(()=>{const s=jh(n)??e,l=ed(r,s);return Ks(function $9(t){return t&&Uh(t.canActivate)}(l)?l.canActivate(n,t):oo(s,()=>l(n,t))).pipe(Qa())}));return ue(o).pipe(td())}(t,o.route,e))),Qa(o=>!0!==o,!0))}(i,r,t,n):ue(l)),le(l=>({...e,guardsResult:l})))})}(this.environmentInjector,c=>this.events.next(c)),jn(c=>{if(r.guardsResult=c.guardsResult,Kc(c.guardsResult))throw fO(0,c.guardsResult);const u=new f9(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),nn(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Gi.GuardRejected),!1)),y1(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(jn(u=>{const f=new p9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),ni(u=>{let f=!1;return ue(u).pipe(wG(this.paramsInheritanceStrategy,this.environmentInjector),jn({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Gi.NoDataFromResolver)}}))}),jn(u=>{const f=new g9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),y1(c=>{const u=f=>{const _=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(f.routeConfig).pipe(jn(w=>{f.component=w}),le(()=>{})));for(const w of f.children)_.push(...u(w));return _};return wm(u(c.targetSnapshot.root)).pipe(Dm(null),ii(1))}),y1(()=>this.afterPreactivation()),ni(()=>{const{currentSnapshot:c,targetSnapshot:u}=r,f=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return f?hn(f).pipe(le(()=>r)):ue(r)}),le(c=>{const u=function T9(t,n,e){const i=Vh(t,n._root,e?e._root:void 0);return new sO(i,n)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=r={...c,targetRouterState:u},this.currentNavigation.targetRouterState=u,r}),jn(()=>{this.events.next(new i1)}),((t,n,e,i)=>le(o=>(new A9(n,o.targetRouterState,o.currentRouterState,e,i).activate(t),o)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ii(1),jn({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Vt(this.transitionAbortSubject.pipe(jn(c=>{throw c}))),_h(()=>{!s&&!l&&this.cancelNavigationTransition(r,"",Gi.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bt(c=>{if(l=!0,gO(c))this.events.next(new Yc(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),function k9(t){return gO(t)&&Kc(t.url)}(c)?this.events.next(new o1(c.url)):r.resolve(!1);else{this.events.next(new Om(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0));try{r.resolve(e.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return zi}))}))}cancelNavigationTransition(e,i,o){const r=new Yc(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function NG(t){return t!==Lh}let OG=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(AG),providedIn:"root"})}}return t})();class PG{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let AG=(()=>{class t extends PG{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kO=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:()=>N(RG),providedIn:"root"})}}return t})(),RG=(()=>{class t extends kO{constructor(){super(...arguments),this.location=N(ih),this.urlSerializer=N(Zc),this.options=N(id,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(w1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new qc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=aO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{"popstate"===i.type&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof Im)this.stateMemento=this.createStateMemento();else if(e instanceof Qc)this.rawUrlTree=i.initialUrl;else if(e instanceof iO){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else e instanceof i1?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):e instanceof Yc&&(e.code===Gi.GuardRejected||e.code===Gi.NoDataFromResolver)?this.restoreHistory(i):e instanceof Om?this.restoreHistory(i,!0):e instanceof Lo&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",r)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-this.browserPageId;0!==r?this.location.historyGo(r):this.currentUrlTree===e.finalUrl&&0===r&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Et(t)))(o||t)}})()}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var zh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(zh||{});function EO(t,n){t.events.pipe(nn(e=>e instanceof Lo||e instanceof Yc||e instanceof Om||e instanceof Qc),le(e=>e instanceof Lo||e instanceof Qc?zh.COMPLETE:e instanceof Yc&&(e.code===Gi.Redirect||e.code===Gi.SupersededByNewNavigation)?zh.REDIRECTING:zh.FAILED),nn(e=>e!==zh.REDIRECTING),ii(1)).subscribe(()=>{n()})}function FG(t){throw t}const LG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=N(yk),this.stateManager=N(kO),this.options=N(id,{optional:!0})||{},this.pendingTasks=N(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(Lm),this.urlSerializer=N(Zc),this.location=N(ih),this.urlHandlingStrategy=N(w1),this._events=new Ge,this.errorHandler=this.options.errorHandler||FG,this.navigated=!1,this.routeReuseStrategy=N(OG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(od,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(Pm,{optional:!0}),this.eventsSubscription=new An,this.isNgZoneEnabled=N($e)instanceof $e&&$e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const o=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(null!==o&&null!==r)if(this.stateManager.handleRouterEvent(i,r),i instanceof Yc&&i.code!==Gi.Redirect&&i.code!==Gi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Lo)this.navigated=!0;else if(i instanceof o1){const s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||NG(o.source)};this.scheduleNavigation(s,Lh,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function jG(t){return!(t instanceof i1||t instanceof o1)})(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,o){const r={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(r.state=c)}const l=this.parseUrl(e);this.scheduleNavigation(l,i,s,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(p1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:o,queryParams:r,fragment:s,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:s;let _,f=null;switch(l){case"merge":f={...this.currentUrlTree.queryParams,...r};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}null!==f&&(f=this.removeEmptyProps(f));try{_=YN(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),_=this.currentUrlTree.root}return QN(_,e,f,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){const o=Kc(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,Lh,null,i)}navigate(e,i={skipLocationChange:!1}){return function VG(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new F(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let o;if(o=!0===i?{...LG}:!1===i?{...BG}:i,Kc(e))return $N(this.currentUrlTree,e,o);const r=this.parseUrl(e);return $N(this.currentUrlTree,r,o)}removeEmptyProps(e){return Object.entries(e).reduce((i,[o,r])=>(null!=r&&(i[o]=r),i),{})}scheduleNavigation(e,i,o,r,s){if(this.disposed)return Promise.resolve(!1);let l,c,u;s?(l=s.resolve,c=s.reject,u=s.promise):u=new Promise((_,w)=>{l=_,c=w});const f=this.pendingTasks.add();return EO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(_=>Promise.reject(_))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Gh=(()=>{class t{constructor(e,i,o,r,s,l){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=r,this.el=s,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new Ge,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Lo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,o,r,s){const l=this.urlTree;return!!(null===l||this.isAnchorElement&&(0!==e||i||o||r||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(l,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const e=this.urlTree;this.href=null!==e&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;const i=null===this.href?null:function iD(t,n,e){return function KR(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?nD:tD}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){const o=this.renderer,r=this.el.nativeElement;null!==i?o.setAttribute(r,e,i):o.removeAttribute(r,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||t)(j(fn),j(Xc),function Ds(t){return function E2(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let o=0;for(;o<i;){const r=e[o];if(Kf(r))break;if(0===r)o+=2;else if("number"==typeof r)for(o++;o<i&&"string"==typeof e[o];)o++;else{if(r===n)return e[o+1];o+=2}}}return null}(ht(),t)}("tabindex"),j(Vr),j(ft),j(ja))}}static{this.\u0275dir=te({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){1&i&&B("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&i&&bt("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Je.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Fc],skipLocationChange:[Je.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Fc],replaceUrl:[Je.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Fc],routerLink:"routerLink"},standalone:!0,features:[zT,Dn]})}}return t})(),xO=(()=>{class t{get isActive(){return this._isActive}constructor(e,i,o,r,s){this.router=e,this.element=i,this.renderer=o,this.cdr=r,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new fe,this.routerEventsSubscription=e.events.subscribe(l=>{l instanceof Lo&&this.update()})}ngAfterContentInit(){ue(this.links.changes,ue(null)).pipe(Gc()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=hn(e).pipe(Gc()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function $G(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{const r=o.urlTree;return!!r&&e.isActive(r,i)}}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||t)(j(fn),j(ft),j(Vr),j(ji),j(Gh,8))}}static{this.\u0275dir=te({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,r){if(1&i&&kn(r,Gh,5),2&i){let s;Pt(s=At())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Dn]})}}return t})();class IO{}let HG=(()=>{class t{constructor(e,i,o,r,s){this.router=e,this.injector=o,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(nn(e=>e instanceof Lo),Vc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const o=[];for(const r of i){r.providers&&!r._injector&&(r._injector=Xp(r.providers,e,`Route: ${r.path}`));const s=r._injector??e,l=r._loadedInjector??s;(r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent)&&o.push(this.preloadConfig(s,r)),(r.children||r._loadedRoutes)&&o.push(this.processRoutes(l,r.children??r._loadedRoutes))}return hn(o).pipe(Gc())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ue(null);const r=o.pipe(Vn(s=>null===s?ue(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return i.loadComponent&&!i._loadedComponent?hn([r,this.loader.loadComponent(i)]).pipe(Gc()):r})}static{this.\u0275fac=function(i){return new(i||t)(oe(fn),oe(xk),oe(wn),oe(IO),oe(b1))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const C1=new ee("");let NO=(()=>{class t{constructor(e,i,o,r,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=o,this.zone=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=N(wn),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Im?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Lo?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Qc&&e.code===Nm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof oO&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){var o=this;this.zone.runOutsideAngular(de(function*(){yield new Promise(r=>{setTimeout(()=>{r()}),sy(()=>{r()},{injector:o.environmentInjector})}),o.zone.run(()=>{o.transitions.events.next(new oO(e,"popstate"===o.lastSource?o.store[o.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){!function kD(){throw new Error("invalid")}()}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();function vr(t,n){return{\u0275kind:t,\u0275providers:n}}function PO(){const t=N(Sn);return n=>{const e=t.get(Hr);if(n!==e.components[0])return;const i=t.get(fn),o=t.get(AO);1===t.get(D1)&&i.initialNavigation(),t.get(RO,null,Le.Optional)?.setUpPreloading(),t.get(C1,null,Le.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const AO=new ee("",{factory:()=>new Ge}),D1=new ee("",{providedIn:"root",factory:()=>1}),RO=new ee("");function WG(t){return vr(0,[{provide:RO,useExisting:HG},{provide:IO,useExisting:t}])}function ZG(t){return vr(9,[{provide:SO,useValue:xG},{provide:MO,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const FO=new ee("ROUTER_FORROOT_GUARD"),KG=[ih,{provide:Zc,useClass:J0},fn,Bh,{provide:Xc,useFactory:function OO(t){return t.routerState.root},deps:[fn]},b1,[]];let YG=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[KG,[],{provide:od,multi:!0,useValue:e},{provide:FO,useFactory:eW,deps:[[fn,new Fl,new Ll]]},{provide:id,useValue:i||{}},i?.useHash?{provide:ja,useClass:Y8}:{provide:ja,useClass:yE},{provide:C1,useFactory:()=>{const t=N(fj),n=N($e),e=N(id),i=N(Lm),o=N(Zc);return e.scrollOffset&&t.setOffset(e.scrollOffset),new NO(o,i,t,n,e)}},i?.preloadingStrategy?WG(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?tW(i):[],i?.bindToComponentInputs?vr(8,[uO,{provide:Pm,useExisting:uO}]).\u0275providers:[],i?.enableViewTransitions?ZG().\u0275providers:[],[{provide:LO,useFactory:PO},{provide:ab,multi:!0,useExisting:LO}]]}}static forChild(e){return{ngModule:t,providers:[{provide:od,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||t)(oe(FO,8))}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();function eW(t){return"guarded"}function tW(t){return["disabled"===t.initialNavigation?vr(3,[{provide:rb,multi:!0,useFactory:()=>{const n=N(fn);return()=>{n.setUpLocationChangeListener()}}},{provide:D1,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?vr(2,[{provide:D1,useValue:0},{provide:rb,multi:!0,deps:[Sn],useFactory:n=>{const e=n.get(Z8,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const o=n.get(fn),r=n.get(AO);EO(o,()=>{i(!0)}),n.get(Lm).afterPreactivation=()=>(i(!0),r.closed?ue(void 0):r),o.initialNavigation()}))}}]).\u0275providers:[]]}const LO=new ee(""),sW=["addListener","removeListener"],aW=["addEventListener","removeEventListener"],lW=["on","off"];function Wn(t,n,e,i){if(Ke(e)&&(i=e,e=void 0),i)return Wn(t,n,e).pipe(O0(i));const[o,r]=function uW(t){return Ke(t.addEventListener)&&Ke(t.removeEventListener)}(t)?aW.map(s=>l=>t[s](n,l,e)):function cW(t){return Ke(t.addListener)&&Ke(t.removeListener)}(t)?sW.map(BO(t,n)):function dW(t){return Ke(t.on)&&Ke(t.off)}(t)?lW.map(BO(t,n)):[];if(!o&&M0(t))return Vn(s=>Wn(s,n,e))(Bn(t));if(!o)throw new TypeError("Invalid event target");return new rt(s=>{const l=(...c)=>s.next(1<c.length?c:c[0]);return o(l),()=>r(l)})}function BO(t,n){return e=>i=>t[e](n,i)}class hW extends An{constructor(n,e){super()}schedule(n,e=0){return this}}const Bm={setInterval(t,n,...e){const{delegate:i}=Bm;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=Bm;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},VO={now:()=>(VO.delegate||Date).now(),delegate:void 0};class Wh{constructor(n,e=Wh.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Wh.now=VO.now;const T1=new class pW extends Wh{constructor(n,e=Wh.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class fW extends hW{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return Bm.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&Bm.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let o,i=!1;try{this.work(n)}catch(r){i=!0,o=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Mr(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),gW=T1;function S1(t=0,n,e=gW){let i=-1;return null!=n&&(Zx(n)?e=n:i=n),new rt(o=>{let r=function mW(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;r<0&&(r=0);let s=0;return e.schedule(function(){o.closed||(o.next(s++),0<=i?this.schedule(void 0,i):o.complete())},r)})}const{isArray:_W}=Array;function jO(t){return 1===t.length&&_W(t[0])?t[0]:t}function M1(...t){const n=nm(t),e=jO(t);return e.length?new rt(i=>{let o=e.map(()=>[]),r=e.map(()=>!1);i.add(()=>{o=r=null});for(let s=0;!i.closed&&s<e.length;s++)Bn(e[s]).subscribe(st(i,l=>{if(o[s].push(l),o.every(c=>c.length)){const c=o.map(u=>u.shift());i.next(n?n(...c):c),o.some((u,f)=>!u.length&&r[f])&&i.complete()}},()=>{r[s]=!0,!o[s].length&&i.complete()}));return()=>{o=r=null}}):zi}function k1(...t){const n=nm(t);return Ot((e,i)=>{const o=t.length,r=new Array(o);let s=t.map(()=>!1),l=!1;for(let c=0;c<o;c++)Bn(t[c]).subscribe(st(i,u=>{r[c]=u,!l&&!s[c]&&(s[c]=!0,(l=s.every(Ji))&&(s=null))},kr));e.subscribe(st(i,c=>{if(l){const u=[c,...r];i.next(n?n(...u):u)}}))})}function rd(t,n=Ji){return t=t??DW,Ot((e,i)=>{let o,r=!0;e.subscribe(st(i,s=>{const l=n(s);(r||!t(o,l))&&(r=!1,o=l,i.next(s))}))})}function DW(t,n){return t===n}Math,Math,Math;const Eq=["*"],oZ=["dialog"],sP={animation:!0,transitionTimerDelayMs:5};let Um=(()=>{class t{constructor(){this.animation=sP.animation}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function dd(t){return"string"==typeof t}function tl(t){return null!=t}function ud(t){return(t||document.body).getBoundingClientRect()}const QZ=()=>{},{transitionTimerDelayMs:JZ}=sP,Xh=new Map,go=(t,n,e,i)=>{let o=i.context||{};const r=Xh.get(n);if(r)switch(i.runningTransition){case"continue":return zi;case"stop":t.run(()=>r.transition$.complete()),o=Object.assign(r.context,o),Xh.delete(n)}const s=e(n,i.animation,o)||QZ;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>s()),ue(void 0).pipe(function YZ(t){return n=>new rt(e=>n.subscribe({next:s=>t.run(()=>e.next(s)),error:s=>t.run(()=>e.error(s)),complete:()=>t.run(()=>e.complete())}))}(t));const l=new Ge,c=new Ge,u=l.pipe(function bW(...t){return n=>Nh(n,ue(...t))}(!0));Xh.set(n,{transition$:l,complete:()=>{c.next(),c.complete()},context:o});const f=function qZ(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const _=Wn(n,"transitionend").pipe(Vt(u),nn(({target:C})=>C===n));(function $O(...t){return 1===(t=jO(t)).length?Bn(t[0]):new rt(function vW(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(Bn(t[i]).subscribe(st(n,o=>{if(e){for(let r=0;r<e.length;r++)r!==i&&e[r].unsubscribe();e=null}n.next(o)})))}}(t))})(S1(f+JZ).pipe(Vt(u)),_,c).pipe(Vt(u)).subscribe(()=>{Xh.delete(n),t.run(()=>{s(),l.next(),l.complete()})})}),l.asObservable()};let fP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),pP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),_P=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),vP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();var Dt=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Dt||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const SP=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function MP(t){const n=Array.from(t.querySelectorAll(SP)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let HP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),zP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),tY=(()=>{class t{constructor(){this._ngbConfig=N(Um),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class sl{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}let nY=(()=>{class t{constructor(){this._document=N(tn)}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,o=i.style,{overflow:r,paddingRight:s}=o;if(e>0){const l=parseFloat(window.getComputedStyle(i).paddingRight);o.paddingRight=`${l+e}px`}return o.overflow="hidden",()=>{e>0&&(o.paddingRight=s),o.overflow=r}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),iY=(()=>{class t{constructor(){this._nativeElement=N(ft).nativeElement,this._zone=N($e)}ngOnInit(){this._zone.onStable.asObservable().pipe(ii(1)).subscribe(()=>{go(this._zone,this._nativeElement,(e,i)=>{i&&ud(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return go(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ft({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,o){2&i&&(Ra("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),Z("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[No],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return t})();class GP{update(n){}close(n){}dismiss(n){}}const oY=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],rY=["animation","backdropClass"];class sY{_applyWindowOptions(n,e){oY.forEach(i=>{tl(e[i])&&(n[i]=e[i])})}_applyBackdropOptions(n,e){rY.forEach(i=>{tl(e[i])&&(n[i]=e[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Vt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Vt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,e,i,o){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=o,this._closed=new Ge,this._dismissed=new Ge,this._hidden=new Ge,n.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function aP(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ue(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),M1(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Q1=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(Q1||{});let aY=(()=>{class t{constructor(){this._document=N(tn),this._elRef=N(ft),this._zone=N($e),this._closed$=new Ge,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new fe,this.shown=new Ge,this.hidden=new Ge}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":dd(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ii(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=M1(go(this._zone,e,()=>e.classList.remove("show"),i),go(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};M1(go(this._zone,this._elRef.nativeElement,(r,s)=>{s&&ud(r),r.classList.add("show")},e),go(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Wn(e,"keydown").pipe(Vt(this._closed$),nn(o=>o.which===Dt.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(Q1.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Wn(this._dialogEl.nativeElement,"mousedown").pipe(Vt(this._closed$),jn(()=>i=!1),ni(()=>Wn(e,"mouseup").pipe(Vt(this._closed$),ii(1))),nn(({target:o})=>e===o)).subscribe(()=>{i=!0}),Wn(e,"click").pipe(Vt(this._closed$)).subscribe(({target:o})=>{e===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Q1.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),o=MP(e)[0];(i||o||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let o;o=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&go(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ft({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(i,o){if(1&i&&La(oZ,7),2&i){let r;Pt(r=At())&&(o._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,o){2&i&&(bt("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Ra("modal d-block"+(o.windowClass?" "+o.windowClass:"")),Z("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[No],ngContentSelectors:Eq,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,o){1&i&&(function DM(t){const n=$()[Ut][Qn];if(!n.projection){const i=n.projection=function gs(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}(t?t.length:1,null),o=i.slice();let r=n.child;for(;null!==r;){const s=t?aB(r,t):0;null!==s&&(o[s]?o[s].projectionNext=r:i[s]=r,o[s]=r),r=r.next}}}(),m(0,"div",1,0)(2,"div",2),function TM(t,n=0,e){const i=$(),o=ze(),r=cc(o,Ee+t,16,null,e||null);null===r.projection&&(r.projection=n),j_(),(!i[Ai]||Jl())&&32&~r.flags&&function yF(t,n,e){DD(n[De],0,n,e,Pv(t,e,n),_D(e.parent||n[Qn],e,n))}(o,i,r)}(3),p()()),2&i&&Ra("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return t})(),lY=(()=>{class t{constructor(){this._applicationRef=N(Hr),this._injector=N(Sn),this._environmentInjector=N(wn),this._document=N(tn),this._scrollBar=N(nY),this._activeWindowCmptHasChanged=new Ge,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new fe;const e=N($e);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const i=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{t.runOutsideAngular(()=>{const o=Wn(n,"focusin").pipe(Vt(e),le(r=>r.target));Wn(n,"keydown").pipe(Vt(e),nn(r=>r.which===Dt.Tab),k1(o)).subscribe(([r,s])=>{const[l,c]=MP(n);(s===l||s===n)&&r.shiftKey&&(c.focus(),r.preventDefault()),s===c&&!r.shiftKey&&(l.focus(),r.preventDefault())}),i&&Wn(n,"click").pipe(Vt(e),k1(o),le(r=>r[1])).subscribe(r=>r.focus())})})(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,o){const r=o.container instanceof HTMLElement?o.container:tl(o.container)?this._document.querySelector(o.container):this._document.body;if(!r)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const s=new GP,l=(e=o.injector||e).get(wn,null)||this._environmentInjector,c=this._getContentRef(e,l,i,s,o);let u=!1!==o.backdrop?this._attachBackdrop(r):void 0,f=this._attachWindowComponent(r,c.nodes),_=new sY(f,c,u,o.beforeDismiss);return this._registerModalRef(_),this._registerWindowCmpt(f),_.hidden.pipe(ii(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=w=>{_.close(w)},s.dismiss=w=>{_.dismiss(w)},s.update=w=>{_.update(w)},_.update(o),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),_}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=vb(iY,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let o=vb(aY,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(o.hostView),e.appendChild(o.location.nativeElement),o}_getContentRef(e,i,o,r,s){return o?o instanceof cn?this._createFromTemplateRef(o,r):dd(o)?this._createFromString(o):this._createFromComponent(e,i,o,r,s):new sl([])}_createFromTemplateRef(e,i){const r=e.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(r),new sl([r.rootNodes],r)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new sl([[i]])}_createFromComponent(e,i,o,r,s){const c=vb(o,{environmentInjector:i,elementInjector:Sn.create({providers:[{provide:GP,useValue:r}],parent:e})}),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new sl([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(o=>{o!==e&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const o=this._modalRefs.indexOf(e);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cY=(()=>{class t{constructor(){this._injector=N(Sn),this._modalStack=N(lY),this._config=N(tY)}open(e,i={}){const o={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),WP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({providers:[cY]})}}return t})(),KP=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),iA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),oA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),rA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),sA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),aA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),lA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),cA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),dA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();new ee("live announcer delay",{providedIn:"root",factory:()=>100});let uA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})(),hA=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({})}}return t})();const TY=[fP,pP,_P,vP,HP,zP,WP,KP,hA,iA,oA,rA,sA,aA,lA,cA,dA,uA];let SY=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t})}static{this.\u0275inj=Ae({imports:[TY,fP,pP,_P,vP,HP,zP,WP,KP,hA,iA,oA,rA,sA,aA,lA,cA,dA,uA]})}}return t})();const pd="http://172.1.3.201:1010",gt={production:!0,backendBaseUrl:pd,apiUrl:`${pd}/api`,apiBaseUrl:`${pd}/api`,signalRHubUrl:`${pd}/notificationHub`,trackingHubUrl:`${pd}/trackingHub`,lanTrackingHubUrl:`${pd}/trackingHub`};let Qs=(()=>{class t{constructor(e){this.http=e,this.apiUrl=gt.apiUrl,this.currentUserSubject=new vt(this.getUserFromStorage()),this.currentUser$=this.currentUserSubject.asObservable(),console.log("Auth Service - apiUrl:",this.apiUrl)}get currentUserValue(){return this.currentUserSubject.value}login(e){const i=`${this.apiUrl}/auth/login`;if(console.log("Auth Service - Making API login call to:",i),!gt.production){if(console.log("Auth Service - Using mock login in development mode"),"admin"===e.username&&"admin123"===e.password){const o={token:"mock-jwt-token-for-admin-role",user:{userId:1,username:"admin",role:"Admin"}};return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),this.currentUserSubject.next(o.user),ue(o)}if("employee"===e.username&&"employee123"===e.password){const o={token:"mock-jwt-token-for-employee-role",user:{userId:2,username:"employee",role:"Employee",employeeId:1,employeeName:"Test Employee"}};return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),this.currentUserSubject.next(o.user),ue(o)}}return this.http.post(i,e).pipe(function MY(t=1/0){let n;n=t&&"object"==typeof t?t:{count:t};const{count:e=1/0,delay:i,resetOnSuccess:o=!1}=n;return e<=0?Ji:Ot((r,s)=>{let c,l=0;const u=()=>{let f=!1;c=r.subscribe(st(s,_=>{o&&(l=0),s.next(_)},void 0,_=>{if(l++<e){const w=()=>{c?(c.unsubscribe(),c=null,u()):f=!0};if(null!=i){const C="number"==typeof i?S1(i):Bn(i(_,l)),T=st(s,()=>{T.unsubscribe(),w()},()=>{s.complete()});C.subscribe(T)}else w()}else s.error(_)})),f&&(c.unsubscribe(),c=null,u())};u()})}(2),le(o=>{console.log("Auth Service - Login response received:",o),localStorage.setItem("token",o.token),console.log("Auth Service - Token stored in localStorage");const r={userId:o.user.userId,username:o.user.username,role:o.user.role,employeeId:o.user.employeeId,employeeName:o.user.employeeName};return localStorage.setItem("user",JSON.stringify(r)),console.log("Auth Service - User stored in localStorage:",r),this.currentUserSubject.next(r),o}),Bt(o=>{if(console.error("Auth Service - Login error:",o),0===o.status&&!gt.production){console.log("Auth Service - Connection error, using mock login in development");const r={token:"mock-jwt-token-for-admin-role",user:{userId:1,username:"admin",role:"Admin"}};return localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),this.currentUserSubject.next(r.user),ue(r)}return Fo(()=>o)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}isLoggedIn(){return!!this.getToken()}getToken(){return localStorage.getItem("token")}getCurrentUser(){return this.currentUserValue}isAdmin(){return"Admin"===this.currentUserValue?.role}isEmployee(){return"Employee"===this.currentUserValue?.role}getUserFromStorage(){const e=localStorage.getItem("user");return e?JSON.parse(e):null}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const kY=[0,2e3,1e4,3e4,null];class fA{constructor(n){this._retryDelays=void 0!==n?[...n,null]:kY}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}let rf=(()=>{class t{}return t.Authorization="Authorization",t.Cookie="Cookie",t})();class pA{constructor(n,e,i){this.statusCode=n,this.statusText=e,this.content=i}}class n_{get(n,e){return this.send({...e,method:"GET",url:n})}post(n,e){return this.send({...e,method:"POST",url:n})}delete(n,e){return this.send({...e,method:"DELETE",url:n})}getCookieString(n){return""}}class EY extends n_{constructor(n,e){super(),this._innerClient=n,this._accessTokenFactory=e}send(n){var e=this;return de(function*(){let i=!0;e._accessTokenFactory&&(!e._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,e._accessToken=yield e._accessTokenFactory()),e._setAuthorizationHeader(n);const o=yield e._innerClient.send(n);return i&&401===o.statusCode&&e._accessTokenFactory?(e._accessToken=yield e._accessTokenFactory(),e._setAuthorizationHeader(n),yield e._innerClient.send(n)):o})()}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[rf.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[rf.Authorization]&&delete n.headers[rf.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}class al extends Error{constructor(n,e){const i=new.target.prototype;super(`${n}: Status code '${e}'`),this.statusCode=e,this.__proto__=i}}class ew extends Error{constructor(n="A timeout occurred."){const e=new.target.prototype;super(n),this.__proto__=e}}class Ho extends Error{constructor(n="An abort occurred."){const e=new.target.prototype;super(n),this.__proto__=e}}class xY extends Error{constructor(n,e){const i=new.target.prototype;super(n),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=i}}class IY extends Error{constructor(n,e){const i=new.target.prototype;super(n),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=i}}class NY extends Error{constructor(n,e){const i=new.target.prototype;super(n),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=i}}class gA extends Error{constructor(n){const e=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class OY extends Error{constructor(n,e){const i=new.target.prototype;super(n),this.innerErrors=e,this.__proto__=i}}var U=function(t){return t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None",t}(U||{});class sf{constructor(){}log(n,e){}}sf.instance=new sf;const PY="9.0.6";class gn{static isRequired(n,e){if(null==n)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(n,e){if(!n||n.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(n,e,i){if(!(n in e))throw new Error(`Unknown ${i} value: ${n}.`)}}class zt{static get isBrowser(){return!zt.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!zt.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!zt.isNode&&"object"==typeof window&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&"node"===process.release.name}}function af(t,n){let e="";return ll(t)?(e=`Binary data of length ${t.byteLength}`,n&&(e+=`. Content: '${function AY(t){const n=new Uint8Array(t);let e="";return n.forEach(i=>{e+=`0x${i<16?"0":""}${i.toString(16)} `}),e.substr(0,e.length-1)}(t)}'`)):"string"==typeof t&&(e=`String data of length ${t.length}`,n&&(e+=`. Content: '${t}'`)),e}function ll(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function mA(t,n,e,i,o,r){return tw.apply(this,arguments)}function tw(){return(tw=de(function*(t,n,e,i,o,r){const s={},[l,c]=gd();s[l]=c,t.log(U.Trace,`(${n} transport) sending data. ${af(o,r.logMessageContent)}.`);const u=ll(o)?"arraybuffer":"text",f=yield e.post(i,{content:o,headers:{...s,...r.headers},responseType:u,timeout:r.timeout,withCredentials:r.withCredentials});t.log(U.Trace,`(${n} transport) request complete. Response status: ${f.statusCode}.`)})).apply(this,arguments)}class FY{constructor(n,e){this._subject=n,this._observer=e}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}}class i_{constructor(n){this._minLevel=n,this.out=console}log(n,e){if(n>=this._minLevel){const i=`[${(new Date).toISOString()}] ${U[n]}: ${e}`;switch(n){case U.Critical:case U.Error:this.out.error(i);break;case U.Warning:this.out.warn(i);break;case U.Information:this.out.info(i);break;default:this.out.log(i)}}}}function gd(){let t="X-SignalR-User-Agent";return zt.isNode&&(t="User-Agent"),[t,LY(PY,BY(),zt.isNode?"NodeJS":"Browser",VY())]}function LY(t,n,e,i){let o="Microsoft SignalR/";const r=t.split(".");return o+=`${r[0]}.${r[1]}`,o+=` (${t}; `,o+=n&&""!==n?`${n}; `:"Unknown OS; ",o+=`${e}`,o+=i?`; ${i}`:"; Unknown Runtime Version",o+=")",o}function BY(){if(!zt.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function VY(){if(zt.isNode)return process.versions.node}function nw(t){return t.stack?t.stack:t.message?t.message:`${t}`}class HY extends n_{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||zt.isNode){const e=require;this._jar=new(e("tough-cookie").CookieJar),this._fetchType=typeof fetch>"u"?e("node-fetch"):fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function $Y(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}());if(typeof AbortController>"u"){const e=require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}send(n){var e=this;return de(function*(){if(n.abortSignal&&n.abortSignal.aborted)throw new Ho;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new e._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),o=new Ho});let s,r=null;n.timeout&&(r=setTimeout(()=>{i.abort(),e._logger.log(U.Warning,"Timeout from HTTP request."),o=new ew},n.timeout)),""===n.content&&(n.content=void 0),n.content&&(n.headers=n.headers||{},n.headers["Content-Type"]=ll(n.content)?"application/octet-stream":"text/plain;charset=UTF-8");try{s=yield e._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:!0===n.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(u){throw o||(e._logger.log(U.Warning,`Error from HTTP request. ${u}.`),u)}finally{r&&clearTimeout(r),n.abortSignal&&(n.abortSignal.onabort=null)}if(!s.ok){const u=yield _A(s,"text");throw new al(u||s.statusText,s.status)}const c=yield _A(s,n.responseType);return new pA(s.status,s.statusText,c)})()}getCookieString(n){let e="";return zt.isNode&&this._jar&&this._jar.getCookies(n,(i,o)=>e=o.join("; ")),e}}function _A(t,n){let e;switch(n){case"arraybuffer":e=t.arrayBuffer();break;case"text":default:e=t.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`)}return e}class UY extends n_{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Ho):n.method?n.url?new Promise((e,i)=>{const o=new XMLHttpRequest;o.open(n.method,n.url,!0),o.withCredentials=void 0===n.withCredentials||n.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===n.content&&(n.content=void 0),n.content&&(ll(n.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const r=n.headers;r&&Object.keys(r).forEach(s=>{o.setRequestHeader(s,r[s])}),n.responseType&&(o.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{o.abort(),i(new Ho)}),n.timeout&&(o.timeout=n.timeout),o.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),o.status>=200&&o.status<300?e(new pA(o.status,o.statusText,o.response||o.responseText)):i(new al(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(U.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),i(new al(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(U.Warning,"Timeout from HTTP request."),i(new ew)},o.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class zY extends n_{constructor(n){if(super(),typeof fetch<"u"||zt.isNode)this._httpClient=new HY(n);else{if(!(typeof XMLHttpRequest<"u"))throw new Error("No usable HttpClient found.");this._httpClient=new UY(n)}}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Ho):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}var mn=function(t){return t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling",t}(mn||{}),pi=function(t){return t[t.Text=1]="Text",t[t.Binary=2]="Binary",t}(pi||{});class GY{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class vA{get pollAborted(){return this._pollAbort.aborted}constructor(n,e,i){this._httpClient=n,this._logger=e,this._pollAbort=new GY,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}connect(n,e){var i=this;return de(function*(){if(gn.isRequired(n,"url"),gn.isRequired(e,"transferFormat"),gn.isIn(e,pi,"transferFormat"),i._url=n,i._logger.log(U.Trace,"(LongPolling transport) Connecting."),e===pi.Binary&&typeof XMLHttpRequest<"u"&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,r]=gd(),s={[o]:r,...i._options.headers},l={abortSignal:i._pollAbort.signal,headers:s,timeout:1e5,withCredentials:i._options.withCredentials};e===pi.Binary&&(l.responseType="arraybuffer");const c=`${n}&_=${Date.now()}`;i._logger.log(U.Trace,`(LongPolling transport) polling: ${c}.`);const u=yield i._httpClient.get(c,l);200!==u.statusCode?(i._logger.log(U.Error,`(LongPolling transport) Unexpected response code: ${u.statusCode}.`),i._closeError=new al(u.statusText||"",u.statusCode),i._running=!1):i._running=!0,i._receiving=i._poll(i._url,l)})()}_poll(n,e){var i=this;return de(function*(){try{for(;i._running;)try{const o=`${n}&_=${Date.now()}`;i._logger.log(U.Trace,`(LongPolling transport) polling: ${o}.`);const r=yield i._httpClient.get(o,e);204===r.statusCode?(i._logger.log(U.Information,"(LongPolling transport) Poll terminated by server."),i._running=!1):200!==r.statusCode?(i._logger.log(U.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),i._closeError=new al(r.statusText||"",r.statusCode),i._running=!1):r.content?(i._logger.log(U.Trace,`(LongPolling transport) data received. ${af(r.content,i._options.logMessageContent)}.`),i.onreceive&&i.onreceive(r.content)):i._logger.log(U.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){i._running?o instanceof ew?i._logger.log(U.Trace,"(LongPolling transport) Poll timed out, reissuing."):(i._closeError=o,i._running=!1):i._logger.log(U.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{i._logger.log(U.Trace,"(LongPolling transport) Polling complete."),i.pollAborted||i._raiseOnClose()}})()}send(n){var e=this;return de(function*(){return e._running?mA(e._logger,"LongPolling",e._httpClient,e._url,n,e._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){var n=this;return de(function*(){n._logger.log(U.Trace,"(LongPolling transport) Stopping polling."),n._running=!1,n._pollAbort.abort();try{yield n._receiving,n._logger.log(U.Trace,`(LongPolling transport) sending DELETE request to ${n._url}.`);const e={},[i,o]=gd();e[i]=o;const r={headers:{...e,...n._options.headers},timeout:n._options.timeout,withCredentials:n._options.withCredentials};let s;try{yield n._httpClient.delete(n._url,r)}catch(l){s=l}s?s instanceof al&&n._logger.log(U.Trace,404===s.statusCode?"(LongPolling transport) A 404 response was returned from sending a DELETE request.":`(LongPolling transport) Error sending a DELETE request: ${s}`):n._logger.log(U.Trace,"(LongPolling transport) DELETE request accepted.")}finally{n._logger.log(U.Trace,"(LongPolling transport) Stop finished."),n._raiseOnClose()}})()}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(U.Trace,n),this.onclose(this._closeError)}}}class WY{constructor(n,e,i,o){this._httpClient=n,this._accessToken=e,this._logger=i,this._options=o,this.onreceive=null,this.onclose=null}connect(n,e){var i=this;return de(function*(){return gn.isRequired(n,"url"),gn.isRequired(e,"transferFormat"),gn.isIn(e,pi,"transferFormat"),i._logger.log(U.Trace,"(SSE transport) Connecting."),i._url=n,i._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i._accessToken)}`),new Promise((o,r)=>{let l,s=!1;if(e===pi.Text){if(zt.isBrowser||zt.isWebWorker)l=new i._options.EventSource(n,{withCredentials:i._options.withCredentials});else{const c=i._httpClient.getCookieString(n),u={};u.Cookie=c;const[f,_]=gd();u[f]=_,l=new i._options.EventSource(n,{withCredentials:i._options.withCredentials,headers:{...u,...i._options.headers}})}try{l.onmessage=c=>{if(i.onreceive)try{i._logger.log(U.Trace,`(SSE transport) data received. ${af(c.data,i._options.logMessageContent)}.`),i.onreceive(c.data)}catch(u){return void i._close(u)}},l.onerror=c=>{s?i._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},l.onopen=()=>{i._logger.log(U.Information,`SSE connected to ${i._url}`),i._eventSource=l,s=!0,o()}}catch(c){return void r(c)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})})()}send(n){var e=this;return de(function*(){return e._eventSource?mA(e._logger,"SSE",e._httpClient,e._url,n,e._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class qY{constructor(n,e,i,o,r,s){this._logger=i,this._accessTokenFactory=e,this._logMessageContent=o,this._webSocketConstructor=r,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=s}connect(n,e){var i=this;return de(function*(){let o;return gn.isRequired(n,"url"),gn.isRequired(e,"transferFormat"),gn.isIn(e,pi,"transferFormat"),i._logger.log(U.Trace,"(WebSockets transport) Connecting."),i._accessTokenFactory&&(o=yield i._accessTokenFactory()),new Promise((r,s)=>{let l;n=n.replace(/^http/,"ws");const c=i._httpClient.getCookieString(n);let u=!1;if(zt.isNode||zt.isReactNative){const f={},[_,w]=gd();f[_]=w,o&&(f[rf.Authorization]=`Bearer ${o}`),c&&(f[rf.Cookie]=c),l=new i._webSocketConstructor(n,void 0,{headers:{...f,...i._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);l||(l=new i._webSocketConstructor(n)),e===pi.Binary&&(l.binaryType="arraybuffer"),l.onopen=f=>{i._logger.log(U.Information,`WebSocket connected to ${n}.`),i._webSocket=l,u=!0,r()},l.onerror=f=>{let _=null;_=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"There was an error with the transport",i._logger.log(U.Information,`(WebSockets transport) ${_}.`)},l.onmessage=f=>{if(i._logger.log(U.Trace,`(WebSockets transport) data received. ${af(f.data,i._logMessageContent)}.`),i.onreceive)try{i.onreceive(f.data)}catch(_){return void i._close(_)}},l.onclose=f=>{if(u)i._close(f);else{let _=null;_=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(_))}}})})()}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(U.Trace,`(WebSockets transport) sending data. ${af(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(U.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(n)||!1!==n.wasClean&&1e3===n.code?n instanceof Error?this.onclose(n):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)))}_isCloseEvent(n){return n&&"boolean"==typeof n.wasClean&&"number"==typeof n.code}}class ZY{constructor(n,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,gn.isRequired(n,"url"),this._logger=function RY(t){return void 0===t?new i_(U.Information):null===t?sf.instance:void 0!==t.log?t:new i_(t)}(e.logger),this.baseUrl=this._resolveUrl(n),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout;let i=null,o=null;if(zt.isNode){const r=require;i=r("ws"),o=r("eventsource")}!zt.isNode&&typeof WebSocket<"u"&&!e.WebSocket?e.WebSocket=WebSocket:zt.isNode&&!e.WebSocket&&i&&(e.WebSocket=i),!zt.isNode&&typeof EventSource<"u"&&!e.EventSource?e.EventSource=EventSource:zt.isNode&&!e.EventSource&&typeof o<"u"&&(e.EventSource=o),this._httpClient=new EY(e.httpClient||new zY(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}start(n){var e=this;return de(function*(){if(gn.isIn(n=n||pi.Binary,pi,"transferFormat"),e._logger.log(U.Debug,`Starting connection with transfer format '${pi[n]}'.`),"Disconnected"!==e._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(e._connectionState="Connecting",e._startInternalPromise=e._startInternal(n),yield e._startInternalPromise,"Disconnecting"===e._connectionState){const i="Failed to start the HttpConnection before stop() was called.";return e._logger.log(U.Error,i),yield e._stopPromise,Promise.reject(new Ho(i))}if("Connected"!==e._connectionState){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return e._logger.log(U.Error,i),Promise.reject(new Ho(i))}e._connectionStarted=!0})()}send(n){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new iw(this.transport)),this._sendQueue.send(n))}stop(n){var e=this;return de(function*(){return"Disconnected"===e._connectionState?(e._logger.log(U.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===e._connectionState?(e._logger.log(U.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),e._stopPromise):(e._connectionState="Disconnecting",e._stopPromise=new Promise(i=>{e._stopPromiseResolver=i}),yield e._stopInternal(n),void(yield e._stopPromise))})()}_stopInternal(n){var e=this;return de(function*(){e._stopError=n;try{yield e._startInternalPromise}catch{}if(e.transport){try{yield e.transport.stop()}catch(i){e._logger.log(U.Error,`HttpConnection.transport.stop() threw error '${i}'.`),e._stopConnection()}e.transport=void 0}else e._logger.log(U.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})()}_startInternal(n){var e=this;return de(function*(){let i=e.baseUrl;e._accessTokenFactory=e._options.accessTokenFactory,e._httpClient._accessTokenFactory=e._accessTokenFactory;try{if(e._options.skipNegotiation){if(e._options.transport!==mn.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");e.transport=e._constructTransport(mn.WebSockets),yield e._startTransport(i,n)}else{let o=null,r=0;do{if(o=yield e._getNegotiationResponse(i),"Disconnecting"===e._connectionState||"Disconnected"===e._connectionState)throw new Ho("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(i=o.url),o.accessToken){const s=o.accessToken;e._accessTokenFactory=()=>s,e._httpClient._accessToken=s,e._httpClient._accessTokenFactory=void 0}r++}while(o.url&&r<100);if(100===r&&o.url)throw new Error("Negotiate redirection limit exceeded.");yield e._createTransport(i,e._options.transport,o,n)}e.transport instanceof vA&&(e.features.inherentKeepAlive=!0),"Connecting"===e._connectionState&&(e._logger.log(U.Debug,"The HttpConnection connected successfully."),e._connectionState="Connected")}catch(o){return e._logger.log(U.Error,"Failed to start the connection: "+o),e._connectionState="Disconnected",e.transport=void 0,e._stopPromiseResolver(),Promise.reject(o)}})()}_getNegotiationResponse(n){var e=this;return de(function*(){const i={},[o,r]=gd();i[o]=r;const s=e._resolveNegotiateUrl(n);e._logger.log(U.Debug,`Sending negotiation request: ${s}.`);try{const l=yield e._httpClient.post(s,{content:"",headers:{...i,...e._options.headers},timeout:e._options.timeout,withCredentials:e._options.withCredentials});if(200!==l.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${l.statusCode}'`));const c=JSON.parse(l.content);return(!c.negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),c.useStatefulReconnect&&!0!==e._options._useStatefulReconnect?Promise.reject(new gA("Client didn't negotiate Stateful Reconnect but the server did.")):c}catch(l){let c="Failed to complete negotiation with the server: "+l;return l instanceof al&&404===l.statusCode&&(c+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),e._logger.log(U.Error,c),Promise.reject(new gA(c))}})()}_createConnectUrl(n,e){return e?n+(-1===n.indexOf("?")?"?":"&")+`id=${e}`:n}_createTransport(n,e,i,o){var r=this;return de(function*(){let s=r._createConnectUrl(n,i.connectionToken);if(r._isITransport(e))return r._logger.log(U.Debug,"Connection was provided an instance of ITransport, using that directly."),r.transport=e,yield r._startTransport(s,o),void(r.connectionId=i.connectionId);const l=[],c=i.availableTransports||[];let u=i;for(const f of c){const _=r._resolveTransportOrError(f,e,o,!0===u?.useStatefulReconnect);if(_ instanceof Error)l.push(`${f.transport} failed:`),l.push(_);else if(r._isITransport(_)){if(r.transport=_,!u){try{u=yield r._getNegotiationResponse(n)}catch(w){return Promise.reject(w)}s=r._createConnectUrl(n,u.connectionToken)}try{return yield r._startTransport(s,o),void(r.connectionId=u.connectionId)}catch(w){if(r._logger.log(U.Error,`Failed to start the transport '${f.transport}': ${w}`),u=void 0,l.push(new NY(`${f.transport} failed: ${w}`,mn[f.transport])),"Connecting"!==r._connectionState){const C="Failed to select transport before stop() was called.";return r._logger.log(U.Debug,C),Promise.reject(new Ho(C))}}}}return Promise.reject(l.length>0?new OY(`Unable to connect to the server with any of the available transports. ${l.join(" ")}`,l):new Error("None of the transports supported by the client are supported by the server."))})()}_constructTransport(n){switch(n){case mn.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new qY(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case mn.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new WY(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case mn.LongPolling:return new vA(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,e){var i=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=this.features.reconnect?function(){var o=de(function*(r){let s=!1;if(i.features.reconnect){try{i.features.disconnected(),yield i.transport.connect(n,e),yield i.features.resend()}catch{s=!0}s&&i._stopConnection(r)}else i._stopConnection(r)});return function(r){return o.apply(this,arguments)}}():o=>this._stopConnection(o),this.transport.connect(n,e)}_resolveTransportOrError(n,e,i,o){const r=mn[n.transport];if(null==r)return this._logger.log(U.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(!function KY(t,n){return!t||!!(n&t)}(e,r))return this._logger.log(U.Debug,`Skipping transport '${mn[r]}' because it was disabled by the client.`),new IY(`'${mn[r]}' is disabled by the client.`,r);if(!(n.transferFormats.map(l=>pi[l]).indexOf(i)>=0))return this._logger.log(U.Debug,`Skipping transport '${mn[r]}' because it does not support the requested transfer format '${pi[i]}'.`),new Error(`'${mn[r]}' does not support ${pi[i]}.`);if(r===mn.WebSockets&&!this._options.WebSocket||r===mn.ServerSentEvents&&!this._options.EventSource)return this._logger.log(U.Debug,`Skipping transport '${mn[r]}' because it is not supported in your environment.'`),new xY(`'${mn[r]}' is not supported in your environment.`,r);this._logger.log(U.Debug,`Selecting transport '${mn[r]}'.`);try{return this.features.reconnect=r===mn.WebSockets?o:void 0,this._constructTransport(r)}catch(l){return l}}_isITransport(n){return n&&"object"==typeof n&&"connect"in n}_stopConnection(n){if(this._logger.log(U.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(U.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),n?this._logger.log(U.Error,`Connection disconnected with error '${n}'.`):this._logger.log(U.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(U.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(e){this._logger.log(U.Error,`HttpConnection.onclose(${n}) threw error '${e}'.`)}}}else this._logger.log(U.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(n){if(0===n.lastIndexOf("https://",0)||0===n.lastIndexOf("http://",0))return n;if(!zt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const e=window.document.createElement("a");return e.href=n,this._logger.log(U.Information,`Normalizing '${n}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(n){const e=new URL(n);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";const i=new URLSearchParams(e.searchParams);return i.has("negotiateVersion")||i.append("negotiateVersion",this._negotiateVersion.toString()),i.has("useStatefulReconnect")?"true"===i.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&i.append("useStatefulReconnect","true"),e.search=i.toString(),e.toString()}}class iw{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new o_,this._transportResult=new o_,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new o_),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}_sendLoop(){var n=this;return de(function*(){for(;;){if(yield n._sendBufferedData.promise,!n._executing){n._transportResult&&n._transportResult.reject("Connection stopped.");break}n._sendBufferedData=new o_;const e=n._transportResult;n._transportResult=void 0;const i="string"==typeof n._buffer[0]?n._buffer.join(""):iw._concatBuffers(n._buffer);n._buffer.length=0;try{yield n._transport.send(i),e.resolve()}catch(o){e.reject(o)}}})()}static _concatBuffers(n){const e=n.map(r=>r.byteLength).reduce((r,s)=>r+s),i=new Uint8Array(e);let o=0;for(const r of n)i.set(new Uint8Array(r),o),o+=r.byteLength;return i.buffer}}class o_{constructor(){this.promise=new Promise((n,e)=>[this._resolver,this._rejecter]=[n,e])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}class Ki{static write(n){return`${n}${Ki.RecordSeparator}`}static parse(n){if(n[n.length-1]!==Ki.RecordSeparator)throw new Error("Message is incomplete.");const e=n.split(Ki.RecordSeparator);return e.pop(),e}}Ki.RecordSeparatorCode=30,Ki.RecordSeparator=String.fromCharCode(Ki.RecordSeparatorCode);class YY{writeHandshakeRequest(n){return Ki.write(JSON.stringify(n))}parseHandshakeResponse(n){let e,i;if(ll(n)){const l=new Uint8Array(n),c=l.indexOf(Ki.RecordSeparatorCode);if(-1===c)throw new Error("Message is incomplete.");const u=c+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(l.slice(0,u))),i=l.byteLength>u?l.slice(u).buffer:null}else{const l=n,c=l.indexOf(Ki.RecordSeparator);if(-1===c)throw new Error("Message is incomplete.");const u=c+1;e=l.substring(0,u),i=l.length>u?l.substring(u):null}const o=Ki.parse(e),r=JSON.parse(o[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[i,r]}}var Fe=function(t){return t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence",t}(Fe||{});class QY{constructor(){this.observers=[]}next(n){for(const e of this.observers)e.next(n)}error(n){for(const e of this.observers)e.error&&e.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new FY(this,n)}}class JY{constructor(n,e,i){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=e,this._bufferSize=i}_send(n){var e=this;return de(function*(){const i=e._protocol.writeMessage(n);let o=Promise.resolve();if(e._isInvocationMessage(n)){e._totalMessageCount++;let r=()=>{},s=()=>{};ll(i)?e._bufferedByteCount+=i.byteLength:e._bufferedByteCount+=i.length,e._bufferedByteCount>=e._bufferSize&&(o=new Promise((l,c)=>{r=l,s=c})),e._messages.push(new XY(i,e._totalMessageCount,r,s))}try{e._reconnectInProgress||(yield e._connection.send(i))}catch{e._disconnected()}yield o})()}_ack(n){let e=-1;for(let i=0;i<this._messages.length;i++){const o=this._messages[i];if(o._id<=n.sequenceId)e=i,ll(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;o._resolver()}}-1!==e&&(this._messages=this._messages.slice(e+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type===Fe.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const e=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,e<=this._latestReceivedSequenceId?(e===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=e,this._ackTimer(),!0)}_resetSequence(n){n.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){var n=this;return de(function*(){const e=0!==n._messages.length?n._messages[0]._id:n._totalMessageCount+1;yield n._connection.send(n._protocol.writeMessage({type:Fe.Sequence,sequenceId:e}));const i=n._messages;for(const o of i)yield n._connection.send(o._message);n._reconnectInProgress=!1})()}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const e of this._messages)e._rejector(n)}_isInvocationMessage(n){switch(n.type){case Fe.Invocation:case Fe.StreamItem:case Fe.Completion:case Fe.StreamInvocation:case Fe.CancelInvocation:return!0;case Fe.Close:case Fe.Sequence:case Fe.Ping:case Fe.Ack:return!1}}_ackTimer(){var n=this;void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout(de(function*(){try{n._reconnectInProgress||(yield n._connection.send(n._protocol.writeMessage({type:Fe.Ack,sequenceId:n._latestReceivedSequenceId})))}catch{}clearTimeout(n._ackTimerHandle),n._ackTimerHandle=void 0}),1e3))}}class XY{constructor(n,e,i,o){this._message=n,this._id=e,this._resolver=i,this._rejector=o}}var Rt=function(t){return t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting",t}(Rt||{});class ow{static create(n,e,i,o,r,s,l){return new ow(n,e,i,o,r,s,l)}constructor(n,e,i,o,r,s,l){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(U.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},gn.isRequired(n,"connection"),gn.isRequired(e,"logger"),gn.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=r??3e4,this.keepAliveIntervalInMilliseconds=s??15e3,this._statefulReconnectBufferSize=l??1e5,this._logger=e,this._protocol=i,this.connection=n,this._reconnectPolicy=o,this._handshakeProtocol=new YY,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Rt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Fe.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==Rt.Disconnected&&this._connectionState!==Rt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){var n=this;return de(function*(){if(n._connectionState!==Rt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));n._connectionState=Rt.Connecting,n._logger.log(U.Debug,"Starting HubConnection.");try{yield n._startInternal(),zt.isBrowser&&window.document.addEventListener("freeze",n._freezeEventListener),n._connectionState=Rt.Connected,n._connectionStarted=!0,n._logger.log(U.Debug,"HubConnection connected successfully.")}catch(e){return n._connectionState=Rt.Disconnected,n._logger.log(U.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})()}_startInternal(){var n=this;return de(function*(){n._stopDuringStartError=void 0,n._receivedHandshakeResponse=!1;const e=new Promise((i,o)=>{n._handshakeResolver=i,n._handshakeRejecter=o});yield n.connection.start(n._protocol.transferFormat);try{let i=n._protocol.version;n.connection.features.reconnect||(i=1);const o={protocol:n._protocol.name,version:i};if(n._logger.log(U.Debug,"Sending handshake request."),yield n._sendMessage(n._handshakeProtocol.writeHandshakeRequest(o)),n._logger.log(U.Information,`Using HubProtocol '${n._protocol.name}'.`),n._cleanupTimeout(),n._resetTimeoutPeriod(),n._resetKeepAliveInterval(),yield e,n._stopDuringStartError)throw n._stopDuringStartError;!!n.connection.features.reconnect&&(n._messageBuffer=new JY(n._protocol,n.connection,n._statefulReconnectBufferSize),n.connection.features.disconnected=n._messageBuffer._disconnected.bind(n._messageBuffer),n.connection.features.resend=()=>{if(n._messageBuffer)return n._messageBuffer._resend()}),n.connection.features.inherentKeepAlive||(yield n._sendMessage(n._cachedPingMessage))}catch(i){throw n._logger.log(U.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),n._cleanupTimeout(),n._cleanupPingTimer(),yield n.connection.stop(i),i}})()}stop(){var n=this;return de(function*(){const e=n._startPromise;n.connection.features.reconnect=!1,n._stopPromise=n._stopInternal(),yield n._stopPromise;try{yield e}catch{}})()}_stopInternal(n){if(this._connectionState===Rt.Disconnected)return this._logger.log(U.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Rt.Disconnecting)return this._logger.log(U.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const e=this._connectionState;return this._connectionState=Rt.Disconnecting,this._logger.log(U.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(U.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(e===Rt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new Ho("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}_sendCloseMessage(){var n=this;return de(function*(){try{yield n._sendWithProtocol(n._createCloseMessage())}catch{}})()}stream(n,...e){const[i,o]=this._replaceStreamingParams(e),r=this._createStreamInvocation(n,e,o);let s;const l=new QY;return l.cancelCallback=()=>{const c=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],s.then(()=>this._sendWithProtocol(c))},this._callbacks[r.invocationId]=(c,u)=>{u?l.error(u):c&&(c.type===Fe.Completion?c.error?l.error(new Error(c.error)):l.complete():l.next(c.item))},s=this._sendWithProtocol(r).catch(c=>{l.error(c),delete this._callbacks[r.invocationId]}),this._launchStreams(i,s),l}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...e){const[i,o]=this._replaceStreamingParams(e),r=this._sendWithProtocol(this._createInvocation(n,e,!0,o));return this._launchStreams(i,r),r}invoke(n,...e){const[i,o]=this._replaceStreamingParams(e),r=this._createInvocation(n,e,!1,o);return new Promise((l,c)=>{this._callbacks[r.invocationId]=(f,_)=>{_?c(_):f&&(f.type===Fe.Completion?f.error?c(new Error(f.error)):l(f.result):c(new Error(`Unexpected message type: ${f.type}`)))};const u=this._sendWithProtocol(r).catch(f=>{c(f),delete this._callbacks[r.invocationId]});this._launchStreams(i,u)})}on(n,e){!n||!e||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),-1===this._methods[n].indexOf(e)&&this._methods[n].push(e))}off(n,e){if(!n)return;n=n.toLowerCase();const i=this._methods[n];if(i)if(e){const o=i.indexOf(e);-1!==o&&(i.splice(o,1),0===i.length&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const e=this._protocol.parseMessages(n,this._logger);for(const i of e)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(i))switch(i.type){case Fe.Invocation:this._invokeClientMethod(i).catch(o=>{this._logger.log(U.Error,`Invoke client method threw error: ${nw(o)}`)});break;case Fe.StreamItem:case Fe.Completion:{const o=this._callbacks[i.invocationId];if(o){i.type===Fe.Completion&&delete this._callbacks[i.invocationId];try{o(i)}catch(r){this._logger.log(U.Error,`Stream callback threw error: ${nw(r)}`)}}break}case Fe.Ping:break;case Fe.Close:{this._logger.log(U.Information,"Close message received from server.");const o=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case Fe.Ack:this._messageBuffer&&this._messageBuffer._ack(i);break;case Fe.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(i);break;default:this._logger.log(U.Warning,`Invalid message type: ${i.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let e,i;try{[i,e]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(o){const r="Error parsing handshake response: "+o;this._logger.log(U.Error,r);const s=new Error(r);throw this._handshakeRejecter(s),s}if(e.error){const o="Server returned handshake error: "+e.error;this._logger.log(U.Error,o);const r=new Error(o);throw this._handshakeRejecter(r),r}return this._logger.log(U.Debug,"Server handshake complete."),this._handshakeResolver(),i}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){var n=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(de(function*(){if(n._connectionState===Rt.Connected)try{yield n._sendMessage(n._cachedPingMessage)}catch{n._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(n){var e=this;return de(function*(){const i=n.target.toLowerCase(),o=e._methods[i];if(!o)return e._logger.log(U.Warning,`No client method with the name '${i}' found.`),void(n.invocationId&&(e._logger.log(U.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),yield e._sendWithProtocol(e._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null))));const r=o.slice(),s=!!n.invocationId;let l,c,u;for(const f of r)try{const _=l;l=yield f.apply(e,n.arguments),s&&l&&_&&(e._logger.log(U.Error,`Multiple results provided for '${i}'. Sending error to server.`),u=e._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),c=void 0}catch(_){c=_,e._logger.log(U.Error,`A callback for the method '${i}' threw error '${_}'.`)}u?yield e._sendWithProtocol(u):s?(c?u=e._createCompletionMessage(n.invocationId,`${c}`,null):void 0!==l?u=e._createCompletionMessage(n.invocationId,null,l):(e._logger.log(U.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),u=e._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),yield e._sendWithProtocol(u)):l&&e._logger.log(U.Error,`Result given for '${i}' method but server is not expecting a result.`)})()}_connectionClosed(n){this._logger.log(U.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new Ho("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Rt.Disconnecting?this._completeClose(n):this._connectionState===Rt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===Rt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=Rt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),zt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[n]))}catch(e){this._logger.log(U.Error,`An onclose callback called with error '${n}' threw error '${e}'.`)}}}_reconnect(n){var e=this;return de(function*(){const i=Date.now();let o=0,r=void 0!==n?n:new Error("Attempting to reconnect due to a unknown error."),s=e._getNextRetryDelay(o++,0,r);if(null===s)return e._logger.log(U.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void e._completeClose(n);if(e._connectionState=Rt.Reconnecting,e._logger.log(U.Information,n?`Connection reconnecting because of error '${n}'.`:"Connection reconnecting."),0!==e._reconnectingCallbacks.length){try{e._reconnectingCallbacks.forEach(l=>l.apply(e,[n]))}catch(l){e._logger.log(U.Error,`An onreconnecting callback called with error '${n}' threw error '${l}'.`)}if(e._connectionState!==Rt.Reconnecting)return void e._logger.log(U.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==s;){if(e._logger.log(U.Information,`Reconnect attempt number ${o} will start in ${s} ms.`),yield new Promise(l=>{e._reconnectDelayHandle=setTimeout(l,s)}),e._reconnectDelayHandle=void 0,e._connectionState!==Rt.Reconnecting)return void e._logger.log(U.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield e._startInternal(),e._connectionState=Rt.Connected,e._logger.log(U.Information,"HubConnection reconnected successfully."),0!==e._reconnectedCallbacks.length)try{e._reconnectedCallbacks.forEach(l=>l.apply(e,[e.connection.connectionId]))}catch(l){e._logger.log(U.Error,`An onreconnected callback called with connectionId '${e.connection.connectionId}; threw error '${l}'.`)}return}catch(l){if(e._logger.log(U.Information,`Reconnect attempt failed because of error '${l}'.`),e._connectionState!==Rt.Reconnecting)return e._logger.log(U.Debug,`Connection moved to the '${e._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(e._connectionState===Rt.Disconnecting&&e._completeClose());r=l instanceof Error?l:new Error(l.toString()),s=e._getNextRetryDelay(o++,Date.now()-i,r)}}e._logger.log(U.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${o} failed attempts. Connection disconnecting.`),e._completeClose()})()}_getNextRetryDelay(n,e,i){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:n,retryReason:i})}catch(o){return this._logger.log(U.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${e}) threw error '${o}'.`),null}}_cancelCallbacksWithError(n){const e=this._callbacks;this._callbacks={},Object.keys(e).forEach(i=>{const o=e[i];try{o(null,n)}catch(r){this._logger.log(U.Error,`Stream 'error' callback called with '${n}' threw error: ${nw(r)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,e,i,o){if(i)return 0!==o.length?{target:n,arguments:e,streamIds:o,type:Fe.Invocation}:{target:n,arguments:e,type:Fe.Invocation};{const r=this._invocationId;return this._invocationId++,0!==o.length?{target:n,arguments:e,invocationId:r.toString(),streamIds:o,type:Fe.Invocation}:{target:n,arguments:e,invocationId:r.toString(),type:Fe.Invocation}}}_launchStreams(n,e){if(0!==n.length){e||(e=Promise.resolve());for(const i in n)n[i].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i)))},error:o=>{let r;r=o instanceof Error?o.message:o&&o.toString?o.toString():"Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i,r)))},next:o=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(i,o)))}})}}_replaceStreamingParams(n){const e=[],i=[];for(let o=0;o<n.length;o++){const r=n[o];if(this._isObservable(r)){const s=this._invocationId;this._invocationId++,e[s]=r,i.push(s.toString()),n.splice(o,1)}}return[e,i]}_isObservable(n){return n&&n.subscribe&&"function"==typeof n.subscribe}_createStreamInvocation(n,e,i){const o=this._invocationId;return this._invocationId++,0!==i.length?{target:n,arguments:e,invocationId:o.toString(),streamIds:i,type:Fe.StreamInvocation}:{target:n,arguments:e,invocationId:o.toString(),type:Fe.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Fe.CancelInvocation}}_createStreamItemMessage(n,e){return{invocationId:n,item:e,type:Fe.StreamItem}}_createCompletionMessage(n,e,i){return e?{error:e,invocationId:n,type:Fe.Completion}:{invocationId:n,result:i,type:Fe.Completion}}_createCloseMessage(){return{type:Fe.Close}}}class oQ{constructor(){this.name="json",this.version=2,this.transferFormat=pi.Text}parseMessages(n,e){if("string"!=typeof n)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];null===e&&(e=sf.instance);const i=Ki.parse(n),o=[];for(const r of i){const s=JSON.parse(r);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case Fe.Invocation:this._isInvocationMessage(s);break;case Fe.StreamItem:this._isStreamItemMessage(s);break;case Fe.Completion:this._isCompletionMessage(s);break;case Fe.Ping:case Fe.Close:break;case Fe.Ack:this._isAckMessage(s);break;case Fe.Sequence:this._isSequenceMessage(s);break;default:e.log(U.Information,"Unknown message type '"+s.type+"' ignored.");continue}o.push(s)}return o}writeMessage(n){return Ki.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),void 0!==n.invocationId&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),void 0===n.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if("number"!=typeof n.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if("number"!=typeof n.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,e){if("string"!=typeof n||""===n)throw new Error(e)}}const rQ={trace:U.Trace,debug:U.Debug,info:U.Information,information:U.Information,warn:U.Warning,warning:U.Warning,error:U.Error,critical:U.Critical,none:U.None};class bA{configureLogging(n){if(gn.isRequired(n,"logging"),function aQ(t){return void 0!==t.log}(n))this.logger=n;else if("string"==typeof n){const e=function sQ(t){const n=rQ[t.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${t}`)}(n);this.logger=new i_(e)}else this.logger=new i_(n);return this}withUrl(n,e){return gn.isRequired(n,"url"),gn.isNotEmpty(n,"url"),this.url=n,this.httpConnectionOptions="object"==typeof e?{...this.httpConnectionOptions,...e}:{...this.httpConnectionOptions,transport:e},this}withHubProtocol(n){return gn.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=n?Array.isArray(n)?new fA(n):n:new fA,this}withServerTimeout(n){return gn.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return gn.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(void 0===n.logger&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new ZY(this.url,n);return ow.create(e,this.logger||sf.instance,this.protocol||new oQ,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}let Js=(()=>{class t{constructor(){this.hubConnection=null,this.notificationCountSubject=new vt(0),this.notificationMessageSubject=new vt(""),this.isConnected=!1,this.notificationReceived=new fe,this.connectionStateChanged=new fe,this.notificationCount$=this.notificationCountSubject.asObservable(),this.notificationMessage$=this.notificationMessageSubject.asObservable(),this.initializeConnection()}initializeConnection(){try{const e=gt.signalRHubUrl||gt.hubUrl;console.log("Initializing SignalR connection to:",e),this.hubConnection&&this.stopConnection();const i=localStorage.getItem("token")||"";console.log("Token available for SignalR:",i?"Yes":"No"),this.hubConnection=(new bA).withUrl(e,{transport:mn.WebSockets|mn.LongPolling,skipNegotiation:!1,accessTokenFactory:()=>i}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>{const r=1e3*Math.pow(2,o.previousRetryCount);return Math.min(r,3e4)}}).configureLogging(U.Information).build(),this.hubConnection.onreconnecting(o=>{console.log("SignalR reconnecting due to error:",o),this.isConnected=!1,this.connectionStateChanged.emit(!1)}),this.hubConnection.onreconnected(o=>{console.log("SignalR reconnected with connectionId:",o),this.isConnected=!0,this.connectionStateChanged.emit(!0)}),this.hubConnection.onclose(o=>{console.log("SignalR connection closed due to error:",o),this.isConnected=!1,this.connectionStateChanged.emit(!1),setTimeout(()=>this.startConnection(),1e4)}),this.setupSignalRHandlers(),this.startConnection()}catch(e){console.warn("SignalR connection initialization failed - backend may not be running:",e),this.isConnected=!1,this.connectionStateChanged.emit(!1),setTimeout(()=>{console.log("Retrying SignalR connection..."),this.initializeConnection()},3e4)}}startConnection(){var e=this;return de(function*(){if(e.hubConnection){if("Connected"===e.hubConnection.state)return console.log("SignalR already connected"),e.isConnected=!0,void e.connectionStateChanged.emit(!0);if("Connecting"!==e.hubConnection.state){console.log("Attempting to connect to SignalR hub at:",gt.signalRHubUrl||gt.hubUrl);try{yield e.hubConnection.start(),console.log("SignalR Connected successfully"),e.isConnected=!0,e.connectionStateChanged.emit(!0)}catch(o){console.warn("SignalR Connection Error - backend may not be running:",o),e.isConnected=!1,e.connectionStateChanged.emit(!1),setTimeout(()=>{console.log("Retrying SignalR connection..."),e.startConnection()},3e4)}}else console.log("SignalR connection already in progress")}else e.initializeConnection()})()}setupSignalRHandlers(){this.hubConnection&&(this.hubConnection.on("TaskNotification",(e,i,o)=>{this.showNotification(`${e} - Task #${i}: ${o}`),this.incrementNotificationCount(),this.notificationReceived.emit({action:e,taskId:i,taskDescription:o})}),this.hubConnection.on("ReceiveMessage",(e,i)=>{this.showNotification(`${e}: ${i}`),this.notificationReceived.emit({user:e,message:i})}),this.hubConnection.on("TaskAssigned",(e,i)=>{this.showNotification(`New task assigned to ${i}`),this.incrementNotificationCount(),this.notificationReceived.emit({action:"TaskAssigned",taskId:e,employeeName:i})}),this.hubConnection.on("UserConnected",e=>{console.log("User connected with connection ID:",e)}),this.hubConnection.on("UserDisconnected",e=>{console.log("User disconnected with connection ID:",e)}))}showNotification(e,i="success"){this.notificationMessageSubject.next(e),this.showToast(e,i)}showToast(e,i){const o=document.createElement("div");o.className=`toast toast-${i}`,o.textContent=e,Object.assign(o.style,{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",color:"white",fontWeight:"500",zIndex:"10000",maxWidth:"400px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backgroundColor:"success"===i?"#28a745":"error"===i?"#dc3545":"#17a2b8",wordWrap:"break-word"}),document.body.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},3e3)}incrementNotificationCount(){this.notificationCountSubject.next(this.notificationCountSubject.value+1)}stopConnection(){var e=this;return de(function*(){if(e.hubConnection&&"Connected"===e.hubConnection.state)try{yield e.hubConnection.stop(),console.log("SignalR Disconnected"),e.isConnected=!1,e.connectionStateChanged.emit(!1)}catch(i){console.error("Error stopping SignalR connection: "+i)}})()}sendMessage(e,i){this.hubConnection&&"Connected"===this.hubConnection.state&&this.hubConnection.invoke("SendMessage",e,i).catch(o=>console.error("SendMessage error: "+o))}sendTaskNotification(e,i,o){this.hubConnection&&"Connected"===this.hubConnection.state&&this.hubConnection.invoke("SendTaskNotification",e,i,o).catch(r=>console.error("SendTaskNotification error: "+r))}ngOnDestroy(){this.stopConnection()}resetNotificationCount(){this.notificationCountSubject.next(0)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lQ(t,n){if(1&t){const e=ve();m(0,"div",14),B("click",function(){return Q(e),J(I(2).openNotifications())}),m(1,"span",15),v(2),p(),m(3,"span",16),v(4,"\u{1f514}"),p()()}if(2&t){const e=I(2);b(2),ne(e.notificationCount)}}function cQ(t,n){if(1&t&&(m(0,"div",11)(1,"div",12),R(2,lQ,5,1,"div",13),p()()),2&t){const e=I();b(2),M("ngIf",e.notificationCount>0)}}function dQ(t,n){if(1&t&&(m(0,"nav",17)(1,"div",18)(2,"div",19)(3,"span",20),v(4,"\u{1f4cb}"),p(),v(5," Marketing Task Management System "),p(),m(6,"div",21)(7,"a",22)(8,"span",23),v(9,"\u{1f3e0}"),p(),v(10," Dashboard "),p()()()()),2&t){const e=I();b(7),M("routerLink",e.authService.isAdmin()?"/admin/dashboard":"/employee/dashboard")}}function uQ(t,n){if(1&t){const e=ve();m(0,"div",24)(1,"div",25)(2,"span",26),v(3),p(),m(4,"button",27),B("click",function(){return Q(e),J(I().closeNotification())}),v(5,"\xd7"),p()()()}if(2&t){const e=I();M("@slideInOut",e.showNotification?"in":"out"),b(3),ne(e.notificationMessage)}}let hQ=(()=>{class t{constructor(e,i,o){this.notificationService=i,this.router=o,this.title="marketing-form",this.notificationMessage="",this.showNotification=!1,this.notificationCount=0,this.isLoggedIn=!1,this.authService=e}ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.isLoggedIn=!!e}),this.notificationService.notificationCount$.subscribe(e=>{this.notificationCount=e}),this.notificationService.notificationMessage$.subscribe(e=>{e&&this.showNotificationToast(e)}),this.isLoggedIn&&this.notificationService.startConnection(),window.addEventListener("unhandledrejection",e=>{console.warn("Unhandled promise rejection:",e.reason),e.preventDefault()})}logout(){this.authService.logout(),this.notificationService.stopConnection(),this.router.navigate(["/login"])}showNotificationToast(e){this.notificationMessage=e,this.showNotification=!0,setTimeout(()=>{this.showNotification=!1,this.notificationMessage=""},3e3)}openNotifications(){this.notificationService.resetNotificationCount()}closeNotification(){this.showNotification=!1}static{this.\u0275fac=function(i){return new(i||t)(j(Qs),j(Js),j(fn))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-root"]],decls:14,vars:3,consts:[[1,"hospital-header"],[1,"header-container"],[1,"hospital-branding"],["src","assets/hospital logo strip.jpg","alt","Sri Balaji Action Medical Institute & Action Cancer Hospital","loading","lazy",1,"header-logo"],[1,"hospital-info"],[1,"hospital-name"],[1,"hospital-tagline"],["class","user-section",4,"ngIf"],["class","main-nav",4,"ngIf"],[1,"main-content"],["class","notification-toast",4,"ngIf"],[1,"user-section"],[1,"notification-area"],["class","notification-badge",3,"click",4,"ngIf"],[1,"notification-badge",3,"click"],[1,"badge"],[1,"notification-icon"],[1,"main-nav"],[1,"nav-container"],[1,"nav-brand"],[1,"brand-icon"],[1,"nav-links"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"nav-icon"],[1,"notification-toast"],[1,"toast-content"],[1,"toast-message"],[1,"toast-close",3,"click"]],template:function(i,o){1&i&&(m(0,"header",0)(1,"div",1)(2,"div",2),k(3,"img",3),m(4,"div",4)(5,"h1",5),v(6,"Sri Balaji Action Medical Institute & Action Cancer Hospital"),p(),m(7,"p",6),v(8,"Excellence in Healthcare & Medical Services"),p()()(),R(9,cQ,3,1,"div",7),p()(),R(10,dQ,11,1,"nav",8),m(11,"main",9),k(12,"router-outlet"),p(),R(13,uQ,6,2,"div",10)),2&i&&(b(9),M("ngIf",o.authService.isLoggedIn()),b(),M("ngIf",o.authService.isLoggedIn()),b(3),M("ngIf",o.showNotification))},dependencies:[co,h1,Gh,xO],styles:['.logout-btn[_ngcontent-%COMP%]{font-size:14px;padding:6px 12px;position:absolute;top:10px;right:20px}.hospital-header[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,teal,#20b2aa);box-shadow:0 4px 20px #00000026;padding:20px 0;position:relative;overflow:hidden}.hospital-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>\');pointer-events:none}.header-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.hospital-branding[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.header-logo[_ngcontent-%COMP%]{max-height:60px;width:auto;border-radius:8px;box-shadow:0 2px 8px #0003;background:#fff;padding:5px}.hospital-info[_ngcontent-%COMP%]{text-align:left}.hospital-name[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.3);letter-spacing:-.5px}.hospital-tagline[_ngcontent-%COMP%]{color:#ffffffe6;font-size:14px;margin:5px 0 0;font-weight:400;font-style:italic}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.notification-area[_ngcontent-%COMP%]{position:relative}.user-info[_ngcontent-%COMP%]{display:none}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2px}.welcome-text[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#fffc;text-transform:uppercase;letter-spacing:.5px}.user-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.user-role[_ngcontent-%COMP%]{font-size:12px;color:#ffffffb3;font-weight:400}.logout-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);color:#fff;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:6px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.logout-icon[_ngcontent-%COMP%]{font-size:16px}.main-nav[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f8f9fa,#fff);border-bottom:2px solid #e9ecef;padding:18px 0;box-shadow:0 2px 8px #0000000d}.nav-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.nav-brand[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50;display:flex;align-items:center;gap:10px;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.brand-icon[_ngcontent-%COMP%]{font-size:24px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.1))}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#495057;font-weight:500;padding:12px 20px;border-radius:25px;transition:all .3s ease;position:relative;display:flex;align-items:center;gap:8px;background:#ffffffb3;border:1px solid rgba(0,128,128,.1);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.nav-icon[_ngcontent-%COMP%]{font-size:16px;filter:drop-shadow(1px 1px 2px rgba(0,0,0,.1))}.nav-link[_ngcontent-%COMP%]:hover{color:teal;background:#0080801a;transform:translateY(-2px);box-shadow:0 4px 12px #00808033;border-color:#0080804d}.nav-link.active[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,teal,#20b2aa);box-shadow:0 4px 15px #0080804d;border-color:teal}.nav-link.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 2px rgba(0,0,0,.3))}.notification-badge[_ngcontent-%COMP%]{position:relative;cursor:pointer;padding:12px;border-radius:50%;transition:all .3s ease;display:flex;align-items:center;justify-content:center;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.notification-badge[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1);box-shadow:0 4px 12px #0003}.notification-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.3))}.badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;position:absolute;top:-3px;right:-3px;animation:_ngcontent-%COMP%_pulse 2s infinite;box-shadow:0 3px 8px #ff6b3566;border:2px solid white}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.main-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px;min-height:calc(100vh - 200px)}.notification-toast[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background:#28a745;color:#fff;padding:15px 20px;border-radius:5px;box-shadow:0 4px 12px #00000026;z-index:1000;max-width:300px}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:15px}.toast-message[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.toast-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:18px;cursor:pointer;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .3s ease}.toast-close[_ngcontent-%COMP%]:hover{background:#fff3}@media (max-width: 768px){.hospital-header[_ngcontent-%COMP%]{padding:15px 0}.header-container[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.hospital-branding[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.hospital-name[_ngcontent-%COMP%]{font-size:20px}.hospital-tagline[_ngcontent-%COMP%]{font-size:12px}.user-section[_ngcontent-%COMP%]{flex-direction:column;gap:15px;width:100%}.user-info[_ngcontent-%COMP%]{justify-content:center;padding:10px 15px}.nav-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.nav-brand[_ngcontent-%COMP%]{font-size:18px;text-align:center}.nav-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;gap:10px}.nav-link[_ngcontent-%COMP%]{padding:10px 16px;font-size:14px}}@media (max-width: 480px){.hospital-name[_ngcontent-%COMP%]{font-size:18px}.user-details[_ngcontent-%COMP%]{align-items:center;text-align:center}.nav-links[_ngcontent-%COMP%]{flex-direction:column;width:100%}.nav-link[_ngcontent-%COMP%]{width:100%;justify-content:center}}'],data:{animation:[m$("slideInOut",[fx("in",Ug({transform:"translateY(0)",opacity:1})),fx("out",Ug({transform:"translateY(-100%)",opacity:0})),px("in => out",hx("300ms ease-in-out")),px("out => in",hx("300ms ease-in-out"))])]}})}}return t})();function fQ(t,n){1&t&&(m(0,"div",58),v(1," Please enter a valid email address "),p())}function pQ(t,n){1&t&&(m(0,"div",58),v(1," Password is required "),p())}function gQ(t,n){1&t&&(m(0,"span"),k(1,"i",59),v(2,"Sign In "),p())}function mQ(t,n){1&t&&(m(0,"span"),k(1,"span",60),v(2," Signing in... "),p())}function _Q(t,n){if(1&t&&(m(0,"div",61),k(1,"i",62),v(2),p()),2&t){const e=I();b(2),q(" ",e.errorMessage," ")}}let vQ=(()=>{class t{constructor(e,i,o){this.fb=e,this.authService=i,this.router=o,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({username:["",[ce.required,ce.email]],password:["",[ce.required,ce.minLength(6)]]})}onSubmit(){if(console.log("Login form submitted"),console.log("Form valid:",this.loginForm.valid),console.log("Form value:",this.loginForm.value),this.loginForm.valid){this.isLoading=!0,this.errorMessage="";const e=this.loginForm.value;console.log("Attempting login with:",e),this.authService.login(e).subscribe({next:i=>{console.log("Login successful:",i),this.isLoading=!1,"Admin"===i.user.role?(console.log("Navigating to admin dashboard"),this.router.navigate(["/admin/dashboard"])):(console.log("Navigating to employee dashboard"),this.router.navigate(["/employee/dashboard"]))},error:i=>{console.error("Login error:",i),this.isLoading=!1,this.errorMessage=i.error?.message||"Login failed. Please check your credentials."}})}else console.log("Form is invalid"),console.log("Form errors:",this.getFormErrors()),this.markFormGroupTouched()}getFormErrors(){const e={};return Object.keys(this.loginForm.controls).forEach(i=>{const o=this.loginForm.get(i);o&&o.errors&&(e[i]=o.errors)}),e}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(e=>{this.loginForm.get(e)?.markAsTouched()})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}static{this.\u0275fac=function(i){return new(i||t)(j(zc),j(Qs),j(fn))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-login"]],decls:99,vars:11,consts:[[1,"login-container"],[1,"container-fluid"],[1,"row","min-vh-100"],[1,"col-lg-6","d-none","d-lg-flex","login-branding"],[1,"branding-content"],[1,"hospital-logo","mb-4"],["src","assets/hospital logo strip.jpg","alt","Sri Balaji Action Medical Institute & Action Cancer Hospital",1,"logo-img","img-fluid"],[1,"display-4","text-white","mb-3"],[1,"lead","text-white-50","mb-4"],[1,"feature-list"],[1,"feature-item"],[1,"bi","bi-check-circle-fill","text-success","me-2"],[1,"text-white"],[1,"col-lg-6","d-flex","align-items-center"],[1,"login-form-container","w-100"],[1,"card","shadow-lg","border-0"],[1,"card-body","p-5"],[1,"d-lg-none","text-center","mb-4"],["src","assets/hospital logo strip.jpg","alt","Hospital Logo",1,"logo-img-mobile","img-fluid","mb-3"],[1,"text-primary"],[1,"text-center","mb-4"],[1,"card-title","text-dark","mb-2"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-envelope"],["type","email","id","username","formControlName","username","placeholder","Enter your email address",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","password",1,"form-label"],[1,"bi","bi-lock"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"d-grid","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"demo-credentials","mt-4"],["id","credentialsAccordion",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#demoCredentials",1,"accordion-button","collapsed"],[1,"bi","bi-key","me-2"],["id","demoCredentials","data-bs-parent","#credentialsAccordion",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"row"],[1,"col-md-6"],[1,"credential-card"],[1,"text-primary","mb-2"],[1,"bi","bi-shield-check","me-1"],[1,"mb-1"],[1,"mb-0"],[1,"text-success","mb-2"],[1,"bi","bi-person-check","me-1"],[1,"text-center","mt-3"],[1,"bi","bi-info-circle","me-1"],[1,"invalid-feedback"],[1,"bi","bi-box-arrow-in-right","me-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],["role","alert",1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"]],template:function(i,o){if(1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),k(6,"img",6),p(),m(7,"h1",7),v(8,"Marketing Task Management"),p(),m(9,"p",8),v(10,"Sri Balaji Action Medical Institute & Action Cancer Hospital"),p(),m(11,"div",9)(12,"div",10),k(13,"i",11),m(14,"span",12),v(15,"Streamlined Task Assignment"),p()(),m(16,"div",10),k(17,"i",11),m(18,"span",12),v(19,"Real-time Progress Tracking"),p()(),m(20,"div",10),k(21,"i",11),m(22,"span",12),v(23,"Comprehensive Reporting"),p()()()()(),m(24,"div",13)(25,"div",14)(26,"div",15)(27,"div",16)(28,"div",17),k(29,"img",18),m(30,"h2",19),v(31,"Marketing Task Management"),p()(),m(32,"div",20)(33,"h3",21),v(34,"Welcome Back!"),p(),m(35,"p",22),v(36,"Please sign in to your account"),p()(),m(37,"form",23),B("ngSubmit",function(){return o.onSubmit()}),m(38,"div",24)(39,"label",25),v(40,"Email Address"),p(),m(41,"div",26)(42,"span",27),k(43,"i",28),p(),k(44,"input",29),p(),R(45,fQ,2,0,"div",30),p(),m(46,"div",31)(47,"label",32),v(48,"Password"),p(),m(49,"div",26)(50,"span",27),k(51,"i",33),p(),k(52,"input",34),p(),R(53,pQ,2,0,"div",30),p(),m(54,"div",35)(55,"button",36),R(56,gQ,3,0,"span",37)(57,mQ,3,0,"span",37),p()(),R(58,_Q,3,1,"div",38),p(),m(59,"div",39)(60,"div",40)(61,"div",41)(62,"h2",42)(63,"button",43),k(64,"i",44),v(65,"Demo Credentials "),p()(),m(66,"div",45)(67,"div",46)(68,"div",47)(69,"div",48)(70,"div",49)(71,"h6",50),k(72,"i",51),v(73,"Admin Access "),p(),m(74,"p",52)(75,"strong"),v(76,"Email:"),p(),v(77," admin@actionmedical.com"),p(),m(78,"p",53)(79,"strong"),v(80,"Password:"),p(),v(81," Admin123!"),p()()(),m(82,"div",48)(83,"div",49)(84,"h6",54),k(85,"i",55),v(86,"Employee Access "),p(),m(87,"p",52)(88,"strong"),v(89,"Email:"),p(),v(90," arjun.mehta@actionmedical.com"),p(),m(91,"p",53)(92,"strong"),v(93,"Password:"),p(),v(94," Employee123!"),p()()()(),m(95,"div",56)(96,"small",22),k(97,"i",57),v(98," Role will be automatically determined based on your account "),p()()()()()()()()()()()()()()),2&i){let r,s,l,c;b(37),M("formGroup",o.loginForm),b(7),Z("is-invalid",(null==(r=o.loginForm.get("username"))?null:r.invalid)&&(null==(r=o.loginForm.get("username"))?null:r.touched)),b(),M("ngIf",(null==(s=o.loginForm.get("username"))?null:s.invalid)&&(null==(s=o.loginForm.get("username"))?null:s.touched)),b(7),Z("is-invalid",(null==(l=o.loginForm.get("password"))?null:l.invalid)&&(null==(l=o.loginForm.get("password"))?null:l.touched)),b(),M("ngIf",(null==(c=o.loginForm.get("password"))?null:c.invalid)&&(null==(c=o.loginForm.get("password"))?null:c.touched)),b(2),M("disabled",o.isLoading||o.loginForm.invalid),b(),M("ngIf",!o.isLoading),b(),M("ngIf",o.isLoading),b(),M("ngIf",o.errorMessage)}},dependencies:[co,Ws,fo,Ro,Gs,Yr,qs],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>\');pointer-events:none}.login-branding[_ngcontent-%COMP%]{background:linear-gradient(135deg,#008080e6,#006666f2);position:relative;overflow:hidden}.login-branding[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}.branding-content[_ngcontent-%COMP%]{position:relative;z-index:2;padding:3rem;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.logo-img[_ngcontent-%COMP%]{max-height:80px;width:auto;filter:brightness(1.2) contrast(1.1);border-radius:12px;box-shadow:0 8px 32px #0000004d}.logo-img-mobile[_ngcontent-%COMP%]{max-height:60px;width:auto;border-radius:8px;box-shadow:0 4px 16px #0000001a}.feature-list[_ngcontent-%COMP%]{margin-top:2rem}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-bottom:1rem;font-size:1.1rem;opacity:0;animation:_ngcontent-%COMP%_slideInLeft .6s ease-out forwards}.feature-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.feature-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.feature-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.login-form-container[_ngcontent-%COMP%]{padding:2rem;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]{border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2;border:1px solid rgba(255,255,255,.2);box-shadow:0 20px 40px #0000001a;max-width:500px;width:100%;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 25px 50px #00000026}.card-body[_ngcontent-%COMP%]{padding:3rem!important}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin-bottom:.5rem}.input-group-text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #dee2e6;color:#6c757d;border-radius:12px 0 0 12px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:0 12px 12px 0;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#ffffffe6}.form-control[_ngcontent-%COMP%]:focus{border-color:teal;box-shadow:0 0 0 .2rem #00808040;background:#fff}.input-group[_ngcontent-%COMP%]:focus-within   .input-group-text[_ngcontent-%COMP%]{border-color:teal;background:linear-gradient(135deg,teal,#20b2aa);color:#fff}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#20b2aa);border:none;border-radius:12px;padding:.875rem 2rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;position:relative;overflow:hidden}.btn-primary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-primary[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#066,#1a9999);transform:translateY(-2px);box-shadow:0 8px 25px #0080804d}.btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;transform:none;box-shadow:none}.alert-danger[_ngcontent-%COMP%]{border-radius:12px;border:none;background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;box-shadow:0 4px 15px #dc35454d}.accordion-item[_ngcontent-%COMP%]{border:none;border-radius:12px;overflow:hidden;margin-bottom:.5rem;box-shadow:0 2px 10px #0000000d}.accordion-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:none;border-radius:12px;font-weight:600;color:#495057;padding:1rem 1.5rem;transition:all .3s ease}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background:linear-gradient(135deg,teal,#20b2aa);color:#fff;box-shadow:none}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #00808040}.accordion-body[_ngcontent-%COMP%]{background:#f8f9fa80;border-radius:0 0 12px 12px;padding:1.5rem}.credential-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 8px #0000000d;transition:all .3s ease;margin-bottom:1rem}.credential-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 991.98px){.login-form-container[_ngcontent-%COMP%]{padding:1rem}.card-body[_ngcontent-%COMP%]{padding:2rem!important}.branding-content[_ngcontent-%COMP%]{padding:2rem}}@media (max-width: 575.98px){.card-body[_ngcontent-%COMP%]{padding:1.5rem!important}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:focus, .accordion-button[_ngcontent-%COMP%]:focus{outline:none}.accordion-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.accordion-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.accordion-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:teal;border-radius:3px}.accordion-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#066}.credential-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.25rem;transition:color .3s ease}.credential-card[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{color:#495057}.display-4[_ngcontent-%COMP%]{font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.lead[_ngcontent-%COMP%]{text-shadow:1px 1px 2px rgba(0,0,0,.2)}.form-control.is-valid[_ngcontent-%COMP%]{border-color:#28a745;background-image:none}.form-control.is-valid[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540}.input-group[_ngcontent-%COMP%]   .form-control.is-valid[_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control.is-valid[_ngcontent-%COMP%] ~ .input-group-text[_ngcontent-%COMP%]{border-color:#28a745;background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.form-control.is-invalid[_ngcontent-%COMP%]{background-image:none}.input-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%] ~ .input-group-text[_ngcontent-%COMP%]{border-color:#dc3545;background:linear-gradient(135deg,#dc3545,#c82333);color:#fff}']})}}return t})(),lf=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${gt.apiUrl}/employees`}getEmployees(){return this.http.get(this.apiUrl)}getEmployeeById(e){return this.http.get(`${this.apiUrl}/${e}`)}createEmployee(e){return this.http.post(this.apiUrl,e)}updateEmployee(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}deleteEmployee(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cf=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${gt.apiUrl}`}getAllLocations(){return this.http.get(`${this.apiUrl}/locations`)}getLocationById(e){return this.http.get(`${this.apiUrl}/locations/${e}`)}createLocation(e){return this.http.post(`${this.apiUrl}/locations`,e)}updateLocation(e,i){return this.http.put(`${this.apiUrl}/locations/${e}`,i)}deleteLocation(e){return this.http.delete(`${this.apiUrl}/locations/${e}`)}getAllStates(){return this.http.get(`${this.apiUrl}/states`).pipe(le(e=>e&&e.success?e.data:Array.isArray(e)?e:[]))}getCitiesByState(e){return this.http.get(`${this.apiUrl}/cities?stateId=${e}`).pipe(le(i=>i&&i.success?i.data:Array.isArray(i)?i:[]))}getAllCities(){return this.http.get(`${this.apiUrl}/cities`).pipe(le(e=>e&&e.success?e.data:Array.isArray(e)?e:[]))}getAreasByCity(e){return this.http.get(`${this.apiUrl}/areas?cityId=${e}`).pipe(le(i=>i&&i.success?i.data:Array.isArray(i)?i:[]))}getAreasByState(e){return this.http.get(`${this.apiUrl}/areas?stateId=${e}`).pipe(le(i=>i.success?i.data:[]))}getAllAreas(){return this.http.get(`${this.apiUrl}/areas`).pipe(le(e=>e.success?e.data:[]))}getPincodesByArea(e){return this.http.get(`${this.apiUrl}/pincodes?areaId=${e}`).pipe(le(i=>i.success?i.data:[]))}getAllPincodes(){return this.http.get(`${this.apiUrl}/pincodes`).pipe(le(e=>e.success?e.data:[]))}getPincodesWithLocalities(){return this.http.get(`${this.apiUrl}/pincodes/with-localities`)}getPincodeLocalityDropdowns(){return this.http.get(`${this.apiUrl}/pincodes/dropdowns`)}validatePincodeLocality(e,i){return this.http.get(`${this.apiUrl}/pincodes/validate?pincode=${encodeURIComponent(e)}&localityName=${encodeURIComponent(i)}`)}getLocalitiesByPincode(e){return this.http.get(`${this.apiUrl}/pincodes/${encodeURIComponent(e)}/localities`)}searchStates(e){return this.http.get(`${this.apiUrl}/states/search?term=${encodeURIComponent(e)}`).pipe(le(i=>i.success?i.data:[]))}searchCities(e,i){let o=`${this.apiUrl}/cities/search?term=${encodeURIComponent(e)}`;return i&&(o+=`&stateId=${i}`),this.http.get(o).pipe(le(r=>r.success?r.data:[]))}searchAreas(e,i,o){let r=`${this.apiUrl}/areas/search?term=${encodeURIComponent(e)}`;return i&&(r+=`&stateId=${i}`),o&&(r+=`&cityId=${o}`),this.http.get(r).pipe(le(s=>s.success?s.data:[]))}getLocalitiesByArea(e){return this.http.get(`${this.apiUrl}/pincodes/localities?areaId=${e}`).pipe(le(i=>i&&i.success?i.data:Array.isArray(i)?i:[]))}getLocalitiesByCity(e){return this.http.get(`${this.apiUrl}/locations/localities?cityId=${e}`)}getPincodesByLocality(e,i){return!i&&e?new rt(o=>{o.next([]),o.complete()}):i?this.http.get(`${this.apiUrl}/locations/pincodes?localityId=${i}`).pipe(le(o=>o.map(r=>r.value))):new rt(o=>{o.next([]),o.complete()})}getLocalitiesForArea(e){return this.http.get(`${this.apiUrl}/pincodes/area-localities?areaId=${e}`).pipe(le(i=>i&&i.success?i.data:Array.isArray(i)?i:[]))}getPincodesForArea(e){return this.http.get(`${this.apiUrl}/pincodes/area-pincodes?areaId=${e}`).pipe(le(i=>i&&i.success?i.data:Array.isArray(i)?i:[]))}getAllPincodeData(){return this.http.get(`${this.apiUrl}/pincodes/all-data`).pipe(le(e=>e&&e.success?e.data:Array.isArray(e)?e:[]))}searchLocalities(e,i){let o=`${this.apiUrl}/pincodes/search-localities`;const r=new URLSearchParams;return e&&r.append("searchTerm",e),i&&r.append("areaId",i.toString()),r.toString()&&(o+=`?${r.toString()}`),this.http.get(o).pipe(le(s=>s&&s.success?s.data:Array.isArray(s)?s:[]))}searchPincodes(e,i){let o=`${this.apiUrl}/pincodes/search`;const r=new URLSearchParams;return e&&r.append("searchTerm",e),i&&r.append("areaId",i.toString()),r.toString()&&(o+=`?${r.toString()}`),this.http.get(o).pipe(le(s=>s&&s.success?s.data:Array.isArray(s)?s:[]))}getPincodeLocalityData(){return this.http.get(`${this.apiUrl}/pincode-locality-data`)}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cl=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${gt.apiUrl}/tasks`}getAllTasks(e,i){let o=this.apiUrl;const r=new URLSearchParams;return e&&r.append("status",e),i&&r.append("employeeId",i.toString()),r.toString()&&(o+=`?${r.toString()}`),this.http.get(o)}getTaskById(e){return this.http.get(`${this.apiUrl}/${e}`)}createTask(e){return this.http.post(this.apiUrl,e).pipe(le(i=>(console.log("Task created successfully:",i),i)))}updateTask(e,i){return this.http.put(`${this.apiUrl}/${e}`,i).pipe(le(o=>(console.log("Task updated successfully:",o),o)))}deleteTask(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe(le(i=>(console.log("Task deleted successfully:",i),i)))}getTasks(e,i){return this.getAllTasks(e,i)}updateTaskStatus(e,i,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:i,remarks:o})}getTaskTypes(){return this.http.get(`${gt.apiUrl}/tasktypes`)}rescheduleTask(e,i){return this.http.put(`${this.apiUrl}/${e}/reschedule`,i)}getCurrentUserRole(){return new rt(e=>{e.next("admin"),e.complete()})}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function df(t,n=T1){return Ot((e,i)=>{let o=null,r=null,s=null;const l=()=>{if(o){o.unsubscribe(),o=null;const u=r;r=null,i.next(u)}};function c(){const u=s+t,f=n.now();if(f<u)return o=this.schedule(void 0,u-f),void i.add(o);l()}e.subscribe(st(i,u=>{r=u,s=n.now(),o||(o=n.schedule(c,t),i.add(o))},()=>{l(),i.complete()},void 0,()=>{r=o=null}))})}function yQ(t,n){1&t&&(m(0,"span",29),v(1,"*"),p())}function bQ(t,n){if(1&t){const e=ve();m(0,"button",30),B("click",function(){return Q(e),J(I().clearState())}),k(1,"i",31),p()}}function wQ(t,n){if(1&t){const e=ve();m(0,"div",32),B("click",function(){const o=Q(e).$implicit;return J(I(2).onStateSelect(o))}),k(1,"i",33),m(2,"span",34),v(3),p(),m(4,"small",35),v(5),p()()}if(2&t){const e=n.$implicit,i=I(2);Z("active",(null==i.selectedState?null:i.selectedState.id)===e.id),b(3),ne(e.name),b(2),q("(",e.code||"",")")}}function CQ(t,n){if(1&t&&(m(0,"div",21),R(1,wQ,6,4,"div",22),p()),2&t){const e=I();b(),M("ngForOf",e.filteredStates)}}function DQ(t,n){1&t&&(m(0,"div",36)(1,"div",37),k(2,"div",38),v(3," Loading states... "),p()())}function TQ(t,n){1&t&&(m(0,"div",39)(1,"div",40),k(2,"i",41),v(3," No states found "),p()())}function SQ(t,n){if(1&t){const e=ve();m(0,"button",30),B("click",function(){Q(e);const o=I();return o.selectedCity=null,J(o.citySearchTerm="")}),k(1,"i",31),p()}}function MQ(t,n){if(1&t){const e=ve();m(0,"div",32),B("click",function(){const o=Q(e).$implicit;return J(I().onCitySelect(o))}),k(1,"i",42),m(2,"span",34),v(3),p(),m(4,"small",35),v(5),p()()}if(2&t){const e=n.$implicit,i=I();Z("active",(null==i.selectedCity?null:i.selectedCity.id)===e.id),b(3),ne(e.name),b(2),ne(e.name||"")}}function kQ(t,n){1&t&&(m(0,"span",29),v(1,"*"),p())}function EQ(t,n){if(1&t){const e=ve();m(0,"button",30),B("click",function(){return Q(e),J(I().clearAreas())}),k(1,"i",31),p()}}function xQ(t,n){if(1&t){const e=ve();m(0,"button",47),B("click",function(){Q(e);const o=I().$implicit;return J(I(2).removeArea(o))}),p()}}function IQ(t,n){if(1&t&&(m(0,"span",45),v(1),R(2,xQ,1,0,"button",46),p()),2&t){const e=n.$implicit,i=I(2);b(),q(" ",e.name," "),b(),M("ngIf",!i.disabled)}}function NQ(t,n){if(1&t&&(m(0,"div",43),R(1,IQ,3,2,"span",44),p()),2&t){const e=I();b(),M("ngForOf",e.selectedAreas)}}function OQ(t,n){if(1&t){const e=ve();m(0,"div",50)(1,"input",51),B("click",function(o){return Q(e),J(o.stopPropagation())}),p(),m(2,"label",52),k(3,"i",42),m(4,"span",34),v(5),p(),m(6,"small",53),v(7),p()()()}if(2&t){const e=I().$implicit,i=I(2);b(),M("checked",i.isAreaSelected(e)),b(4),ne(e.name),b(2),ne(e.name||e.name)}}function PQ(t,n){1&t&&k(0,"i",57)}function AQ(t,n){if(1&t&&(m(0,"div",54),k(1,"i",42),m(2,"div",55)(3,"span",34),v(4),p(),m(5,"small",53),v(6),p()(),R(7,PQ,1,0,"i",56),p()),2&t){const e=I().$implicit,i=I(2);b(4),ne(e.name),b(2),ne(e.name||e.name),b(),M("ngIf",i.isAreaSelected(e))}}function RQ(t,n){if(1&t){const e=ve();m(0,"div",32),B("click",function(){const o=Q(e).$implicit;return J(I(2).onAreaSelect(o))}),R(1,OQ,8,3,"div",48)(2,AQ,8,3,"div",49),p()}if(2&t){const e=n.$implicit,i=I(2);Z("active",i.isAreaSelected(e)),b(),M("ngIf",i.allowMultipleAreas),b(),M("ngIf",!i.allowMultipleAreas)}}function FQ(t,n){if(1&t&&(m(0,"div",21),R(1,RQ,3,4,"div",22),p()),2&t){const e=I();b(),M("ngForOf",e.filteredAreas)}}function LQ(t,n){1&t&&(m(0,"div",36)(1,"div",37),k(2,"div",38),v(3," Loading areas... "),p()())}function BQ(t,n){1&t&&(m(0,"div",39)(1,"div",40),k(2,"i",41),v(3," No areas found "),p()())}function VQ(t,n){if(1&t){const e=ve();m(0,"button",30),B("click",function(){return Q(e),J(I().clearPincode())}),k(1,"i",31),p()}}function jQ(t,n){if(1&t&&(m(0,"small",53),v(1),p()),2&t){const e=I().$implicit;b(),q(" ",e.localityName," ")}}function $Q(t,n){if(1&t){const e=ve();m(0,"div",32),B("click",function(){const o=Q(e).$implicit;return J(I(2).onPincodeSelect(o))}),k(1,"i",58),m(2,"div")(3,"span",34),v(4),p(),R(5,jQ,2,1,"small",59),p()()}if(2&t){const e=n.$implicit,i=I(2);Z("active",(null==i.selectedPincode?null:i.selectedPincode.id)===e.id),b(4),ne(e.value),b(),M("ngIf",e.localityName)}}function HQ(t,n){if(1&t&&(m(0,"div",21),R(1,$Q,6,4,"div",22),p()),2&t){const e=I();b(),M("ngForOf",e.filteredPincodes)}}function UQ(t,n){1&t&&(m(0,"div",36)(1,"div",37),k(2,"div",38),v(3," Loading pincodes... "),p()())}function zQ(t,n){1&t&&(m(0,"div",39)(1,"div",40),k(2,"i",41),v(3," No pincodes found "),p()())}function GQ(t,n){if(1&t&&(xc(0),v(1),Ic()),2&t){const e=I(2);b(),q(" - ",e.selectedCity.name,"")}}function WQ(t,n){if(1&t&&(xc(0),v(1),Ic()),2&t){const e=I(2);b(),q(" - ",e.getSelectedAreaNames()," ")}}function qQ(t,n){if(1&t&&(xc(0),v(1),Ic()),2&t){const e=I(2);b(),q(" - ",e.selectedPincode.value," ")}}function ZQ(t,n){if(1&t&&(m(0,"div",60)(1,"div",61)(2,"div",62)(3,"small",63),k(4,"i",64),m(5,"strong"),v(6,"Selected:"),p(),v(7),R(8,GQ,2,1,"ng-container",65)(9,WQ,2,1,"ng-container",65)(10,qQ,2,1,"ng-container",65),p()()()()),2&t){const e=I();b(7),q(" ",e.selectedState.name," "),b(),M("ngIf",e.selectedCity),b(),M("ngIf",e.selectedAreas.length>0),b(),M("ngIf",e.selectedPincode)}}let KQ=(()=>{class t{constructor(e){this.locationService=e,this.allowMultipleAreas=!0,this.autoSelectDelhi=!0,this.required=!1,this.disabled=!1,this.selectionChange=new fe,this.states=[],this.areas=[],this.cities=[],this.pincodes=[],this.filteredStates=[],this.filteredAreas=[],this.filteredCities=[],this.filteredPincodes=[],this.selectedState=null,this.selectedCity=null,this.selectedAreas=[],this.selectedPincode=null,this.stateSearchTerm="",this.areaSearchTerm="",this.citySearchTerm="",this.pincodeSearchTerm="",this.stateSearchSubject=new Ge,this.areaSearchSubject=new Ge,this.citySearchSubject=new Ge,this.pincodeSearchSubject=new Ge,this.isLoadingStates=!1,this.isLoadingAreas=!1,this.isLoadingPincodes=!1,this.showStateDropdown=!1,this.showAreaDropdown=!1,this.showPincodeDropdown=!1,this.showCityDropdown=!1,this.onChange=i=>{},this.onTouched=()=>{}}ngOnInit(){this.loadStates(),this.setupSearchSubscriptions()}writeValue(e){e&&this.setInitialSelection(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}setInitialSelection(e){var i=this;e.stateId&&this.loadStates().then(()=>{this.selectedState=this.states.find(o=>o.id===e.stateId)||null,this.selectedState&&(this.onStateSelect(this.selectedState,!1),function(){var r=de(function*(){e.cityId?(yield i.loadCities(i.selectedState.id),i.selectedCity=i.cities.find(s=>s.id===e.cityId)||null,i.selectedCity?yield i.loadAreasByCity(i.selectedCity.id):yield i.loadAreas(i.selectedState.id)):(yield i.loadCities(i.selectedState.id),yield i.loadAreas(i.selectedState.id))});return function(){return r.apply(this,arguments)}}()().then(de(function*(){e.areaIds&&e.areaIds.length>0&&(i.selectedAreas=i.areas.filter(r=>e.areaIds.includes(r.id)),i.filteredAreas=[...i.areas],e.pincodeId&&i.selectedAreas.length>0&&(yield i.loadPincodes(i.selectedAreas[0].id),i.selectedPincode=i.pincodes.find(r=>r.id===e.pincodeId)||null,i.filteredPincodes=[...i.pincodes]))})))})}setupSearchSubscriptions(){this.stateSearchSubject.pipe(df(300),rd(),ni(e=>e.trim()?this.locationService.searchStates(e):ue(this.states))).subscribe(e=>{this.filteredStates=e}),this.areaSearchSubject.pipe(df(300),rd(),ni(e=>e.trim()?this.locationService.searchAreas(e,this.selectedState?.id,this.selectedCity?.id):ue(this.areas))).subscribe(e=>{this.filteredAreas=e}),this.citySearchSubject.pipe(df(300),rd(),ni(e=>e.trim()?this.locationService.searchCities(e,this.selectedState?.id):ue(this.cities))).subscribe(e=>{this.filteredCities=e}),this.pincodeSearchSubject.pipe(df(300),rd(),ni(e=>e.trim()?this.locationService.searchPincodes(e,this.selectedAreas.length>0?this.selectedAreas[0].id:void 0):ue(this.pincodes))).subscribe(e=>{this.filteredPincodes=e})}loadStates(){var e=this;return de(function*(){e.isLoadingStates=!0;try{if(e.states=(yield e.locationService.getAllStates().toPromise())||[],e.filteredStates=[...e.states],e.autoSelectDelhi&&!e.selectedState){const i=e.states.find(o=>o.name.toLowerCase().includes("delhi"));i&&(e.selectedState=i,e.onStateSelect(i,!1))}}catch(i){console.error("Error loading states:",i)}finally{e.isLoadingStates=!1}})()}loadAreas(e){var i=this;return de(function*(){i.isLoadingAreas=!0;try{i.areas=(yield i.locationService.getAreasByState(e).toPromise())||[],i.filteredAreas=[...i.areas]}catch(o){console.error("Error loading areas:",o)}finally{i.isLoadingAreas=!1}})()}loadCities(e){var i=this;return de(function*(){try{i.cities=(yield i.locationService.getCitiesByState(e).toPromise())||[],i.filteredCities=[...i.cities]}catch(o){console.error("Error loading cities:",o)}})()}loadAreasByCity(e){var i=this;return de(function*(){i.isLoadingAreas=!0;try{const o=(yield i.locationService.getAreasByState(i.selectedState.id).toPromise())||[];i.areas=o.filter(r=>r.id===e||!r.id),i.filteredAreas=[...i.areas]}catch(o){console.error("Error loading areas by city:",o)}finally{i.isLoadingAreas=!1}})()}loadPincodes(e){var i=this;return de(function*(){i.isLoadingPincodes=!0;try{i.pincodes=(yield i.locationService.getPincodesByArea(e).toPromise())||[],i.filteredPincodes=[...i.pincodes]}catch(o){console.error("Error loading pincodes:",o)}finally{i.isLoadingPincodes=!1}})()}onStateSearch(e){this.stateSearchTerm=e,this.stateSearchSubject.next(e)}onAreaSearch(e){this.areaSearchTerm=e,this.areaSearchSubject.next(e)}onCitySearch(e){this.citySearchTerm=e,this.citySearchSubject.next(e)}onPincodeSearch(e){this.pincodeSearchTerm=e,this.pincodeSearchSubject.next(e)}onStateSelect(e,i=!0){this.selectedState=e,this.selectedCity=null,this.selectedAreas=[],this.selectedPincode=null,this.stateSearchTerm=e.name,this.citySearchTerm="",this.areaSearchTerm="",this.pincodeSearchTerm="",this.showStateDropdown=!1,this.loadCities(e.id),this.loadAreas(e.id),i&&this.emitSelectionChange()}onCitySelect(e){this.selectedCity=e,this.citySearchTerm=e.name,this.showCityDropdown=!1,this.selectedAreas=[],this.selectedPincode=null,this.pincodeSearchTerm="",this.loadAreasByCity(e.id),this.emitSelectionChange()}onAreaSelect(e){if(this.allowMultipleAreas){const i=this.selectedAreas.findIndex(o=>o.id===e.id);i>-1?this.selectedAreas.splice(i,1):this.selectedAreas.push(e)}else this.selectedAreas=[e],this.showAreaDropdown=!1;this.selectedPincode=null,this.pincodeSearchTerm="",this.selectedAreas.length>0&&this.loadPincodes(this.selectedAreas[0].id),this.emitSelectionChange()}onPincodeSelect(e){this.selectedPincode=e,this.pincodeSearchTerm=`${e.value} - ${e.localityName||""}`,this.showPincodeDropdown=!1,this.emitSelectionChange()}removeArea(e){const i=this.selectedAreas.findIndex(o=>o.id===e.id);i>-1&&(this.selectedAreas.splice(i,1),this.emitSelectionChange())}clearState(){this.selectedState=null,this.selectedAreas=[],this.selectedPincode=null,this.stateSearchTerm="",this.areaSearchTerm="",this.pincodeSearchTerm="",this.areas=[],this.pincodes=[],this.filteredAreas=[],this.filteredPincodes=[],this.emitSelectionChange()}clearPincode(){this.selectedPincode=null,this.pincodeSearchTerm="",this.emitSelectionChange()}clearAreas(){this.selectedAreas=[],this.selectedPincode=null,this.areaSearchTerm="",this.pincodeSearchTerm="",this.pincodes=[],this.filteredPincodes=[],this.emitSelectionChange()}toggleStateDropdown(){this.disabled||(this.showStateDropdown=!this.showStateDropdown,this.showAreaDropdown=!1,this.showPincodeDropdown=!1)}toggleAreaDropdown(){this.disabled||!this.selectedState||(this.showAreaDropdown=!this.showAreaDropdown,this.showStateDropdown=!1,this.showPincodeDropdown=!1)}togglePincodeDropdown(){this.disabled||0===this.selectedAreas.length||(this.showPincodeDropdown=!this.showPincodeDropdown,this.showStateDropdown=!1,this.showAreaDropdown=!1)}isAreaSelected(e){return this.selectedAreas.some(i=>i.id===e.id)}getSelectedAreasText(){return 0===this.selectedAreas.length?"Select areas":1===this.selectedAreas.length?this.selectedAreas[0].name:`${this.selectedAreas.length} areas selected`}getSelectedAreaNames(){return this.selectedAreas.map(e=>e.name).join(", ")}emitSelectionChange(){const e={stateId:this.selectedState?.id,stateName:this.selectedState?.name,cityId:this.selectedCity?.id,cityName:this.selectedCity?.name,areaIds:this.selectedAreas.map(i=>i.id),areaNames:this.selectedAreas.map(i=>i.name),pincodeId:this.selectedPincode?.id,pincodeValue:this.selectedPincode?.value,localityName:this.selectedPincode?.localityName};this.selectionChange.emit(e),this.onChange(e),this.onTouched()}onDocumentClick(e){e.target.closest(".hierarchical-location-selector")||(this.showStateDropdown=!1,this.showAreaDropdown=!1,this.showPincodeDropdown=!1)}static{this.\u0275fac=function(i){return new(i||t)(j(cf))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-hierarchical-location-selector"]],inputs:{allowMultipleAreas:"allowMultipleAreas",autoSelectDelhi:"autoSelectDelhi",required:"required",disabled:"disabled"},outputs:{selectionChange:"selectionChange"},features:[pt([{provide:Ti,useExisting:qe(()=>t),multi:!0}])],decls:69,vars:57,consts:[[1,"hierarchical-location-selector"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label","fw-bold"],[1,"bi","bi-geo-alt","me-1"],["class","text-danger",4,"ngIf"],[1,"dropdown-container"],[1,"input-group"],["type","text","placeholder","Search states...",1,"form-control",3,"ngModelChange","input","click","ngModel","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-chevron-down"],["class","btn btn-outline-danger","type","button","title","Clear selection",3,"click",4,"ngIf"],[1,"dropdown-menu","custom-dropdown"],[1,"dropdown-search"],["type","text","placeholder","Type to search states...",1,"form-control","form-control-sm",3,"ngModelChange","input","click","ngModel"],["class","dropdown-items",4,"ngIf"],["class","dropdown-loading",4,"ngIf"],["class","dropdown-empty",4,"ngIf"],[1,"bi","bi-buildings","me-1"],["type","text",1,"form-control",3,"click","placeholder","value","disabled"],["type","text","placeholder","Type to search cities...",1,"form-control","form-control-sm",3,"ngModelChange","input","click","ngModel"],[1,"dropdown-items"],["class","dropdown-item custom-dropdown-item",3,"active","click",4,"ngFor","ngForOf"],[1,"bi","bi-building","me-1"],["class","selected-areas mt-2",4,"ngIf"],["type","text","placeholder","Type to search areas...",1,"form-control","form-control-sm",3,"ngModelChange","input","click","ngModel"],[1,"bi","bi-mailbox","me-1"],["type","text","placeholder","Type to search pincodes...",1,"form-control","form-control-sm",3,"ngModelChange","input","click","ngModel"],["class","selection-summary mt-3",4,"ngIf"],[1,"text-danger"],["type","button","title","Clear selection",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x"],[1,"dropdown-item","custom-dropdown-item",3,"click"],[1,"bi","bi-geo-alt","me-2"],[1,"fw-medium"],[1,"text-muted","ms-auto"],[1,"dropdown-loading"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"dropdown-empty"],[1,"text-center","py-3","text-muted"],[1,"bi","bi-search","me-2"],[1,"bi","bi-building","me-2"],[1,"selected-areas","mt-2"],["class","badge bg-primary me-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","bg-primary","me-1","mb-1"],["type","button","class","btn-close btn-close-white ms-1",3,"click",4,"ngIf"],["type","button",1,"btn-close","btn-close-white","ms-1",3,"click"],["class","form-check",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"click","checked"],[1,"form-check-label"],[1,"text-muted","d-block"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["class","bi bi-check text-success",4,"ngIf"],[1,"bi","bi-check","text-success"],[1,"bi","bi-mailbox","me-2"],["class","text-muted d-block",4,"ngIf"],[1,"selection-summary","mt-3"],[1,"card","border-0","bg-light"],[1,"card-body","py-2"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"],[4,"ngIf"]],template:function(i,o){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),k(4,"i",4),v(5,"State "),R(6,yQ,2,0,"span",5),p(),m(7,"div",6)(8,"div",7)(9,"input",8),Di("ngModelChange",function(s){return Vi(o.stateSearchTerm,s)||(o.stateSearchTerm=s),s}),B("input",function(s){return o.onStateSearch(s.target.value)})("click",function(){return o.toggleStateDropdown()}),p(),m(10,"button",9),B("click",function(){return o.toggleStateDropdown()}),k(11,"i",10),p(),R(12,bQ,2,0,"button",11),p(),m(13,"div",12)(14,"div",13)(15,"input",14),Di("ngModelChange",function(s){return Vi(o.stateSearchTerm,s)||(o.stateSearchTerm=s),s}),B("input",function(s){return o.onStateSearch(s.target.value)})("click",function(s){return s.stopPropagation()}),p()(),R(16,CQ,2,1,"div",15)(17,DQ,4,0,"div",16)(18,TQ,4,0,"div",17),p()()(),m(19,"div",2)(20,"label",3),k(21,"i",18),v(22,"City "),p(),m(23,"div",6)(24,"div",7)(25,"input",19),B("click",function(){return o.showCityDropdown=!o.showCityDropdown}),p(),m(26,"button",9),B("click",function(){return o.showCityDropdown=!o.showCityDropdown}),k(27,"i",10),p(),R(28,SQ,2,0,"button",11),p(),m(29,"div",12)(30,"div",13)(31,"input",20),Di("ngModelChange",function(s){return Vi(o.citySearchTerm,s)||(o.citySearchTerm=s),s}),B("input",function(s){return o.onCitySearch(s.target.value)})("click",function(s){return s.stopPropagation()}),p()(),m(32,"div",21),R(33,MQ,6,4,"div",22),p()()()(),m(34,"div",2)(35,"label",3),k(36,"i",23),v(37,"Area "),R(38,kQ,2,0,"span",5),p(),m(39,"div",6)(40,"div",7)(41,"input",19),B("click",function(){return o.toggleAreaDropdown()}),p(),m(42,"button",9),B("click",function(){return o.toggleAreaDropdown()}),k(43,"i",10),p(),R(44,EQ,2,0,"button",11),p(),R(45,NQ,2,1,"div",24),m(46,"div",12)(47,"div",13)(48,"input",25),Di("ngModelChange",function(s){return Vi(o.areaSearchTerm,s)||(o.areaSearchTerm=s),s}),B("input",function(s){return o.onAreaSearch(s.target.value)})("click",function(s){return s.stopPropagation()}),p()(),R(49,FQ,2,1,"div",15)(50,LQ,4,0,"div",16)(51,BQ,4,0,"div",17),p()()(),m(52,"div",2)(53,"label",3),k(54,"i",26),v(55,"Pincode "),p(),m(56,"div",6)(57,"div",7)(58,"input",19),B("click",function(){return o.togglePincodeDropdown()}),p(),m(59,"button",9),B("click",function(){return o.togglePincodeDropdown()}),k(60,"i",10),p(),R(61,VQ,2,0,"button",11),p(),m(62,"div",12)(63,"div",13)(64,"input",27),Di("ngModelChange",function(s){return Vi(o.pincodeSearchTerm,s)||(o.pincodeSearchTerm=s),s}),B("input",function(s){return o.onPincodeSearch(s.target.value)})("click",function(s){return s.stopPropagation()}),p()(),R(65,HQ,2,1,"div",15)(66,UQ,4,0,"div",16)(67,zQ,4,0,"div",17),p()()()(),R(68,ZQ,11,4,"div",28),p()),2&i&&(b(6),M("ngIf",o.required),b(3),Z("is-invalid",o.required&&!o.selectedState),Ci("ngModel",o.stateSearchTerm),M("disabled",o.disabled),b(),M("disabled",o.disabled),b(),Z("rotate-180",o.showStateDropdown),b(),M("ngIf",o.selectedState&&!o.disabled),b(),Z("show",o.showStateDropdown),b(2),Ci("ngModel",o.stateSearchTerm),b(),M("ngIf",!o.isLoadingStates),b(),M("ngIf",o.isLoadingStates),b(),M("ngIf",!o.isLoadingStates&&0===o.filteredStates.length),b(7),M("placeholder",o.selectedState?"Search cities...":"Select state first")("value",o.selectedCity?o.selectedCity.name:"")("disabled",o.disabled||!o.selectedState),b(),M("disabled",o.disabled||!o.selectedState),b(),Z("rotate-180",o.showCityDropdown),b(),M("ngIf",o.selectedCity&&!o.disabled),b(),Z("show",o.showCityDropdown),b(2),Ci("ngModel",o.citySearchTerm),b(2),M("ngForOf",o.filteredCities),b(5),M("ngIf",o.required&&o.selectedState),b(3),Z("is-invalid",o.required&&o.selectedState&&0===o.selectedAreas.length),M("placeholder",o.selectedState?o.allowMultipleAreas?"Select areas...":"Select area...":"Select state first")("value",o.getSelectedAreasText())("disabled",o.disabled||!o.selectedState),b(),M("disabled",o.disabled||!o.selectedState),b(),Z("rotate-180",o.showAreaDropdown),b(),M("ngIf",o.selectedAreas.length>0&&!o.disabled),b(),M("ngIf",o.selectedAreas.length>0&&o.allowMultipleAreas),b(),Z("show",o.showAreaDropdown),b(2),Ci("ngModel",o.areaSearchTerm),b(),M("ngIf",!o.isLoadingAreas),b(),M("ngIf",o.isLoadingAreas),b(),M("ngIf",!o.isLoadingAreas&&0===o.filteredAreas.length),b(7),M("placeholder",o.selectedAreas.length>0?"Search pincodes...":"Select area first")("value",o.selectedPincode?o.selectedPincode.value:"")("disabled",o.disabled||0===o.selectedAreas.length),b(),M("disabled",o.disabled||0===o.selectedAreas.length),b(),Z("rotate-180",o.showPincodeDropdown),b(),M("ngIf",o.selectedPincode&&!o.disabled),b(),Z("show",o.showPincodeDropdown),b(2),Ci("ngModel",o.pincodeSearchTerm),b(),M("ngIf",!o.isLoadingPincodes),b(),M("ngIf",o.isLoadingPincodes),b(),M("ngIf",!o.isLoadingPincodes&&0===o.filteredPincodes.length),b(),M("ngIf",o.selectedState))},dependencies:[Wr,co,fo,Ro,Hc],styles:[".hierarchical-location-selector[_ngcontent-%COMP%], .dropdown-container[_ngcontent-%COMP%]{position:relative}.custom-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;z-index:1050;max-height:300px;overflow-y:auto;border:1px solid #dee2e6;border-radius:.375rem;background-color:#fff;box-shadow:0 .5rem 1rem #00000026;margin-top:2px}.custom-dropdown.show[_ngcontent-%COMP%]{display:block}.dropdown-search[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px solid #dee2e6;background-color:#f8f9fa}.dropdown-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;font-size:.875rem}.dropdown-items[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.dropdown-menu.custom-dropdown[_ngcontent-%COMP%]{width:100%}.custom-dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;border:none;background:none;width:100%;text-align:left;display:flex;align-items:center;transition:all .2s ease;border-bottom:1px solid #f8f9fa}.custom-dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#0d6efd}.custom-dropdown-item.active[_ngcontent-%COMP%]{background-color:#e7f3ff;color:#0d6efd;font-weight:500}.custom-dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-loading[_ngcontent-%COMP%], .dropdown-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6c757d;font-size:.875rem}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.selected-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.75rem;padding:.25rem .5rem;border-radius:.25rem;background-color:#0d6efd!important;color:#fff}.selected-tag[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:.6rem;margin-left:.25rem;opacity:.8}.selected-tag[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1}.form-check[_ngcontent-%COMP%]{width:100%;margin:0}.form-check-input[_ngcontent-%COMP%]{margin-top:.125rem}.form-check-label[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;cursor:pointer;margin-bottom:0}.selection-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:.5rem;transition:all .2s ease}.selection-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background-color:#e9ecef!important}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:none;transition:all .2s ease}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#ced4da}.input-group[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;color:#fff}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg);transition:transform .2s ease}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.form-control[_ngcontent-%COMP%]:disabled, .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 767.98px){.custom-dropdown[_ngcontent-%COMP%]{max-height:250px}.dropdown-items[_ngcontent-%COMP%]{max-height:150px}.custom-dropdown-item[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}.selected-tags[_ngcontent-%COMP%]{margin-top:.5rem}.selected-tag[_ngcontent-%COMP%]{font-size:.7rem;padding:.2rem .4rem}}.dropdown-items[_ngcontent-%COMP%]::-webkit-scrollbar, .custom-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.dropdown-items[_ngcontent-%COMP%]::-webkit-scrollbar-track, .custom-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.dropdown-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .custom-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.dropdown-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .custom-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.custom-dropdown[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px);transition:all .2s ease}.custom-dropdown.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.bi[_ngcontent-%COMP%]{font-size:.875rem}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#495057}.form-label[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{color:#6c757d}.selection-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem .75rem}.selection-summary[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:1.4}.form-control[_ngcontent-%COMP%]:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .2rem #0d6efd40}.btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #0d6efd40}"]})}}return t})();function YQ(t,n){if(1&t&&(m(0,"div",10)(1,"span",11),v(2),p()()),2&t){const e=I();b(),Z("placeholder",0===e.selectedValues.length),b(),q(" ",e.getDisplayText()," ")}}function QQ(t,n){if(1&t){const e=ve();m(0,"i",16),B("click",function(o){Q(e);const r=I().$implicit;return J(I(2).removeSelection(r,o))}),p()}}function JQ(t,n){if(1&t&&(m(0,"span",14),v(1),R(2,QQ,1,0,"i",15),p()),2&t){const e=n.index,i=I(2);b(),q(" ",i.getSelectedLabels()[e]," "),b(),M("ngIf",!i.disabled&&!i.readonly)}}function XQ(t,n){if(1&t&&(m(0,"div",12),R(1,JQ,3,2,"span",13),p()),2&t){const e=I();b(),M("ngForOf",e.selectedValues)}}function eJ(t,n){if(1&t&&(m(0,"div",17)(1,"span",18),v(2),p()()),2&t){const e=I();b(2),q("",e.selectedValues.length," selected")}}function tJ(t,n){1&t&&(m(0,"div",19),k(1,"i",20),p())}function nJ(t,n){if(1&t){const e=ve();m(0,"button",21),B("click",function(o){return Q(e),J(I().clearAll(o))}),k(1,"i",22),p()}}function iJ(t,n){if(1&t&&(m(0,"div",23),k(1,"i",24),p()),2&t){const e=I();b(),Z("rotated",e.isOpen)}}function oJ(t,n){if(1&t){const e=ve();m(0,"i",35),B("click",function(){Q(e);const o=I(2);return J(!o.readonly&&o.clearSearch())}),p()}}function rJ(t,n){1&t&&k(0,"i",47)}function sJ(t,n){1&t&&k(0,"i",48)}function aJ(t,n){if(1&t&&(m(0,"div",44),R(1,rJ,1,0,"i",45)(2,sJ,1,0,"i",46),p()),2&t){const e=I().$implicit,i=I(3);b(),M("ngIf",i.isSelected(e.value)),b(),M("ngIf",!i.isSelected(e.value))}}function lJ(t,n){if(1&t&&(m(0,"small",49),v(1),p()),2&t){const e=I().$implicit;b(),ne(e.group)}}function cJ(t,n){1&t&&(m(0,"div",50),k(1,"i",51),p())}function dJ(t,n){if(1&t){const e=ve();m(0,"div",38),B("click",function(){const o=Q(e).$implicit,r=I(3);return J(!r.readonly&&r.selectOption(o))})("mouseenter",function(){const o=Q(e).index;return J(I(3).highlightedIndex=o)}),R(1,aJ,3,2,"div",39),m(2,"div",40),k(3,"span",41),R(4,lJ,2,1,"small",42),p(),R(5,cJ,2,0,"div",43),p()}if(2&t){const e=n.$implicit,i=n.index,o=I(3);Z("selected",o.isSelected(e.value))("disabled",e.disabled)("highlighted",i===o.highlightedIndex),b(),M("ngIf",o.multiple),b(2),M("innerHTML",o.highlightSearchTerm(e.label),Tv),b(),M("ngIf",e.group),b(),M("ngIf",!o.multiple&&o.isSelected(e.value))}}function uJ(t,n){if(1&t&&(m(0,"div",36),R(1,dJ,6,10,"div",37),p()),2&t){const e=I(2);b(),M("ngForOf",e.filteredOptions)}}function hJ(t,n){if(1&t){const e=ve();m(0,"div",52),B("click",function(){return Q(e),J(I(2).addCustomValue())}),m(1,"div",40),k(2,"i",53)(3,"span",54),p()()}if(2&t){const e=I(2);b(3),M("innerHTML",e.customValueText.replace("{searchTerm}","<strong>"+e.searchTerm+"</strong>"),Tv)}}function fJ(t,n){if(1&t&&(m(0,"div",55),k(1,"i",56),v(2),p()),2&t){const e=I(2);b(2),q(" ",e.noOptionsText," ")}}function pJ(t,n){1&t&&(m(0,"div",57),k(1,"i",58),v(2," Loading options... "),p())}function gJ(t,n){if(1&t){const e=ve();m(0,"div",25),B("click",function(o){return Q(e),J(o.stopPropagation())}),m(1,"div",26)(2,"div",27),k(3,"i",28),m(4,"input",29),Di("ngModelChange",function(o){Q(e);const r=I();return Vi(r.searchTerm,o)||(r.searchTerm=o),J(o)}),B("input",function(o){return Q(e),J(I().onSearchInput(o))})("keydown",function(o){return Q(e),J(I().onKeyDown(o))}),p(),R(5,oJ,1,0,"i",30),p()(),R(6,uJ,2,1,"div",31)(7,hJ,4,1,"div",32)(8,fJ,3,1,"div",33)(9,pJ,3,0,"div",34),p()}if(2&t){const e=I();jr("max-height",e.maxHeight),b(4),M("placeholder",e.searchPlaceholder),Ci("ngModel",e.searchTerm),M("disabled",e.readonly),b(),M("ngIf",e.searchTerm),b(),M("ngIf",e.filteredOptions.length>0),b(),M("ngIf",e.allowCustomValue&&e.searchTerm.trim()&&0===e.filteredOptions.length),b(),M("ngIf",!(0!==e.filteredOptions.length||e.allowCustomValue&&e.searchTerm.trim())),b(),M("ngIf",e.loading)}}function mJ(t,n){if(1&t){const e=ve();m(0,"div",59),B("click",function(){return Q(e),J(I().closeDropdown())}),p()}}let _J=(()=>{class t{constructor(){this.options=[],this.placeholder="Select an option...",this.searchPlaceholder="Search...",this.multiple=!1,this.disabled=!1,this.readonly=!1,this.clearable=!0,this.maxHeight="200px",this.loading=!1,this.noOptionsText="No options found",this.allowCustomValue=!1,this.customValueText='Add "{searchTerm}"',this.id="",this.selectionChange=new fe,this.searchChange=new fe,this.customValueAdd=new fe,this.isOpen=!1,this.searchTerm="",this.selectedValues=[],this.filteredOptions=[],this.highlightedIndex=-1,this.searchSubject=new Ge,this.optionsSubject=new vt([]),this.destroy$=new Ge,this.onChange=e=>{},this.onTouched=()=>{},wm([this.searchSubject.pipe(K0(""),df(300),rd()),this.optionsSubject.asObservable()]).pipe(le(([e,i])=>this.filterOptions(e,i))).subscribe(e=>{this.filteredOptions=e,this.highlightedIndex=-1})}ngOnInit(){this.optionsSubject.next(this.options),this.setDisabledState(this.disabled)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(e){this.selectedValues=this.multiple?Array.isArray(e)?e:[]:null!=e?[e]:[]}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}toggleDropdown(){this.disabled||this.readonly||(this.isOpen=!this.isOpen,this.isOpen&&(this.searchTerm="",this.searchSubject.next(""),setTimeout(()=>{const e=document.querySelector(".dropdown-search input");e&&e.focus()},100)))}closeDropdown(){this.isOpen=!1,this.searchTerm="",this.highlightedIndex=-1,this.onTouched()}clearSearch(){this.searchTerm="",this.searchSubject.next("")}onSearchInput(e){this.searchTerm=e.target.value,this.searchSubject.next(this.searchTerm),this.searchChange.emit(this.searchTerm)}selectOption(e){if(!e.disabled){if(this.multiple){const i=this.selectedValues.findIndex(o=>o===e.value);i>-1?this.selectedValues.splice(i,1):this.selectedValues.push(e.value),this.onChange([...this.selectedValues])}else this.selectedValues=[e.value],this.onChange(e.value),this.closeDropdown();this.selectionChange.emit(this.multiple?[...this.selectedValues]:e.value)}}removeSelection(e,i){if(i&&i.stopPropagation(),this.multiple){const o=this.selectedValues.findIndex(r=>r===e);o>-1&&(this.selectedValues.splice(o,1),this.onChange([...this.selectedValues]),this.selectionChange.emit([...this.selectedValues]))}else this.selectedValues=[],this.onChange(null),this.selectionChange.emit(null)}clearAll(e){e.stopPropagation(),this.selectedValues=[],this.onChange(this.multiple?[]:null),this.selectionChange.emit(this.multiple?[]:null)}addCustomValue(){this.allowCustomValue&&this.searchTerm.trim()&&(this.customValueAdd.emit(this.searchTerm.trim()),this.searchTerm="",this.searchSubject.next(""))}onKeyDown(e){if(this.isOpen)switch(e.key){case"ArrowDown":e.preventDefault(),this.highlightedIndex=Math.min(this.highlightedIndex+1,this.filteredOptions.length-1),this.scrollToHighlighted();break;case"ArrowUp":e.preventDefault(),this.highlightedIndex=Math.max(this.highlightedIndex-1,-1),this.scrollToHighlighted();break;case"Enter":e.preventDefault(),this.highlightedIndex>=0&&this.highlightedIndex<this.filteredOptions.length?this.selectOption(this.filteredOptions[this.highlightedIndex]):this.allowCustomValue&&this.searchTerm.trim()&&this.addCustomValue();break;case"Escape":e.preventDefault(),this.closeDropdown()}else("Enter"===e.key||" "===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),this.toggleDropdown())}filterOptions(e,i){if(!e.trim())return i;const o=e.toLowerCase();return i.filter(r=>r.label.toLowerCase().includes(o)||r.value&&r.value.toString().toLowerCase().includes(o))}scrollToHighlighted(){setTimeout(()=>{const e=document.querySelector(".dropdown-option.highlighted");e&&e.scrollIntoView({block:"nearest"})})}isSelected(e){return this.selectedValues.includes(e)}getSelectedLabels(){return this.selectedValues.map(e=>{const i=this.options.find(o=>o.value===e);return i?i.label:e.toString()})}getDisplayText(){if(0===this.selectedValues.length)return this.placeholder;if(this.multiple){const e=this.getSelectedLabels();return 1===e.length?e[0]:`${e.length} items selected`}return this.getSelectedLabels()[0]||this.placeholder}ngOnChanges(){this.optionsSubject.next(this.options)}highlightSearchTerm(e){if(!this.searchTerm.trim())return e;const i=new RegExp(`(${this.searchTerm.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(i,'<span class="highlight">$1</span>')}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-searchable-dropdown"]],inputs:{options:"options",placeholder:"placeholder",searchPlaceholder:"searchPlaceholder",multiple:"multiple",disabled:"disabled",readonly:"readonly",clearable:"clearable",maxHeight:"maxHeight",loading:"loading",noOptionsText:"noOptionsText",allowCustomValue:"allowCustomValue",customValueText:"customValueText",id:"id"},outputs:{selectionChange:"selectionChange",searchChange:"searchChange",customValueAdd:"customValueAdd"},features:[pt([{provide:Ti,useExisting:qe(()=>t),multi:!0}]),Dn],decls:10,vars:17,consts:[["tabindex","0",1,"searchable-dropdown",3,"keydown","id"],[1,"dropdown-trigger",3,"click"],["class","selected-values",4,"ngIf"],["class","selected-tags",4,"ngIf"],["class","selection-count",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["type","button","class","clear-button","tabindex","-1",3,"click",4,"ngIf"],["class","dropdown-arrow",4,"ngIf"],["class","dropdown-menu",3,"max-height","click",4,"ngIf"],["class","dropdown-backdrop",3,"click",4,"ngIf"],[1,"selected-values"],[1,"display-text"],[1,"selected-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],["class","bi bi-x tag-remove",3,"click",4,"ngIf"],[1,"bi","bi-x","tag-remove",3,"click"],[1,"selection-count"],[1,"count-badge"],[1,"loading-indicator"],[1,"bi","bi-arrow-clockwise","spin"],["type","button","tabindex","-1",1,"clear-button",3,"click"],[1,"bi","bi-x"],[1,"dropdown-arrow"],[1,"bi","bi-chevron-down"],[1,"dropdown-menu",3,"click"],[1,"dropdown-search"],[1,"search-input-wrapper"],[1,"bi","bi-search","search-icon"],["type","text",1,"search-input",3,"ngModelChange","input","keydown","placeholder","ngModel","disabled"],["class","bi bi-x clear-search",3,"click",4,"ngIf"],["class","dropdown-options",4,"ngIf"],["class","dropdown-option custom-value",3,"click",4,"ngIf"],["class","no-options",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"bi","bi-x","clear-search",3,"click"],[1,"dropdown-options"],["class","dropdown-option",3,"selected","disabled","highlighted","click","mouseenter",4,"ngFor","ngForOf"],[1,"dropdown-option",3,"click","mouseenter"],["class","option-checkbox",4,"ngIf"],[1,"option-content"],[1,"option-label",3,"innerHTML"],["class","option-group",4,"ngIf"],["class","selection-indicator",4,"ngIf"],[1,"option-checkbox"],["class","bi bi-check-square-fill",4,"ngIf"],["class","bi bi-square",4,"ngIf"],[1,"bi","bi-check-square-fill"],[1,"bi","bi-square"],[1,"option-group"],[1,"selection-indicator"],[1,"bi","bi-check"],[1,"dropdown-option","custom-value",3,"click"],[1,"bi","bi-plus-circle","me-2"],[3,"innerHTML"],[1,"no-options"],[1,"bi","bi-search","me-2"],[1,"loading-state"],[1,"bi","bi-arrow-clockwise","spin","me-2"],[1,"dropdown-backdrop",3,"click"]],template:function(i,o){1&i&&(m(0,"div",0),B("keydown",function(s){return o.onKeyDown(s)}),m(1,"div",1),B("click",function(){return!o.readonly&&o.toggleDropdown()}),R(2,YQ,3,3,"div",2)(3,XQ,2,1,"div",3)(4,eJ,3,1,"div",4)(5,tJ,2,0,"div",5)(6,nJ,2,0,"button",6)(7,iJ,2,2,"div",7),p(),R(8,gJ,10,10,"div",8)(9,mJ,1,0,"div",9),p()),2&i&&(Z("disabled",o.disabled)("readonly",o.readonly)("open",o.isOpen),M("id",o.id),b(),Z("has-value",o.selectedValues.length>0),b(),M("ngIf",!o.multiple||o.selectedValues.length<=3),b(),M("ngIf",o.multiple&&o.selectedValues.length>0&&o.selectedValues.length<=3),b(),M("ngIf",o.multiple&&o.selectedValues.length>3),b(),M("ngIf",o.loading),b(),M("ngIf",o.clearable&&o.selectedValues.length>0&&!o.disabled&&!o.loading&&!o.readonly),b(),M("ngIf",!o.loading),b(),M("ngIf",o.isOpen),b(),M("ngIf",o.isOpen))},dependencies:[Wr,co,fo,Ro,Hc],styles:[".searchable-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;outline:none}.searchable-dropdown.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.dropdown-trigger[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:38px;padding:8px 12px;background:#fff;border:2px solid #e9ecef;border-radius:8px;cursor:pointer;transition:all .3s ease;position:relative}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#ced4da}.searchable-dropdown.open[_ngcontent-%COMP%]   .dropdown-trigger[_ngcontent-%COMP%], .dropdown-trigger[_ngcontent-%COMP%]:focus-within{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.dropdown-trigger.has-value[_ngcontent-%COMP%]{border-color:#198754}.selected-values[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;min-height:20px}.display-text[_ngcontent-%COMP%]{color:#495057;font-size:14px;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.display-text.placeholder[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;flex:1;align-items:center}.tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;background:#e7f3ff;color:#0d6efd;border:1px solid #b6d7ff;border-radius:12px;font-size:12px;font-weight:500;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-remove[_ngcontent-%COMP%]{margin-left:4px;cursor:pointer;font-size:10px;opacity:.7;transition:opacity .2s ease}.tag-remove[_ngcontent-%COMP%]:hover{opacity:1;color:#dc3545}.selection-count[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}.count-badge[_ngcontent-%COMP%]{background:#0d6efd;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:600}.loading-indicator[_ngcontent-%COMP%]{margin-right:8px;color:#6c757d}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.clear-button[_ngcontent-%COMP%]{background:none;border:none;padding:2px;margin-right:4px;color:#6c757d;cursor:pointer;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#dc3545}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:8px;color:#6c757d;transition:transform .3s ease}.dropdown-arrow[_ngcontent-%COMP%]   .bi-chevron-down.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;z-index:1000;background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 4px 20px #00000026;margin-top:4px;overflow:hidden;animation:_ngcontent-%COMP%_dropdownFadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_dropdownFadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-search[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #e9ecef;background:#f8f9fa}.search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:8px;color:#6c757d;font-size:14px;z-index:1}.search-input[_ngcontent-%COMP%]{width:100%;padding:6px 12px 6px 32px;border:1px solid #ced4da;border-radius:6px;font-size:14px;outline:none;transition:border-color .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .1rem #0d6efd40}.clear-search[_ngcontent-%COMP%]{position:absolute;right:8px;color:#6c757d;cursor:pointer;font-size:12px;padding:2px;border-radius:50%;transition:all .2s ease}.clear-search[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#495057}.dropdown-options[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.dropdown-option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;cursor:pointer;transition:background-color .2s ease;border-bottom:1px solid #f8f9fa}.dropdown-option[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-option[_ngcontent-%COMP%]:hover, .dropdown-option.highlighted[_ngcontent-%COMP%]{background-color:#f8f9fa}.dropdown-option.selected[_ngcontent-%COMP%]{background-color:#e7f3ff;color:#0d6efd}.dropdown-option.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background-color:transparent!important}.option-checkbox[_ngcontent-%COMP%]{margin-right:8px;color:#0d6efd;font-size:16px}.option-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-width:0}.option-label[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dropdown-option.selected[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{color:#0d6efd;font-weight:500}.option-group[_ngcontent-%COMP%]{color:#6c757d;font-size:12px;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background-color:#f0f0f0;padding:1px 6px;border-radius:4px;display:inline-block;max-width:100%}.selection-indicator[_ngcontent-%COMP%]{margin-left:8px;color:#198754;font-size:16px}.dropdown-option.custom-value[_ngcontent-%COMP%]{background-color:#fff3cd;border-color:#ffeaa7;color:#856404}.dropdown-option.custom-value[_ngcontent-%COMP%]:hover{background-color:#ffeaa7}.no-options[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{padding:16px 12px;text-align:center;color:#6c757d;font-size:14px;font-style:italic}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:999;background:transparent}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.highlight[_ngcontent-%COMP%]{background-color:#fff3cd;font-weight:600;padding:1px 2px;border-radius:2px}@media (max-width: 576px){.dropdown-menu[_ngcontent-%COMP%]{max-height:250px}.tag[_ngcontent-%COMP%]{max-width:100px;font-size:11px}.dropdown-option[_ngcontent-%COMP%]{padding:10px 12px}.option-label[_ngcontent-%COMP%]{font-size:13px}}.searchable-dropdown[_ngcontent-%COMP%]:focus-within   .dropdown-trigger[_ngcontent-%COMP%]{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.tag[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tagFadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_tagFadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@media (prefers-contrast: high){.dropdown-trigger[_ngcontent-%COMP%]{border-width:2px}.dropdown-option.selected[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}.tag[_ngcontent-%COMP%]{border-width:2px}}"]})}}return t})();function vJ(t,n){1&t&&(m(0,"div",70),v(1," Please select an employee "),p())}function yJ(t,n){1&t&&(m(0,"div",70),v(1," Please select a task date "),p())}function bJ(t,n){1&t&&(m(0,"div",70),v(1," Please select priority "),p())}function wJ(t,n){if(1&t&&(m(0,"option",71),v(1),p()),2&t){const e=n.$implicit;M("value",e.name),b(),ne(e.name)}}function CJ(t,n){1&t&&(m(0,"div",70),v(1," Please select status "),p())}function DJ(t,n){1&t&&(m(0,"div",70),v(1," Please select deadline "),p())}function TJ(t,n){if(1&t){const e=ve();m(0,"div",72)(1,"label",57)(2,"input",73),B("change",function(o){const r=Q(e).$implicit;return J(I().onTaskTypeSelectionChange(o,r.value))}),p(),k(3,"span",59),m(4,"span",60),v(5),p()()()}if(2&t){const e=n.$implicit;b(2),M("value",e.value),b(3),ne(e.label)}}function SJ(t,n){1&t&&(m(0,"div",70),v(1," Please enter task description "),p())}function MJ(t,n){1&t&&(m(0,"span"),v(1,"Assign Task"),p())}function kJ(t,n){1&t&&(m(0,"span"),v(1,"Assigning..."),p())}function EJ(t,n){1&t&&(m(0,"div",74)(1,"div",75)(2,"span",76),v(3,"\u2713"),p(),m(4,"span"),v(5,"Task assigned successfully! Employee will be notified."),p()()())}let xJ=(()=>{class t{constructor(e,i,o,r,s,l,c){this.fb=e,this.router=i,this.employeeService=o,this.locationService=r,this.taskService=s,this.notificationService=l,this.http=c,this.mode="create",this.taskUpdated=new fe,this.currentUserRole="",this.canEdit=!0,this.employees=[],this.employeeOptions=[],this.isDropdownDisabled=!1,this.locations=[],this.taskStatuses=[],this.showCustomLocation=!1,this.isLoading=!1,this.showSuccess=!1,this.selectedLocationIds=[],this.selectedTaskTypes=[],this.hierarchicalLocationSelection={},this.availableTaskTypes=[],this.taskForm=this.fb.group({employeeId:["",ce.required],taskDate:["",ce.required],locationId:["",ce.required],customLocation:[""],customLocationState:["Delhi"],priority:["",ce.required],deadline:["",ce.required],description:["",[ce.required,ce.minLength(10)]],status:["Not Started",ce.required],taskType:["General"],department:["Marketing"],clientName:[""],projectCode:[""],employeeIdNumber:[""],estimatedHours:[""],taskCategory:["Field Work"],additionalNotes:[""],isUrgent:[!1]})}ngOnInit(){this.loadCurrentUserRole(),this.checkEditPermission(),"edit"===this.mode&&this.task&&this.populateForm(),this.loadEmployees(),this.loadLocations(),this.loadTaskTypes(),this.loadTaskStatuses()}loadEmployees(){this.employeeService.getEmployees().subscribe({next:e=>{this.employees=e,this.employeeOptions=e.map(i=>({value:i.id.toString(),label:i.name})),console.log("Employees loaded:",this.employeeOptions)},error:e=>{console.error("Error loading employees:",e)}})}loadLocations(){this.locationService.getAllLocations().subscribe({next:e=>{this.locations=e,console.log("Locations loaded:",e)},error:e=>{console.error("Error loading locations:",e)}})}loadTaskTypes(){this.taskService.getTaskTypes().subscribe({next:e=>{this.availableTaskTypes=e&&e.length>0?e.map(i=>({value:i.name,label:i.name})):[{value:"General",label:"General"},{value:"Marketing Campaign",label:"Marketing Campaign"},{value:"Client Meeting",label:"Client Meeting"},{value:"Field Survey",label:"Field Survey"},{value:"Data Collection",label:"Data Collection"},{value:"Report Generation",label:"Report Generation"},{value:"Training",label:"Training"},{value:"Event Management",label:"Event Management"}],console.log("Task types loaded:",this.availableTaskTypes)},error:e=>{console.error("Error loading task types:",e),this.availableTaskTypes=[{value:"General",label:"General"},{value:"Marketing Campaign",label:"Marketing Campaign"},{value:"Client Meeting",label:"Client Meeting"},{value:"Field Survey",label:"Field Survey"},{value:"Data Collection",label:"Data Collection"},{value:"Report Generation",label:"Report Generation"},{value:"Training",label:"Training"},{value:"Event Management",label:"Event Management"}]}})}loadTaskStatuses(){const i={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};this.http.get(`${gt.apiUrl}/dropdowns/statuses`,{headers:i}).subscribe({next:o=>{this.taskStatuses=o,console.log("Task statuses loaded:",o)},error:o=>{console.error("Error loading task statuses:",o),this.taskStatuses=[{id:1,name:"Not Started"},{id:2,name:"In Progress"},{id:3,name:"Completed"},{id:4,name:"Postponed"},{id:5,name:"Partial Close"}]}})}onEmployeeSelect(e){console.log("Employee selected:",e),this.taskForm.patchValue({employeeId:e})}onLocationChange(e){"custom"===e.target.value?(this.showCustomLocation=!0,this.taskForm.patchValue({locationId:"",customLocation:"",customLocationState:"Delhi"}),this.taskForm.get("customLocation")?.setValidators([ce.required]),this.taskForm.get("locationId")?.clearValidators()):(this.showCustomLocation=!1,this.taskForm.get("customLocation")?.clearValidators(),this.taskForm.get("locationId")?.setValidators([ce.required])),this.taskForm.get("customLocation")?.updateValueAndValidity(),this.taskForm.get("locationId")?.updateValueAndValidity()}onLocationSelectionChange(e,i){e.target.checked?this.selectedLocationIds.includes(i)||this.selectedLocationIds.push(i):this.selectedLocationIds=this.selectedLocationIds.filter(o=>o!==i)}onCustomLocationToggle(e){this.showCustomLocation=e.target.checked,this.showCustomLocation?this.taskForm.get("customLocation")?.setValidators([ce.required]):(this.taskForm.get("customLocation")?.clearValidators(),this.taskForm.patchValue({customLocation:"",customLocationState:"Delhi"})),this.taskForm.get("customLocation")?.updateValueAndValidity()}onTaskTypeSelectionChange(e,i){e.target.checked?this.selectedTaskTypes.includes(i)||this.selectedTaskTypes.push(i):this.selectedTaskTypes=this.selectedTaskTypes.filter(o=>o!==i)}onSubmit(){if("view"!==this.mode&&this.canEdit)if(this.taskForm.valid){this.isLoading=!0,this.showSuccess=!1;const e=this.taskForm.value,i={employeeId:parseInt(e.employeeId),taskDate:e.taskDate,priority:e.priority,deadline:e.deadline,description:e.description,stateName:this.hierarchicalLocationSelection.stateName||"",cityName:this.hierarchicalLocationSelection.cityName||"",pincode:this.hierarchicalLocationSelection.pincodeValue||"",localityName:this.hierarchicalLocationSelection.localityName||"",locationId:this.showCustomLocation?null:this.selectedLocationIds.length>0?this.selectedLocationIds[0]:null,customLocation:this.showCustomLocation?e.customLocation:null,LocationIds:this.selectedLocationIds.length>0?this.selectedLocationIds:[],TaskTypeIds:[],taskType:this.selectedTaskTypes.length>0?this.selectedTaskTypes[0]:"General",department:e.department||"Marketing",clientName:e.clientName||null,projectCode:e.projectCode||null,estimatedHours:e.estimatedHours?parseFloat(e.estimatedHours):null,taskCategory:e.taskCategory||"Field Work",additionalNotes:e.additionalNotes||null,isUrgent:e.isUrgent||!1};this.hierarchicalLocationSelection.stateId&&(i.stateId=this.hierarchicalLocationSelection.stateId,i.stateName=this.hierarchicalLocationSelection.stateName),this.hierarchicalLocationSelection.cityId&&(i.cityId=this.hierarchicalLocationSelection.cityId,i.cityName=this.hierarchicalLocationSelection.cityName),this.hierarchicalLocationSelection.areaIds?.length&&(i.areaId=this.hierarchicalLocationSelection.areaIds[0],i.areaName=this.hierarchicalLocationSelection.areaNames?.[0]||""),this.hierarchicalLocationSelection.pincodeId&&(i.pincodeId=this.hierarchicalLocationSelection.pincodeId,i.pincodeValue=this.hierarchicalLocationSelection.pincodeValue,i.localityName=this.hierarchicalLocationSelection.localityName),console.log("Populating form with task data:",i),"create"===this.mode?this.taskService.createTask(i).subscribe({next:o=>{this.isLoading=!1,this.showSuccess=!0,this.resetForm(),console.log("Task created successfully:",o),this.notificationService.showNotification("Task assigned successfully!"),setTimeout(()=>{this.showSuccess=!1,this.router.navigate(["/admin/dashboard"])},2e3)},error:o=>{console.error("Error creating task:",o),this.isLoading=!1,this.notificationService.showNotification("Error creating task. Please try again.","error")}}):"edit"===this.mode&&this.task&&this.taskService.updateTask(this.task.taskId,i).subscribe({next:o=>{this.isLoading=!1,this.showSuccess=!0,this.taskUpdated.emit(o),console.log("Task updated successfully:",o),this.notificationService.showNotification("Task updated successfully!"),setTimeout(()=>{this.showSuccess=!1,this.router.navigate(["/admin/dashboard"])},2e3)},error:o=>{console.error("Error updating task:",o),this.isLoading=!1,this.notificationService.showNotification("Error updating task. Please try again.","error")}})}else this.markFormGroupTouched()}resetForm(){this.taskForm.reset({customLocationState:"Delhi",taskType:"General",department:"Marketing",taskCategory:"Field Work",status:"Not Started",isUrgent:!1}),this.showCustomLocation=!1,this.selectedLocationIds=[],this.selectedTaskTypes=[],this.hierarchicalLocationSelection={},this.taskForm.get("customLocation")?.clearValidators(),this.taskForm.get("locationId")?.setValidators([ce.required]),this.taskForm.get("customLocation")?.updateValueAndValidity(),this.taskForm.get("locationId")?.updateValueAndValidity()}markFormGroupTouched(){Object.keys(this.taskForm.controls).forEach(e=>{this.taskForm.get(e)?.markAsTouched()})}onHierarchicalLocationChange(e){this.hierarchicalLocationSelection=e,console.log("Hierarchical location selection changed:",e)}get employeeId(){return this.taskForm.get("employeeId")}get taskDate(){return this.taskForm.get("taskDate")}get locationId(){return this.taskForm.get("locationId")}get customLocation(){return this.taskForm.get("customLocation")}get priority(){return this.taskForm.get("priority")}get deadline(){return this.taskForm.get("deadline")}get description(){return this.taskForm.get("description")}get taskType(){return this.taskForm.get("taskType")}get department(){return this.taskForm.get("department")}get clientName(){return this.taskForm.get("clientName")}get projectCode(){return this.taskForm.get("projectCode")}get estimatedHours(){return this.taskForm.get("estimatedHours")}get taskCategory(){return this.taskForm.get("taskCategory")}get additionalNotes(){return this.taskForm.get("additionalNotes")}get isUrgent(){return this.taskForm.get("isUrgent")}get status(){return this.taskForm.get("status")}loadCurrentUserRole(){this.taskService.getCurrentUserRole().subscribe({next:e=>{this.currentUserRole=e,this.checkEditPermission()},error:e=>{console.error("Error loading user role:",e),this.currentUserRole="user",this.checkEditPermission()}})}checkEditPermission(){if("view"===this.mode)return void(this.canEdit=!1);if(!this.task)return void(this.canEdit=!0);if("admin"===this.currentUserRole)return void(this.canEdit=!0);const e=this.task.employeeId===this.getCurrentUserEmployeeId();this.canEdit=e&&"Completed"!==this.task.status}getCurrentUserEmployeeId(){return JSON.parse(localStorage.getItem("user")||"{}").employeeId||0}populateForm(){this.task&&(this.taskForm.patchValue({employeeId:this.task.employeeId.toString(),taskDate:this.task.taskDate,deadline:this.task.deadline,description:this.task.description,priority:this.task.priority,status:this.task.status,taskType:this.task.taskType,department:this.task.department,clientName:this.task.clientName,projectCode:this.task.projectCode,estimatedHours:this.task.estimatedHours,taskCategory:this.task.taskCategory,additionalNotes:this.task.additionalNotes,isUrgent:this.task.isUrgent}),this.showCustomLocation=!!this.task.customLocation,this.task.customLocation&&this.taskForm.patchValue({customLocation:this.task.customLocation}),this.task.stateId&&(this.hierarchicalLocationSelection.stateId=this.task.stateId,this.hierarchicalLocationSelection.stateName=this.task.stateName||void 0),this.task.cityId&&(this.hierarchicalLocationSelection.cityId=this.task.cityId,this.hierarchicalLocationSelection.cityName=this.task.cityName||void 0),this.task.areaId&&(this.hierarchicalLocationSelection.areaIds=[this.task.areaId],this.hierarchicalLocationSelection.areaNames=[this.task.areaName||""]),this.task.pincodeId&&(this.hierarchicalLocationSelection.pincodeId=this.task.pincodeId,this.hierarchicalLocationSelection.pincodeValue=this.task.pincodeValue||void 0),this.task.taskType&&(this.selectedTaskTypes=[this.task.taskType]),this.task.locationId&&(this.selectedLocationIds=[this.task.locationId]))}static{this.\u0275fac=function(i){return new(i||t)(j(zc),j(fn),j(lf),j(cf),j(cl),j(Js),j(ho))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-task-assignment"]],inputs:{mode:"mode",task:"task"},outputs:{taskUpdated:"taskUpdated"},decls:137,vars:27,consts:[[1,"task-assignment-container"],[1,"form-header"],[1,"form-title"],[1,"title-icon"],[1,"form-subtitle"],[1,"task-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","full-width"],[1,"form-label"],[3,"selectionChange","options","disabled"],["class","error-message",4,"ngIf"],[1,"form-group"],["for","taskDate",1,"form-label"],["type","date","id","taskDate","formControlName","taskDate",1,"form-control"],[3,"selectionChange","allowMultipleAreas","autoSelectDelhi"],["for","priority",1,"form-label"],["id","priority","formControlName","priority",1,"form-control"],["value",""],["value","Low"],["value","Medium"],["value","High"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","deadline"],["type","date","id","deadline","formControlName","deadline"],[1,"form-section"],[1,"section-title"],["for","taskTypes",1,"form-label"],[1,"multi-select-container"],["class","checkbox-group",4,"ngFor","ngForOf"],["for","department",1,"form-label"],["id","department","formControlName","department",1,"form-control"],["value","Marketing"],["value","Sales"],["value","Operations"],["value","Customer Service"],["value","Business Development"],["value","Research"],["for","taskCategory",1,"form-label"],["id","taskCategory","formControlName","taskCategory",1,"form-control"],["value","Field Work"],["value","Office Work"],["value","Client Work"],["value","Administrative"],["value","Research & Analysis"],["value","Documentation"],["value","Coordination"],["for","estimatedHours",1,"form-label"],["type","number","id","estimatedHours","formControlName","estimatedHours","placeholder","e.g., 8.5","step","0.5","min","0","max","100",1,"form-control"],["for","clientName",1,"form-label"],["type","text","id","clientName","formControlName","clientName","placeholder","Enter consultant name (if applicable)",1,"form-control"],["for","projectCode",1,"form-label"],["type","text","id","projectCode","formControlName","projectCode","placeholder","e.g., AMI-2024-001",1,"form-control"],["for","employeeIdNumber",1,"form-label"],["type","text","id","employeeIdNumber","formControlName","employeeIdNumber","placeholder","Enter employee ID number",1,"form-control"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","isUrgent",1,"checkbox-input"],[1,"checkbox-custom"],[1,"checkbox-text"],["for","description"],["id","description","formControlName","description","rows","4","placeholder","Describe the task details, objectives, and requirements..."],["for","additionalNotes"],["id","additionalNotes","formControlName","additionalNotes","rows","3","placeholder","Any additional notes, special instructions, or important information..."],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],["class","success-message",4,"ngIf"],[1,"error-message"],[3,"value"],[1,"checkbox-group"],["type","checkbox",1,"checkbox-input",3,"change","value"],[1,"success-message"],[1,"success-content"],[1,"success-icon"]],template:function(i,o){if(1&i&&(m(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),v(4,"\u{1f4cb}"),p(),v(5," Assign New Task "),p(),m(6,"p",4),v(7,"Create and assign new marketing tasks to employees efficiently"),p()(),m(8,"form",5),B("ngSubmit",function(){return o.onSubmit()}),m(9,"div",6)(10,"div",7)(11,"label",8),v(12,"Employee Name *"),p(),m(13,"app-searchable-dropdown",9),B("selectionChange",function(s){return o.onEmployeeSelect(s)}),p(),R(14,vJ,2,0,"div",10),p(),m(15,"div",11)(16,"label",12),v(17,"Date of Task *"),p(),k(18,"input",13),R(19,yJ,2,0,"div",10),p()(),m(20,"div",6)(21,"div",7)(22,"app-hierarchical-location-selector",14),B("selectionChange",function(s){return o.onHierarchicalLocationChange(s)}),p()()(),m(23,"div",6)(24,"div",11)(25,"label",15),v(26,"Priority *"),p(),m(27,"select",16)(28,"option",17),v(29,"Select Priority"),p(),m(30,"option",18),v(31,"Low"),p(),m(32,"option",19),v(33,"Medium"),p(),m(34,"option",20),v(35,"High"),p()(),R(36,bJ,2,0,"div",10),p(),m(37,"div",11)(38,"label",21),v(39,"Status *"),p(),m(40,"select",22)(41,"option",17),v(42,"Select Status"),p(),R(43,wJ,2,2,"option",23),p(),R(44,CJ,2,0,"div",10),p(),m(45,"div",11)(46,"label",24),v(47,"Task Deadline *"),p(),k(48,"input",25),R(49,DJ,2,0,"div",10),p()(),m(50,"div",26)(51,"h3",27),v(52,"Task Classification"),p(),m(53,"div",6)(54,"div",11)(55,"label",28),v(56,"Task Types"),p(),m(57,"div",29),R(58,TJ,6,2,"div",30),p()(),m(59,"div",11)(60,"label",31),v(61,"Department"),p(),m(62,"select",32)(63,"option",33),v(64,"Marketing"),p(),m(65,"option",34),v(66,"Sales"),p(),m(67,"option",35),v(68,"Operations"),p(),m(69,"option",36),v(70,"Customer Service"),p(),m(71,"option",37),v(72,"Business Development"),p(),m(73,"option",38),v(74,"Research"),p()()()(),m(75,"div",6)(76,"div",11)(77,"label",39),v(78,"Task Category"),p(),m(79,"select",40)(80,"option",41),v(81,"Field Work"),p(),m(82,"option",42),v(83,"Office Work"),p(),m(84,"option",43),v(85,"Client Work"),p(),m(86,"option",44),v(87,"Administrative"),p(),m(88,"option",45),v(89,"Research & Analysis"),p(),m(90,"option",46),v(91,"Documentation"),p(),m(92,"option",47),v(93,"Coordination"),p()()(),m(94,"div",11)(95,"label",48),v(96,"Estimated Hours"),p(),k(97,"input",49),p()()(),m(98,"div",26)(99,"h3",27),v(100,"Project & Client Information"),p(),m(101,"div",6)(102,"div",11)(103,"label",50),v(104,"Consultant Name"),p(),k(105,"input",51),p(),m(106,"div",11)(107,"label",52),v(108,"Camp Code"),p(),k(109,"input",53),p()(),m(110,"div",6)(111,"div",11)(112,"label",54),v(113,"Employee ID"),p(),k(114,"input",55),p()()(),m(115,"div",56)(116,"label",57),k(117,"input",58)(118,"span",59),m(119,"span",60),v(120,"Mark as Urgent Task"),p()()(),m(121,"div",7)(122,"label",61),v(123,"Task Description / Purpose *"),p(),k(124,"textarea",62),R(125,SJ,2,0,"div",10),p(),m(126,"div",7)(127,"label",63),v(128,"Additional Notes & Instructions"),p(),k(129,"textarea",64),p(),m(130,"div",65)(131,"button",66),B("click",function(){return o.resetForm()}),v(132,"Reset"),p(),m(133,"button",67),R(134,MJ,2,0,"span",68)(135,kJ,2,0,"span",68),p()()(),R(136,EJ,6,0,"div",69),p()),2&i){let r,s,l,c,u,f,_,w,C,T,S;b(8),M("formGroup",o.taskForm),b(5),M("options",o.employeeOptions)("disabled",o.isDropdownDisabled),b(),M("ngIf",(null==(r=o.taskForm.get("employeeId"))?null:r.invalid)&&(null==(r=o.taskForm.get("employeeId"))?null:r.touched)),b(4),Z("error",(null==(s=o.taskForm.get("taskDate"))?null:s.invalid)&&(null==(s=o.taskForm.get("taskDate"))?null:s.touched)),b(),M("ngIf",(null==(l=o.taskForm.get("taskDate"))?null:l.invalid)&&(null==(l=o.taskForm.get("taskDate"))?null:l.touched)),b(3),M("allowMultipleAreas",!0)("autoSelectDelhi",!0),b(5),Z("error",(null==(c=o.taskForm.get("priority"))?null:c.invalid)&&(null==(c=o.taskForm.get("priority"))?null:c.touched)),b(9),M("ngIf",(null==(u=o.taskForm.get("priority"))?null:u.invalid)&&(null==(u=o.taskForm.get("priority"))?null:u.touched)),b(4),Z("error",(null==(f=o.taskForm.get("status"))?null:f.invalid)&&(null==(f=o.taskForm.get("status"))?null:f.touched)),b(3),M("ngForOf",o.taskStatuses),b(),M("ngIf",(null==(_=o.taskForm.get("status"))?null:_.invalid)&&(null==(_=o.taskForm.get("status"))?null:_.touched)),b(4),Z("error",(null==(w=o.taskForm.get("deadline"))?null:w.invalid)&&(null==(w=o.taskForm.get("deadline"))?null:w.touched)),b(),M("ngIf",(null==(C=o.taskForm.get("deadline"))?null:C.invalid)&&(null==(C=o.taskForm.get("deadline"))?null:C.touched)),b(9),M("ngForOf",o.availableTaskTypes),b(66),Z("error",(null==(T=o.taskForm.get("description"))?null:T.invalid)&&(null==(T=o.taskForm.get("description"))?null:T.touched)),b(),M("ngIf",(null==(S=o.taskForm.get("description"))?null:S.invalid)&&(null==(S=o.taskForm.get("description"))?null:S.touched)),b(8),M("disabled",o.taskForm.invalid||o.isLoading),b(),M("ngIf",!o.isLoading),b(),M("ngIf",o.isLoading),b(),M("ngIf",o.showSuccess)}},dependencies:[Wr,co,Ws,Za,Ka,fo,Uc,wh,Zs,Ro,Gs,xh,ym,Yr,qs,KQ,_J],styles:['.task-assignment-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.hospital-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a}.header-logo[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:100px;border-radius:8px}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:28px;font-weight:700;margin-bottom:10px}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.task-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 20px #0000001a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:8px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:16px;transition:all .3s ease;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit}.custom-location-input[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:10px}.state-select[_ngcontent-%COMP%]{min-width:100px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e1e5e9}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;border:none;min-width:120px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #0080804d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:2px solid #e1e5e9}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#333}.success-message[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:15px 20px;border-radius:8px;margin-top:20px;border:1px solid #c3e6cb;animation:_ngcontent-%COMP%_slideIn .3s ease}.success-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.success-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#28a745}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;text-transform:uppercase}.priority-low[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.priority-medium[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.priority-high[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}@media (max-width: 768px){.task-assignment-container[_ngcontent-%COMP%]{padding:10px}.task-form[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.custom-location-input[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}.form-section[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:#f8f9fa;border-radius:8px;border-left:4px solid #007bff}.section-title[_ngcontent-%COMP%]{color:#333;font-size:18px;font-weight:600;margin:0 0 20px;display:flex;align-items:center}.section-title[_ngcontent-%COMP%]:before{content:"\\1f4ca";margin-right:8px;font-size:16px}.checkbox-group[_ngcontent-%COMP%]{margin:20px 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-weight:500;color:#333}.checkbox-input[_ngcontent-%COMP%]{display:none}.checkbox-custom[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #ddd;border-radius:4px;margin-right:10px;position:relative;transition:all .3s ease}.checkbox-input[_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.checkbox-input[_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:700}.checkbox-text[_ngcontent-%COMP%]{font-size:14px}.form-control[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.form-control[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .form-control[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.multi-select-container[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:6px;padding:15px;background:#fafafa;max-height:300px;overflow-y:auto}.location-groups[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:15px}.location-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#007bff;font-size:14px;font-weight:600;margin-bottom:10px;padding-bottom:5px;border-bottom:1px solid #e9ecef}.location-group[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{margin:8px 0}.location-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{font-weight:400;font-size:13px}.location-group[_ngcontent-%COMP%]   .checkbox-custom[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:8px}.multi-select-container[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:inline-block;width:calc(50% - 10px);margin:5px;vertical-align:top}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{margin:20px 0;padding:15px}.section-title[_ngcontent-%COMP%]{font-size:16px}.location-groups[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.multi-select-container[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{width:100%;margin:5px 0}}']})}}return t})(),IJ=(()=>{class t{constructor(e,i){this.http=e,this.authService=i,this.apiUrl=`${gt.apiUrl}/employeefeedback`}getHttpOptions(){const e=this.authService.getToken();return{headers:new hi({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}}getMyFeedback(){return this.http.get(`${this.apiUrl}/my-feedback`,this.getHttpOptions())}getFeedbackByTask(e){return this.http.get(`${this.apiUrl}/task/${e}`,this.getHttpOptions())}getFeedbackById(e){return this.http.get(`${this.apiUrl}/${e}`,this.getHttpOptions())}createFeedback(e){return this.http.post(this.apiUrl,e,this.getHttpOptions())}updateFeedback(e,i){return this.http.put(`${this.apiUrl}/${e}`,i,this.getHttpOptions())}deleteFeedback(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getHttpOptions())}getFeedbackByEmployee(e){return this.http.get(`${this.apiUrl}/employee/${e}`,this.getHttpOptions())}static{this.\u0275fac=function(i){return new(i||t)(oe(ho),oe(Qs))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function NJ(t,n){if(1&t){const e=ve();m(0,"div",2),B("click",function(){return Q(e),J(I().onClose())}),p()}}function OJ(t,n){1&t&&(m(0,"span"),v(1,"New task date is required"),p())}function PJ(t,n){if(1&t&&(m(0,"div",39),R(1,OJ,2,0,"span",40),p()),2&t){const e=I(3);b(),M("ngIf",null==e.newTaskDate||null==e.newTaskDate.errors?null:e.newTaskDate.errors.required)}}function AJ(t,n){1&t&&(m(0,"span"),v(1,"New deadline is required"),p())}function RJ(t,n){if(1&t&&(m(0,"div",39),R(1,AJ,2,0,"span",40),p()),2&t){const e=I(3);b(),M("ngIf",null==e.newDeadline||null==e.newDeadline.errors?null:e.newDeadline.errors.required)}}function FJ(t,n){1&t&&(m(0,"div",39),v(1," Deadline must be after the task date "),p())}function LJ(t,n){1&t&&(m(0,"span"),v(1,"Reason for rescheduling is required"),p())}function BJ(t,n){1&t&&(m(0,"span"),v(1,"Reason cannot exceed 500 characters"),p())}function VJ(t,n){if(1&t&&(m(0,"div",39),R(1,LJ,2,0,"span",40)(2,BJ,2,0,"span",40),p()),2&t){const e=I(3);b(),M("ngIf",null==e.rescheduleReason||null==e.rescheduleReason.errors?null:e.rescheduleReason.errors.required),b(),M("ngIf",null==e.rescheduleReason||null==e.rescheduleReason.errors?null:e.rescheduleReason.errors.maxlength)}}function jJ(t,n){if(1&t&&(m(0,"div",41),k(1,"i",42),m(2,"p")(3,"strong"),v(4,"Summary:"),p(),v(5," Task will be rescheduled from "),m(6,"strong"),v(7),p(),v(8," to "),m(9,"strong"),v(10),p(),v(11,", with deadline moved from "),m(12,"strong"),v(13),p(),v(14," to "),m(15,"strong"),v(16),p(),v(17,". "),p()()),2&t){const e=I(3);b(7),ne(e.formatDate(e.task.taskDate)),b(3),ne(e.formatDate(null==e.newTaskDate?null:e.newTaskDate.value)),b(3),ne(e.formatDate(e.task.deadline)),b(3),ne(e.formatDate(null==e.newDeadline?null:e.newDeadline.value))}}function $J(t,n){if(1&t){const e=ve();m(0,"div",17)(1,"div",18)(2,"h3",19),v(3,"Current Task Details"),p(),m(4,"div",20)(5,"div",21)(6,"label"),v(7,"Description:"),p(),m(8,"p"),v(9),p()(),m(10,"div",21)(11,"label"),v(12,"Priority:"),p(),m(13,"span",22),v(14),p()(),m(15,"div",21)(16,"label"),v(17,"Current Task Date:"),p(),m(18,"p"),v(19),p()(),m(20,"div",21)(21,"label"),v(22,"Current Deadline:"),p(),m(23,"p"),v(24),p()()()(),m(25,"form",23),B("ngSubmit",function(){return Q(e),J(I(2).onSubmit())}),m(26,"div",24)(27,"div",25)(28,"label",26),k(29,"i",27),v(30," New Task Date "),m(31,"span",28),v(32,"*"),p()(),k(33,"input",29),R(34,PJ,2,1,"div",30),p(),m(35,"div",25)(36,"label",31),k(37,"i",32),v(38," New Deadline "),m(39,"span",28),v(40,"*"),p()(),k(41,"input",33),R(42,RJ,2,1,"div",30)(43,FJ,2,0,"div",30),p()(),m(44,"div",25)(45,"label",34),k(46,"i",35),v(47," Reason for Rescheduling "),m(48,"span",28),v(49,"*"),p()(),k(50,"textarea",36),m(51,"div",37),v(52),p(),R(53,VJ,3,2,"div",30),p(),R(54,jJ,18,4,"div",38),p()()}if(2&t){const e=I(2);b(9),ne(e.task.description),b(4),Ra("priority-"+e.task.priority.toLowerCase()),b(),ne(e.task.priority),b(5),ne(e.formatDate(e.task.taskDate)),b(5),ne(e.formatDate(e.task.deadline)),b(),M("formGroup",e.rescheduleForm),b(8),Z("error",(null==e.newTaskDate?null:e.newTaskDate.invalid)&&(null==e.newTaskDate?null:e.newTaskDate.touched)),M("min",e.minDate),b(),M("ngIf",(null==e.newTaskDate?null:e.newTaskDate.invalid)&&(null==e.newTaskDate?null:e.newTaskDate.touched)),b(7),Z("error",(null==e.newDeadline?null:e.newDeadline.invalid)&&(null==e.newDeadline?null:e.newDeadline.touched)||!e.isDeadlineValid()),M("min",e.minDeadlineDate),b(),M("ngIf",(null==e.newDeadline?null:e.newDeadline.invalid)&&(null==e.newDeadline?null:e.newDeadline.touched)),b(),M("ngIf",!e.isDeadlineValid()&&(null==e.newTaskDate?null:e.newTaskDate.value)&&(null==e.newDeadline?null:e.newDeadline.value)),b(7),Z("error",(null==e.rescheduleReason?null:e.rescheduleReason.invalid)&&(null==e.rescheduleReason?null:e.rescheduleReason.touched)),b(),Z("warning",e.getRemainingCharacters()<50)("danger",e.getRemainingCharacters()<10),b(),q(" ",e.getRemainingCharacters()," characters remaining "),b(),M("ngIf",(null==e.rescheduleReason?null:e.rescheduleReason.invalid)&&(null==e.rescheduleReason?null:e.rescheduleReason.touched)),b(),M("ngIf",(null==e.newTaskDate?null:e.newTaskDate.value)&&(null==e.newDeadline?null:e.newDeadline.value))}}function HJ(t,n){1&t&&k(0,"span",43)}function UJ(t,n){1&t&&k(0,"i",7)}function zJ(t,n){if(1&t){const e=ve();m(0,"div",3)(1,"div",4),B("click",function(o){return Q(e),J(o.stopPropagation())}),m(2,"div",5)(3,"h2",6),k(4,"i",7),v(5," Reschedule Task "),p(),m(6,"button",8),B("click",function(){return Q(e),J(I().onClose())}),k(7,"i",9),p()(),R(8,$J,55,25,"div",10),m(9,"div",11)(10,"button",12),B("click",function(){return Q(e),J(I().onClose())}),k(11,"i",13),v(12," Cancel "),p(),m(13,"button",14),B("click",function(){return Q(e),J(I().onSubmit())}),R(14,HJ,1,0,"span",15)(15,UJ,1,0,"i",16),v(16),p()()()()}if(2&t){const e=I();Z("show",e.show),b(8),M("ngIf",e.task),b(2),M("disabled",e.isSubmitting),b(3),M("disabled",!e.rescheduleForm.valid||e.isSubmitting||!e.isDeadlineValid()),b(),M("ngIf",e.isSubmitting),b(),M("ngIf",!e.isSubmitting),b(),q(" ",e.isSubmitting?"Rescheduling...":"Reschedule Task"," ")}}let GJ=(()=>{class t{constructor(e,i,o){this.fb=e,this.taskService=i,this.notificationService=o,this.task=null,this.show=!1,this.close=new fe,this.taskRescheduled=new fe,this.isSubmitting=!1,this.rescheduleForm=this.fb.group({newTaskDate:["",ce.required],newDeadline:["",ce.required],rescheduleReason:["",[ce.required,ce.maxLength(500)]]}),this.minDate=(new Date).toISOString().split("T")[0],this.minDeadlineDate=this.minDate}ngOnInit(){this.rescheduleForm.get("newTaskDate")?.valueChanges.subscribe(e=>{if(e){const i=new Date(e);i.setDate(i.getDate()+1),this.minDeadlineDate=i.toISOString().split("T")[0];const o=this.rescheduleForm.get("newDeadline")?.value;o&&new Date(o)<=new Date(e)&&this.rescheduleForm.get("newDeadline")?.setValue("")}})}onSubmit(){if(this.rescheduleForm.valid&&this.task&&!this.isSubmitting){this.isSubmitting=!0;const e={taskId:this.task.taskId,newTaskDate:this.rescheduleForm.value.newTaskDate,newDeadline:this.rescheduleForm.value.newDeadline,rescheduleReason:this.rescheduleForm.value.rescheduleReason};this.taskService.rescheduleTask(this.task.taskId,e).subscribe({next:i=>{console.log("Task rescheduled successfully:",i),this.notificationService.showNotification("Task rescheduled successfully","success"),this.taskRescheduled.emit(e),this.onClose(),this.isSubmitting=!1},error:i=>{console.error("Error rescheduling task:",i),this.notificationService.showNotification(i?.error?.details||i?.error?.error||"Error rescheduling task. Please try again.","error"),this.isSubmitting=!1}})}else this.markFormGroupTouched()}onClose(){this.rescheduleForm.reset(),this.isSubmitting=!1,this.close.emit()}markFormGroupTouched(){Object.keys(this.rescheduleForm.controls).forEach(e=>{this.rescheduleForm.get(e)?.markAsTouched()})}get newTaskDate(){return this.rescheduleForm.get("newTaskDate")}get newDeadline(){return this.rescheduleForm.get("newDeadline")}get rescheduleReason(){return this.rescheduleForm.get("rescheduleReason")}formatDate(e){return new Date(e).toLocaleDateString()}formatDateTime(e){return new Date(e).toLocaleString()}getRemainingCharacters(){return 500-(this.rescheduleReason?.value||"").length}isDeadlineValid(){const e=this.newTaskDate?.value,i=this.newDeadline?.value;return!e||!i||new Date(i)>new Date(e)}static{this.\u0275fac=function(i){return new(i||t)(j(zc),j(cl),j(Js))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-task-reschedule-modal"]],inputs:{task:"task",show:"show"},outputs:{close:"close",taskRescheduled:"taskRescheduled"},decls:2,vars:2,consts:[["class","modal-overlay",3,"click",4,"ngIf"],["class","reschedule-modal",3,"show",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"reschedule-modal"],[1,"modal-content-custom",3,"click"],[1,"modal-header-custom"],[1,"modal-title-custom"],[1,"bi","bi-calendar-event"],["type","button","aria-label","Close",1,"close-btn",3,"click"],[1,"bi","bi-x-lg"],["class","modal-body-custom",4,"ngIf"],[1,"modal-footer-custom"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-x-circle"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner",4,"ngIf"],["class","bi bi-calendar-event",4,"ngIf"],[1,"modal-body-custom"],[1,"task-info-card"],[1,"info-title"],[1,"info-grid"],[1,"info-item"],[1,"priority-badge"],[1,"reschedule-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","newTaskDate",1,"form-label"],[1,"bi","bi-calendar-date"],[1,"required"],["type","date","id","newTaskDate","formControlName","newTaskDate",1,"form-input",3,"min"],["class","error-message",4,"ngIf"],["for","newDeadline",1,"form-label"],[1,"bi","bi-calendar-check"],["type","date","id","newDeadline","formControlName","newDeadline",1,"form-input",3,"min"],["for","rescheduleReason",1,"form-label"],[1,"bi","bi-chat-text"],["id","rescheduleReason","formControlName","rescheduleReason","rows","4","placeholder","Please provide a detailed reason for rescheduling this task...","maxlength","500",1,"form-textarea"],[1,"char-counter"],["class","summary-card",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[1,"summary-card"],[1,"bi","bi-info-circle"],[1,"spinner"]],template:function(i,o){1&i&&R(0,NJ,1,0,"div",0)(1,zJ,17,8,"div",1),2&i&&(M("ngIf",o.show),b(),M("ngIf",o.show))},dependencies:[co,Ws,fo,Ro,Gs,Ih,Yr,qs],styles:['.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:9998;animation:_ngcontent-%COMP%_fadeIn .3s ease}.reschedule-modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;padding:20px}.modal-content-custom[_ngcontent-%COMP%]{background:#fff;border-radius:20px;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.16,1,.3,1)}.modal-header-custom[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800);color:#fff;padding:24px 30px;border-radius:20px 20px 0 0;display:flex;align-items:center;justify-content:space-between}.modal-title-custom[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0;display:flex;align-items:center;gap:12px}.modal-title-custom[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:24px;cursor:pointer;padding:4px 8px;border-radius:8px;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.modal-body-custom[_ngcontent-%COMP%]{padding:30px}.task-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc10714,#ff980014);border:2px solid rgba(255,193,7,.2);border-radius:16px;padding:24px;margin-bottom:30px}.info-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#ff9800;margin:0 0 20px;display:flex;align-items:center;gap:8px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#666;display:block;margin-bottom:6px;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:15px}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800);color:#fff}.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.reschedule-form[_ngcontent-%COMP%]{margin-top:24px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;color:#333;margin-bottom:10px;font-size:14px}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff9800;font-size:16px}.required[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:700}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;transition:all .3s ease;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff9800;box-shadow:0 0 0 4px #ff98001a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%]{border-color:#ff6b6b}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.char-counter[_ngcontent-%COMP%]{font-size:13px;color:#999;margin-top:6px;text-align:right}.char-counter.warning[_ngcontent-%COMP%]{color:#ff9800;font-weight:600}.char-counter.danger[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:700}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:13px;margin-top:6px;font-weight:600;display:flex;align-items:center;gap:6px}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b814,#13849614);border:2px solid rgba(23,162,184,.2);border-radius:12px;padding:16px 20px;display:flex;gap:12px;align-items:flex-start;margin-top:20px}.summary-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#17a2b8;font-size:20px;flex-shrink:0;margin-top:2px}.summary-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:14px;line-height:1.6}.summary-card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#17a2b8;font-weight:700}.modal-footer-custom[_ngcontent-%COMP%]{padding:20px 30px 30px;display:flex;gap:12px;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:12px 28px;border-radius:12px;font-size:15px;font-weight:700;border:none;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #00000026}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);color:#fff}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-content-custom[_ngcontent-%COMP%]{max-height:95vh}.modal-header-custom[_ngcontent-%COMP%], .modal-body-custom[_ngcontent-%COMP%], .modal-footer-custom[_ngcontent-%COMP%]{padding:20px}.modal-title-custom[_ngcontent-%COMP%]{font-size:20px}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return t})();function WJ(t,n){if(1&t&&(m(0,"option",37),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),q(" ",e.label," ")}}function qJ(t,n){1&t&&(m(0,"span"),k(1,"i",38),v(2,"Refresh Data "),p())}function ZJ(t,n){1&t&&(m(0,"span"),k(1,"span",39),v(2,"Loading... "),p())}function KJ(t,n){1&t&&(m(0,"div",40)(1,"div",41),k(2,"div",42),m(3,"h4",43),v(4,"Loading tasks..."),p(),m(5,"p",43),v(6,"Please wait while we fetch the latest data"),p()()())}function YJ(t,n){1&t&&(m(0,"span",72),v(1,"OVERDUE"),p())}function QJ(t,n){if(1&t){const e=ve();m(0,"button",73),B("click",function(){Q(e);const o=I().$implicit;return J(I(2).updateTaskStatus(o.taskId,"In Progress"))}),k(1,"i",74),v(2,"Start "),p()}}function JJ(t,n){if(1&t){const e=ve();m(0,"button",73),B("click",function(){Q(e);const o=I().$implicit;return J(I(2).updateTaskStatus(o.taskId,"Completed"))}),k(1,"i",75),v(2,"Complete "),p()}}function XJ(t,n){if(1&t){const e=ve();m(0,"button",76),B("click",function(){Q(e);const o=I().$implicit;return J(I(2).updateTaskStatus(o.taskId,"Partial Close"))}),k(1,"i",77),v(2,"Partial "),p()}}function eX(t,n){if(1&t){const e=ve();m(0,"button",78),B("click",function(){Q(e);const o=I().$implicit;return J(I(2).updateTaskStatus(o.taskId,"Postponed"))}),k(1,"i",79),v(2,"Postpone "),p()}}function tX(t,n){if(1&t){const e=ve();m(0,"div",48)(1,"div",49)(2,"div",50)(3,"h5",51),v(4),p(),m(5,"div",52)(6,"small"),k(7,"i",53),v(8),p(),m(9,"small"),k(10,"i",54),v(11),p()(),m(12,"div",55)(13,"span",56),v(14),p(),m(15,"span",57),v(16),p()()(),m(17,"div",22)(18,"div",58),k(19,"i",59),m(20,"strong"),v(21,"Location:"),p(),v(22),p(),m(23,"div",60),k(24,"i",61),m(25,"strong"),v(26,"Deadline:"),p(),v(27),R(28,YJ,2,0,"span",62),p()(),m(29,"div",63)(30,"div",64),R(31,QJ,3,0,"button",65)(32,JJ,3,0,"button",65)(33,XJ,3,0,"button",66)(34,eX,3,0,"button",67),m(35,"button",68),B("click",function(){const o=Q(e).$implicit;return J(I(2).viewTaskDetails(o))}),k(36,"i",69),v(37,"View "),p(),m(38,"button",70),B("click",function(){const o=Q(e).$implicit;return J(I(2).openFeedbackModal(o))}),k(39,"i",71),v(40,"Feedback "),p()()()()()}if(2&t){const e=n.$implicit,i=I(2);b(4),ne(e.description),b(4),q(" #",e.taskId,""),b(3),q(" ",i.formatDate(e.taskDate),""),b(2),M("ngClass",i.getPriorityBadgeClass(e.priority)),b(),ne(e.priority),b(),M("ngClass",i.getStatusBadgeClass(e.status)),b(),ne(e.status),b(6),Ps(" ",e.cityName,"",e.customLocation?" ("+e.customLocation+")":""," "),b(),Z("text-danger",i.isOverdue(e.deadline)&&"Completed"!==e.status),b(4),q(" ",i.formatDate(e.deadline)," "),b(),M("ngIf",i.isOverdue(e.deadline)&&"Completed"!==e.status),b(3),M("ngIf","Not Started"===e.status),b(),M("ngIf","In Progress"===e.status),b(),M("ngIf","In Progress"===e.status),b(),M("ngIf","In Progress"===e.status)}}function nX(t,n){1&t&&(m(0,"p",43),v(1,"You don't have any assigned tasks yet."),p())}function iX(t,n){if(1&t&&(m(0,"p",43),v(1),p()),2&t){const e=I(3);b(),q('No tasks with status "',e.selectedStatus,'".')}}function oX(t,n){if(1&t&&(m(0,"div",80)(1,"div",41),k(2,"i",81),m(3,"h4",82),v(4,"No Tasks Found"),p(),R(5,nX,2,0,"p",83)(6,iX,2,1,"p",83),p()()),2&t){const e=I(2);b(5),M("ngIf","all"===e.selectedStatus),b(),M("ngIf","all"!==e.selectedStatus)}}function rX(t,n){if(1&t&&(m(0,"div",44)(1,"div",45),R(2,tX,41,17,"div",46)(3,oX,7,2,"div",47),p()()),2&t){const e=I();b(2),M("ngForOf",e.filteredTasks),b(),M("ngIf",0===e.filteredTasks.length)}}function sX(t,n){if(1&t){const e=ve();m(0,"div",87)(1,"div",88)(2,"h4",89),k(3,"i",90),v(4,"Task Details "),p(),m(5,"button",91),B("click",function(){return Q(e),J(I(2).closeTaskDetails())}),p()(),m(6,"div",92)(7,"div",93)(8,"div",94)(9,"strong"),v(10,"Task ID:"),p(),v(11),p(),m(12,"div",94)(13,"strong"),v(14,"Priority:"),p(),m(15,"span",95),v(16),p()(),m(17,"div",96)(18,"strong"),v(19,"Status:"),p(),m(20,"span",95),v(21),p()(),m(22,"div",97)(23,"strong"),v(24,"Description:"),p(),m(25,"p"),v(26),p()(),m(27,"div",94)(28,"strong"),v(29,"Location:"),p(),v(30),p(),m(31,"div",94)(32,"strong"),v(33,"Task Date:"),p(),v(34),p(),m(35,"div",96)(36,"strong"),v(37,"Deadline:"),p(),v(38),p()()(),m(39,"div",98)(40,"button",99),B("click",function(){return Q(e),J(I(2).closeTaskDetails())}),k(41,"i",100),v(42,"Close "),p()()()}if(2&t){const e=I(2);b(11),q(" #",e.selectedTask.taskId," "),b(4),M("ngClass",e.getPriorityBadgeClass(e.selectedTask.priority)),b(),ne(e.selectedTask.priority),b(4),M("ngClass",e.getStatusBadgeClass(e.selectedTask.status)),b(),ne(e.selectedTask.status),b(5),ne(e.selectedTask.description),b(4),q(" ",e.selectedTask.cityName," "),b(4),q(" ",e.formatDate(e.selectedTask.taskDate)," "),b(4),q(" ",e.formatDate(e.selectedTask.deadline)," ")}}function aX(t,n){if(1&t){const e=ve();m(0,"div",84),B("click",function(){return Q(e),J(I().closeTaskDetails())}),m(1,"div",85),B("click",function(o){return Q(e),J(o.stopPropagation())}),R(2,sX,43,9,"div",86),p()()}if(2&t){const e=I();jr("display",e.showTaskDetails?"block":"none"),Z("show",e.showTaskDetails),b(2),M("ngIf",e.selectedTask)}}function lX(t,n){if(1&t&&(m(0,"div",115)(1,"div",22)(2,"div",116)(3,"strong"),v(4),p(),m(5,"small",43),v(6),p()(),m(7,"p",117),v(8),p()()()),2&t){const e=n.$implicit,i=I(4);b(4),ne(e.consultantName||"No name"),b(2),ne(i.formatDate(e.createdAt)),b(2),ne(e.feedbackText)}}function cX(t,n){if(1&t&&(m(0,"div",103)(1,"h6",113),v(2,"Previous Feedbacks"),p(),R(3,lX,9,3,"div",114),p()),2&t){const e=I(3);b(3),M("ngForOf",e.taskFeedbacks)}}function dX(t,n){if(1&t){const e=ve();m(0,"div",87)(1,"div",101)(2,"h4",89),k(3,"i",102),v(4,"Add Feedback "),p(),m(5,"button",91),B("click",function(){return Q(e),J(I(2).closeFeedbackModal())}),p()(),m(6,"div",92)(7,"h6",103),v(8),p(),m(9,"p",43),v(10),p(),m(11,"form",104),B("ngSubmit",function(){return Q(e),J(I(2).submitFeedback())}),m(12,"div",93)(13,"div",94)(14,"label",105),v(15,"Consultant Name"),p(),m(16,"input",106),Di("ngModelChange",function(o){Q(e);const r=I(2);return Vi(r.feedbackForm.consultantName,o)||(r.feedbackForm.consultantName=o),J(o)}),p()(),m(17,"div",94)(18,"label",105),v(19,"Meeting Date"),p(),m(20,"input",107),Di("ngModelChange",function(o){Q(e);const r=I(2);return Vi(r.feedbackForm.meetingDate,o)||(r.feedbackForm.meetingDate=o),J(o)}),p()()(),m(21,"div",103)(22,"label",105),v(23,"Feedback *"),p(),m(24,"textarea",108),Di("ngModelChange",function(o){Q(e);const r=I(2);return Vi(r.feedbackForm.feedbackText,o)||(r.feedbackForm.feedbackText=o),J(o)}),p()(),R(25,cX,4,1,"div",109),m(26,"div",110)(27,"button",99),B("click",function(){return Q(e),J(I(2).closeFeedbackModal())}),k(28,"i",111),v(29,"Cancel "),p(),m(30,"button",112),k(31,"i",75),v(32,"Submit "),p()()()()()}if(2&t){const e=I(2);b(8),q("Task: ",e.selectedTask.description,""),b(2),q("Task ID: #",e.selectedTask.taskId,""),b(6),Ci("ngModel",e.feedbackForm.consultantName),b(4),Ci("ngModel",e.feedbackForm.meetingDate),b(4),Ci("ngModel",e.feedbackForm.feedbackText),b(),M("ngIf",e.taskFeedbacks.length>0),b(5),M("disabled",!e.feedbackForm.feedbackText.trim())}}function uX(t,n){if(1&t){const e=ve();m(0,"div",84),B("click",function(){return Q(e),J(I().closeFeedbackModal())}),m(1,"div",85),B("click",function(o){return Q(e),J(o.stopPropagation())}),R(2,dX,33,7,"div",86),p()()}if(2&t){const e=I();jr("display",e.showFeedbackModal?"block":"none"),Z("show",e.showFeedbackModal),b(2),M("ngIf",e.selectedTask)}}function hX(t,n){1&t&&k(0,"div",118),2&t&&Z("show",I().showTaskDetails)}function fX(t,n){1&t&&k(0,"div",118),2&t&&Z("show",I().showFeedbackModal)}let pX=(()=>{class t{constructor(e,i,o,r,s){this.router=e,this.authService=i,this.taskService=o,this.notificationService=r,this.feedbackService=s,this.tasks=[],this.filteredTasks=[],this.isLoading=!1,this.selectedStatus="all",this.selectedTask=null,this.showTaskDetails=!1,this.showFeedbackModal=!1,this.showRescheduleModal=!1,this.feedbackForm={consultantName:"",feedbackText:"",meetingDate:""},this.rescheduleForm={newTaskDate:"",newDeadline:"",rescheduleReason:""},this.taskFeedbacks=[],this.statusOptions=[{value:"all",label:"All Tasks"},{value:"Not Started",label:"Not Started"},{value:"In Progress",label:"In Progress"},{value:"Completed",label:"Completed"},{value:"Partial Close",label:"Partial Close"},{value:"Postponed",label:"Postponed"}]}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),console.log("Current user in employee dashboard:",this.currentUser),this.loadTasks(),this.notificationService.resetNotificationCount(),setInterval(()=>{this.loadTasks()},3e4)}loadTasks(){this.isLoading=!0,this.currentUser?.employeeId?(console.log("Loading tasks for employee ID:",this.currentUser.employeeId),this.taskService.getTasks(void 0,this.currentUser.employeeId).subscribe({next:e=>{this.tasks=e,this.filterTasks(),this.isLoading=!1,console.log("Tasks loaded for employee:",e)},error:e=>{console.error("Error loading tasks for employee:",e),this.isLoading=!1,this.notificationService.showNotification("Error loading tasks. Please try again.","error")}})):(console.warn("No employee ID found for current user:",this.currentUser),this.isLoading=!1,this.notificationService.showNotification("Employee ID not found. Please contact administrator.","error"))}filterTasks(){this.filteredTasks="all"===this.selectedStatus?[...this.tasks]:this.tasks.filter(e=>e.status===this.selectedStatus)}onStatusFilterChange(){this.filterTasks()}viewTaskDetails(e){this.selectedTask=e,this.showTaskDetails=!0}closeTaskDetails(){this.showTaskDetails=!1,this.selectedTask=null}updateTaskStatus(e,i){if("Postponed"===i)return this.selectedTask=this.tasks.find(o=>o.taskId===e)||null,void this.openRescheduleModal();console.log(`Updating task ${e} status to: ${i}`),this.taskService.updateTaskStatus(e,i,`Status updated to ${i}`).subscribe({next:o=>{console.log("Task status updated successfully:",o),this.loadTasks(),this.showTaskDetails&&this.closeTaskDetails(),this.notificationService.showNotification(`Task status updated to ${i}`,"success")},error:o=>{console.error("Error updating task status:",o),this.notificationService.showNotification("Failed to update task status. Please try again.","error"),this.loadTasks()}})}openRescheduleModal(){this.selectedTask&&((new Date).toISOString().split("T"),this.rescheduleForm={newTaskDate:this.selectedTask.taskDate,newDeadline:this.selectedTask.deadline,rescheduleReason:""},this.showRescheduleModal=!0)}closeRescheduleModal(){this.showRescheduleModal=!1,this.rescheduleForm={newTaskDate:"",newDeadline:"",rescheduleReason:""}}onTaskRescheduled(e){const i=this.tasks.findIndex(o=>o.taskId===e.taskId);-1!==i&&(this.tasks[i].taskDate=e.newTaskDate||e.newDeadline,this.tasks[i].deadline=e.newDeadline,this.tasks[i].status="Postponed",this.filterTasks()),this.loadTasks()}submitReschedule(){this.selectedTask&&this.rescheduleForm.newTaskDate&&this.rescheduleForm.newDeadline?new Date(this.rescheduleForm.newDeadline)<=new Date(this.rescheduleForm.newTaskDate)?this.notificationService.showNotification("Deadline must be after task date","error"):this.taskService.rescheduleTask(this.selectedTask.taskId,{taskId:this.selectedTask.taskId,newTaskDate:this.rescheduleForm.newTaskDate,newDeadline:this.rescheduleForm.newDeadline,rescheduleReason:this.rescheduleForm.rescheduleReason}).subscribe({next:i=>{console.log("Task rescheduled successfully:",i),this.loadTasks(),this.notificationService.showNotification("Task rescheduled successfully","success"),this.closeRescheduleModal()},error:i=>{console.error("Error rescheduling task:",i),this.notificationService.showNotification("Failed to reschedule task. Please try again.","error")}}):this.notificationService.showNotification("Please fill in all required fields","error")}getPriorityClass(e){switch(e.toLowerCase()){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return""}}getStatusClass(e){switch(e.toLowerCase()){case"completed":return"status-completed";case"in progress":return"status-in-progress";case"not started":return"status-not-started";case"partial close":return"status-partial-close";case"postponed":return"status-postponed";case"on hold":return"status-on-hold";default:return""}}formatDate(e){return new Date(e).toLocaleDateString()}getCurrentDate(){return(new Date).toISOString().split("T")[0]}getPriorityBadgeClass(e){switch(e.toLowerCase()){case"high":return"bg-danger";case"medium":return"bg-warning text-dark";case"low":return"bg-success";default:return"bg-secondary"}}getStatusBadgeClass(e){switch(e.toLowerCase()){case"completed":return"bg-success";case"in progress":return"bg-primary";case"not started":default:return"bg-secondary";case"postponed":return"bg-warning text-dark";case"partial close":case"on hold":return"bg-info"}}isOverdue(e){return new Date(e)<new Date&&"Completed"!==this.selectedTask?.status}getTaskCountByStatus(e){return this.tasks.filter(i=>i.status===e).length}filterByStatus(e){this.selectedStatus=e,this.filterTasks()}openFeedbackModal(e){this.selectedTask=e,this.showFeedbackModal=!0,this.feedbackForm={consultantName:"",feedbackText:"",meetingDate:""},this.loadTaskFeedbacks(e.taskId)}closeFeedbackModal(){this.showFeedbackModal=!1,this.selectedTask=null,this.feedbackForm={consultantName:"",feedbackText:"",meetingDate:""},this.taskFeedbacks=[]}loadTaskFeedbacks(e){this.feedbackService.getFeedbackByTask(e).subscribe({next:i=>{this.taskFeedbacks=i,console.log("Feedbacks loaded:",i)},error:i=>{console.error("Error loading feedbacks:",i),this.taskFeedbacks=[]}})}submitFeedback(){this.selectedTask&&this.feedbackForm.feedbackText.trim()?this.feedbackService.createFeedback({taskId:this.selectedTask.taskId,consultantName:this.feedbackForm.consultantName||void 0,feedbackText:this.feedbackForm.feedbackText,meetingDate:this.feedbackForm.meetingDate||void 0}).subscribe({next:i=>{console.log("Feedback submitted successfully:",i),this.notificationService.showNotification("Feedback submitted successfully!"),this.loadTaskFeedbacks(this.selectedTask.taskId),this.closeFeedbackModal()},error:i=>{console.error("Error submitting feedback:",i),this.notificationService.showNotification("Error submitting feedback. Please try again.","error")}}):this.notificationService.showNotification("Please fill in the feedback text","error")}logout(){console.log("Logging out..."),this.authService.logout(),this.router.navigate(["/login"])}getStatusCount(e){return this.tasks.filter(i=>i.status===e).length}goBack(){window.history.back()}static{this.\u0275fac=function(i){return new(i||t)(j(fn),j(Qs),j(cl),j(Js),j(IJ))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-employee-dashboard"]],decls:70,vars:20,consts:[[1,"employee-dashboard"],[1,"dashboard-header","py-5","px-3",2,"background","linear-gradient(90deg, #6366f1 0%, #0ea5e9 100%)","border-radius","1.5rem","box-shadow","0 8px 32px rgba(0,0,0,0.11)","margin-bottom","2.5rem"],[1,"container-fluid","d-flex","align-items-center","justify-content-between","flex-wrap"],[1,""],[1,"display-4","fw-bold","text-white","mb-2",2,"letter-spacing","-2px","text-shadow","0 1px 18px rgba(0,0,0,0.12)"],[1,"lead","text-white","opacity-75","mb-0"],[1,"fw-bold","text-white"],[1,"d-flex","flex-row","gap-3"],[1,"btn","btn-dark","btn-lg","px-4","rounded-pill","d-flex","align-items-center","shadow","premium-btn",3,"click"],[1,"bi","bi-box-arrow-right","me-2"],[1,"container-fluid","py-4"],[1,"stat-tiles-row","d-flex","flex-row","flex-nowrap","gap-4","justify-content-start","align-items-end","overflow-auto"],[1,"stat-card","stat-gradient-blue","shadow","rounded-4","text-white","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"stat-number","mb-1","fs-2","fw-bold",2,"text-shadow","0 2px 10px rgba(0,0,0,0.11)"],[1,"fs-6","fw-semibold","text-uppercase","opacity-90"],[1,"stat-card","stat-gradient-purple","shadow","rounded-4","text-white","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"stat-card","stat-gradient-teal","shadow","rounded-4","text-white","link","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"stat-card","stat-gradient-yellow","shadow","rounded-4","text-white","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"stat-card","stat-gradient-red","shadow","rounded-4","text-white","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"stat-card","stat-gradient-orange","shadow","rounded-4","text-white","d-flex","flex-column","justify-content-center","align-items-center","px-4","py-3",2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click"],[1,"container-fluid","pb-4","filter-controls"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"row","g-3","align-items-end"],[1,"col-md-8"],["for","statusFilter",1,"form-label","fw-semibold"],[1,"bi","bi-funnel","me-1"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","container-fluid pt-3",4,"ngIf"],["class","modal fade","tabindex","-1",3,"show","display","click",4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[3,"close","taskRescheduled","task","show"],[3,"value"],[1,"bi","bi-arrow-clockwise","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"container-fluid"],[1,"text-center","py-5"],[1,"spinner-border","text-primary","mb-3",2,"width","3rem","height","3rem"],[1,"text-muted"],[1,"container-fluid","pt-3"],[1,"row","g-4"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-md-6","col-lg-4"],[1,"task-card","shadow"],[1,"card-header"],[1,"task-description-title","mb-2"],[1,"task-meta","d-flex","gap-2","flex-wrap"],[1,"bi","bi-hash"],[1,"bi","bi-calendar3"],[1,"task-badges","mt-2"],[1,"badge","me-1",3,"ngClass"],[1,"badge",3,"ngClass"],[1,"task-location","mb-2"],[1,"bi","bi-geo-alt"],[1,"task-deadline"],[1,"bi","bi-clock"],["class","badge bg-danger ms-2",4,"ngIf"],[1,"card-footer"],[1,"d-flex","gap-2","flex-wrap"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-eye","me-1"],[1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"bi","bi-chat-dots","me-1"],[1,"badge","bg-danger","ms-2"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-play-circle","me-1"],[1,"bi","bi-check-circle","me-1"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"bi","bi-dash-circle","me-1"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"bi","bi-clock","me-1"],[1,"col-12"],[1,"bi","bi-clipboard-x",2,"font-size","3rem","color","#999"],[1,"mt-3","text-muted"],["class","text-muted",4,"ngIf"],["tabindex","-1",1,"modal","fade",3,"click"],[1,"modal-dialog","modal-lg","modal-dialog-centered",3,"click"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-info-circle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-md-6"],[1,"badge","ms-1",3,"ngClass"],[1,"col-md-6","mt-2"],[1,"col-12","mt-3"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-2"],[1,"modal-header","bg-success","text-white"],[1,"bi","bi-chat-dots","me-2"],[1,"mb-3"],[3,"ngSubmit"],[1,"form-label"],["type","text","name","consultantName","placeholder","Enter consultant name",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","meetingDate",1,"form-control",3,"ngModelChange","ngModel"],["name","feedbackText","rows","5","placeholder","Enter your feedback...","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],[1,"d-flex","gap-2","justify-content-end"],[1,"bi","bi-x-circle","me-1"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"text-muted","mb-3"],["class","card mb-2",4,"ngFor","ngForOf"],[1,"card","mb-2"],[1,"d-flex","justify-content-between","mb-2"],[1,"mb-0"],[1,"modal-backdrop","fade"]],template:function(i,o){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),v(5,"Employee Dashboard"),p(),m(6,"p",5),v(7,"Welcome back, "),m(8,"span",6),v(9),p(),v(10,"!"),k(11,"br"),v(12,"Manage and monitor all your tasks efficiently."),p()(),m(13,"div",7)(14,"button",8),B("click",function(){return o.logout()}),k(15,"i",9),v(16," Logout"),p()()()(),m(17,"div",10)(18,"div",11)(19,"div",12),B("click",function(){return o.filterByStatus("all")}),m(20,"div",13),v(21),p(),m(22,"div",14),v(23,"Total Tasks"),p()(),m(24,"div",15),B("click",function(){return o.filterByStatus("Not Started")}),m(25,"div",13),v(26),p(),m(27,"div",14),v(28,"Not Started"),p()(),m(29,"div",16),B("click",function(){return o.filterByStatus("In Progress")}),m(30,"div",13),v(31),p(),m(32,"div",14),v(33,"In Progress"),p()(),m(34,"div",17),B("click",function(){return o.filterByStatus("Completed")}),m(35,"div",13),v(36),p(),m(37,"div",14),v(38,"Completed"),p()(),m(39,"div",18),B("click",function(){return o.filterByStatus("Partial Close")}),m(40,"div",13),v(41),p(),m(42,"div",14),v(43,"Partial Close"),p()(),m(44,"div",19),B("click",function(){return o.filterByStatus("Postponed")}),m(45,"div",13),v(46),p(),m(47,"div",14),v(48,"Postponed"),p()()()(),m(49,"div",20)(50,"div",21)(51,"div",22)(52,"div",23)(53,"div",24)(54,"label",25),k(55,"i",26),v(56,"Filter by Status "),p(),m(57,"select",27),Di("ngModelChange",function(s){return Vi(o.selectedStatus,s)||(o.selectedStatus=s),s}),B("change",function(){return o.onStatusFilterChange()}),R(58,WJ,2,2,"option",28),p()(),m(59,"div",29)(60,"button",30),B("click",function(){return o.loadTasks()}),R(61,qJ,3,0,"span",31)(62,ZJ,3,0,"span",31),p()()()()()(),R(63,KJ,7,0,"div",32)(64,rX,4,2,"div",33),p(),R(65,aX,3,5,"div",34)(66,uX,3,5,"div",34)(67,hX,1,2,"div",35)(68,fX,1,2,"div",35),m(69,"app-task-reschedule-modal",36),B("close",function(){return o.closeRescheduleModal()})("taskRescheduled",function(s){return o.onTaskRescheduled(s)}),p()),2&i&&(b(9),ne(null==o.currentUser?null:o.currentUser.email),b(12),q("",o.tasks.length," "),b(5),q("",o.getStatusCount("Not Started")," "),b(5),q("",o.getStatusCount("In Progress")," "),b(5),q("",o.getStatusCount("Completed")," "),b(5),q("",o.getStatusCount("Partial Close")," "),b(5),q("",o.getStatusCount("Postponed")," "),b(11),Ci("ngModel",o.selectedStatus),b(),M("ngForOf",o.statusOptions),b(2),M("disabled",o.isLoading),b(),M("ngIf",!o.isLoading),b(),M("ngIf",o.isLoading),b(),M("ngIf",o.isLoading),b(),M("ngIf",!o.isLoading),b(),M("ngIf",o.showTaskDetails),b(),M("ngIf",o.showFeedbackModal),b(),M("ngIf",o.showTaskDetails),b(),M("ngIf",o.showFeedbackModal),b(),M("task",o.selectedTask)("show",o.showRescheduleModal))},dependencies:[Ob,Wr,co,Ws,Za,Ka,fo,Zs,Ro,Gs,bm,Hc,vm,GJ],styles:['.employee-dashboard[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;background:#f4f6f9}.dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(to right,#5b73e8,#56c1e0)!important;border-radius:20px!important;box-shadow:0 4px 20px #5b73e84d;margin-bottom:2rem!important;padding:2rem!important}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff!important;font-weight:700;margin-bottom:.5rem;font-size:2.5rem}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6!important;font-size:1.1rem}.dashboard-header[_ngcontent-%COMP%]   .btn-dark[_ngcontent-%COMP%]{background:#2c3e50;border:none;border-radius:25px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s;box-shadow:0 2px 10px #00000026}.dashboard-header[_ngcontent-%COMP%]   .btn-dark[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00000040}.stat-tiles-row[_ngcontent-%COMP%]{margin-bottom:2rem;padding:0 15px;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none}.stat-tiles-row[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.stat-card[_ngcontent-%COMP%]{border-radius:20px!important;padding:1.5rem!important;min-width:160px!important;min-height:130px!important;box-shadow:0 4px 15px #00000026!important;transition:all .3s ease!important;cursor:pointer;border:none!important}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)!important;box-shadow:0 8px 25px #00000040!important}.stat-number[_ngcontent-%COMP%]{font-size:3rem!important;font-weight:800!important;color:#fff!important;text-shadow:0 2px 5px rgba(0,0,0,.2)}.stat-gradient-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffb347,#ff8c00)!important}.stat-gradient-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c06fc4,#b65bb9)!important}.stat-gradient-teal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3cced8,#2db9c7)!important}.stat-gradient-yellow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffb347,#ffa033)!important}.stat-gradient-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f)!important}.stat-gradient-orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f96,coral)!important}.stat-gradient-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765)!important}.filter-controls[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:15px!important;border:none!important;box-shadow:0 2px 10px #00000014!important;background:#fff!important}.filter-controls[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem!important}.filter-controls[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#555!important;font-weight:600!important;font-size:.9rem!important}.filter-controls[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border:2px solid #e0e0e0!important;border-radius:10px!important;padding:.75rem!important;font-weight:500;transition:all .3s;background:#fff!important}.filter-controls[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#5b73e8!important;box-shadow:0 0 0 .2rem #5b73e826!important}.filter-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px!important;font-weight:600!important;padding:.75rem 1.5rem!important;transition:all .3s}.filter-controls[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b73e8,#4a60d3)!important;border:none!important;color:#fff!important}.filter-controls[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #5b73e84d!important}.task-card[_ngcontent-%COMP%]{border:none!important;border-radius:15px!important;box-shadow:0 4px 15px #0000001a!important;transition:all .3s ease!important;background:#fff!important;overflow:hidden}.task-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)!important;box-shadow:0 8px 25px #0003!important}.task-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#5b73e80d!important;border-bottom:2px solid rgba(91,115,232,.1)!important;padding:1.25rem!important}.task-description-title[_ngcontent-%COMP%]{font-weight:700!important;font-size:1.1rem!important;color:#2c3e50!important;line-height:1.5!important;margin-bottom:.75rem!important;word-wrap:break-word;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.task-meta[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.task-meta[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem}.task-badges[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}.task-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem!important}.task-location[_ngcontent-%COMP%], .task-deadline[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:.95rem}.task-location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .task-deadline[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5b73e8;margin-right:.5rem}.task-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background:#5b73e805!important;border-top:2px solid rgba(91,115,232,.1)!important;padding:1rem!important}.badge[_ngcontent-%COMP%]{border-radius:20px!important;padding:.4em .8em!important;font-weight:600!important;font-size:.75rem!important}.badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f)!important;box-shadow:0 2px 8px #ff6b814d}.badge.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ffb300)!important;box-shadow:0 2px 8px #ffc1074d;color:#000!important}.badge.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#56c1e0,#3cced8)!important;box-shadow:0 2px 8px #56c1e04d;color:#000!important}.badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765)!important;box-shadow:0 2px 8px #48c7744d}.badge.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d)!important;box-shadow:0 2px 8px #95a5a64d}.badge.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b73e8,#4a60d3)!important;box-shadow:0 2px 8px #5b73e84d}.btn[_ngcontent-%COMP%]{border-radius:20px!important;font-weight:600!important;transition:all .3s ease!important}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765)!important;border:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b73e8,#4a60d3)!important;border:none!important}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#56c1e0,#3cced8)!important;border:none!important;color:#000!important}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ffb300)!important;border:none!important;color:#000!important}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f)!important;border:none!important}.btn-outline-success[_ngcontent-%COMP%]{border-color:#48c774!important;color:#48c774!important}.btn-outline-success[_ngcontent-%COMP%]:hover{background:#48c774!important;color:#fff!important}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#5b73e8!important;color:#5b73e8!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#5b73e8!important;color:#fff!important}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)!important;box-shadow:0 4px 12px #00000026!important}.premium-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.premium-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.premium-btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.modal-content[_ngcontent-%COMP%]{border-radius:15px!important;border:none!important;overflow:hidden}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.05)!important;padding:1.5rem!important}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:700!important}.modal-body[_ngcontent-%COMP%]{padding:2rem!important}.modal-footer[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.05)!important;padding:1.5rem!important}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.empty-state-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.spinner-border[_ngcontent-%COMP%]{animation:spinner-border .75s linear infinite}@media (max-width: 768px){.stat-card[_ngcontent-%COMP%]{min-width:140px!important;min-height:110px!important}.stat-number[_ngcontent-%COMP%]{font-size:2.5rem!important}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem!important}.task-description-title[_ngcontent-%COMP%]{font-size:1rem!important}}.text-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b73e8,#56c1e0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.glass-effect[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}.shadow[_ngcontent-%COMP%]{box-shadow:0 4px 15px #0000001a!important}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014!important}.rounded-pill[_ngcontent-%COMP%]{border-radius:50rem!important}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}']})}}return t})(),wA=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${gt.apiUrl}/marketingcampaign`}getHeaders(){const e=localStorage.getItem("token");return new hi({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""})}saveMarketingCampaign(e){const i=this.getHeaders();return this.http.post(`${this.apiUrl}/save`,e,{headers:i}).pipe(le(o=>(console.log("Marketing campaign saved successfully:",o),o)),Bt(this.handleError))}getNewCampaignCode(){const e=this.getHeaders();return this.http.get(`${this.apiUrl}/newcode`,{headers:e}).pipe(le(i=>(console.log("New campaign code generated:",i),i)),Bt(this.handleError))}getAllMarketingCampaigns(){const e=this.getHeaders();return this.http.get(`${this.apiUrl}/all`,{headers:e}).pipe(le(i=>(console.log("Marketing campaigns retrieved successfully:",i),i)),Bt(this.handleError))}getMarketingCampaignById(e){const i=this.getHeaders();return this.http.get(`${this.apiUrl}/${e}`,{headers:i}).pipe(le(o=>(console.log("Marketing campaign retrieved successfully:",o),o)),Bt(this.handleError))}updateMarketingCampaign(e,i){const o=this.getHeaders();return this.http.put(`${this.apiUrl}/${e}`,i,{headers:o}).pipe(le(r=>(console.log("Marketing campaign updated successfully:",r),r)),Bt(this.handleError))}deleteMarketingCampaign(e){const i=this.getHeaders();return this.http.delete(`${this.apiUrl}/${e}`,{headers:i}).pipe(le(o=>(console.log("Marketing campaign deleted successfully:",o),o)),Bt(this.handleError))}testConnection(){const e=this.getHeaders();return this.http.get(`${this.apiUrl}/test`,{headers:e}).pipe(le(i=>(console.log("API connection test successful:",i),i)),Bt(this.handleError))}handleError(e){console.error("Marketing Form Service Error:",e);let i="An unknown error occurred";return e.error?e.error.message?i=e.error.message:"string"==typeof e.error&&(i=e.error):e.message&&(i=e.message),0===e.status?i="Unable to connect to server. Please check your internet connection.":400===e.status?i="Invalid request. Please check your form data.":401===e.status?i="Unauthorized. Please login again.":403===e.status?i="Access denied. You do not have permission to perform this action.":404===e.status?i="Resource not found.":500===e.status&&(i="Server error. Please try again later."),Fo(()=>({message:i,status:e.status,error:e.error}))}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),rw=(()=>{class t{constructor(e){this.http=e,this.baseUrl="http://localhost:5005/api/locations"}getStates(){return this.http.get(`${this.baseUrl}/states`).pipe(Bt(e=>(console.error("Error fetching states:",e),ue([]))))}getCitiesByState(e){return e?this.http.get(`${this.baseUrl}/cities?stateId=${e}`).pipe(Bt(i=>(console.error("Error fetching cities:",i),ue([])))):ue([])}getLocalitiesByCity(e){return e?this.http.get(`${this.baseUrl}/localities?cityId=${e}`).pipe(Bt(i=>(console.error("Error fetching localities:",i),ue([])))):ue([])}getPincodesByLocality(e){return e?this.http.get(`${this.baseUrl}/pincodes?localityId=${e}`).pipe(Bt(i=>(console.error("Error fetching pincodes:",i),ue([])))):ue([])}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gX=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${gt.apiUrl}/taskstatuses`}getAllTaskStatuses(){return this.http.get(this.apiUrl)}getTaskStatusById(e){return this.http.get(`${this.apiUrl}/${e}`)}createTaskStatus(e){return this.http.post(this.apiUrl,e)}updateTaskStatus(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}deleteTaskStatus(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),mX=(()=>{class t{constructor(e){this.http=e,this.apiUrl=gt.apiUrl,this.localitiesCache=new Map}getHeaders(){const e=localStorage.getItem("token");return new hi({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}getPincodeLocalities(){return this.http.get(`${this.apiUrl}/pincodes/with-localities`,{headers:this.getHeaders()}).pipe(Bt(e=>(console.error("Error in getPincodeLocalities:",e),Fo(()=>e))))}getPincodeDropdowns(){return this.http.get(`${this.apiUrl}/pincodes/dropdowns`,{headers:this.getHeaders()}).pipe(Bt(e=>(console.error("Error in getPincodeDropdowns:",e),Fo(()=>e))))}getLocalitiesByPincode(e){return this.getPincodeLocalities().pipe(le(i=>i.filter(o=>o.pincode===e).map(o=>o.locality_name).filter((o,r,s)=>s.indexOf(o)===r)))}validatePincodeLocality(e,i){return this.http.get(`${this.apiUrl}/pincodes/validate`,{headers:this.getHeaders(),params:{pincode:e,localityName:i}}).pipe(le(o=>o.valid),Bt(o=>(console.error("Error in validatePincodeLocality:",o),ue(!1))))}getPincodes(){return this.http.get(`${this.apiUrl}/pincodes/distinct`,{headers:this.getHeaders()}).pipe(Bt(e=>(console.error("Error in getPincodes:",e),Fo(()=>e))))}getLocalities(e){return this.localitiesCache.has(e)?ue(this.localitiesCache.get(e)):this.http.get(`${this.apiUrl}/pincodes/${e}/localities`,{headers:this.getHeaders()}).pipe(jn(i=>this.localitiesCache.set(e,i)),Bt(i=>(console.error("Error in getLocalities:",i),Fo(()=>i))))}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const sw=()=>[];function _X(t,n){if(1&t&&(m(0,"span",16),v(1),p()),2&t){const e=I();b(),q(" ",null!=e.description&&null!=e.description.errors&&e.description.errors.required?"Description is required.":"Description must be at least 5 characters long."," ")}}function vX(t,n){1&t&&(m(0,"div"),v(1,"Employee name is required."),p())}function yX(t,n){if(1&t&&(m(0,"div",71),R(1,vX,2,0,"div",72),p()),2&t){const e=I();b(),M("ngIf",null==e.employeeName||null==e.employeeName.errors?null:e.employeeName.errors.required)}}function bX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),q("",e.label," ")}}function wX(t,n){1&t&&(m(0,"div"),v(1,"Priority is required."),p())}function CX(t,n){if(1&t&&(m(0,"div",71),R(1,wX,2,0,"div",72),p()),2&t){const e=I();b(),M("ngIf",null==e.priority||null==e.priority.errors?null:e.priority.errors.required)}}function DX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),ne(e.label)}}function TX(t,n){1&t&&(m(0,"div"),v(1,"Status is required."),p())}function SX(t,n){if(1&t&&(m(0,"div",71),R(1,TX,2,0,"div",72),p()),2&t){const e=I();b(),M("ngIf",null==e.status||null==e.status.errors?null:e.status.errors.required)}}function MX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),q("",e.label," ")}}function kX(t,n){1&t&&(m(0,"div"),v(1,"Task date is required."),p())}function EX(t,n){if(1&t&&(m(0,"div",71),R(1,kX,2,0,"div",72),p()),2&t){const e=I();b(),M("ngIf",null==e.taskDate||null==e.taskDate.errors?null:e.taskDate.errors.required)}}function xX(t,n){1&t&&(m(0,"div"),v(1,"Deadline is required."),p())}function IX(t,n){if(1&t&&(m(0,"div",71),R(1,xX,2,0,"div",72),p()),2&t){const e=I();b(),M("ngIf",null==e.deadline||null==e.deadline.errors?null:e.deadline.errors.required)}}function NX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.id),b(),ne(e.name)}}function OX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.id),b(),ne(e.name)}}function PX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e),b(),ne(e)}}function AX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e),b(),ne(e)}}function RX(t,n){if(1&t){const e=ve();m(0,"div",74)(1,"div")(2,"label",75),k(3,"i",76),v(4," State "),m(5,"span",77),v(6,"*"),p()(),m(7,"select",78),B("change",function(o){return Q(e),J(I().onStateChange(o.target.value))}),m(8,"option",27),v(9,"Select State"),p(),R(10,NX,2,2,"option",28),p()(),m(11,"div")(12,"label",75),k(13,"i",79),v(14," City "),m(15,"span",77),v(16,"*"),p()(),m(17,"select",80),B("change",function(o){return Q(e),J(I().onCityChange(o.target.value))}),m(18,"option",27),v(19),p(),R(20,OX,2,2,"option",28),p()(),m(21,"div")(22,"label",75),k(23,"i",81),v(24," Locality "),p(),m(25,"select",82),B("change",function(o){return Q(e),J(I().onLocalityChange(o.target.value))}),m(26,"option",27),v(27,"Select Locality"),p(),R(28,PX,2,2,"option",28),p()(),m(29,"div")(30,"label",75),k(31,"i",83),v(32," Pincode "),p(),m(33,"select",84)(34,"option",27),v(35,"Auto-populated on Locality selection"),p(),R(36,AX,2,2,"option",28),p()()()}if(2&t){const e=I();b(10),M("ngForOf",e.states),b(9),ne(null!=e.stateId&&e.stateId.value?"Select City":"Select state first"),b(),M("ngForOf",e.cities),b(8),M("ngForOf",e.localitySuggestions),b(8),M("ngForOf",e.pincodeOptions)}}function FX(t,n){1&t&&(m(0,"div",85)(1,"div")(2,"label",86),k(3,"i",76),v(4," State * "),p(),k(5,"input",87),p(),m(6,"div")(7,"label",86),k(8,"i",79),v(9," City * "),p(),k(10,"input",88),p(),m(11,"div")(12,"label",86),k(13,"i",81),v(14," Locality "),p(),k(15,"input",89),p(),m(16,"div")(17,"label",86),k(18,"i",83),v(19," Pincode "),p(),k(20,"input",90),p()())}function LX(t,n){if(1&t&&(m(0,"span",97),k(1,"i",98),v(2),p()),2&t){const e=I(2);b(2),q(" ",e.getStateName(null==e.stateId?null:e.stateId.value)||e.locationForm.value.stateName," ")}}function BX(t,n){if(1&t&&(m(0,"span",97),k(1,"i",99),v(2),p()),2&t){const e=I(2);b(2),q(" ",e.getCityName(null==e.cityId?null:e.cityId.value)||e.locationForm.value.cityName," ")}}function VX(t,n){if(1&t&&(m(0,"span",97),k(1,"i",100),v(2),p()),2&t){const e=I(2);b(2),q(" ",(null==e.localityName?null:e.localityName.value)||e.locationForm.value.localityNameInput," ")}}function jX(t,n){if(1&t&&(m(0,"span",97),k(1,"i",101),v(2),p()),2&t){const e=I(2);b(2),q(" ",(null==e.pincode?null:e.pincode.value)||e.locationForm.value.pincodeManual," ")}}function $X(t,n){if(1&t&&(m(0,"div",91)(1,"div",92),k(2,"i",93),m(3,"strong",94),v(4,"Selected Location"),p()(),m(5,"div",95),R(6,LX,3,1,"span",96)(7,BX,3,1,"span",96)(8,VX,3,1,"span",96)(9,jX,3,1,"span",96),p()()),2&t){const e=I();b(6),M("ngIf",(null==e.stateId?null:e.stateId.value)||e.manualLocationEntry&&e.locationForm.value.stateName),b(),M("ngIf",(null==e.cityId?null:e.cityId.value)||e.manualLocationEntry&&e.locationForm.value.cityName),b(),M("ngIf",(null==e.localityName?null:e.localityName.value)||e.manualLocationEntry&&e.locationForm.value.localityNameInput),b(),M("ngIf",(null==e.pincode?null:e.pincode.value)||e.manualLocationEntry&&e.locationForm.value.pincodeManual)}}function HX(t,n){if(1&t&&(m(0,"option",73),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),q("",e.label," ")}}function UX(t,n){1&t&&k(0,"span",104)}function zX(t,n){if(1&t){const e=ve();m(0,"button",102),B("click",function(){return Q(e),J(I().confirmDelete())}),R(1,UX,1,0,"span",103),v(2," Delete Task "),p()}if(2&t){const e=I();M("disabled",e.isSubmitting||e.isDeleting),b(),M("ngIf",e.isDeleting)}}function GX(t,n){if(1&t){const e=ve();m(0,"div",105)(1,"strong"),v(2,"Confirm Delete?"),p(),v(3," This action cannot be undone. "),m(4,"div",106)(5,"button",107),B("click",function(){return Q(e),J(I().deleteTask())}),v(6,"Yes, Delete"),p(),m(7,"button",108),B("click",function(){return Q(e),J(I().cancelDelete())}),v(8,"Cancel"),p()()()}}function WX(t,n){1&t&&k(0,"span",104)}function qX(t,n){if(1&t&&(m(0,"button",109),R(1,WX,1,0,"span",103),v(2),p()),2&t){const e=I();M("disabled",e.isSubmitting||e.isDeleting),b(),M("ngIf",e.isSubmitting),b(),q(" ","create"===e.mode?"Create Task":"Update Task"," ")}}function ZX(t){const n=t.get("taskDate")?.value,e=t.get("deadline")?.value;if(!n||!e)return null;const i=new Date(n);return new Date(e)<i?{deadlineNotAfterTaskDate:!0}:null}let KX=(()=>{class t{set show(e){this._show=e,e?(this.dataLoaded=!1,this.loadModalData()):this.resetModal()}get show(){return this._show}constructor(e,i,o,r,s,l,c,u,f){this.fb=e,this.taskService=i,this.employeeService=o,this.locationService=r,this.locationHierarchyService=s,this.taskStatusService=l,this.notificationService=c,this.pincodeService=u,this.cdr=f,this.task=null,this._show=!1,this.mode="view",this.close=new fe,this.taskSaved=new fe,this.taskDeleted=new fe,this.taskCreated=new fe,this.employees=[],this.states=[],this.cities=[],this.areas=[],this.taskTypes=[],this.isSubmitting=!1,this.isDeleting=!1,this.showDeleteConfirm=!1,this.dataLoaded=!1,this.manualLocationEntry=!1,this.pincodeOptions=[],this.localitySuggestions=[],this.pincodeLocalityRecords=[],this.destroy$=new Ge,this.priorityOptions=[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Urgent",label:"Urgent"}],this.statusOptions=[],this.taskTypeOptions=[],this.categoryOptions=[{value:"Field Work",label:"Field Work"},{value:"Office Work",label:"Office Work"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"},{value:"Support",label:"Support"}],this.fallbackStatusOptions=[{value:"Not Started",label:"Not Started"},{value:"In Progress",label:"In Progress"},{value:"Completed",label:"Completed"},{value:"On Hold",label:"On Hold"},{value:"Postponed",label:"Postponed"}],this.fallbackTaskTypeOptions=[{value:"General",label:"General"},{value:"Marketing Campaign",label:"Marketing Campaign"},{value:"Client Meeting",label:"Client Meeting"},{value:"Field Survey",label:"Field Survey"},{value:"Data Collection",label:"Data Collection"},{value:"Report Generation",label:"Report Generation"},{value:"Training",label:"Training"},{value:"Event Management",label:"Event Management"},{value:"Meeting Consultant",label:"Meeting Consultant"}],this.taskTypeDictionary={1:"General",2:"Marketing Campaign",3:"Client Meeting",4:"Field Survey",5:"Data Collection",6:"Report Generation",7:"Training",8:"Event Management",9:"Meeting Consultant"},this.fallbackPincodes=["110001","400001","560001","600001","700001"],this.fallbackLocalities=["Connaught Place","Bandra West","Indiranagar","T Nagar","Salt Lake"],this.taskForm=this.fb.group({description:["",[ce.required,ce.minLength(5)]],employeeName:["",ce.required],priority:["Medium",ce.required],status:["Not Started",ce.required],taskDate:["",ce.required],deadline:["",ce.required],stateId:["",ce.required],cityId:["",ce.required],areaId:[""],pincode:["",[ce.required,ce.pattern(/^\d{6}$/)]],localityName:[""],taskType:["",ce.required],isUrgent:[!1],department:[""],taskCategory:[""],clientName:[""],projectCode:[""],estimatedHours:[0],actualHours:[0],additionalNotes:[""]},{validators:ZX}),this.statusOptions=[...this.fallbackStatusOptions],this.taskTypeOptions=[...this.fallbackTaskTypeOptions]}ngOnInit(){this.locationForm=this.fb.group({stateId:["",ce.required],cityId:["",ce.required],localityName:["",ce.required],pincode:["",ce.required],stateName:[""],cityName:[""],localityNameInput:[""],pincodeManual:[""]})}ngOnChanges(e){e.task&&this.task&&this.populateForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get description(){return this.taskForm.get("description")}get employeeName(){return this.taskForm.get("employeeName")}get priority(){return this.taskForm.get("priority")}get status(){return this.taskForm.get("status")}get taskDate(){return this.taskForm.get("taskDate")}get deadline(){return this.taskForm.get("deadline")}get stateId(){return this.taskForm.get("stateId")}get cityId(){return this.taskForm.get("cityId")}get areaId(){return this.taskForm.get("areaId")}get pincode(){return this.taskForm.get("pincode")}get localityName(){return this.taskForm.get("localityName")}get taskType(){return this.taskForm.get("taskType")}populateForm(){this.task&&(this.taskForm.patchValue({description:this.task.description,employeeName:this.task.employeeName,priority:this.task.priority,status:this.task.status,taskDate:this.task.taskDate,deadline:this.task.deadline,stateId:this.task.stateId,cityId:this.task.cityId,areaId:this.task.areaId,pincode:this.task.pincodeId?this.task.pincodeId.toString():"",localityName:this.task.localityName,taskType:this.task.taskType||"",isUrgent:this.task.isUrgent}),this.task.stateId&&this.onStateChange(this.task.stateId),this.task.cityId&&this.onCityChange(this.task.cityId),this.task.pincodeId&&this.onPincodeChange(this.task.pincodeId.toString()))}loadModalData(){this.dataLoaded||(this.dataLoaded=!0,this.employeeService.getEmployees().pipe(Vt(this.destroy$)).subscribe({next:e=>{this.employees=e,this.cdr.detectChanges()},error:e=>console.error("Error loading employees",e)}),this.locationService.getAllStates().pipe(Vt(this.destroy$)).subscribe({next:e=>{this.states=e,this.cdr.detectChanges()},error:e=>console.error("Error loading states",e)}),this.taskStatusService.getAllTaskStatuses().pipe(Vt(this.destroy$)).subscribe({next:e=>{this.statusOptions=this.formatStatusOptions(e),this.cdr.detectChanges()},error:e=>{console.error("Error loading task statuses",e),this.statusOptions=[...this.fallbackStatusOptions],this.cdr.detectChanges()}}),this.taskService.getTaskTypes().pipe(Vt(this.destroy$)).subscribe({next:e=>{this.taskTypeOptions=this.formatTaskTypeOptions(e),this.cdr.detectChanges()},error:e=>{console.error("Error loading task types",e),this.taskTypeOptions=[...this.fallbackTaskTypeOptions],this.cdr.detectChanges()}}),this.pincodeService.getPincodeLocalities().pipe(Vt(this.destroy$)).subscribe({next:e=>{this.pincodeLocalityRecords=Array.isArray(e)?e:[],this.setPincodeOptionsFromRecords(this.pincodeLocalityRecords)},error:e=>{console.error("Error loading pincode localities",e),this.setPincodeOptions(this.fallbackPincodes)}}))}onManualToggle(e){this.manualLocationEntry=e&&"boolean"==typeof e.target?.checked?e.target.checked:!this.manualLocationEntry,this.manualLocationEntry?(this.locationForm.get("stateId")?.disable(),this.locationForm.get("cityId")?.disable(),this.locationForm.get("localityName")?.disable(),this.locationForm.get("pincode")?.disable(),this.locationForm.get("stateName")?.enable(),this.locationForm.get("cityName")?.enable(),this.locationForm.get("localityNameInput")?.enable(),this.locationForm.get("pincodeManual")?.enable(),this.locationForm.get("stateName")?.setValidators(null),this.locationForm.get("cityName")?.setValidators(null),this.locationForm.get("localityNameInput")?.setValidators(null),this.locationForm.get("pincodeManual")?.setValidators(null),this.locationForm.updateValueAndValidity()):(this.locationForm.get("stateId")?.enable(),this.locationForm.get("cityId")?.enable(),this.locationForm.get("localityName")?.enable(),this.locationForm.get("pincode")?.enable(),this.locationForm.get("stateName")?.disable(),this.locationForm.get("cityName")?.disable(),this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("stateId")?.setValidators(ce.required),this.locationForm.get("cityId")?.setValidators(ce.required),this.locationForm.get("localityName")?.setValidators(ce.required),this.locationForm.get("pincode")?.setValidators(ce.required),this.locationForm.updateValueAndValidity())}onStateChange(e){if(console.log("\u{1f50d} STATE CHANGED TO:",e),!e)return this.cities=[],this.localitySuggestions=[],this.pincodeOptions=[],this.taskForm.patchValue({cityId:null,areaId:null,localityName:"",pincode:""}),void console.log("\u26a0\ufe0f State cleared, cities reset");this.localitySuggestions=[],this.pincodeOptions=[],this.taskForm.patchValue({cityId:null,areaId:null,localityName:"",pincode:""}),console.log("\u{1f4e1} Fetching cities for stateId:",e),this.locationService.getCitiesByState(e).subscribe({next:i=>{console.log("\u{1f3d9}\ufe0f CITIES LOADED:",i),this.cities=i,this.taskForm.get("cityId")?.enable(),this.cdr.detectChanges(),console.log("\u2705 Cities dropdown should now show",this.cities.length,"cities")},error:i=>{console.error("\u274c ERROR loading cities:",i),this.cities=[]}})}onCityChange(e){if(console.log("\u{1f3d9}\ufe0f CITY CHANGED TO:",e),!e)return this.localitySuggestions=[],this.taskForm.patchValue({areaId:null,localityName:""}),this.pincodeOptions=[],void console.log("\u26a0\ufe0f City cleared, localities reset");console.log("\u{1f4e1} Fetching localities for cityId:",e),this.locationHierarchyService.getLocalitiesByCity(e).subscribe({next:i=>{console.log("\u{1f3d8}\ufe0f LOCALITIES LOADED:",i),this.localitySuggestions=i.map(o=>o.name),this.localityObjects=i,this.taskForm.get("localityName")?.enable(),this.cdr.detectChanges(),console.log("\u2705 Localities dropdown should now show",this.localitySuggestions.length,"localities")},error:i=>{console.error("\u274c ERROR loading localities:",i),this.localitySuggestions=[]}})}onLocalityChange(e){if(console.log("\u{1f3d8}\ufe0f LOCALITY CHANGED TO:",e),!e)return this.pincodeOptions=[],this.taskForm.patchValue({areaId:null,pincode:""}),void console.log("\u26a0\ufe0f Locality cleared, pincodes reset");const i=this.localityObjects||[],o=i.find(r=>r.name===e);if(console.log("\u{1f50d} Looking for locality object:",e,"in",i),console.log("\u2705 Found locality:",o),o){const r=o.id;this.taskForm.patchValue({areaId:r}),console.log("\u{1f4e1} Fetching pincodes for localityId/areaId:",r),this.locationHierarchyService.getPincodesByLocality(r).subscribe({next:s=>{console.log("\u{1f4ee} PINCODES LOADED:",s),this.pincodeOptions=s.map(l=>l.value),this.cdr.detectChanges(),1===this.pincodeOptions.length&&this.taskForm.get("pincode")?.setValue(this.pincodeOptions[0]),console.log("\u2705 Pincodes dropdown should now show",this.pincodeOptions.length,"pincodes")},error:s=>{console.error("\u274c ERROR loading pincodes:",s),this.pincodeOptions=[]}})}else console.warn("\u26a0\ufe0f Locality object not found for:",e)}onPincodeChange(e){if(!e)return this.localitySuggestions=[],this.locationForm.get("localityName")?.disable(),this.locationForm.get("pincode")?.disable(),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("localityNameInput")?.setValue(""),void this.locationForm.get("pincodeManual")?.setValue("");const i=(e||"").toString().trim();this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("localityNameInput")?.setValue(""),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("pincodeManual")?.setValue("");const o=this.pincodeLocalityRecords.filter(s=>this.normalizePincode(s)===i),r=this.extractLocalityNames(o);if(r.length)return this.setLocalitySuggestions(r),this.locationForm.get("localityName")?.enable(),this.locationForm.get("pincode")?.enable(),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("localityNameInput")?.setValue(""),void this.locationForm.get("pincodeManual")?.setValue("");this.pincodeService.getLocalities(i).pipe(Vt(this.destroy$)).subscribe({next:s=>{const l=this.extractLocalityNames(s);this.setLocalitySuggestions(l.length?l:this.fallbackLocalities),this.locationForm.get("localityName")?.enable(),this.locationForm.get("pincode")?.enable(),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("localityNameInput")?.setValue(""),this.locationForm.get("pincodeManual")?.setValue("")},error:s=>{console.error("Error loading localities",s),this.setLocalitySuggestions(this.fallbackLocalities),this.locationForm.get("localityName")?.enable(),this.locationForm.get("pincode")?.enable(),this.locationForm.get("pincodeManual")?.disable(),this.locationForm.get("localityNameInput")?.disable(),this.locationForm.get("localityNameInput")?.setValue(""),this.locationForm.get("pincodeManual")?.setValue("")}})}onSubmit(){if(this.taskForm.invalid){const r=[];return Object.keys(this.taskForm.controls).forEach(s=>{const l=this.taskForm.get(s);l&&l.invalid&&(r.push(s),l.markAsTouched())}),console.error("\u274c Invalid fields:",r),console.log("\u{1f4cb} Current form values:",this.taskForm.value),console.log("\u{1f4cb} Form errors:",this.taskForm.errors),Object.keys(this.taskForm.controls).forEach(s=>{this.taskForm.get(s)?.markAsTouched()}),void this.notificationService.showNotification(`Please fill all required fields correctly. Invalid: ${r.join(", ")}`,"error")}this.isSubmitting=!0;const e=this.taskForm.value,i=this.employees.find(r=>r.name===e.employeeName),o=i?i.employeeId:1;if(console.log("\u{1f4cb} SUBMITTING TASK:",{employeeName:e.employeeName,employeeId:o,stateId:e.stateId,cityId:e.cityId,areaId:e.areaId,localityName:e.localityName,pincode:e.pincode}),"create"===this.mode){const r={description:e.description,employeeId:o,priority:e.priority,taskDate:e.taskDate?new Date(e.taskDate).toISOString():(new Date).toISOString(),deadline:e.deadline?new Date(e.deadline).toISOString():(new Date).toISOString(),stateId:e.stateId?Number(e.stateId):void 0,cityId:e.cityId?Number(e.cityId):void 0,areaId:e.areaId?Number(e.areaId):e.localityId?Number(e.localityId):void 0,localityName:e.localityName||e.localityNameInput||void 0,pincodeId:e.pincodeId?Number(e.pincodeId):void 0,pincodeValue:e.pincode||e.pincodeValue||void 0,customLocation:e.customLocation||void 0,taskType:e.taskType||"General",department:e.department||"Marketing",taskCategory:e.taskCategory||"Field Work",additionalNotes:e.additionalNotes||void 0,isUrgent:e.isUrgent||!1,estimatedHours:e.estimatedHours?Number(e.estimatedHours):void 0,actualHours:e.actualHours?Number(e.actualHours):void 0};console.log("\u{1f4e4} SENDING CREATE DTO:",r),this.taskService.createTask(r).subscribe({next:s=>{console.log("\u2705 TASK CREATED:",s),this.notificationService.showNotification("Task created successfully","success"),this.taskCreated.emit(),this.closeModal()},error:s=>{console.error("\u274c ERROR CREATING TASK:",s),this.notificationService.showNotification("Error creating task: "+(s.error?.error||s.message),"error"),this.isSubmitting=!1}})}else if("edit"===this.mode&&this.task){const r={taskId:this.task.taskId,...e,employeeId:o,stateId:e.stateId||null,cityId:e.cityId||null,areaId:e.areaId||null,localityName:e.localityName||null,pincode:e.pincode||null,pincodeValue:e.pincode||null};console.log("\u{1f4e4} SENDING UPDATE DTO:",r),this.taskService.updateTask(this.task.taskId,r).subscribe({next:s=>{console.log("\u2705 TASK UPDATED:",s),this.notificationService.showNotification("Task updated successfully","success"),this.taskSaved.emit(s),this.closeModal()},error:s=>{console.error("\u274c ERROR UPDATING TASK:",s),this.notificationService.showNotification("Error updating task: "+(s.error?.error||s.message),"error"),this.isSubmitting=!1}})}}closeModal(){this.resetModal(),this.close.emit()}onClose(){this.closeModal()}confirmDelete(){this.showDeleteConfirm=!0}cancelDelete(){this.showDeleteConfirm=!1}deleteTask(){this.task&&(this.isDeleting=!0,this.taskService.deleteTask(this.task.taskId).subscribe({next:()=>{this.notificationService.showNotification("Task deleted successfully","success"),this.taskDeleted.emit(this.task.taskId),this.closeModal()},error:()=>{this.notificationService.showNotification("Error deleting task","error"),this.isDeleting=!1}}))}resetModal(){this.taskForm.reset(),this.showDeleteConfirm=!1,this.isSubmitting=!1,this.isDeleting=!1}formatStatusOptions(e){return e&&e.length?e.map(i=>({value:i.statusName,label:i.statusName})):[...this.fallbackStatusOptions]}formatTaskTypeOptions(e){if(!e||!e.length)return[...this.fallbackTaskTypeOptions];const i=e.map(r=>{if("number"==typeof r||"string"==typeof r){const u=String(r),f=this.taskTypeDictionary[u]||u;return{value:f,label:f}}const s=r.taskTypeId??r.TaskTypeId??r.task_type_id??r.TaskTypeID??r.taskTypeID??null;let c=r.typeName??r.TypeName??r.taskTypeName??r.TaskTypeName??r.name??r.Name??r.description??r.Description??"General";if((!c||"general"===c.toLowerCase())&&null!=s){const u=this.taskTypeDictionary[String(s)];u&&(c=u)}return{value:c,label:c}}),o=new Map;return i.forEach(r=>{o.has(r.value)||o.set(r.value,r)}),Array.from(o.values())}setPincodeOptions(e){const i=Array.from(new Set(e.filter(Boolean)));this.pincodeOptions=[...i],i.length||this.localityName?.disable(),this.cdr.detectChanges()}setPincodeOptionsFromRecords(e){if(!e||!e.length)return void this.setPincodeOptions(this.fallbackPincodes);const i=Array.from(new Set(e.map(o=>this.normalizePincode(o)).filter(o=>!!o)));this.setPincodeOptions(i.length?i:this.fallbackPincodes)}setLocalitySuggestions(e){const i=Array.from(new Set(e.filter(Boolean)));this.localitySuggestions=[...i],i.length?this.localityName?.enable():this.localityName?.disable(),this.cdr.detectChanges()}extractLocalityNames(e){return e?Array.isArray(e)?e.map(i=>"string"==typeof i?i:i&&"object"==typeof i?i.localityName??i.locality_name??i.name??i.Name??i.Locality??i.locality??null:null).filter(i=>!!i):"object"==typeof e?Object.values(e).map(i=>"string"==typeof i?i:i&&"object"==typeof i?i.localityName??i.locality_name??i.name??i.Name??null:null).filter(i=>!!i):[]:[]}normalizePincode(e){return e?"string"==typeof e||"number"==typeof e?e.toString().trim():"object"==typeof e?(e.pincode??e.Pincode??e.pincodeValue??e.pincode_value??"").toString().trim():"":""}getModalTitle(){switch(this.mode){case"create":return"Create New Task";case"edit":return"Edit Task";case"view":return"View Task";default:return"Task"}}getModalIcon(){switch(this.mode){case"create":return"bi bi-plus-circle";case"edit":return"bi bi-pencil-square";case"view":return"bi bi-eye";default:return"bi bi-task"}}getStateName(e){if(null==e||""===e)return"";const i="string"==typeof e?Number(e):e;return this.states.find(r=>r.id===i)?.name||""}getCityName(e){if(null==e||""===e)return"";const i="string"==typeof e?Number(e):e;return this.cities.find(r=>r.id===i)?.name||""}canDelete(){return"edit"===this.mode&&!!this.task}static{this.\u0275fac=function(i){return new(i||t)(j(zc),j(cl),j(lf),j(cf),j(rw),j(gX),j(Js),j(mX),j(ji))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-admin-task-modal"]],inputs:{task:"task",show:"show",mode:"mode"},outputs:{close:"close",taskSaved:"taskSaved",taskDeleted:"taskDeleted",taskCreated:"taskCreated"},features:[Dn],decls:139,vars:45,consts:[["tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click","disabled"],["novalidate","",3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-info-circle","me-2"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-12"],["for","description",1,"form-label"],[1,"text-danger"],["id","description","rows","3","formControlName","description","placeholder","Enter task description",1,"form-control",3,"readonly"],[1,"form-text"],["class","text-danger",4,"ngIf"],[1,"text-muted"],[1,"col-md-6"],["for","employeeName",1,"form-label"],["type","text","id","employeeName","formControlName","employeeName","placeholder","Enter employee name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","priority",1,"form-label"],["id","priority","formControlName","priority",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","id","isUrgent","formControlName","isUrgent",1,"form-check-input"],["for","isUrgent",1,"form-check-label"],[1,"bi","bi-exclamation-triangle","me-1"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select"],["for","taskType",1,"form-label"],["id","taskType","formControlName","taskType",1,"form-select"],["value","General"],["for","taskDate",1,"form-label"],["type","date","id","taskDate","formControlName","taskDate",1,"form-control"],["for","deadline",1,"form-label"],["type","date","id","deadline","formControlName","deadline",1,"form-control"],[2,"margin","30px 0","padding","30px","background","#f8f9fa","border-radius","12px","border","1px solid #e0e0e0"],[2,"display","flex","align-items","center","gap","12px","margin-bottom","25px","padding-bottom","15px","border-bottom","2px solid #ddd"],[1,"fas","fa-map-marked-alt",2,"font-size","1.5rem","color","#5b7cff"],[2,"margin","0","color","#5b7cff","font-size","1.3rem","font-weight","600"],[2,"margin-bottom","25px"],[2,"display","flex","align-items","center","gap","10px","cursor","pointer","font-size","0.95rem"],["type","checkbox",2,"width","18px","height","18px","cursor","pointer",3,"change","checked"],["style","display: grid; grid-template-columns: 1fr 1fr; gap: 25px;",4,"ngIf"],["style","display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; background: #fff9e6; border-radius: 8px; border: 2px solid #ffd966;",4,"ngIf"],["style","margin-top: 25px; padding: 15px; background: #e8f4fd; border: 1px solid #b3d9f2; border-radius: 6px;",4,"ngIf"],["for","department",1,"form-label"],["type","text","id","department","formControlName","department","placeholder","e.g., Marketing",1,"form-control"],["for","taskCategory",1,"form-label"],["id","taskCategory","formControlName","taskCategory",1,"form-select"],["for","clientName",1,"form-label"],["type","text","id","clientName","formControlName","clientName","placeholder","Enter client name",1,"form-control"],["for","projectCode",1,"form-label"],["type","text","id","projectCode","formControlName","projectCode","placeholder","Enter project code",1,"form-control"],["for","estimatedHours",1,"form-label"],["type","number","id","estimatedHours","formControlName","estimatedHours","step","0.5","min","0","placeholder","e.g., 8.5",1,"form-control"],["for","actualHours",1,"form-label"],["type","number","id","actualHours","formControlName","actualHours","step","0.5","min","0","placeholder","e.g., 7.5",1,"form-control"],["for","additionalNotes",1,"form-label"],["id","additionalNotes","rows","2","formControlName","additionalNotes","placeholder","Any additional notes or instructions",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","alert alert-danger d-inline-block m-2 p-2",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","25px"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","8px","font-weight","600","color","#333"],[1,"fas","fa-map-marker-alt"],[2,"color","red"],["formControlName","stateId",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],[1,"fas","fa-city"],["formControlName","cityId",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],[1,"fas","fa-search-location"],["formControlName","localityName",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],[1,"fas","fa-envelope-open-text"],["formControlName","pincode",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","20px","padding","20px","background","#fff9e6","border-radius","8px","border","2px solid #ffd966"],[2,"display","block","margin-bottom","8px","font-weight","600","color","#333"],["type","text","placeholder","Type State Name","formControlName","stateName",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type City Name","formControlName","cityName",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type Locality","formControlName","localityNameInput",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type Pincode","maxlength","10","formControlName","pincodeManual",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],[2,"margin-top","25px","padding","15px","background","#e8f4fd","border","1px solid #b3d9f2","border-radius","6px"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","10px"],[1,"fas","fa-info-circle",2,"color","#1976d2"],[2,"color","#1976d2"],[2,"display","flex","flex-wrap","wrap","gap","10px"],["style","display: inline-flex; align-items: center; gap: 6px; background: white; padding: 6px 12px; border-radius: 4px; border: 1px solid #ddd;",4,"ngIf"],[2,"display","inline-flex","align-items","center","gap","6px","background","white","padding","6px 12px","border-radius","4px","border","1px solid #ddd"],[1,"fas","fa-map-marker-alt",2,"color","#5b7cff"],[1,"fas","fa-city",2,"color","#5b7cff"],[1,"fas","fa-search-location",2,"color","#5b7cff"],[1,"fas","fa-envelope-open-text",2,"color","#5b7cff"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"alert","alert-danger","d-inline-block","m-2","p-2"],[1,"mt-2"],["type","button",1,"btn","btn-outline-danger","btn-sm","me-2",3,"click"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(i,o){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),k(5,"i"),v(6),p(),m(7,"button",5),B("click",function(){return o.onClose()}),p()(),m(8,"form",6),B("ngSubmit",function(){return o.onSubmit()}),m(9,"div",7)(10,"div",8)(11,"div",9)(12,"h6",10),k(13,"i",11),v(14," Basic Information "),p()(),m(15,"div",12)(16,"div",13)(17,"div",14)(18,"label",15),v(19,"Description "),m(20,"span",16),v(21,"*"),p()(),m(22,"textarea",17),v(23,"                  "),p(),m(24,"div",18),R(25,_X,2,1,"span",19),m(26,"span",20),v(27),p()()()(),m(28,"div",13)(29,"div",21)(30,"label",22),v(31,"Assigned Employee "),m(32,"span",16),v(33,"*"),p()(),k(34,"input",23),R(35,yX,2,1,"div",24),p(),m(36,"div",21)(37,"label",25),v(38,"Priority "),m(39,"span",16),v(40,"*"),p()(),m(41,"select",26)(42,"option",27),v(43,"Select priority"),p(),R(44,bX,2,2,"option",28),p(),R(45,CX,2,1,"div",24),p()(),m(46,"div",13)(47,"div",21)(48,"div",29),k(49,"input",30),m(50,"label",31),k(51,"i",32),v(52," Mark as Urgent "),p()()()()()(),m(53,"div",13)(54,"div",21)(55,"label",33),v(56,"Status "),m(57,"span",16),v(58,"*"),p()(),m(59,"select",34)(60,"option",27),v(61,"Select status"),p(),R(62,DX,2,2,"option",28),p(),R(63,SX,2,1,"div",24),p(),m(64,"div",21)(65,"label",35),v(66,"Task Type"),p(),m(67,"select",36)(68,"option",37),v(69,"General"),p(),R(70,MX,2,2,"option",28),p()()(),m(71,"div",13)(72,"div",21)(73,"label",38),v(74,"Task Date "),m(75,"span",16),v(76,"*"),p()(),k(77,"input",39),R(78,EX,2,1,"div",24),p(),m(79,"div",21)(80,"label",40),v(81,"Deadline "),m(82,"span",16),v(83,"*"),p()(),k(84,"input",41),R(85,IX,2,1,"div",24),p()(),m(86,"div",42)(87,"div",43),k(88,"i",44),m(89,"h3",45),v(90,"Location Details"),p()(),m(91,"div",46)(92,"label",47)(93,"input",48),B("change",function(){return o.onManualToggle()}),p(),m(94,"span"),v(95,"Location not found? Add Manually"),p()()(),R(96,RX,37,5,"div",49)(97,FX,21,0,"div",50)(98,$X,10,4,"div",51),p(),m(99,"div",13)(100,"div",21)(101,"label",52),v(102,"Department"),p(),k(103,"input",53),p(),m(104,"div",21)(105,"label",54),v(106,"Task Category"),p(),m(107,"select",55),R(108,HX,2,2,"option",28),p()()(),m(109,"div",13)(110,"div",21)(111,"label",56),v(112,"Client Name"),p(),k(113,"input",57),p(),m(114,"div",21)(115,"label",58),v(116,"Project Code"),p(),k(117,"input",59),p()(),m(118,"div",13)(119,"div",21)(120,"label",60),v(121,"Estimated Hours"),p(),k(122,"input",61),p(),m(123,"div",21)(124,"label",62),v(125,"Actual Hours"),p(),k(126,"input",63),p()(),m(127,"div",13)(128,"div",14)(129,"label",64),v(130,"Additional Notes"),p(),m(131,"textarea",65),v(132,"              "),p()()()(),m(133,"div",66)(134,"button",67),B("click",function(){return o.onClose()}),v(135," Close "),p(),R(136,zX,3,2,"button",68)(137,GX,9,0,"div",69)(138,qX,3,3,"button",70),p()()()()()),2&i&&(jr("display",o.show?"block":"none"),Z("show",o.show),bt("aria-hidden",!o.show),b(5),Ra(o.getModalIcon()),b(),q(" ",o.getModalTitle()," "),b(),M("disabled",o.isSubmitting||o.isDeleting),b(),M("formGroup",o.taskForm),b(14),Z("is-invalid",(null==o.description?null:o.description.invalid)&&(null==o.description?null:o.description.touched)),M("readonly","view"===o.mode),b(3),M("ngIf",(null==o.description?null:o.description.invalid)&&(null==o.description?null:o.description.touched)),b(2),q("",(null==o.description||null==o.description.value?null:o.description.value.length)||0,"/500"),b(7),Z("is-invalid",(null==o.employeeName?null:o.employeeName.invalid)&&(null==o.employeeName?null:o.employeeName.touched)),b(),M("ngIf",(null==o.employeeName?null:o.employeeName.invalid)&&(null==o.employeeName?null:o.employeeName.touched)),b(6),Z("is-invalid",(null==o.priority?null:o.priority.invalid)&&(null==o.priority?null:o.priority.touched)),b(3),M("ngForOf",o.priorityOptions||qu(42,sw)),b(),M("ngIf",(null==o.priority?null:o.priority.invalid)&&(null==o.priority?null:o.priority.touched)),b(14),Z("is-invalid",(null==o.status?null:o.status.invalid)&&(null==o.status?null:o.status.touched)),b(3),M("ngForOf",o.statusOptions),b(),M("ngIf",(null==o.status?null:o.status.invalid)&&(null==o.status?null:o.status.touched)),b(7),M("ngForOf",o.taskTypeOptions||qu(43,sw)),b(7),Z("is-invalid",(null==o.taskDate?null:o.taskDate.invalid)&&(null==o.taskDate?null:o.taskDate.touched)),b(),M("ngIf",(null==o.taskDate?null:o.taskDate.invalid)&&(null==o.taskDate?null:o.taskDate.touched)),b(6),Z("is-invalid",(null==o.deadline?null:o.deadline.invalid)&&(null==o.deadline?null:o.deadline.touched)),b(),M("ngIf",(null==o.deadline?null:o.deadline.invalid)&&(null==o.deadline?null:o.deadline.touched)),b(8),M("checked",o.manualLocationEntry),b(3),M("ngIf",!o.manualLocationEntry),b(),M("ngIf",o.manualLocationEntry),b(),M("ngIf",(null==o.stateId?null:o.stateId.value)||(null==o.cityId?null:o.cityId.value)||(null==o.localityName?null:o.localityName.value)||(null==o.pincode?null:o.pincode.value)||o.manualLocationEntry),b(10),M("ngForOf",o.categoryOptions||qu(44,sw)),b(26),M("disabled",o.isSubmitting||o.isDeleting),b(2),M("ngIf",o.canDelete()),b(),M("ngIf",o.showDeleteConfirm),b(),M("ngIf","view"!==o.mode))},dependencies:[Wr,co,Ws,Za,Ka,fo,Uc,wh,Zs,Ro,Gs,Ih,xh,Yr,qs],styles:['.modal-backdrop[_ngcontent-%COMP%]{z-index:1050;background-color:#000000b3;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.modal[_ngcontent-%COMP%]{z-index:1055}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideIn .4s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-50px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;box-shadow:0 25px 50px #00000040!important;overflow:hidden;background:linear-gradient(145deg,#fff,#f8f9fa)}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;border-bottom:none!important;padding:2rem 2.5rem!important;position:relative;overflow:hidden}.modal-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-10%;width:300px;height:300px;background:radial-gradient(circle,rgba(255,255,255,.15) 0%,transparent 70%);border-radius:50%}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:700!important;font-size:1.75rem!important;color:#fff!important;display:flex;align-items:center;position:relative;z-index:1;text-shadow:0 2px 10px rgba(0,0,0,.15)}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.75rem;animation:_ngcontent-%COMP%_iconPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1);opacity:.9;transition:all .3s}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1;transform:rotate(90deg)}.modal-body[_ngcontent-%COMP%]{padding:2.5rem!important;max-height:70vh;overflow-y:auto;background:#fff}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:linear-gradient(180deg,#f8f9fa,#e9ecef);border-radius:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;-webkit-transition:all .3s;transition:all .3s}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.card[_ngcontent-%COMP%]{border-radius:15px!important;margin-bottom:1.75rem!important;transition:all .4s cubic-bezier(.4,0,.2,1);border:1px solid rgba(102,126,234,.1)!important;background:#ffffffe6!important;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)!important;box-shadow:0 12px 30px #667eea26!important;border-color:#667eea4d!important}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea14,#764ba214)!important;border-bottom:2px solid rgba(102,126,234,.15)!important;border-radius:15px 15px 0 0!important;padding:1.25rem 1.75rem!important}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:700!important;color:#667eea!important;font-size:1.1rem!important;display:flex;align-items:center}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;font-size:1.25rem}.card-body[_ngcontent-%COMP%]{padding:1.75rem!important}.form-label[_ngcontent-%COMP%]{font-weight:600!important;color:#495057!important;margin-bottom:.6rem!important;font-size:.95rem;display:flex;align-items:center}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#667eea}.form-label[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{margin-left:.25rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:10px!important;border:2px solid #e9ecef!important;padding:.85rem 1.25rem!important;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea!important;box-shadow:0 0 0 .25rem #667eea26!important;outline:none;transform:translateY(-1px)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545!important}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545!important;box-shadow:0 0 0 .25rem #dc354526!important}.form-control[readonly][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-color:#dee2e6!important;color:#6c757d;cursor:not-allowed}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:120px;line-height:1.6}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.5rem;display:flex;justify-content:space-between;align-items:center}.form-text[_ngcontent-%COMP%]   .text-warning[_ngcontent-%COMP%]{color:#f0ad4e!important;font-weight:600}.form-text[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#d9534f!important;font-weight:700}.invalid-feedback[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.875rem;color:#dc3545;font-weight:600;animation:_ngcontent-%COMP%_shake .4s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.form-check[_ngcontent-%COMP%]{padding-left:0;display:flex;align-items:center}.form-check-input[_ngcontent-%COMP%]{width:3.5rem!important;height:1.75rem!important;margin-right:1rem!important;border-radius:2rem!important;transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer;border:2px solid #e9ecef}.form-check-input[_ngcontent-%COMP%]:checked{background:linear-gradient(135deg,#48c774,#3bb765)!important;border-color:#48c774!important;box-shadow:0 4px 12px #48c77466}.form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #667eea26;border-color:#667eea}.form-check-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;cursor:pointer;display:flex;align-items:center;font-size:1rem}.form-check-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#f0ad4e}.badge[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;padding:.5rem 1rem;border-radius:25px;box-shadow:0 2px 8px #0000001a}.modal-footer[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f8f9fa);border-top:2px solid rgba(102,126,234,.1)!important;padding:1.75rem 2.5rem!important}.btn[_ngcontent-%COMP%]{border-radius:30px!important;font-weight:700!important;padding:.85rem 2rem!important;font-size:.95rem;transition:all .4s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;justify-content:center;position:relative;overflow:hidden;box-shadow:0 4px 12px #0000001f}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 20px #0003}.btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;border:none!important;color:#fff!important}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#764ba2,#667eea)!important}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765)!important;border:none!important;color:#fff!important}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#3bb765,#2ea85b)!important}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f)!important;border:none!important;color:#fff!important}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ee5a6f,#dc3545)!important}.btn-outline-danger[_ngcontent-%COMP%]{border:2px solid #FF6B81!important;color:#ff6b81!important;background:transparent!important}.btn-outline-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ff6b81,#ee5a6f)!important;color:#fff!important;border-color:transparent!important}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057)!important;border:none!important;color:#fff!important}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#495057,#343a40)!important}.spinner-border-sm[_ngcontent-%COMP%]{width:1.1rem;height:1.1rem}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:0 0 0 .3rem #667eea66!important}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .3rem #ff6b8166!important}.btn-success[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .3rem #48c77466!important}@media (max-width: 991.98px){.modal-dialog[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100% - 2rem)}.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:1.5rem!important}.modal-body[_ngcontent-%COMP%]{padding:1.5rem!important;max-height:60vh}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:1.5rem!important}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem!important;font-size:.9rem}}@media (max-width: 767.98px){.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:1.25rem!important}.modal-footer[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem 1rem!important;font-size:.9rem}}.alert[_ngcontent-%COMP%]{border-radius:12px;border-left:4px solid;padding:1.25rem;margin-bottom:1.5rem;box-shadow:0 4px 12px #00000014}.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b811a,#ee5a6f1a);border-left-color:#ff6b81;color:#721c24}']})}}return t})();const YX=()=>[],QX=t=>({"text-danger fw-bold":t}),CA=t=>({"text-danger":t});function JX(t,n){if(1&t){const e=ve();m(0,"div",55),B("click",function(){const o=Q(e).$implicit;return J(I().onStatTileClick(o))})("mouseenter",function(o){const r=Q(e).$implicit;return J(I().onStatTileHover(o,r,!0))})("mouseleave",function(o){const r=Q(e).$implicit;return J(I().onStatTileHover(o,r,!1))}),m(1,"div",56),v(2),p(),m(3,"div",57),v(4),p()()}if(2&t){const e=n.$implicit,i=I();(function BS(t,n,e){Io(si,lr,bc($(),t,n,e),!0)})("stat-card stat-gradient-",e.color," shadow rounded-4 text-white d-flex flex-column justify-content-center align-items-center px-4 py-3"),jr("opacity",e.filterValue&&i.selectedStatus===e.filterValue?"1":"0.85")("transform",e.filterValue&&i.selectedStatus===e.filterValue?"scale(1.05)":"scale(1)"),b(2),q("",e.value," "),b(2),ne(e.label)}}function XX(t,n){if(1&t&&(m(0,"option",58),v(1),p()),2&t){const e=n.$implicit;M("value",e.value),b(),q(" ",e.label," ")}}function eee(t,n){if(1&t&&(m(0,"option",58),v(1),p()),2&t){const e=n.$implicit;M("value",e.employeeId),b(),q(" ",e.name," ")}}function tee(t,n){1&t&&(m(0,"span"),k(1,"i",59),v(2,"Refresh Data "),p())}function nee(t,n){1&t&&(m(0,"span"),k(1,"span",60),v(2,"Loading... "),p())}function iee(t,n){1&t&&(m(0,"div",61)(1,"div",62),k(2,"div",63),m(3,"h4",64),v(4,"Loading tasks..."),p(),m(5,"p",64),v(6,"Please wait while we fetch the latest data"),p()()())}function oee(t,n){1&t&&(m(0,"span",91),v(1,"OVERDUE"),p())}function ree(t,n){if(1&t){const e=ve();m(0,"div",65)(1,"div",66)(2,"div",67)(3,"span",68),v(4),p(),m(5,"span",69),v(6),p(),m(7,"span",70),v(8),p()(),m(9,"div",71),k(10,"i",72),v(11),p(),m(12,"div",73)(13,"div",74)(14,"b"),v(15,"Employee:"),p()(),m(16,"div",75),v(17),p(),m(18,"div",74)(19,"b"),v(20,"Designation:"),p()(),m(21,"div",75),v(22),p(),m(23,"div",74)(24,"b"),v(25,"Contact:"),p()(),m(26,"div",75),v(27),p(),m(28,"div",74)(29,"span",76),v(30),p()(),m(31,"div",75)(32,"span",77),v(33),p()(),m(34,"div",74)(35,"b"),v(36,"Custom Location:"),p()(),m(37,"div",75),v(38),p(),m(39,"div",74)(40,"b"),v(41,"Type:"),p()(),m(42,"div",75),v(43),p(),m(44,"div",74)(45,"b"),v(46,"Category:"),p()(),m(47,"div",75),v(48),p(),m(49,"div",74)(50,"b"),v(51,"Client:"),p()(),m(52,"div",75),v(53),p(),m(54,"div",78)(55,"span",79),k(56,"i",80),v(57),p(),R(58,oee,2,0,"span",81),p(),m(59,"div",82)(60,"b"),v(61,"Estimated:"),p(),v(62),m(63,"b"),v(64,"Actual:"),p(),v(65),p(),m(66,"div",82)(67,"b"),v(68,"Assigned By:"),p(),v(69),p()(),m(70,"div",83)(71,"b"),v(72,"Updated:"),p(),v(73),p(),m(74,"div",84)(75,"button",85),B("click",function(){const o=Q(e).$implicit;return J(I().openAdminTaskModal(o,"view"))}),k(76,"i",86),v(77,"View"),p(),m(78,"button",87),B("click",function(){const o=Q(e).$implicit;return J(I().openEditTaskModal(o))}),k(79,"i",88),v(80,"Edit"),p(),m(81,"button",89),B("click",function(){const o=Q(e).$implicit;return J(I().deleteTask(o))}),k(82,"i",90),v(83,"Delete"),p()()()()}if(2&t){const e=n.$implicit,i=I();b(4),ne(e.description),b(2),ne(e.priority),b(2),ne(e.status),b(3),Ps(" #",e.taskId," \u2022 ",i.formatDate(e.taskDate),""),b(6),ne(e.employeeName),b(5),ne(e.employeeDesignation),b(5),ne(e.employeeContact),b(3),q("Project: ",e.projectCode,""),b(3),q("Loc: ",e.locationName,""),b(5),ne(e.customLocation),b(5),ne(e.taskType),b(5),ne(e.taskCategory),b(5),ne(e.clientName),b(2),M("ngClass",As(21,QX,i.isOverdue(e.deadline)&&"Completed"!==e.status)),b(2),q("Deadline: ",i.formatDate(e.deadline),""),b(),M("ngIf",i.isOverdue(e.deadline)&&"Completed"!==e.status),b(4),q(" ",e.estimatedHours,"h "),b(3),q(" ",e.actualHours,"h"),b(4),q(" ",e.assignedByUserName,""),b(4),q(" ",i.formatDate(e.updatedAt),"")}}function see(t,n){1&t&&(m(0,"div",92)(1,"div",93),k(2,"i",94),p(),m(3,"h5"),v(4,"No tasks found"),p()())}function aee(t,n){if(1&t&&(m(0,"span"),v(1),p()),2&t){const e=I(3);b(),q(" (",e.selectedTask.customLocation,")")}}function lee(t,n){1&t&&(m(0,"span",132),v(1,"OVERDUE"),p())}function cee(t,n){if(1&t){const e=ve();m(0,"div",98)(1,"div",99)(2,"h4",100),k(3,"i",101),v(4,"Task Details "),p(),m(5,"button",102),B("click",function(){return Q(e),J(I(2).closeTaskDetails())}),p()(),m(6,"div",103)(7,"div",104)(8,"div",78)(9,"div",105)(10,"div",29)(11,"h5",106),k(12,"i",107),v(13,"Task Information "),p(),m(14,"div",108)(15,"div",109)(16,"strong",110),v(17,"Task ID:"),p(),m(18,"span",111),v(19),p()(),m(20,"div",109)(21,"strong",110),v(22,"Priority:"),p(),m(23,"span",112),v(24),p()(),m(25,"div",109)(26,"strong",110),v(27,"Status:"),p(),m(28,"span",112),v(29),p()(),m(30,"div",78)(31,"strong",110),v(32,"Description:"),p(),m(33,"p",113),v(34),p()()()()()()(),m(35,"div",104)(36,"div",78)(37,"div",105)(38,"div",29)(39,"h5",114),k(40,"i",115),v(41,"Employee Information "),p(),m(42,"div",108)(43,"div",109)(44,"strong",110),v(45,"Name:"),p(),m(46,"span",111),v(47),p()(),m(48,"div",109)(49,"strong",110),v(50,"Designation:"),p(),m(51,"span",111),v(52),p()(),m(53,"div",109)(54,"strong",110),v(55,"Contact:"),p(),m(56,"span",111),k(57,"i",116),v(58),p()()()()()()(),m(59,"div",104)(60,"div",78)(61,"div",105)(62,"div",29)(63,"h5",117),k(64,"i",118),v(65,"Location & Timing "),p(),m(66,"div",108)(67,"div",109)(68,"strong",110),v(69,"Location:"),p(),m(70,"span",111),k(71,"i",119),v(72),R(73,aee,2,1,"span",41),p()(),m(74,"div",109)(75,"strong",110),v(76,"Task Date:"),p(),m(77,"span",111),k(78,"i",120),v(79),p()(),m(80,"div",109)(81,"strong",110),v(82,"Deadline:"),p(),m(83,"span",121),k(84,"i",122),v(85),R(86,lee,2,0,"span",123),p()()()()()()(),m(87,"div",124)(88,"div",78)(89,"div",105)(90,"div",29)(91,"h5",125),k(92,"i",126),v(93,"Assignment Details "),p(),m(94,"div",108)(95,"div",109)(96,"strong",110),v(97,"Assigned By:"),p(),m(98,"span",111),v(99),p()(),m(100,"div",109)(101,"strong",110),v(102,"Created:"),p(),m(103,"span",111),k(104,"i",127),v(105),p()(),m(106,"div",109)(107,"strong",110),v(108,"Last Updated:"),p(),m(109,"span",111),k(110,"i",128),v(111),p()()()()()()()(),m(112,"div",129)(113,"button",130),B("click",function(){return Q(e),J(I(2).closeTaskDetails())}),k(114,"i",131),v(115,"Close "),p()()()}if(2&t){const e=I(2);b(19),q("#",e.selectedTask.taskId,""),b(4),M("ngClass",e.getPriorityClass(e.selectedTask.priority)),b(),q(" ",e.selectedTask.priority," "),b(4),M("ngClass",e.getStatusClass(e.selectedTask.status)),b(),q(" ",e.selectedTask.status," "),b(5),ne(e.selectedTask.description),b(13),ne(e.selectedTask.employeeName||(null==e.selectedTask||null==e.selectedTask.Employee?null:e.selectedTask.Employee.Name)),b(5),ne(e.selectedTask.employeeDesignation||(null==e.selectedTask||null==e.selectedTask.Employee?null:e.selectedTask.Employee.Designation)),b(6),q("",e.selectedTask.employeeContact||(null==e.selectedTask||null==e.selectedTask.Employee?null:e.selectedTask.Employee.Contact)," "),b(14),q("",e.selectedTask.locationName," "),b(),M("ngIf",e.selectedTask.customLocation),b(6),q("",e.formatDate(e.selectedTask.taskDate)," "),b(4),M("ngClass",As(19,CA,e.isOverdue(e.selectedTask.deadline)&&"Completed"!==e.selectedTask.status)),b(),M("ngClass",As(21,CA,e.isOverdue(e.selectedTask.deadline)&&"Completed"!==e.selectedTask.status)),b(),q(" ",e.formatDate(e.selectedTask.deadline)," "),b(),M("ngIf",e.isOverdue(e.selectedTask.deadline)&&"Completed"!==e.selectedTask.status),b(13),ne(e.selectedTask.assignedByUserName),b(6),q("",e.formatDate(e.selectedTask.createdAt)," "),b(6),q("",e.formatDate(e.selectedTask.updatedAt)," ")}}function dee(t,n){if(1&t){const e=ve();m(0,"div",95),B("click",function(){return Q(e),J(I().closeTaskDetails())}),m(1,"div",96),B("click",function(o){return Q(e),J(o.stopPropagation())}),R(2,cee,116,23,"div",97),p()()}if(2&t){const e=I();jr("display",e.showTaskDetails?"block":"none"),Z("show",e.showTaskDetails),b(2),M("ngIf",e.selectedTask)}}function uee(t,n){1&t&&(m(0,"div",61)(1,"div",62),k(2,"div",133),m(3,"h4",64),v(4,"Loading marketing campaigns..."),p(),m(5,"p",64),v(6,"Please wait while we fetch the latest data"),p()()())}function hee(t,n){if(1&t&&(m(0,"span"),v(1),p()),2&t){const e=I().$implicit,i=I();b(),q(" - ",i.formatDate(e.deadline),"")}}function fee(t,n){if(1&t){const e=ve();m(0,"div",134)(1,"div",135),k(2,"div",136),m(3,"div",137)(4,"div",138)(5,"h5",139),v(6),p(),m(7,"span",140),v(8),p()(),m(9,"div",141)(10,"span",142),v(11),p(),m(12,"span",143),v(13),p()(),m(14,"div",144)(15,"div",109)(16,"div",145)(17,"b"),v(18,"Campaign Manager:"),p(),v(19),p(),m(20,"div",145)(21,"b"),v(22,"Est. Hours:"),p(),v(23),p(),m(24,"div",145)(25,"b",146),v(26,"Marketing Campaign"),p()()(),m(27,"div",109)(28,"div",145)(29,"b"),v(30,"Dates:"),p(),v(31),R(32,hee,2,1,"span",41),p(),m(33,"div",145)(34,"b"),v(35,"Reach:"),p(),v(36),Ba(37,"number"),p()()(),m(38,"div",147),k(39,"i",148),v(40),p(),m(41,"div",149)(42,"button",85),B("click",function(){const o=Q(e).$implicit;return J(I().viewCampaign(o))}),k(43,"i",86),v(44,"View"),p(),m(45,"button",87),B("click",function(){const o=Q(e).$implicit;return J(I().editCampaign(o))}),k(46,"i",150),v(47,"Edit"),p(),m(48,"button",89),B("click",function(){const o=Q(e).$implicit;return J(I().deleteCampaign(o))}),k(49,"i",90),v(50,"Delete"),p()()()()()}if(2&t){const e=n.$implicit,i=I();b(6),ne(e.clientName||"N/A"),b(2),q("Project: ",e.projectCode,""),b(3),q("Consultant: ",e.consultantName,""),b(2),Ps("",e.locality,", ",e.pincode,""),b(6),q(" ",e.campaignManager,""),b(4),q(" ",e.estimatedHours,"h"),b(8),q(" ",i.formatDate(e.taskDate),""),b(),M("ngIf",e.deadline),b(4),q(" ",Yy(37,11,e.expectedReach),""),b(4),q(" ",e.taskDescription||"No description provided.","")}}function pee(t,n){1&t&&(m(0,"div",151),k(1,"i",152),m(2,"h5"),v(3,"No marketing campaigns found"),p()())}function gee(t,n){if(1&t&&(m(0,"div",109)(1,"strong",110),v(2,"Estimated Hours:"),p(),m(3,"span",111),v(4),p()()),2&t){const e=I(3);b(4),q("",e.selectedCampaign.estimatedHours,"h")}}function mee(t,n){if(1&t&&(m(0,"div",109)(1,"strong",110),v(2,"Expected Reach:"),p(),m(3,"span",111),v(4),Ba(5,"number"),p()()),2&t){const e=I(3);b(4),ne(Yy(5,1,e.selectedCampaign.expectedReach))}}function _ee(t,n){if(1&t&&(m(0,"div",104)(1,"div",78)(2,"div",105)(3,"div",29)(4,"h5",125),k(5,"i",163),v(6,"Additional Notes "),p(),m(7,"p",164),v(8),p()()()()()),2&t){const e=I(3);b(8),ne(e.selectedCampaign.additionalNotes)}}function vee(t,n){if(1&t&&(m(0,"div",109)(1,"strong",110),v(2,"Last Updated:"),p(),m(3,"span",111),k(4,"i",128),v(5),p()()),2&t){const e=I(3);b(5),q("",e.formatDateTime(e.selectedCampaign.updatedAt)," ")}}function yee(t,n){if(1&t){const e=ve();m(0,"div",98)(1,"div",154)(2,"h4",100),k(3,"i",11),v(4,"Campaign Details "),p(),m(5,"button",102),B("click",function(){return Q(e),J(I(2).closeCampaignDetails())}),p()(),m(6,"div",103)(7,"div",104)(8,"div",78)(9,"div",105)(10,"div",29)(11,"h5",117),k(12,"i",155),v(13,"Campaign Information "),p(),m(14,"div",108)(15,"div",109)(16,"strong",110),v(17,"Campaign ID:"),p(),m(18,"span",111),v(19),p()(),m(20,"div",109)(21,"strong",110),v(22,"Campaign Manager:"),p(),m(23,"span",111),v(24),p()(),m(25,"div",109)(26,"strong",110),v(27,"Priority:"),p(),m(28,"span",112),v(29),p()(),m(30,"div",109)(31,"strong",110),v(32,"Status:"),p(),m(33,"span",112),v(34),p()(),m(35,"div",78)(36,"strong",110),v(37,"Description:"),p(),m(38,"p",113),v(39),p()()()()()()(),m(40,"div",104)(41,"div",78)(42,"div",105)(43,"div",29)(44,"h5",106),k(45,"i",156),v(46,"Client & Project Information "),p(),m(47,"div",108)(48,"div",109)(49,"strong",110),v(50,"Client:"),p(),m(51,"span",111),v(52),p()(),m(53,"div",109)(54,"strong",110),v(55,"Project Code:"),p(),m(56,"span",111),v(57),p()(),m(58,"div",109)(59,"strong",110),v(60,"Consultant:"),p(),m(61,"span",111),v(62),p()(),m(63,"div",109)(64,"strong",110),v(65,"Campaign Code:"),p(),m(66,"span",111),v(67),p()()()()()()(),m(68,"div",104)(69,"div",78)(70,"div",105)(71,"div",29)(72,"h5",114),k(73,"i",118),v(74,"Location & Timing "),p(),m(75,"div",108)(76,"div",109)(77,"strong",110),v(78,"Location:"),p(),m(79,"span",111),k(80,"i",119),v(81),p()(),m(82,"div",109)(83,"strong",110),v(84,"Task Date:"),p(),m(85,"span",111),k(86,"i",120),v(87),p()(),m(88,"div",109)(89,"strong",110),v(90,"Deadline:"),p(),m(91,"span",111),k(92,"i",80),v(93),p()(),R(94,gee,5,1,"div",157)(95,mee,6,3,"div",157),p()()()()(),R(96,_ee,9,1,"div",158),m(97,"div",124)(98,"div",78)(99,"div",105)(100,"div",29)(101,"h5",159),k(102,"i",160),v(103,"Timestamps "),p(),m(104,"div",108)(105,"div",109)(106,"strong",110),v(107,"Created:"),p(),m(108,"span",111),k(109,"i",127),v(110),p()(),R(111,vee,6,1,"div",157),p()()()()()(),m(112,"div",129)(113,"button",161),B("click",function(){return Q(e),J(I(2).printCampaignForm())}),k(114,"i",162),v(115,"Print Form "),p(),m(116,"button",130),B("click",function(){return Q(e),J(I(2).closeCampaignDetails())}),k(117,"i",131),v(118,"Close "),p()()()}if(2&t){const e=I(2);b(19),q("#",e.selectedCampaign.campaignId,""),b(5),ne(e.selectedCampaign.campaignManager),b(4),M("ngClass",e.getPriorityClass(e.selectedCampaign.priority)),b(),q(" ",e.selectedCampaign.priority," "),b(4),M("ngClass",e.getStatusClass(e.selectedCampaign.status||"Active")),b(),q(" ",e.selectedCampaign.status||"Active"," "),b(5),ne(e.selectedCampaign.taskDescription),b(13),ne(e.selectedCampaign.clientName),b(5),ne(e.selectedCampaign.projectCode),b(5),ne(e.selectedCampaign.consultantName),b(5),ne(e.selectedCampaign.campaignCode),b(14),Ps("",e.selectedCampaign.locality,", ",e.selectedCampaign.pincode," "),b(6),q("",e.formatDate(e.selectedCampaign.taskDate)," "),b(6),q("",e.formatDate(e.selectedCampaign.deadline)," "),b(),M("ngIf",e.selectedCampaign.estimatedHours),b(),M("ngIf",e.selectedCampaign.expectedReach),b(),M("ngIf",e.selectedCampaign.additionalNotes),b(14),q("",e.formatDateTime(e.selectedCampaign.createdAt||"")," "),b(),M("ngIf",e.selectedCampaign.updatedAt)}}function bee(t,n){if(1&t){const e=ve();m(0,"div",95),B("click",function(){return Q(e),J(I().closeCampaignDetails())}),m(1,"div",153),B("click",function(o){return Q(e),J(o.stopPropagation())}),R(2,yee,119,20,"div",97),p()()}if(2&t){const e=I();jr("display",e.showCampaignDetails?"block":"none"),Z("show",e.showCampaignDetails),b(2),M("ngIf",e.selectedCampaign)}}function wee(t,n){1&t&&k(0,"div",165),2&t&&Z("show",I().showTaskDetails)}function Cee(t,n){1&t&&k(0,"div",165),2&t&&Z("show",I().showCampaignDetails)}let Dee=(()=>{class t{constructor(e,i,o,r,s,l){this.authService=e,this.taskService=i,this.employeeService=o,this.notificationService=r,this.marketingFormService=s,this.router=l,this.apiUrl=gt.apiUrl,this.tasks=[],this.employees=[],this.filteredTasks=[],this.marketingCampaigns=[],this.filteredCampaigns=[],this.isLoading=!1,this.isLoadingCampaigns=!1,this.selectedStatus="all",this.selectedEmployee="all",this.selectedTask=null,this.selectedCampaign=null,this.showTaskDetails=!1,this.showCampaignDetails=!1,this.showAdminTaskModal=!1,this.adminTaskModalMode="view",this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.activeTab="tasks",this.routerSubscription=new An,this.statTiles=[{label:"TOTAL TASKS",value:0,color:"blue",filterValue:"all"},{label:"NOT STARTED",value:0,color:"purple",filterValue:"Not Started"},{label:"IN PROGRESS",value:0,color:"teal",filterValue:"In Progress"},{label:"COMPLETED",value:0,color:"yellow",filterValue:"Completed"},{label:"PARTIAL CLOSE",value:0,color:"red",filterValue:"Partial Close"},{label:"OVERDUE",value:0,color:"orange",filterValue:"overdue"},{label:"Today",value:0,color:"indigo",filterValue:"completed-today"}],this.statusOptions=[{value:"all",label:"All Tasks"},{value:"Not Started",label:"Not Started"},{value:"In Progress",label:"In Progress"},{value:"Completed",label:"Completed"},{value:"Partial Close",label:"Partial Close"},{value:"Postponed",label:"Postponed"},{value:"On Hold",label:"On Hold"}],this.priorityOptions=[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Urgent",label:"Urgent"}],this.locationOptions=[]}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.loadTasks(),this.loadEmployees(),this.loadMarketingCampaigns(),this.notificationService.resetNotificationCount(),this.routerSubscription=this.router.events.pipe(nn(e=>e instanceof Lo)).subscribe(e=>{e instanceof Lo&&"/admin/dashboard"===e.url&&this.loadTasks()}),setInterval(()=>{this.loadTasks()},3e4)}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}loadTasks(){this.isLoading=!0,this.taskService.getTasks().subscribe({next:e=>{console.log("Tasks loaded successfully:",e),this.tasks=e||[],this.filterTasks(),this.updateStatTiles(),this.isLoading=!1},error:e=>{console.error("Error loading tasks:",e),console.error("Error details:",e.error),console.error("Error status:",e.status),this.notificationService.showNotification(401===e.status?"Please login to view tasks":403===e.status?"You do not have permission to view tasks":"Error loading tasks. Please check if backend is running.","error"),this.tasks=[],this.filterTasks(),this.updateStatTiles(),this.isLoading=!1}})}loadEmployees(){this.employeeService.getEmployees().subscribe({next:e=>{this.employees=e},error:e=>{console.error("Error loading employees:",e)}})}loadMarketingCampaigns(){this.isLoadingCampaigns=!0,this.marketingFormService.getAllMarketingCampaigns().subscribe({next:e=>{this.isLoadingCampaigns=!1,e.success&&e.data?(this.marketingCampaigns=e.data,this.filteredCampaigns=[...this.marketingCampaigns],console.log("Marketing campaigns loaded:",this.marketingCampaigns)):(console.error("Error loading marketing campaigns:",e.message),this.notificationService.showNotification("Error loading marketing campaigns: "+e.message,"error"))},error:e=>{this.isLoadingCampaigns=!1,console.error("Error loading marketing campaigns:",e),this.notificationService.showNotification("Error loading marketing campaigns: "+e.message,"error")}})}filterTasks(){let i=[...(this.tasks||[]).map(o=>({taskId:o.taskId??o.TaskId,description:o.description??o.Description,status:o.status??o.Status,priority:o.priority??o.Priority,employeeId:o.employeeId??o.EmployeeId,employeeName:o.employeeName??o.EmployeeName??o.Employee?.Name,employeeDesignation:o.employeeDesignation??o.EmployeeDesignation??o.Employee?.Designation,employeeContact:o.employeeContact??o.EmployeeContact??o.Employee?.Contact,locationId:o.locationId??o.LocationId,locationName:o.locationName??o.LocationName??o.Location?.LocationName,customLocation:o.customLocation??o.CustomLocation,taskDate:o.taskDate??o.TaskDate,deadline:o.deadline??o.Deadline,taskType:o.taskType??o.TaskType,department:o.department??o.Department,clientName:o.clientName??o.ClientName,projectCode:o.projectCode??o.ProjectCode,estimatedHours:o.estimatedHours??o.EstimatedHours,actualHours:o.actualHours??o.ActualHours,taskCategory:o.taskCategory??o.TaskCategory,additionalNotes:o.additionalNotes??o.AdditionalNotes,isUrgent:o.isUrgent??o.IsUrgent,createdAt:o.createdAt??o.CreatedAt,updatedAt:o.updatedAt??o.UpdatedAt,assignedByUserName:o.assignedByUserName??o.AssignedByUserName}))];if("all"!==this.selectedStatus&&(i="overdue"===this.selectedStatus?this.getOverdueTasks():"completed-today"===this.selectedStatus?this.getTasksCompletedToday():i.filter(o=>o.status===this.selectedStatus)),"all"!==this.selectedEmployee){const o=parseInt(this.selectedEmployee);i=i.filter(r=>r.employeeId===o)}this.filteredTasks=i}onStatusFilterChange(){this.filterTasks()}onEmployeeFilterChange(){this.filterTasks()}onHeaderLocationChange(e){console.log("Header location selection:",e)}viewTaskDetails(e){this.selectedTask={...e,employeeName:e.employeeName??e.Employee?.Name??"",employeeDesignation:e.employeeDesignation??e.Employee?.Designation??"",employeeContact:e.employeeContact??e.Employee?.Contact??""},this.showTaskDetails=!0}closeTaskDetails(){this.showTaskDetails=!1,this.selectedTask=null}openCreateTaskModal(){this.selectedTask=null,this.adminTaskModalMode="create",this.showAdminTaskModal=!0}openEditTaskModal(e){this.selectedTask=e,this.adminTaskModalMode="edit",this.showAdminTaskModal=!0,console.log("Opening edit modal for task:",e.taskId)}openViewTaskModal(e){this.selectedTask=e,this.adminTaskModalMode="view",this.showAdminTaskModal=!0,console.log("Opening view modal for task:",e.taskId)}openAdminTaskModal(e,i){this.selectedTask=e,this.adminTaskModalMode=i,this.showAdminTaskModal=!0}closeAdminTaskModal(){this.showAdminTaskModal=!1,this.selectedTask=null,this.adminTaskModalMode="view"}onTaskSaved(e){if(e&&e.taskId){const o=this.tasks.findIndex(r=>r.taskId===e.taskId);o>=0?this.tasks[o]=e:this.tasks.unshift(e),this.filterTasks()}else this.loadTasks();this.closeAdminTaskModal(),this.notificationService.showNotification(`Task ${e&&e.taskId?"updated":"created"} successfully!`,"success")}onTaskDeleted(e){this.loadTasks(),this.closeAdminTaskModal(),this.notificationService.showNotification("Task deleted successfully!","success")}onTaskCreated(){this.loadTasks(),this.notificationService.showNotification("New task created successfully!","success")}getTaskCountByStatus(e){return this.tasks.filter(i=>i.status===e).length}isOverdue(e){return new Date(e)<new Date}getOverdueTasks(){return this.tasks.filter(e=>this.isOverdue(e.deadline)&&"Completed"!==e.status)}getTasksCompletedToday(){const e=(new Date).toDateString();return this.tasks.filter(i=>"Completed"===i.status&&new Date(i.updatedAt).toDateString()===e)}filterByStatus(e){this.selectedStatus=e,this.filterTasks()}filterByOverdue(){this.selectedStatus="overdue",this.filterTasks()}filterByCompletedToday(){this.selectedStatus="completed-today",this.filterTasks()}onStatTileClick(e){e.filterValue&&(this.selectedStatus=e.filterValue,this.filterTasks())}onStatTileHover(e,i,o){const r=e.currentTarget;r&&(r.style.transform=o||i.filterValue&&this.selectedStatus===i.filterValue?"scale(1.05)":"scale(1)")}openEditModal(e){this.selectedTask=e,this.editForm={taskId:e.taskId,description:e.description,priority:e.priority,status:e.status,taskDate:e.taskDate,deadline:e.deadline,taskType:e.taskType||"General",department:e.department||"Marketing",clientName:e.clientName||"",projectCode:e.projectCode||"",estimatedHours:e.estimatedHours||0,actualHours:e.actualHours||0,taskCategory:e.taskCategory||"Field Work",additionalNotes:e.additionalNotes||"",isUrgent:e.isUrgent||!1},this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.editForm={},this.selectedTask=null}submitEdit(){if(!this.selectedTask||!this.editForm.description||!this.editForm.priority)return void this.notificationService.showNotification("Please fill in all required fields","error");if(new Date(this.editForm.deadline)<=new Date(this.editForm.taskDate))return void this.notificationService.showNotification("Deadline must be after task date","error");const e={description:this.editForm.description?.trim()||"",employeeId:this.editForm.employeeId||this.selectedTask.employeeId,priority:this.editForm.priority?.trim()||"Medium",status:this.editForm.status||this.selectedTask.status,taskDate:this.editForm.taskDate?new Date(this.editForm.taskDate).toISOString():this.selectedTask.taskDate,deadline:this.editForm.deadline?new Date(this.editForm.deadline).toISOString():this.selectedTask.deadline,taskType:this.editForm.taskType||this.selectedTask.taskType||"General",department:this.editForm.department||this.selectedTask.department||"Marketing",clientName:this.editForm.clientName||this.selectedTask.clientName,projectCode:this.editForm.projectCode||this.selectedTask.projectCode,estimatedHours:this.editForm.estimatedHours?parseFloat(this.editForm.estimatedHours):this.selectedTask.estimatedHours,actualHours:this.editForm.actualHours?parseFloat(this.editForm.actualHours):this.selectedTask.actualHours,taskCategory:this.editForm.taskCategory||this.selectedTask.taskCategory||"Field Work",additionalNotes:this.editForm.additionalNotes||this.selectedTask.additionalNotes,isUrgent:void 0!==this.editForm.isUrgent?this.editForm.isUrgent:this.selectedTask.isUrgent,customLocation:this.editForm.customLocation||this.selectedTask.customLocation,locationId:this.editForm.locationId||this.selectedTask.locationId,consultantFeedback:this.editForm.consultantFeedback||this.selectedTask.consultantFeedback};this.taskService.updateTask(this.selectedTask.taskId,e).subscribe({next:i=>{const o=this.tasks.findIndex(r=>r.taskId===this.selectedTask.taskId);-1!==o&&(this.tasks[o]={...this.tasks[o],...e},this.filterTasks()),this.notificationService.showNotification("Task updated successfully"),this.closeEditModal()},error:i=>{console.error("Error updating task:",i),this.notificationService.showNotification("Error updating task. Please try again.","error")}})}openDeleteModal(e){this.selectedTask=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.selectedTask=null}confirmDelete(){this.selectedTask&&this.taskService.deleteTask(this.selectedTask.taskId).subscribe({next:()=>{this.tasks=this.tasks.filter(e=>e.taskId!==this.selectedTask.taskId),this.filterTasks(),this.notificationService.showNotification("Task deleted successfully"),this.closeDeleteModal()},error:e=>{console.error("Error deleting task:",e),this.notificationService.showNotification("Error deleting task. Please try again.","error")}})}loadAllTasks(){this.taskService.getTasks().subscribe({next:e=>{this.tasks=e},error:e=>{console.error("Error loading tasks:",e)}})}updateTaskStatus(e,i){this.taskService.updateTaskStatus(e,i).subscribe({next:()=>{this.loadAllTasks()},error:o=>{console.error("Error updating task status:",o)}})}getCurrentDate(){return(new Date).toISOString().split("T")[0]}logout(){this.authService.logout(),this.router.navigate(["/login"])}createRandomTasks(e=5){for(let i=0;i<e;i++){const o={description:"Random Task "+Math.floor(1e4*Math.random()),employeeId:this.employees.length>0?this.employees[Math.floor(Math.random()*this.employees.length)].employeeId:1,state:"",city:"",pincode:"110001",localityName:"Random Locality",customLocation:"Random Location "+Math.floor(100*Math.random()),priority:["Low","Medium","High"][Math.floor(3*Math.random())],status:["Not Started","In Progress","Completed"][Math.floor(3*Math.random())],taskDate:(new Date).toISOString().split("T")[0],deadline:new Date(Date.now()+864e5*Math.floor(7*Math.random())).toISOString().split("T")[0],taskType:"Field Work",department:"Marketing",clientName:"Client "+Math.floor(100*Math.random()),projectCode:"PRJ-"+Math.floor(1e4*Math.random()),estimatedHours:10*Math.random()+1,actualHours:10*Math.random(),taskCategory:"Field Work",additionalNotes:"Random note "+Math.floor(1e3*Math.random()),isUrgent:Math.random()>.5,taskTypeIds:[],locationIds:[]};this.taskService.createTask(o).subscribe({next:r=>{this.tasks.unshift(r),this.filterTasks()},error:r=>{console.error("Error creating random task:",r)}})}}updateStatTiles(){this.statTiles[0].value=this.tasks.length,this.statTiles[1].value=this.getTaskCountByStatus("Not Started"),this.statTiles[2].value=this.getTaskCountByStatus("In Progress"),this.statTiles[3].value=this.getTaskCountByStatus("Completed"),this.statTiles[4].value=this.getTaskCountByStatus("Partial Close"),this.statTiles[5].value=this.getOverdueTasks().length,this.statTiles[6].value=this.getTasksCompletedToday().length}switchTab(e){this.activeTab=e}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}formatDateTime(e){return e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}getPriorityClass(e){switch(e.toLowerCase()){case"urgent":return"badge-danger";case"high":return"badge-warning";case"medium":return"badge-info";case"low":return"badge-success";default:return"badge-secondary"}}getStatusClass(e){switch(e.toLowerCase()){case"completed":return"badge-success";case"in progress":return"badge-warning";case"not started":default:return"badge-secondary";case"on hold":return"badge-danger";case"postponed":return"badge-info"}}viewCampaign(e){this.selectedCampaign=e,this.showCampaignDetails=!0}closeCampaignDetails(){this.showCampaignDetails=!1,this.selectedCampaign=null}printCampaignForm(){if(!this.selectedCampaign)return void console.error("No campaign selected for printing");const e=window.open("","_blank","width=900,height=700");if(!e)return void alert("Please allow popups for this site to print");const i=`\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <title>Marketing Campaign Form - Print</title>\n        <style>\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            \n            body { \n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \n                background: #fff;\n                padding: 20px;\n                line-height: 1.6; \n            }\n            \n            .print-buttons {\n                text-align: center;\n                margin: 20px 0 30px;\n                padding: 15px;\n                background: #f0f9ff;\n                border-radius: 8px;\n            }\n            \n            .print-btn {\n                padding: 12px 30px;\n                margin: 5px;\n                background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);\n                color: white;\n                border: none;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 16px;\n                font-weight: 600;\n            }\n            \n            .print-btn:hover {\n                background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);\n            }\n            \n            .header {\n                text-align: center;\n                margin-bottom: 30px;\n                padding-bottom: 20px;\n                border-bottom: 3px solid #0ea5e9;\n            }\n            \n            .header h1 {\n                color: #0f172a;\n                font-size: 28px;\n                margin-bottom: 10px;\n            }\n            \n            .header h2 {\n                color: #64748b;\n                font-size: 18px;\n                font-weight: 400;\n            }\n            \n            .generated-info {\n                text-align: center;\n                color: #666;\n                font-size: 14px;\n                margin-bottom: 30px;\n                padding: 10px;\n                background: #f8fafc;\n                border-left: 4px solid #0ea5e9;\n                border-radius: 4px;\n            }\n            \n            .section {\n                margin-bottom: 30px;\n                border: 2px solid #e2e8f0;\n                padding: 20px;\n                border-radius: 8px;\n                background: #fafafa;\n            }\n            \n            .section-title {\n                font-weight: 700;\n                font-size: 18px;\n                color: #0ea5e9;\n                margin-bottom: 18px;\n                padding-bottom: 10px;\n                border-bottom: 2px solid #0ea5e9;\n                text-transform: uppercase;\n            }\n            \n            .field {\n                margin-bottom: 12px;\n                padding: 8px 0;\n                display: flex;\n                border-bottom: 1px solid #e2e8f0;\n            }\n            \n            .field:last-child {\n                border-bottom: none;\n            }\n            \n            .field-label {\n                font-weight: 600;\n                color: #334155;\n                min-width: 220px;\n                padding-right: 15px;\n            }\n            \n            .field-value {\n                color: #1e293b;\n                flex: 1;\n            }\n            \n            @media print {\n                body {\n                    padding: 0;\n                    margin: 0;\n                }\n                \n                .print-buttons {\n                    display: none !important;\n                }\n                \n                .section {\n                    page-break-inside: avoid;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        \x3c!-- Professional Compact Header --\x3e\n        <div style="background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 50%, #0284c7 100%); padding: 15px 20px; margin-bottom: 25px; border-radius: 6px; box-shadow: 0 3px 10px rgba(14, 165, 233, 0.2);">\n            <div style="text-align: center;">\n                <div style="font-size: 9px; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 5px; color: #1f2937; font-weight: 600;">Official Document</div>\n                <h1 style="font-size: 20px; color: #000000; margin: 0 0 6px 0; font-weight: 700; letter-spacing: -0.3px;">Marketing Campaign Form</h1>\n                <h2 style="font-size: 13px; color: #1f2937; margin: 0 0 6px 0; font-weight: 500;">Sri Balaji Action Medical Institute & Action Cancer Hospital</h2>\n                <div style="display: inline-block; background: #67e8f9; padding: 4px 12px; border-radius: 15px; margin-top: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.12);">\n                    <span style="font-size: 11px; color: #0c4a6e; font-weight: 600;">\u{1f4c5} ${(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"long",timeStyle:"short"})}</span>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="section">\n            <div class="section-title">Campaign Information</div>\n            <div class="field"><span class="field-label">Campaign ID:</span> <span class="field-value">#${this.selectedCampaign.campaignId||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Campaign Manager:</span> <span class="field-value">${this.selectedCampaign.campaignManager||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Employee Code:</span> <span class="field-value">${this.selectedCampaign.employeeCode||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Description:</span> <span class="field-value">${this.selectedCampaign.taskDescription||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Start Date:</span> <span class="field-value">${this.formatDate(this.selectedCampaign.taskDate)}</span></div>\n            <div class="field"><span class="field-label">Deadline:</span> <span class="field-value">${this.formatDate(this.selectedCampaign.deadline)}</span></div>\n            <div class="field"><span class="field-label">Priority:</span> <span class="field-value">${this.selectedCampaign.priority||"N/A"}</span></div>\n        </div>\n\n        <div class="section">\n            <div class="section-title">Project & Client Information</div>\n            <div class="field"><span class="field-label">Client Name:</span> <span class="field-value">${this.selectedCampaign.clientName||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Project Code:</span> <span class="field-value">${this.selectedCampaign.projectCode||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Consultant Name:</span> <span class="field-value">${this.selectedCampaign.consultantName||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Campaign Code:</span> <span class="field-value">${this.selectedCampaign.campaignCode||"N/A"}</span></div>\n        </div>\n\n        <div class="section">\n            <div class="section-title">Location Details</div>\n            <div class="field"><span class="field-label">Location:</span> <span class="field-value">${this.selectedCampaign.locality||"N/A"}, ${this.selectedCampaign.pincode||"N/A"}</span></div>\n        </div>\n\n        <div class="section">\n            <div class="section-title">Campaign Metrics</div>\n            <div class="field"><span class="field-label">Estimated Hours:</span> <span class="field-value">${this.selectedCampaign.estimatedHours||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Expected Reach:</span> <span class="field-value">${this.selectedCampaign.expectedReach?this.selectedCampaign.expectedReach.toLocaleString():"N/A"}</span></div>\n            <div class="field"><span class="field-label">Conversion Goal:</span> <span class="field-value">${this.selectedCampaign.conversionGoal||"N/A"}</span></div>\n            <div class="field"><span class="field-label">KPIs:</span> <span class="field-value">${this.selectedCampaign.kpis||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Marketing Materials:</span> <span class="field-value">${this.selectedCampaign.marketingMaterials||"N/A"}</span></div>\n        </div>\n\n        <div class="section">\n            <div class="section-title">Additional Information</div>\n            <div class="field"><span class="field-label">Approval Required:</span> <span class="field-value">${this.selectedCampaign.approvalRequired?"YES":"NO"}</span></div>\n            <div class="field"><span class="field-label">Approval Contact:</span> <span class="field-value">${this.selectedCampaign.approvalContact||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Budget Code:</span> <span class="field-value">${this.selectedCampaign.budgetCode||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Additional Notes:</span> <span class="field-value">${this.selectedCampaign.additionalNotes||"N/A"}</span></div>\n            <div class="field"><span class="field-label">Consultant Feedback:</span> <span class="field-value">${this.selectedCampaign.consultantFeedback||"N/A"}</span></div>\n        </div>\n\n        <div class="section">\n            <div class="section-title">Status</div>\n            <div class="field"><span class="field-label">Status:</span> <span class="field-value" style="color: #059669; font-weight: bold;">${this.selectedCampaign.status||"Active"}</span></div>\n            <div class="field"><span class="field-label">Created:</span> <span class="field-value">${this.formatDateTime(this.selectedCampaign.createdAt||"")}</span></div>\n            <div class="field"><span class="field-label">Last Updated:</span> <span class="field-value">${this.formatDateTime(this.selectedCampaign.updatedAt||"")}</span></div>\n        </div>\n        \n        \x3c!-- Print Buttons at Bottom --\x3e\n        <div class="print-buttons">\n            <button class="print-btn" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);" onclick="window.print()">\u{1f5a8}\ufe0f PRINT NOW</button>\n            <button class="print-btn" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;" onclick="window.close()"><span style="color: white; font-weight: bold;">\u2716</span> CLOSE</button>\n        </div>\n    </body>\n    </html>\n    `;e.document.write(i),e.document.close(),console.log("Print window opened successfully")}editCampaign(e){this.router.navigate(["/admin/marketing-form"],{queryParams:{mode:"edit",campaignId:e.campaignId},state:{campaignData:e}})}deleteCampaign(e){confirm("Are you sure you want to delete this marketing campaign?")&&this.marketingFormService.deleteMarketingCampaign(e.campaignId).subscribe({next:i=>{i.success?(this.notificationService.showNotification("Marketing campaign deleted successfully"),this.loadMarketingCampaigns()):this.notificationService.showNotification("Error deleting campaign: "+i.message,"error")},error:i=>{this.notificationService.showNotification("Error deleting campaign: "+i.message,"error")}})}deleteTask(e){confirm("Are you sure you want to delete this task?")&&this.taskService.deleteTask(e.taskId).subscribe({next:i=>{i.success?(this.notificationService.showNotification("Task deleted successfully"),this.loadTasks()):this.notificationService.showNotification("Error deleting task: "+i.message,"error")},error:i=>{this.notificationService.showNotification("Error deleting task: "+i.message,"error")}})}static{this.\u0275fac=function(i){return new(i||t)(j(Qs),j(cl),j(lf),j(Js),j(wA),j(fn))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-admin-dashboard"]],decls:85,vars:37,consts:[[1,"admin-dashboard"],[1,"dashboard-header","py-5","px-3",2,"background","linear-gradient(90deg, #6366f1 0%, #0ea5e9 100%)","border-radius","1.5rem","box-shadow","0 8px 32px rgba(0,0,0,0.11)","margin-bottom","2.5rem"],[1,"container-fluid","d-flex","align-items-center","justify-content-between","flex-wrap"],[1,""],[1,"display-4","fw-bold","text-white","mb-2",2,"letter-spacing","-2px","text-shadow","0 1px 18px rgba(0,0,0,0.12)"],[1,"lead","text-white","opacity-75","mb-0"],[1,"fw-bold","text-white"],[1,"d-flex","flex-row","gap-3"],[1,"btn","btn-primary","btn-lg","px-4","rounded-pill","d-flex","align-items-center","shadow","premium-btn",3,"click"],[1,"bi","bi-plus-circle","me-2"],["routerLink","/admin/marketing-form",1,"btn","btn-info","btn-lg","px-4","rounded-pill","d-flex","align-items-center","shadow","premium-btn"],[1,"bi","bi-megaphone","me-2"],["routerLink","/admin/tracking",1,"btn","btn-warning","btn-lg","px-4","rounded-pill","d-flex","align-items-center","shadow","text-white","premium-btn",2,"background","linear-gradient(90deg,#facc15,#fde68a)","color","#2d3748"],[1,"bi","bi-geo-alt-fill","me-2"],[1,"btn","btn-dark","btn-lg","px-4","rounded-pill","d-flex","align-items-center","shadow","premium-btn",3,"click"],[1,"bi","bi-box-arrow-right","me-2"],[1,"container-fluid","py-4"],[1,"stat-tiles-row","d-flex","flex-row","flex-nowrap","gap-4","justify-content-start","align-items-end","overflow-auto"],["style","min-width:148px; min-height:120px; border:none; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s;",3,"class","opacity","transform","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"container-fluid","pb-3"],[1,"card","border-0","shadow-sm"],[1,"card-body","p-0"],["id","dashboardTabs","role","tablist",1,"nav","nav-tabs","nav-fill"],["role","presentation",1,"nav-item"],["type","button","role","tab",1,"nav-link",3,"click"],[1,"bi","bi-list-task","me-2"],[1,"badge","bg-primary","ms-2"],[1,"badge","bg-info","ms-2"],[1,"container-fluid","pb-4","filter-controls"],[1,"card-body"],[1,"row","g-3","align-items-end"],[1,"col-md-4"],["for","statusFilter",1,"form-label","fw-semibold"],[1,"bi","bi-funnel","me-1"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","employeeFilter",1,"form-label","fw-semibold"],[1,"bi","bi-people","me-1"],["id","employeeFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],[1,"btn","btn-outline-primary","w-100",3,"click","disabled"],[4,"ngIf"],["id","dashboardTabContent",1,"tab-content"],[1,"tab-pane","fade"],["class","container-fluid",4,"ngIf"],[1,"container-fluid","pt-3"],[1,"row","g-0","task-horizontal-row","flex-nowrap","overflow-auto",2,"flex-wrap","nowrap"],["class","col-auto",4,"ngFor","ngForOf"],["class","text-center py-5 w-100",4,"ngIf"],["class","modal fade","tabindex","-1",3,"show","display","click",4,"ngIf"],[1,"campaign-vertical-list","row","g-4","justify-content-center"],["class","col-12 campaign-card-filled",4,"ngFor","ngForOf"],["class","text-center py-5 w-100 text-muted",4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[3,"close","taskSaved","taskDeleted","taskCreated","show","mode","task"],[2,"min-width","148px","min-height","120px","border","none","cursor","pointer","transition","transform 0.2s, box-shadow 0.2s",3,"click","mouseenter","mouseleave"],[1,"stat-number","mb-1","fs-2","fw-bold",2,"text-shadow","0 2px 10px rgba(0,0,0,0.11)"],[1,"fs-6","fw-semibold","text-uppercase","opacity-90"],[3,"value"],[1,"bi","bi-arrow-clockwise","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"container-fluid"],[1,"text-center","py-5"],[1,"spinner-border","text-primary","mb-3",2,"width","3rem","height","3rem"],[1,"text-muted"],[1,"col-auto"],[1,"card","shadow","rounded-4","p-4","d-flex","flex-column","h-100","task-horiz-card","mx-3","my-2",2,"min-width","420px","max-width","525px"],[1,"d-flex","align-items-start","gap-2","mb-1","flex-wrap"],[1,"fw-bold","fs-5","text-dark"],[1,"badge","bg-warning","text-dark","premium-pill"],[1,"badge","bg-info","text-white","premium-pill"],[1,"mb-2","small","text-muted"],[1,"bi","bi-hash"],[1,"row","g-1","mb-2"],[1,"col-5"],[1,"col-7"],[1,"badge","bg-secondary","premium-pill","mb-1"],[1,"badge","bg-light","text-dark","premium-pill","mb-1"],[1,"col-12"],[3,"ngClass"],[1,"bi","bi-clock","me-1"],["class","badge bg-danger ms-2 premium-pill",4,"ngIf"],[1,"col-12","mb-1","small"],[1,"small","mb-2"],[1,"mt-auto","d-flex","gap-2","justify-content-end","pt-2"],["title","View",1,"btn","btn-outline-success","rounded-pill","px-3","py-2","d-flex","align-items-center",3,"click"],[1,"bi","bi-eye","me-1"],["title","Edit",1,"btn","btn-primary","rounded-pill","px-3","py-2","d-flex","align-items-center",3,"click"],[1,"bi","bi-pencil-square","me-1"],["title","Delete",1,"btn","btn-outline-danger","rounded-pill","px-3","py-2","d-flex","align-items-center",3,"click"],[1,"bi","bi-trash","me-1"],[1,"badge","bg-danger","ms-2","premium-pill"],[1,"text-center","py-5","w-100"],[1,"text-muted","mb-3"],[1,"bi","bi-clipboard-x",2,"font-size","2.3rem"],["tabindex","-1",1,"modal","fade",3,"click"],[1,"modal-dialog","modal-lg","modal-dialog-centered",3,"click"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-info-circle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"row","mb-4"],[1,"card","border-0","bg-light"],[1,"card-title","text-primary","mb-3"],[1,"bi","bi-clipboard-data","me-2"],[1,"row","g-3"],[1,"col-md-6"],[1,"text-muted","d-block"],[1,"fs-6"],[1,"badge",3,"ngClass"],[1,"mb-0"],[1,"card-title","text-success","mb-3"],[1,"bi","bi-person-badge","me-2"],[1,"bi","bi-telephone","me-1"],[1,"card-title","text-info","mb-3"],[1,"bi","bi-geo-alt","me-2"],[1,"bi","bi-pin-map","me-1"],[1,"bi","bi-calendar3","me-1"],[1,"fs-6",3,"ngClass"],[1,"bi","bi-clock","me-1",3,"ngClass"],["class","badge bg-danger ms-2",4,"ngIf"],[1,"row"],[1,"card-title","text-warning","mb-3"],[1,"bi","bi-person-check","me-2"],[1,"bi","bi-calendar-plus","me-1"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-2"],[1,"badge","bg-danger","ms-2"],[1,"spinner-border","text-info","mb-3",2,"width","3rem","height","3rem"],[1,"col-12","campaign-card-filled"],[1,"campaign-beautiful-card-v2","p-0","m-0"],[1,"campaign-gradient-top-bar"],[1,"p-4","p-md-5"],[1,"d-flex","flex-wrap","align-items-center","mb-3","gap-2"],[1,"fw-bold","text-dark","mb-0","flex-grow-1","fs-3"],[1,"badge","bg-secondary","premium-pill","fs-6"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-2"],[1,"badge","bg-info","premium-pill","fs-6"],[1,"badge","bg-light","text-dark","premium-pill","fs-6"],[1,"row","g-3","align-items-center","mb-3"],[1,"mb-1"],[1,"text-muted","small"],[1,"text-muted","small","mb-1"],[1,"bi","bi-card-text"],[1,"d-flex","gap-4","pt-3","justify-content-end","align-items-center","card-action-row"],[1,"bi","bi-pencil","me-1"],[1,"text-center","py-5","w-100","text-muted"],[1,"bi","bi-megaphone",2,"font-size","2.3rem"],[1,"modal-dialog","modal-xl","modal-dialog-centered",3,"click"],[1,"modal-header","bg-info","text-white"],[1,"bi","bi-bullseye","me-2"],[1,"bi","bi-building","me-2"],["class","col-md-6",4,"ngIf"],["class","row mb-4",4,"ngIf"],[1,"card-title","text-secondary","mb-3"],[1,"bi","bi-clock-history","me-2"],["type","button",1,"btn","btn-info",3,"click"],[1,"bi","bi-printer","me-2"],[1,"bi","bi-file-earmark-text","me-2"],[1,"fs-6","mb-0"],[1,"modal-backdrop","fade"]],template:function(i,o){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),v(5,"Admin Dashboard"),p(),m(6,"p",5),v(7,"Welcome back, "),m(8,"span",6),v(9),p(),v(10,"!"),k(11,"br"),v(12,"Manage and monitor all marketing tasks efficiently."),p()(),m(13,"div",7)(14,"button",8),B("click",function(){return o.openCreateTaskModal()}),k(15,"i",9),v(16," Create Task"),p(),m(17,"a",10),k(18,"i",11),v(19," Marketing Form"),p(),m(20,"a",12),k(21,"i",13),v(22," Live Tracking"),p(),m(23,"button",14),B("click",function(){return o.logout()}),k(24,"i",15),v(25," Logout"),p()()()(),m(26,"div",16)(27,"div",17),R(28,JX,5,9,"div",18),p()(),m(29,"div",19)(30,"div",20)(31,"div",21)(32,"ul",22)(33,"li",23)(34,"button",24),B("click",function(){return o.switchTab("tasks")}),k(35,"i",25),v(36," Tasks Management "),m(37,"span",26),v(38),p()()(),m(39,"li",23)(40,"button",24),B("click",function(){return o.switchTab("campaigns")}),k(41,"i",11),v(42," Marketing Campaigns "),m(43,"span",27),v(44),p()()()()()()(),m(45,"div",28)(46,"div",20)(47,"div",29)(48,"div",30)(49,"div",31)(50,"label",32),k(51,"i",33),v(52,"Filter by Status "),p(),m(53,"select",34),Di("ngModelChange",function(s){return Vi(o.selectedStatus,s)||(o.selectedStatus=s),s}),B("change",function(){return o.onStatusFilterChange()}),R(54,XX,2,2,"option",35),p()(),m(55,"div",31)(56,"label",36),k(57,"i",37),v(58,"Filter by Employee "),p(),m(59,"select",38),Di("ngModelChange",function(s){return Vi(o.selectedEmployee,s)||(o.selectedEmployee=s),s}),B("change",function(){return o.onEmployeeFilterChange()}),m(60,"option",39),v(61,"All Employees"),p(),R(62,eee,2,2,"option",35),p()(),m(63,"div",31)(64,"button",40),B("click",function(){return o.loadTasks()}),R(65,tee,3,0,"span",41)(66,nee,3,0,"span",41),p()()()()()(),m(67,"div",42)(68,"div",43),R(69,iee,7,0,"div",44),m(70,"div",45)(71,"div",46),R(72,ree,84,23,"div",47)(73,see,5,0,"div",48),p()(),R(74,dee,3,5,"div",49),p(),m(75,"div",43),R(76,uee,7,0,"div",44),m(77,"div",45)(78,"div",50),R(79,fee,51,13,"div",51)(80,pee,4,0,"div",52),p()(),R(81,bee,3,5,"div",49),p()(),R(82,wee,1,2,"div",53)(83,Cee,1,2,"div",53),m(84,"app-admin-task-modal",54),B("close",function(){return o.closeAdminTaskModal()})("taskSaved",function(s){return o.onTaskSaved(s)})("taskDeleted",function(s){return o.onTaskDeleted(s)})("taskCreated",function(){return o.onTaskCreated()}),p()()),2&i&&(b(9),ne(null==o.currentUser?null:o.currentUser.email),b(19),M("ngForOf",o.statTiles),b(6),Z("active","tasks"===o.activeTab),b(4),ne(o.tasks.length),b(2),Z("active","campaigns"===o.activeTab),b(4),ne(o.marketingCampaigns.length),b(9),Ci("ngModel",o.selectedStatus),b(),M("ngForOf",o.statusOptions),b(5),Ci("ngModel",o.selectedEmployee),b(3),M("ngForOf",o.employees||qu(36,YX)),b(2),M("disabled",o.isLoading),b(),M("ngIf",!o.isLoading),b(),M("ngIf",o.isLoading),b(2),Z("show","tasks"===o.activeTab)("active","tasks"===o.activeTab),b(),M("ngIf",o.isLoading),b(3),M("ngForOf",o.filteredTasks),b(),M("ngIf",0===o.filteredTasks.length&&!o.isLoading),b(),M("ngIf",o.showTaskDetails),b(),Z("show","campaigns"===o.activeTab)("active","campaigns"===o.activeTab),b(),M("ngIf",o.isLoadingCampaigns),b(3),M("ngForOf",o.filteredCampaigns),b(),M("ngIf",0===o.filteredCampaigns.length&&!o.isLoadingCampaigns),b(),M("ngIf",o.showCampaignDetails),b(),M("ngIf",o.showTaskDetails),b(),M("ngIf",o.showCampaignDetails),b(),M("show",o.showAdminTaskModal)("mode",o.adminTaskModalMode)("task",o.selectedTask))},dependencies:[Ob,Wr,co,Za,Ka,Zs,Ro,Hc,Gh,KX,Rb],styles:['.admin-dashboard[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;background:#f4f6f9}.dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(to right,#5b73e8,#56c1e0)!important;border-radius:20px!important;box-shadow:0 4px 20px #5b73e84d;margin-bottom:2rem!important;padding:2rem!important}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-bottom:.5rem;font-size:2.5rem}.dashboard-header[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem}.dashboard-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:25px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s;box-shadow:0 2px 10px #00000026}.dashboard-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad);border:none}.dashboard-header[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background:#56c1e0;border:none;color:#000}.dashboard-header[_ngcontent-%COMP%]   .btn-warning[_ngcontent-%COMP%]{background:#ffc107;border:none;color:#000}.dashboard-header[_ngcontent-%COMP%]   .btn-dark[_ngcontent-%COMP%]{background:#2c3e50;border:none}.dashboard-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00000040}.stat-tiles-row[_ngcontent-%COMP%]{margin-bottom:2rem;padding:0 15px;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none}.stat-tiles-row[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.stat-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;min-width:160px;min-height:130px;box-shadow:0 4px 15px #00000026;transition:all .3s ease;cursor:pointer;border:none}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000040}.stat-number[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;color:#fff;text-shadow:0 2px 5px rgba(0,0,0,.2)}.stat-gradient-teal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3cced8,#2db9c7)}.stat-gradient-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c06fc4,#b65bb9)}.stat-gradient-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765)}.stat-gradient-indigo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5)}.stat-gradient-yellow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffb347,#ffa033)}.stat-gradient-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f)}.stat-gradient-orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f96,coral)}.stat-gradient-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffb347,#ff8c00)}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #e0e0e0}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#555;font-weight:600;padding:1rem 2rem;border:none;background:transparent;transition:all .3s}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#5b73e8;background:#5b73e80d}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff!important;background:linear-gradient(135deg,#5b73e8,#764ba2);border-radius:10px 10px 0 0;border:none}.nav-tabs[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:.5rem}.filter-controls[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:15px;border:none;box-shadow:0 2px 10px #00000014}.filter-controls[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#555;font-weight:600;font-size:.9rem}.filter-controls[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:10px;padding:.75rem;font-weight:500;transition:all .3s}.filter-controls[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#5b73e8;box-shadow:0 0 0 .2rem #5b73e826}.filter-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;font-weight:600;padding:.75rem 1.5rem;transition:all .3s}.filter-controls[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{border-color:#5b73e8;color:#5b73e8}.filter-controls[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background:#5b73e8;color:#fff;transform:translateY(-2px);box-shadow:0 4px 15px #5b73e84d}.task-horizontal-row[_ngcontent-%COMP%]{padding:1rem 0}.task-horiz-card[_ngcontent-%COMP%]{border:none;border-radius:15px;box-shadow:0 4px 15px #0000001a;transition:all .3s ease;background:#fff}.task-horiz-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0003}.task-horiz-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border-radius:20px;padding:.4em .8em;font-weight:600}.premium-pill[_ngcontent-%COMP%]{border-radius:20px!important}.task-horiz-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:600;transition:all .3s}.task-horiz-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.campaign-beautiful-card-v2[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 4px 15px #0000001a;transition:all .3s ease;overflow:hidden}.campaign-beautiful-card-v2[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0003}.campaign-gradient-top-bar[_ngcontent-%COMP%]{height:6px;background:linear-gradient(to right,#5b73e8,#56c1e0)}.campaign-card-filled[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border-radius:20px;padding:.4em .8em;font-weight:600}.campaign-card-filled[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:600;transition:all .3s}.campaign-card-filled[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.modal-content[_ngcontent-%COMP%]{border-radius:15px;border:none;overflow:hidden}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.05);padding:1.5rem}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:700}.modal-body[_ngcontent-%COMP%]{padding:2rem}.modal-footer[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.05);padding:1.5rem}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.badge[_ngcontent-%COMP%]{font-weight:600;padding:.4em .8em}.bg-primary[_ngcontent-%COMP%]{background:#5b73e8!important}.bg-success[_ngcontent-%COMP%]{background:#48c774!important}.bg-warning[_ngcontent-%COMP%]{background:#ffc107!important;color:#000!important}.bg-danger[_ngcontent-%COMP%]{background:#ff6b81!important}.bg-info[_ngcontent-%COMP%]{background:#56c1e0!important;color:#000!important}.bg-secondary[_ngcontent-%COMP%]{background:#95a5a6!important}.btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:600;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b73e8,#4a60d3);border:none}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48c774,#3bb765);border:none}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b81,#ee5a6f);border:none}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ffb300);border:none;color:#000}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#56c1e0,#3cced8);border:none;color:#000}.btn-outline-success[_ngcontent-%COMP%]{border-color:#48c774;color:#48c774}.btn-outline-success[_ngcontent-%COMP%]:hover{background:#48c774;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{border-color:#ff6b81;color:#ff6b81}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#ff6b81;color:#fff}.premium-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.premium-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.premium-btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.text-danger[_ngcontent-%COMP%]{color:#ff6b81!important}.fw-bold[_ngcontent-%COMP%]{font-weight:700}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.shadow[_ngcontent-%COMP%]{box-shadow:0 4px 15px #0000001a}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.rounded-pill[_ngcontent-%COMP%]{border-radius:50rem!important}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}@media (max-width: 768px){.stat-card[_ngcontent-%COMP%]{min-width:140px;min-height:110px}.stat-number[_ngcontent-%COMP%]{font-size:2.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.task-horiz-card[_ngcontent-%COMP%]{min-width:350px!important}}.task-horizontal-row[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.task-horizontal-row[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.task-horizontal-row[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#5b73e8,#56c1e0);border-radius:10px}.task-horizontal-row[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#4a60d3,#3cced8)}.spinner-border[_ngcontent-%COMP%]{animation:spinner-border .75s linear infinite}.text-center[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}']})}}return t})();function Tee(t,n){1&t&&(m(0,"div",110),k(1,"i",111),v(2," Please enter campaign manager name "),p())}function See(t,n){1&t&&(m(0,"div",110),k(1,"i",111),v(2," Please enter a campaign description (minimum 10 characters) "),p())}function Mee(t,n){1&t&&(m(0,"div",110),k(1,"i",111),v(2," Please select a start date "),p())}function kee(t,n){1&t&&(m(0,"div",110),k(1,"i",111),v(2," Please select an end date "),p())}function Eee(t,n){1&t&&(m(0,"div",110),k(1,"i",111),v(2," Please select priority "),p())}function xee(t,n){if(1&t&&(m(0,"option",125),v(1),p()),2&t){const e=n.$implicit;M("value",e.stateId||e.id),b(),q("",e.stateName||e.name," ")}}function Iee(t,n){if(1&t&&(m(0,"option",125),v(1),p()),2&t){const e=n.$implicit;M("value",e.cityId||e.id),b(),q("",e.cityName||e.name," ")}}function Nee(t,n){if(1&t&&(m(0,"option",125),v(1),p()),2&t){const e=n.$implicit;M("value",e),b(),ne(e)}}function Oee(t,n){if(1&t&&(m(0,"option",125),v(1),p()),2&t){const e=n.$implicit;M("value",e),b(),ne(e)}}function Pee(t,n){if(1&t){const e=ve();m(0,"div",112)(1,"div")(2,"label",113),k(3,"i",114),v(4," State "),m(5,"span",115),v(6,"*"),p()(),m(7,"select",116),B("change",function(o){return Q(e),J(I().onStateChange(o.target.value))}),m(8,"option",117),v(9,"Select State"),p(),R(10,xee,2,2,"option",118),p()(),m(11,"div")(12,"label",113),k(13,"i",119),v(14," City "),m(15,"span",115),v(16,"*"),p()(),m(17,"select",120),B("change",function(o){return Q(e),J(I().onCityChange(o.target.value))}),m(18,"option",117),v(19),p(),R(20,Iee,2,2,"option",118),p()(),m(21,"div")(22,"label",113),k(23,"i",121),v(24," Locality "),p(),m(25,"select",122),B("change",function(o){return Q(e),J(I().onLocalityChange(o.target.value))}),m(26,"option",117),v(27,"Select Locality"),p(),R(28,Nee,2,2,"option",118),p()(),m(29,"div")(30,"label",113),k(31,"i",123),v(32," Pincode "),p(),m(33,"select",124)(34,"option",117),v(35,"Auto-populated on Locality selection"),p(),R(36,Oee,2,2,"option",118),p()()()}if(2&t){let e;const i=I();b(10),M("ngForOf",i.states),b(9),ne(null!=(e=i.marketingForm.get("state"))&&e.value?"Select City":"Select state first"),b(),M("ngForOf",i.cities),b(8),M("ngForOf",i.localitySuggestions),b(8),M("ngForOf",i.pincodeOptions)}}function Aee(t,n){1&t&&(m(0,"div",126)(1,"div")(2,"label",127),k(3,"i",114),v(4," State * "),p(),k(5,"input",128),p(),m(6,"div")(7,"label",127),k(8,"i",119),v(9," City * "),p(),k(10,"input",129),p(),m(11,"div")(12,"label",127),k(13,"i",121),v(14," Locality "),p(),k(15,"input",130),p(),m(16,"div")(17,"label",127),k(18,"i",123),v(19," Pincode "),p(),k(20,"input",131),p()())}function Ree(t,n){if(1&t&&(m(0,"span",138),k(1,"i",139),v(2),p()),2&t){let e;const i=I(2);b(2),q(" ",i.getStateName(null==(e=i.marketingForm.get("state"))?null:e.value)," ")}}function Fee(t,n){if(1&t&&(m(0,"span",138),k(1,"i",140),v(2),p()),2&t){let e;const i=I(2);b(2),q(" ",i.getCityName(null==(e=i.marketingForm.get("city"))?null:e.value)," ")}}function Lee(t,n){if(1&t&&(m(0,"span",138),k(1,"i",141),v(2),p()),2&t){let e;const i=I(2);b(2),q(" ",null==(e=i.marketingForm.get("locality"))?null:e.value," ")}}function Bee(t,n){if(1&t&&(m(0,"span",138),k(1,"i",142),v(2),p()),2&t){let e;const i=I(2);b(2),q(" ",null==(e=i.marketingForm.get("pincode"))?null:e.value," ")}}function Vee(t,n){if(1&t&&(m(0,"div",132)(1,"div",133),k(2,"i",134),m(3,"strong",135),v(4,"Selected Location"),p()(),m(5,"div",136),R(6,Ree,3,1,"span",137)(7,Fee,3,1,"span",137)(8,Lee,3,1,"span",137)(9,Bee,3,1,"span",137),p()()),2&t){let e,i,o,r;const s=I();b(6),M("ngIf",null==(e=s.marketingForm.get("state"))?null:e.value),b(),M("ngIf",null==(i=s.marketingForm.get("city"))?null:i.value),b(),M("ngIf",null==(o=s.marketingForm.get("locality"))?null:o.value),b(),M("ngIf",null==(r=s.marketingForm.get("pincode"))?null:r.value)}}function jee(t,n){1&t&&(m(0,"div",143),v(1," Loading campaign types... "),p())}function $ee(t,n){if(1&t){const e=ve();m(0,"div",49)(1,"label",50)(2,"input",144),B("change",function(o){const r=Q(e).$implicit;return J(I().onTaskTypeChange(o,r.taskTypeId))}),p(),k(3,"span",52),m(4,"span",53),v(5),p()()()}if(2&t){const e=n.$implicit,i=I();b(2),M("value",e.taskTypeId)("checked",i.selectedTaskTypes.includes(e.taskTypeId)),b(3),ne(e.typeName||e.name||"Task Type "+e.taskTypeId)}}function Hee(t,n){1&t&&k(0,"span",145)}function Uee(t,n){1&t&&k(0,"i",146)}function zee(t,n){if(1&t&&(m(0,"div",147),k(1,"i",148),m(2,"h4"),v(3),p(),m(4,"span"),v(5,"Redirecting to dashboard..."),p()()),2&t){const e=I();b(3),ne(e.successMessage)}}function Gee(t,n){if(1&t&&(m(0,"div",149),k(1,"i",111),m(2,"div")(3,"h4",150),v(4,"Error"),p(),m(5,"span"),v(6),p()()()),2&t){const e=I();b(6),ne(e.errorMessage)}}let Wee=(()=>{class t{constructor(e,i,o,r,s,l,c,u){this.fb=e,this.router=i,this.locationService=o,this.locationHierarchyService=r,this.taskService=s,this.notificationService=l,this.marketingFormService=c,this.cdr=u,this.isLoading=!1,this.showSuccess=!1,this.successMessage="",this.errorMessage="",this.taskTypes=[],this.selectedTaskTypes=[],this.states=[],this.cities=[],this.localities=[],this.filteredLocalities=[],this.pincodes=[],this.filteredPincodes=[],this.allPincodeData=[],this.selectedStateId=null,this.selectedCityId=null,this.selectedLocalityName=null,this.selectedLocalityId=null,this.selectedPincodeId=null,this.showLocalityDropdown=!1,this.highlightedIndex=-1,this.showPincodeDropdown=!1,this.highlightedPincodeIndex=-1,this.isClickingOnDropdown=!1,this.useManualEntry=!1,this.manualLocationEntry=!1,this.pincodeOptions=[],this.localitySuggestions=[],this.currentDateTime="",this.marketingForm=this.fb.group({campaignManager:["",ce.required],employeeCode:[""],taskDescription:["",[ce.required,ce.minLength(10)]],taskDate:["",ce.required],deadline:["",ce.required],priority:["Medium",ce.required],state:["",ce.required],city:["",ce.required],locality:["",ce.required],pincode:["",ce.required],customLocation:[""],clientName:[""],projectCode:[""],consultantName:[""],campCode:[""],estimatedHours:[""],additionalNotes:[""],consultantFeedback:[""],isUrgent:[!1],expectedReach:[""],conversionGoal:[""],kpis:[""],marketingMaterials:[""],approvalRequired:[!0],approvalContact:[""],budgetCode:[""],departmentCode:["MKT"]})}ngOnInit(){this.loadNewCampaignCode(),this.updateCurrentDateTime(),setInterval(()=>{this.updateCurrentDateTime(),this.cdr&&this.cdr.detectChanges()},6e4),this.initializeTaskTypes(),this.loadStates(),this.checkForEditMode(),this.marketingForm.get("locality")?.enable(),this.marketingForm.get("pincode")?.enable(),this.marketingForm.get("city")?.enable(),this.marketingForm.get("state")?.enable()}loadNewCampaignCode(){console.log("Loading new campaign code from backend..."),this.marketingFormService.getNewCampaignCode().subscribe({next:e=>{if(e.success&&e.campaignCode){const i=e.campaignCode;console.log("\u2705 Campaign code generated:",i),this.marketingForm.patchValue({campCode:i}),this.marketingForm.get("campCode")?.disable()}else console.error("Failed to generate campaign code:",e.message)},error:e=>{console.error("Error generating campaign code:",e)}})}checkForEditMode(){const e=this.router.getCurrentNavigation(),i=e&&e.extras&&e.extras.state&&e.extras.state.campaignData;i?this.populateFormForEditing(i):this.router.routerState.root.queryParams.subscribe(o=>{if("edit"===o.mode&&o.campaignId)this.marketingFormService.getMarketingCampaignById(o.campaignId).subscribe({next:s=>{s.success&&s.data&&this.populateFormForEditing(s.data)},error:s=>{console.error("Error fetching campaign data for edit:",s)}});else if(o.campaignData)try{const r=JSON.parse(o.campaignData);this.populateFormForEditing(r)}catch(r){console.error("Error parsing campaign data from query params:",r)}})}populateFormForEditing(e){console.log("Populating form for editing:",e),this.marketingForm.patchValue({campaignManager:e.campaignManager,employeeCode:e.employeeCode,taskDescription:e.taskDescription,taskDate:e.taskDate?new Date(e.taskDate).toISOString().split("T")[0]:"",deadline:e.deadline?new Date(e.deadline).toISOString().split("T")[0]:"",priority:e.priority,isUrgent:e.isUrgent||!1,state:e.stateId?.toString(),city:e.cityId?.toString(),locality:e.locality,pincode:e.pincode,clientName:e.clientName,projectCode:e.projectCode,consultantName:e.consultantName,campCode:e.campaignCode,estimatedHours:e.estimatedHours,additionalNotes:e.additionalNotes,consultantFeedback:e.consultantFeedback,expectedReach:e.expectedReach,conversionGoal:e.conversionGoal,kpis:e.kpis,marketingMaterials:e.marketingMaterials,approvalRequired:e.approvalRequired||!0,approvalContact:e.approvalContact,budgetCode:e.budgetCode,departmentCode:e.departmentCode||"MKT"}),e.selectedTaskTypes&&Array.isArray(e.selectedTaskTypes)&&(this.selectedTaskTypes=e.selectedTaskTypes),e.stateId&&(this.selectedStateId=e.stateId,this.loadCities(e.stateId)),e.cityId&&(this.selectedCityId=e.cityId,this.loadLocalitiesForCity(e.cityId)),console.log("Form populated for editing")}initializeTaskTypes(){this.taskTypes=[{taskTypeId:1,typeName:"Digital Marketing",description:"Digital marketing activities"},{taskTypeId:2,typeName:"Social Media",description:"Social media campaigns"},{taskTypeId:3,typeName:"Content Creation",description:"Content creation and management"},{taskTypeId:4,typeName:"Email Marketing",description:"Email marketing campaigns"},{taskTypeId:5,typeName:"Event Marketing",description:"Event planning and marketing"},{taskTypeId:6,typeName:"Print Media",description:"Print media campaigns"},{taskTypeId:7,typeName:"Radio/TV",description:"Radio and TV advertisements"},{taskTypeId:8,typeName:"Outdoor Advertising",description:"Billboards and outdoor ads"}],console.log("Initialized with fallback task types:",this.taskTypes)}loadTaskTypes(){console.log("Loading task types from local data..."),console.log("Using fallback task types:",this.taskTypes)}loadStates(){console.log("Loading states from database..."),fetch(`${gt.apiUrl}/location/states`).then(e=>e.json()).then(e=>{e.success?(this.states=e.data,console.log("States loaded from database:",this.states.length)):(console.error("Error loading states:",e.message),this.loadFallbackStates())}).catch(e=>{console.error("Error loading states from database:",e),this.loadFallbackStates()})}loadFallbackStates(){console.log("Loading fallback states..."),this.states=[{stateId:1,stateName:"Andhra Pradesh",stateCode:"AP"},{stateId:2,stateName:"Arunachal Pradesh",stateCode:"AR"},{stateId:3,stateName:"Assam",stateCode:"AS"},{stateId:4,stateName:"Bihar",stateCode:"BR"},{stateId:5,stateName:"Chhattisgarh",stateCode:"CG"},{stateId:6,stateName:"Goa",stateCode:"GA"},{stateId:7,stateName:"Gujarat",stateCode:"GJ"},{stateId:8,stateName:"Haryana",stateCode:"HR"},{stateId:9,stateName:"Himachal Pradesh",stateCode:"HP"},{stateId:10,stateName:"Jharkhand",stateCode:"JH"},{stateId:11,stateName:"Karnataka",stateCode:"KA"},{stateId:12,stateName:"Kerala",stateCode:"KL"},{stateId:13,stateName:"Madhya Pradesh",stateCode:"MP"},{stateId:14,stateName:"Maharashtra",stateCode:"MH"},{stateId:15,stateName:"Manipur",stateCode:"MN"},{stateId:16,stateName:"Meghalaya",stateCode:"ML"},{stateId:17,stateName:"Mizoram",stateCode:"MZ"},{stateId:18,stateName:"Nagaland",stateCode:"NL"},{stateId:19,stateName:"Odisha",stateCode:"OR"},{stateId:20,stateName:"Punjab",stateCode:"PB"},{stateId:21,stateName:"Rajasthan",stateCode:"RJ"},{stateId:22,stateName:"Sikkim",stateCode:"SK"},{stateId:23,stateName:"Tamil Nadu",stateCode:"TN"},{stateId:24,stateName:"Telangana",stateCode:"TG"},{stateId:25,stateName:"Tripura",stateCode:"TR"},{stateId:26,stateName:"Uttar Pradesh",stateCode:"UP"},{stateId:27,stateName:"Uttarakhand",stateCode:"UK"},{stateId:28,stateName:"West Bengal",stateCode:"WB"},{stateId:29,stateName:"Delhi",stateCode:"DL"},{stateId:30,stateName:"Jammu and Kashmir",stateCode:"JK"},{stateId:31,stateName:"Ladakh",stateCode:"LA"},{stateId:32,stateName:"Chandigarh",stateCode:"CH"},{stateId:33,stateName:"Dadra and Nagar Haveli and Daman and Diu",stateCode:"DN"},{stateId:34,stateName:"Lakshadweep",stateCode:"LD"},{stateId:35,stateName:"Puducherry",stateCode:"PY"},{stateId:36,stateName:"Andaman and Nicobar Islands",stateCode:"AN"}],console.log("Fallback states loaded:",this.states.length)}loadCities(e){console.log("Loading cities from database for stateId:",e),fetch(`${gt.apiUrl}/location/cities?stateId=${e}`).then(i=>i.json()).then(i=>{i.success?(this.cities=i.data,console.log("Cities loaded from database:",this.cities.length),this.cities.length>0&&this.marketingForm.get("city")?.enable()):(console.error("Error loading cities:",i.message),this.loadFallbackCities(e))}).catch(i=>{console.error("Error loading cities from database:",i),this.loadFallbackCities(e)})}loadFallbackCities(e){console.log("Loading fallback cities for stateId:",e),this.cities=29===e?[{cityId:1,cityName:"Delhi",stateId:29}]:14===e?[{cityId:2,cityName:"Mumbai",stateId:14},{cityId:3,cityName:"Pune",stateId:14},{cityId:4,cityName:"Nagpur",stateId:14},{cityId:5,cityName:"Thane",stateId:14},{cityId:6,cityName:"Nashik",stateId:14}]:11===e?[{cityId:7,cityName:"Bangalore",stateId:11},{cityId:8,cityName:"Mysore",stateId:11},{cityId:9,cityName:"Hubli",stateId:11},{cityId:10,cityName:"Mangalore",stateId:11}]:23===e?[{cityId:11,cityName:"Chennai",stateId:23},{cityId:12,cityName:"Coimbatore",stateId:23},{cityId:13,cityName:"Madurai",stateId:23},{cityId:14,cityName:"Tiruchirappalli",stateId:23}]:7===e?[{cityId:15,cityName:"Ahmedabad",stateId:7},{cityId:16,cityName:"Surat",stateId:7},{cityId:17,cityName:"Vadodara",stateId:7},{cityId:18,cityName:"Rajkot",stateId:7}]:1===e?[{cityId:19,cityName:"Hyderabad",stateId:1},{cityId:20,cityName:"Visakhapatnam",stateId:1},{cityId:21,cityName:"Vijayawada",stateId:1},{cityId:22,cityName:"Tirupati",stateId:1}]:[{cityId:1,cityName:"Main City",stateId:e}],console.log("Fallback cities loaded:",this.cities.length),this.cities.length>0&&this.marketingForm.get("city")?.enable()}onTaskTypeChange(e,i){console.log("=== TASK TYPE CHANGE ==="),console.log("TaskTypeId:",i),console.log("Checked:",e.target.checked),console.log("Current selectedTaskTypes:",this.selectedTaskTypes),e.target.checked?this.selectedTaskTypes.includes(i)||(this.selectedTaskTypes.push(i),console.log("Added task type:",i)):(this.selectedTaskTypes=this.selectedTaskTypes.filter(o=>o!==i),console.log("Removed task type:",i)),console.log("Updated selectedTaskTypes:",this.selectedTaskTypes),console.log("=== END TASK TYPE CHANGE ===")}onLocalitySearch(e){const i=e.target.value.toLowerCase();console.log("\u{1f50d} Searching localities with term:",i),console.log("\u{1f4ca} Available localities for current city:",this.localities.length),i.length>0?(this.filteredLocalities=this.localities.filter(o=>o.localityName.toLowerCase().includes(i)),console.log("\u2705 Filtered to",this.filteredLocalities.length,"localities")):(this.filteredLocalities=[...this.localities],console.log("\u2705 Showing all",this.filteredLocalities.length,"localities for selected city")),this.showLocalityDropdown=!0,this.highlightedIndex=-1}onLocalityFocus(){console.log("\u{1f50d} Locality input focused"),console.log("\u{1f4ca} Available localities for selected city:",this.localities.length),console.log("\u{1f3d9}\ufe0f Selected city ID:",this.selectedCityId),this.localities.length>0?(this.filteredLocalities=[...this.localities],this.showLocalityDropdown=!0,console.log("\u2705 Showing",this.filteredLocalities.length,"localities from selected city")):(console.log("\u26a0\ufe0f No localities loaded. Please select a city first."),this.showLocalityDropdown=!1)}onLocalityBlur(){setTimeout(()=>{this.showLocalityDropdown=!1,this.highlightedIndex=-1},500)}selectLocality(e){console.log("=== LOCALITY SELECTED ==="),console.log("Full locality object:",e),console.log("Locality ID:",e.id),console.log("Locality Name:",e.name||e.localityName),this.selectedLocalityName=e.localityName||e.name,this.selectedLocalityId=e.id||e.localityId||null,console.log("\u2705 Stored selectedLocalityId:",this.selectedLocalityId),this.marketingForm.patchValue({locality:this.selectedLocalityName}),this.showLocalityDropdown=!1,this.highlightedIndex=-1,console.log("\ufffd ATTEMPTING PINCODE AUTO-FETCH...");let i=e.id;if(!i){console.log("\u26a0\ufe0f No ID in locality parameter, searching localityObjects...");const o=this.localityObjects?.find(r=>r.name===this.selectedLocalityName||r.localityName===this.selectedLocalityName);i=o?.id,console.log("Found in localityObjects:",o)}console.log("Final localityId to use:",i),i?(console.log("\u2705 Calling API with localityId:",i),this.locationHierarchyService.getPincodesByLocality(i).subscribe({next:o=>{if(console.log("\u2705\u2705 API RESPONSE RECEIVED!"),console.log("Raw pincodes:",o),console.log("Total count:",o?.length),!o||0===o.length)return console.error("\u274c No pincodes returned from API!"),void(this.filteredPincodes=[]);const r=Array.from(new Map(o.map(s=>[s.pincode||s.Pincode,s])).values());if(console.log("Unique pincodes:",r.length),this.filteredPincodes=r,1===r.length){const s=r[0].pincode||r[0].Pincode;console.log("\u{1f3af}\u{1f3af} AUTO-FILLING PINCODE:",s),this.marketingForm.patchValue({pincode:s}),this.cdr.detectChanges(),console.log("\u2705\u2705\u2705 PINCODE AUTO-FILLED SUCCESSFULLY!")}else console.log("\u{1f4cb} Multiple pincodes, showing dropdown..."),this.showPincodeDropdown=!0,this.cdr.detectChanges()},error:o=>{console.error("\u274c\u274c API ERROR:",o),console.error("Error message:",o.message),console.error("Error status:",o.status),console.log("Attempting fallback method..."),this.selectedLocalityName&&this.loadPincodesForLocalityFromDB(this.selectedLocalityName)}})):(console.error("\u274c\u274c NO LOCALITY ID FOUND! Cannot fetch pincodes."),console.error("Locality parameter:",e),console.error("localityObjects:",this.localityObjects),this.selectedLocalityName&&(console.log("Trying database fallback..."),this.loadPincodesForLocalityFromDB(this.selectedLocalityName))),console.log("=== END LOCALITY SELECTION ===")}onPincodeSearch(e){const i=e.target.value.toLowerCase();console.log("Searching pincodes with term:",i),i.length>0?this.searchPincodesFromDatabase(i):this.loadAllPincodesFromDatabase(),this.showPincodeDropdown=!0,this.highlightedPincodeIndex=-1}onPincodeFocus(){console.log("Pincode input focused"),console.log("Available pincodes:",this.allPincodeData),console.log("Current showPincodeDropdown:",this.showPincodeDropdown),this.showPincodeDropdown=!0,this.loadAllPincodesFromDatabase(),console.log("After setting showPincodeDropdown to true:",this.showPincodeDropdown),console.log("Filtered pincodes:",this.filteredPincodes)}onPincodeClick(){console.log("=== PINCODE CLICKED ==="),console.log("Current showPincodeDropdown before:",this.showPincodeDropdown),console.log("Current filteredPincodes length:",this.filteredPincodes.length),console.log("Current allPincodeData length:",this.allPincodeData.length),this.showPincodeDropdown=!0,this.filteredPincodes=this.allPincodeData,console.log("After immediate set - showPincodeDropdown:",this.showPincodeDropdown),console.log("After immediate set - filteredPincodes:",this.filteredPincodes.length),this.onPincodeFocus(),console.log("=== END PINCODE CLICK ===")}onPincodeBlur(){setTimeout(()=>{this.isClickingOnDropdown||(this.showPincodeDropdown=!1,this.highlightedPincodeIndex=-1),this.isClickingOnDropdown=!1},300)}selectPincode(e){console.log("=== PINCODE SELECTED ==="),console.log("Pincode selected:",e),this.isClickingOnDropdown=!0,this.marketingForm.patchValue({pincode:e.pincode}),this.showPincodeDropdown=!1,this.highlightedPincodeIndex=-1,console.log("Form updated with pincode:",e.pincode),console.log("Dropdown hidden"),console.log("=== END PINCODE SELECTION ===")}onPincodeMouseDown(){console.log("PINCODE MOUSEDOWN")}onPincodeMouseUp(){console.log("PINCODE MOUSEUP")}onLocalityMouseDown(e){console.log("Locality mousedown:",e.localityName)}onLocalityMouseUp(e){console.log("Locality mouseup:",e.localityName)}loadLocalitiesForCity(e){console.log("loadLocalitiesForCity called with cityId:",e),this.loadAllLocalitiesForCity(e)}loadAllLocalitiesForCity(e){console.log("Loading all localities for city:",e),this.loadFallbackLocalitiesForCity(e)}loadFallbackLocalitiesForCity(e){console.log("loadFallbackLocalitiesForCity called with cityId:",e);const i=[{localityName:"Connaught Place"},{localityName:"Darya Ganj"},{localityName:"Kashmere Gate"},{localityName:"Red Fort"},{localityName:"India Gate"},{localityName:"Central Secretariat"},{localityName:"President Estate"},{localityName:"Raj Ghat"},{localityName:"Parliament House"},{localityName:"Lajpat Nagar"},{localityName:"Defence Colony"},{localityName:"Greater Kailash"},{localityName:"Green Park"},{localityName:"Hauz Khas"},{localityName:"Malviya Nagar"},{localityName:"Saket"},{localityName:"Nehru Place"},{localityName:"Vasant Kunj"},{localityName:"Vasant Vihar"},{localityName:"Civil Lines"},{localityName:"Kamla Nagar"},{localityName:"Kingsway Camp"},{localityName:"Gtb Nagar"},{localityName:"Model Town"},{localityName:"Karol Bagh"},{localityName:"Rajouri Garden"},{localityName:"Naraina"},{localityName:"Patel Nagar"},{localityName:"Janakpuri"},{localityName:"Tilak Nagar"},{localityName:"Vikaspuri"},{localityName:"Laxmi Nagar"},{localityName:"Preet Vihar"},{localityName:"I P Extension"},{localityName:"Mayur Vihar"},{localityName:"Patparganj"},{localityName:"Fort"},{localityName:"Kalbadevi"},{localityName:"Masjid Bunder"},{localityName:"Girgaon"},{localityName:"Colaba"},{localityName:"Malabar Hill"},{localityName:"Grant Road"},{localityName:"Mumbai Central"},{localityName:"Mazgaon"},{localityName:"Tardeo"},{localityName:"Bangalore City"},{localityName:"Bangalore Cantonment"},{localityName:"Malleshwaram"},{localityName:"Rajajinagar"},{localityName:"Seshadripuram"},{localityName:"Chamrajpet"},{localityName:"Chamarajpet"},{localityName:"Chickpet"},{localityName:"Balepet"},{localityName:"Vyalikaval"},{localityName:"Parrys Corner"},{localityName:"Sowcarpet"},{localityName:"Chintadripet"},{localityName:"Mylapore"},{localityName:"Triplicane"},{localityName:"Chepauk"},{localityName:"Vepery"},{localityName:"Egmore"},{localityName:"Purasawalkam"},{localityName:"Kilpauk"},{localityName:"Lal Darwaja"},{localityName:"Kalupur"},{localityName:"Maninagar"},{localityName:"Navrangpura"},{localityName:"Kankaria"},{localityName:"Narol"},{localityName:"Sabarmati"},{localityName:"Vastrapur"},{localityName:"Ghatlodia"},{localityName:"Ambawadi"}];this.localities=i,this.filteredLocalities=i,console.log("All localities loaded for city:",e,this.localities.length,"localities")}loadPincodesForLocalityFromDB(e){console.log("loadPincodesForLocalityFromDB called with localityName:",e),this.loadPincodesForLocality(e)}loadPincodesForLocality(e){console.log("loadPincodesForLocality called with localityName:",e),this.allPincodeData&&this.allPincodeData.length>0?(this.pincodes=this.allPincodeData.filter(i=>i.localityName.toLowerCase().includes(e.toLowerCase())),this.filteredPincodes=this.pincodes,1===this.pincodes.length&&(this.marketingForm.patchValue({pincode:this.pincodes[0].pincode}),console.log("Auto-selected pincode from local data:",this.pincodes[0].pincode))):(this.loadFallbackPincodes(e),this.filteredPincodes=this.pincodes)}loadAllLocalities(){console.log("Loading all localities from local data..."),this.loadComprehensiveLocalities()}loadComprehensiveLocalities(){console.log("Loading comprehensive localities from provided data..."),this.localities=[{pincodeId:161,pincode:"110001",areaId:1,localityName:"Connaught Place",isActive:1},{pincodeId:162,pincode:"110002",areaId:1,localityName:"Darya Ganj",isActive:1},{pincodeId:163,pincode:"110003",areaId:1,localityName:"Kashmere Gate",isActive:1},{pincodeId:164,pincode:"110006",areaId:1,localityName:"Red Fort",isActive:1},{pincodeId:165,pincode:"110055",areaId:1,localityName:"India Gate",isActive:1},{pincodeId:166,pincode:"110011",areaId:10,localityName:"Central Secretariat",isActive:1},{pincodeId:167,pincode:"110021",areaId:10,localityName:"President Estate",isActive:1},{pincodeId:168,pincode:"110023",areaId:10,localityName:"Raj Ghat",isActive:1},{pincodeId:169,pincode:"110012",areaId:10,localityName:"Parliament House",isActive:1},{pincodeId:170,pincode:"110016",areaId:3,localityName:"Lajpat Nagar",isActive:1},{pincodeId:171,pincode:"110017",areaId:3,localityName:"Defence Colony",isActive:1},{pincodeId:172,pincode:"110019",areaId:3,localityName:"Greater Kailash",isActive:1},{pincodeId:173,pincode:"110024",areaId:3,localityName:"Green Park",isActive:1},{pincodeId:174,pincode:"110025",areaId:3,localityName:"Hauz Khas",isActive:1},{pincodeId:175,pincode:"110029",areaId:3,localityName:"Malviya Nagar",isActive:1},{pincodeId:176,pincode:"110048",areaId:3,localityName:"Saket",isActive:1},{pincodeId:177,pincode:"110049",areaId:3,localityName:"Nehru Place",isActive:1},{pincodeId:178,pincode:"110062",areaId:3,localityName:"Vasant Kunj",isActive:1},{pincodeId:179,pincode:"110070",areaId:3,localityName:"Vasant Vihar",isActive:1},{pincodeId:180,pincode:"110007",areaId:2,localityName:"Civil Lines",isActive:1},{pincodeId:181,pincode:"110009",areaId:2,localityName:"Kamla Nagar",isActive:1},{pincodeId:182,pincode:"110033",areaId:2,localityName:"Kingsway Camp",isActive:1},{pincodeId:183,pincode:"110035",areaId:2,localityName:"Gtb Nagar",isActive:1},{pincodeId:184,pincode:"110054",areaId:2,localityName:"Model Town",isActive:1},{pincodeId:185,pincode:"110015",areaId:5,localityName:"Karol Bagh",isActive:1},{pincodeId:186,pincode:"110018",areaId:5,localityName:"Rajouri Garden",isActive:1},{pincodeId:187,pincode:"110026",areaId:5,localityName:"Naraina",isActive:1},{pincodeId:188,pincode:"110027",areaId:5,localityName:"Patel Nagar",isActive:1},{pincodeId:189,pincode:"110058",areaId:5,localityName:"Janakpuri",isActive:1},{pincodeId:190,pincode:"110059",areaId:5,localityName:"Tilak Nagar",isActive:1},{pincodeId:191,pincode:"110063",areaId:5,localityName:"Vikaspuri",isActive:1},{pincodeId:192,pincode:"110031",areaId:4,localityName:"Laxmi Nagar",isActive:1},{pincodeId:193,pincode:"110032",areaId:4,localityName:"Preet Vihar",isActive:1},{pincodeId:194,pincode:"110051",areaId:4,localityName:"I P Extension",isActive:1},{pincodeId:195,pincode:"110092",areaId:4,localityName:"Mayur Vihar",isActive:1},{pincodeId:196,pincode:"110096",areaId:4,localityName:"Patparganj",isActive:1}].map(i=>({pincodeId:i.pincodeId,pincode:i.pincode,areaId:i.areaId,localityName:i.localityName,isActive:i.isActive})),this.filteredLocalities=[...this.localities],console.log("Comprehensive localities loaded:",this.localities.length,"records"),console.log("Filtered localities updated:",this.filteredLocalities.length,"records")}loadAllPincodeData(){console.log("Loading all pincode data from local data..."),this.loadComprehensivePincodes()}loadComprehensivePincodes(){console.log("Loading comprehensive pincode data from provided data..."),this.allPincodeData=[{pincodeId:161,pincode:"110001",areaId:1,localityName:"Connaught Place",isActive:1},{pincodeId:162,pincode:"110002",areaId:1,localityName:"Darya Ganj",isActive:1},{pincodeId:163,pincode:"110003",areaId:1,localityName:"Kashmere Gate",isActive:1},{pincodeId:164,pincode:"110006",areaId:1,localityName:"Red Fort",isActive:1},{pincodeId:165,pincode:"110055",areaId:1,localityName:"India Gate",isActive:1},{pincodeId:166,pincode:"110011",areaId:10,localityName:"Central Secretariat",isActive:1},{pincodeId:167,pincode:"110021",areaId:10,localityName:"President Estate",isActive:1},{pincodeId:168,pincode:"110023",areaId:10,localityName:"Raj Ghat",isActive:1},{pincodeId:169,pincode:"110012",areaId:10,localityName:"Parliament House",isActive:1},{pincodeId:170,pincode:"110016",areaId:3,localityName:"Lajpat Nagar",isActive:1},{pincodeId:171,pincode:"110017",areaId:3,localityName:"Defence Colony",isActive:1},{pincodeId:172,pincode:"110019",areaId:3,localityName:"Greater Kailash",isActive:1},{pincodeId:173,pincode:"110024",areaId:3,localityName:"Green Park",isActive:1},{pincodeId:174,pincode:"110025",areaId:3,localityName:"Hauz Khas",isActive:1},{pincodeId:175,pincode:"110029",areaId:3,localityName:"Malviya Nagar",isActive:1},{pincodeId:176,pincode:"110048",areaId:3,localityName:"Saket",isActive:1},{pincodeId:177,pincode:"110049",areaId:3,localityName:"Nehru Place",isActive:1},{pincodeId:178,pincode:"110062",areaId:3,localityName:"Vasant Kunj",isActive:1},{pincodeId:179,pincode:"110070",areaId:3,localityName:"Vasant Vihar",isActive:1},{pincodeId:180,pincode:"110007",areaId:2,localityName:"Civil Lines",isActive:1},{pincodeId:181,pincode:"110009",areaId:2,localityName:"Kamla Nagar",isActive:1},{pincodeId:182,pincode:"110033",areaId:2,localityName:"Kingsway Camp",isActive:1},{pincodeId:183,pincode:"110035",areaId:2,localityName:"Gtb Nagar",isActive:1},{pincodeId:184,pincode:"110054",areaId:2,localityName:"Model Town",isActive:1},{pincodeId:185,pincode:"110015",areaId:5,localityName:"Karol Bagh",isActive:1},{pincodeId:186,pincode:"110018",areaId:5,localityName:"Rajouri Garden",isActive:1},{pincodeId:187,pincode:"110026",areaId:5,localityName:"Naraina",isActive:1},{pincodeId:188,pincode:"110027",areaId:5,localityName:"Patel Nagar",isActive:1},{pincodeId:189,pincode:"110058",areaId:5,localityName:"Janakpuri",isActive:1},{pincodeId:190,pincode:"110059",areaId:5,localityName:"Tilak Nagar",isActive:1},{pincodeId:191,pincode:"110063",areaId:5,localityName:"Vikaspuri",isActive:1},{pincodeId:192,pincode:"110031",areaId:4,localityName:"Laxmi Nagar",isActive:1},{pincodeId:193,pincode:"110032",areaId:4,localityName:"Preet Vihar",isActive:1},{pincodeId:194,pincode:"110051",areaId:4,localityName:"I P Extension",isActive:1},{pincodeId:195,pincode:"110092",areaId:4,localityName:"Mayur Vihar",isActive:1},{pincodeId:196,pincode:"110096",areaId:4,localityName:"Patparganj",isActive:1}].map(i=>({pincodeId:i.pincodeId,pincode:i.pincode,areaId:i.areaId,localityName:i.localityName,isActive:i.isActive})),this.pincodes=[...this.allPincodeData],this.filteredPincodes=[...this.allPincodeData],console.log("Comprehensive pincode data loaded:",this.pincodes.length,"records"),console.log("Filtered pincodes updated:",this.filteredPincodes.length,"records")}loadFallbackPincodes(e){console.log("loadFallbackPincodes called with localityName:",e);const i=[{pincode:"110001",localityName:"Connaught Place"},{pincode:"110002",localityName:"Darya Ganj"},{pincode:"110003",localityName:"Kashmere Gate"},{pincode:"110006",localityName:"Red Fort"},{pincode:"110055",localityName:"India Gate"},{pincode:"110011",localityName:"Central Secretariat"},{pincode:"110021",localityName:"President Estate"},{pincode:"110023",localityName:"Raj Ghat"},{pincode:"110012",localityName:"Parliament House"},{pincode:"110016",localityName:"Lajpat Nagar"},{pincode:"110017",localityName:"Defence Colony"},{pincode:"110019",localityName:"Greater Kailash"},{pincode:"110024",localityName:"Green Park"},{pincode:"110025",localityName:"Hauz Khas"},{pincode:"110029",localityName:"Malviya Nagar"},{pincode:"110048",localityName:"Saket"},{pincode:"110049",localityName:"Nehru Place"},{pincode:"110062",localityName:"Vasant Kunj"},{pincode:"110070",localityName:"Vasant Vihar"},{pincode:"110007",localityName:"Civil Lines"},{pincode:"110009",localityName:"Kamla Nagar"},{pincode:"110033",localityName:"Kingsway Camp"},{pincode:"110035",localityName:"GTB Nagar"},{pincode:"110054",localityName:"Model Town"},{pincode:"110015",localityName:"Karol Bagh"},{pincode:"110018",localityName:"Rajouri Garden"},{pincode:"110026",localityName:"Naraina"},{pincode:"110027",localityName:"Patel Nagar"},{pincode:"110058",localityName:"Janakpuri"},{pincode:"110059",localityName:"Tilak Nagar"},{pincode:"110063",localityName:"Vikaspuri"},{pincode:"110031",localityName:"Laxmi Nagar"},{pincode:"110032",localityName:"Preet Vihar"},{pincode:"110051",localityName:"I P Extension"},{pincode:"110092",localityName:"Mayur Vihar"},{pincode:"110096",localityName:"Patparganj"}];this.pincodes=e&&""!==e.trim()?i.filter(o=>o.localityName.toLowerCase().includes(e.toLowerCase())):i,console.log("Pincodes loaded for locality:",e,this.pincodes.length,"pincodes")}onSubmit(){if(console.log("Form submission started"),console.log("Form valid:",this.marketingForm.valid),console.log("Form value:",this.marketingForm.value),console.log("Selected task types:",this.selectedTaskTypes),0!==this.selectedTaskTypes.length)if(this.marketingForm.valid){this.isLoading=!0,this.showSuccess=!1;const e=this.marketingForm.value;console.log("Form data:",e);const i={campaignManager:e.campaignManager,employeeCode:e.employeeCode,taskDescription:e.taskDescription,taskDate:e.taskDate,deadline:e.deadline,priority:e.priority,isUrgent:e.isUrgent||!1,stateId:this.manualLocationEntry?0:parseInt(e.state)||0,cityId:this.manualLocationEntry?0:parseInt(e.city)||0,locality:this.manualLocationEntry?e.customLocation||"":e.locality||"",pincode:this.manualLocationEntry?"":e.pincode||"",localityId:this.selectedLocalityId||void 0,pincodeId:this.selectedPincodeId||void 0,clientName:e.clientName,projectCode:e.projectCode,consultantName:e.consultantName,estimatedHours:e.estimatedHours?parseFloat(e.estimatedHours):void 0,expectedReach:e.expectedReach?parseInt(e.expectedReach):void 0,conversionGoal:e.conversionGoal,kpis:e.kpis,marketingMaterials:e.marketingMaterials,approvalRequired:e.approvalRequired||!1,approvalContact:e.approvalContact,budgetCode:e.budgetCode,additionalNotes:e.additionalNotes,consultantFeedback:e.consultantFeedback,selectedTaskTypes:this.selectedTaskTypes,status:"Active"};console.log("\u{1f4ca} ===== PAYLOAD TO BE SENT TO BACKEND ====="),console.log("\u2705 Campaign Manager:",i.campaignManager),console.log("\u2705 Task Description:",i.taskDescription),console.log("\u2705 Task Date:",i.taskDate),console.log("\u2705 Deadline:",i.deadline),console.log("\u2705 Priority:",i.priority),console.log("\u2705 Selected Task Types:",i.selectedTaskTypes),console.log("\u2705 State ID:",i.stateId),console.log("\u2705 City ID:",i.cityId),console.log("\u2705 Locality:",i.locality),console.log("\u2705 Pincode:",i.pincode),console.log("\u{1f4ca} FULL JSON PAYLOAD:"),console.log(JSON.stringify(i,null,2)),console.log("\u{1f4ca} =========================================="),this.saveCampaignToDatabase(i)}else console.log("Form is not ready for submission"),this.markFormGroupTouched(),this.notificationService.showNotification("Please fill in all required fields correctly.","error");else this.notificationService.showNotification("Please select at least one campaign type.","error")}saveCampaignToDatabase(e){console.log("Saving campaign to database:",e),this.marketingFormService.saveMarketingCampaign(e).subscribe({next:i=>{this.isLoading=!1,i.success?(this.showSuccess=!0,this.successMessage="Marketing campaign saved successfully!",this.errorMessage="",this.printForm(),console.log("Marketing campaign saved successfully:",i),this.notificationService.showNotification("Marketing campaign saved successfully! Form printed."),this.resetForm(),setTimeout(()=>{this.showSuccess=!1,this.router.navigate(["/admin/dashboard"])},3e3)):(console.error("Error saving campaign:",i.message),this.errorMessage=i.message||"Failed to save campaign",this.successMessage="",this.notificationService.showNotification("Error saving campaign: "+i.message,"error"))},error:i=>{this.isLoading=!1,console.error("Error saving campaign:",i),this.errorMessage=i.message||"Unable to save form, please try again",this.successMessage="",this.notificationService.showNotification("Error saving campaign: "+i.message,"error")}})}saveCampaignToStorage(e){try{const i=JSON.parse(localStorage.getItem("marketingCampaigns")||"[]");i.push(e),localStorage.setItem("marketingCampaigns",JSON.stringify(i)),console.log("Campaign saved to storage. Total campaigns:",i.length)}catch(i){console.error("Error saving campaign to storage:",i)}}getAllSavedCampaigns(){try{return JSON.parse(localStorage.getItem("marketingCampaigns")||"[]")}catch(e){return console.error("Error loading campaigns from storage:",e),[]}}printForm(){console.log("=== PRINTING FORM ===");const e=window.open("","_blank");if(!e)return void alert("Please allow popups to print the form");const i=this.marketingForm.value,o=this.selectedTaskTypes.map(c=>this.taskTypes.find(u=>u.taskTypeId===c)?.typeName||"Unknown").join(", "),r=this.states.find(c=>c.stateId==i.state)?.stateName||i.state,s=this.cities.find(c=>c.cityId==i.city)?.cityName||i.city,l=`\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <title>Marketing Campaign Form - Print</title>\n        <style>\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            \n            body { \n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \n                background: #f5f5f5;\n                padding: 0;\n                line-height: 1.6; \n            }\n            \n            /* Professional Teal Header */\n            .professional-header {\n                background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%);\n                padding: 30px 0;\n                text-align: center;\n                box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n                margin-bottom: 30px;\n            }\n            \n            .header-content {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 20px;\n                flex-wrap: wrap;\n            }\n            \n            .logo-placeholder {\n                width: 80px;\n                height: 80px;\n                background: white;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                color: #0d9488;\n                font-size: 14px;\n                text-align: center;\n                padding: 10px;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n            }\n            \n            .header-title {\n                color: white;\n                text-align: center;\n            }\n            \n            .header-title h1 {\n                font-size: 28px;\n                font-weight: 700;\n                margin-bottom: 8px;\n                text-shadow: 2px 2px 4px rgba(0,0,0,0.2);\n            }\n            \n            .header-subtitle {\n                font-size: 16px;\n                color: #e0f2f1;\n                font-weight: 400;\n            }\n            \n            /* Main Container */\n            .container {\n                max-width: 900px;\n                margin: 0 auto;\n                padding: 30px;\n                background: white;\n                border: 2px solid #0d9488;\n                border-radius: 10px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n            }\n            \n            .generated-info {\n                text-align: center;\n                color: #666;\n                font-size: 14px;\n                margin-bottom: 30px;\n                padding: 10px;\n                background: #f0fdfa;\n                border-left: 4px solid #0d9488;\n                border-radius: 4px;\n            }\n            \n            /* Section Styling */\n            .section {\n                margin-bottom: 30px;\n                border: 2px solid #e5e7eb;\n                padding: 20px;\n                border-radius: 8px;\n                background: #fafafa;\n            }\n            \n            .section-title {\n                font-weight: 700;\n                font-size: 18px;\n                color: #0d9488;\n                margin-bottom: 18px;\n                padding-bottom: 10px;\n                border-bottom: 2px solid #0d9488;\n                text-transform: uppercase;\n                letter-spacing: 0.5px;\n            }\n            \n            /* Field Styling */\n            .field {\n                margin-bottom: 12px;\n                padding: 8px 0;\n                display: flex;\n                border-bottom: 1px solid #e5e7eb;\n            }\n            \n            .field:last-child {\n                border-bottom: none;\n            }\n            \n            .field-label {\n                font-weight: 600;\n                color: #374151;\n                min-width: 220px;\n                padding-right: 15px;\n            }\n            \n            .field-value {\n                color: #1f2937;\n                flex: 1;\n            }\n            \n            .urgent {\n                color: #dc2626;\n                font-weight: bold;\n                text-transform: uppercase;\n            }\n            \n            /* Checkbox List */\n            .checkbox-list {\n                margin-left: 20px;\n                list-style-type: none;\n            }\n            \n            .checkbox-list li {\n                margin-bottom: 8px;\n                padding-left: 25px;\n                position: relative;\n            }\n            \n            .checkbox-list li:before {\n                content: "\u2713";\n                position: absolute;\n                left: 0;\n                color: #0d9488;\n                font-weight: bold;\n                font-size: 18px;\n            }\n            \n            /* Print Buttons */\n            .print-buttons {\n                text-align: center;\n                margin: 20px 0 30px;\n                padding: 15px;\n                background: #f0fdfa;\n                border-radius: 8px;\n            }\n            \n            .print-btn {\n                padding: 12px 30px;\n                margin: 5px;\n                background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%);\n                color: white;\n                border: none;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 16px;\n                font-weight: 600;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                transition: all 0.3s ease;\n            }\n            \n            .print-btn:hover {\n                background: linear-gradient(135deg, #0f766e 0%, #0d9488 100%);\n                transform: translateY(-2px);\n                box-shadow: 0 4px 8px rgba(0,0,0,0.15);\n            }\n            \n            /* Print Media Query */\n            @media print {\n                body {\n                    background: white;\n                    padding: 0;\n                    margin: 0;\n                }\n                \n                .print-buttons {\n                    display: none !important;\n                }\n                \n                .container {\n                    border: none;\n                    box-shadow: none;\n                    max-width: 100%;\n                    padding: 20px;\n                }\n                \n                .professional-header {\n                    margin-bottom: 20px;\n                    -webkit-print-color-adjust: exact;\n                    print-color-adjust: exact;\n                }\n                \n                .section {\n                    page-break-inside: avoid;\n                    border: 1px solid #ccc;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        \n        \x3c!-- Professional Compact Header --\x3e\n        <div style="background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 50%, #0284c7 100%); padding: 15px 20px; margin-bottom: 25px; border-radius: 6px; box-shadow: 0 3px 10px rgba(14, 165, 233, 0.2);">\n            <div style="text-align: center;">\n                <div style="font-size: 9px; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 5px; color: #1f2937; font-weight: 600;">Official Document</div>\n                <h1 style="font-size: 20px; color: #000000; margin: 0 0 6px 0; font-weight: 700; letter-spacing: -0.3px;">Marketing Campaign Form</h1>\n                <h2 style="font-size: 13px; color: #1f2937; margin: 0 0 6px 0; font-weight: 500;">Sri Balaji Action Medical Institute & Action Cancer Hospital</h2>\n                <div style="display: inline-block; background: #67e8f9; padding: 4px 12px; border-radius: 15px; margin-top: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.12);">\n                    <span style="font-size: 11px; color: #0c4a6e; font-weight: 600;">\u{1f4c5} ${(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"long",timeStyle:"short"})}</span>\n                </div>\n            </div>\n        </div>\n        \n        <div class="container">\n\n            <div class="section">\n                <div class="section-title">\u{1f4cb} Campaign Information</div>\n                <div class="field"><span class="field-label">Campaign Manager:</span> <span class="field-value">${i.campaignManager||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Employee ID:</span> <span class="field-value">${i.employeeCode||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Campaign Description:</span> <span class="field-value">${i.taskDescription||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Start Date:</span> <span class="field-value">${i.taskDate||"N/A"}</span></div>\n                <div class="field"><span class="field-label">End Date:</span> <span class="field-value">${i.deadline||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Priority:</span> <span class="field-value">${i.priority||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Urgent Campaign:</span> <span class="field-value ${i.isUrgent?"urgent":""}">${i.isUrgent?"YES":"NO"}</span></div>\n            </div>\n\n            <div class="section">\n                <div class="section-title">\u{1f3e2} Project & Client Information</div>\n                <div class="field"><span class="field-label">Client/Department:</span> <span class="field-value">${i.clientName||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Project Code:</span> <span class="field-value">${i.projectCode||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Consultant Name:</span> <span class="field-value">${i.consultantName||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Campaign Code:</span> <span class="field-value">${i.campCode||"N/A"}</span></div>\n            </div>\n\n            <div class="section">\n                <div class="section-title">\u{1f4cd} Location Details</div>\n                <div class="field"><span class="field-label">State:</span> <span class="field-value">${r||"N/A"}</span></div>\n                <div class="field"><span class="field-label">City:</span> <span class="field-value">${s||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Locality:</span> <span class="field-value">${i.locality||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Pincode:</span> <span class="field-value">${i.pincode||"N/A"}</span></div>\n            </div>\n\n            <div class="section">\n                <div class="section-title">\u2705 Campaign Types</div>\n                <div class="field">\n                    <span class="field-label">Selected Types:</span>\n                    <ul class="checkbox-list">\n                        ${o.split(", ").map(c=>`<li>${c}</li>`).join("")}\n                    </ul>\n                </div>\n            </div>\n\n            <div class="section">\n                <div class="section-title">\u{1f4ca} Campaign Details</div>\n                <div class="field"><span class="field-label">Expected Reach:</span> <span class="field-value">${i.expectedReach||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Conversion Goal:</span> <span class="field-value">${i.conversionGoal||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Estimated Hours:</span> <span class="field-value">${i.estimatedHours||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Budget Code:</span> <span class="field-value">${i.budgetCode||"N/A"}</span></div>\n                <div class="field"><span class="field-label">KPIs:</span> <span class="field-value">${i.kpis||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Marketing Materials:</span> <span class="field-value">${i.marketingMaterials||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Approval Required:</span> <span class="field-value">${i.approvalRequired?"YES":"NO"}</span></div>\n                <div class="field"><span class="field-label">Approval Contact:</span> <span class="field-value">${i.approvalContact||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Additional Notes:</span> <span class="field-value">${i.additionalNotes||"N/A"}</span></div>\n                <div class="field"><span class="field-label">Consultant Feedback:</span> <span class="field-value">${i.consultantFeedback||"N/A"}</span></div>\n            </div>\n\n            <div class="section">\n                <div class="section-title">\u2713 Form Status</div>\n                <div class="field"><span class="field-label">Form Status:</span> <span class="field-value" style="color: #059669; font-weight: bold;">COMPLETED & SUBMITTED</span></div>\n                <div class="field"><span class="field-label">Submission Date:</span> <span class="field-value">${(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})}</span></div>\n            </div>\n        </div>\n        \n        \x3c!-- Print Buttons at Bottom --\x3e\n        <div class="print-buttons">\n            <button class="print-btn" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);" onclick="window.print()">\u{1f5a8}\ufe0f PRINT NOW</button>\n            <button class="print-btn" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;" onclick="window.close()"><span style="color: white; font-weight: bold;">\u2716</span> CLOSE</button>\n        </div>\n    </body>\n    </html>\n    `;e.document.write(l),e.document.close(),console.log("=== PRINT PREVIEW OPENED ===")}resetForm(){this.marketingForm.reset({priority:"Medium",isUrgent:!1,approvalRequired:!0,departmentCode:"MKT"}),this.selectedTaskTypes=[],this.cities=[],this.localities=[],this.pincodes=[],this.selectedStateId=null,this.selectedCityId=null,this.selectedLocalityName=null,this.selectedLocalityId=null,this.selectedPincodeId=null,this.isLoading=!1,this.showSuccess=!1,this.marketingForm.get("locality")?.enable(),this.loadAllLocalities()}markFormGroupTouched(){Object.keys(this.marketingForm.controls).forEach(e=>{this.marketingForm.get(e)?.markAsTouched()})}onCheckboxChange(e,i){const o=e.target.checked;console.log("Checkbox changed:",i,o),this.marketingForm.patchValue({[i]:o})}onManualEntryToggle(){console.log("\u{1f504} Manual entry toggle:",this.useManualEntry),this.useManualEntry?(this.marketingForm.patchValue({state:"",city:"",locality:"",pincode:""}),this.marketingForm.get("customLocation")?.setValidators([ce.required]),this.marketingForm.get("state")?.clearValidators(),this.marketingForm.get("city")?.clearValidators(),this.marketingForm.get("locality")?.clearValidators(),this.marketingForm.get("pincode")?.clearValidators(),console.log("\u2705 Switched to MANUAL ENTRY mode")):(this.marketingForm.patchValue({customLocation:""}),this.marketingForm.get("state")?.setValidators([ce.required]),this.marketingForm.get("city")?.setValidators([ce.required]),this.marketingForm.get("locality")?.setValidators([ce.required]),this.marketingForm.get("pincode")?.setValidators([ce.required]),this.marketingForm.get("customLocation")?.clearValidators(),console.log("\u2705 Switched to HIERARCHICAL DROPDOWN mode")),this.marketingForm.get("customLocation")?.updateValueAndValidity(),this.marketingForm.get("state")?.updateValueAndValidity(),this.marketingForm.get("city")?.updateValueAndValidity(),this.marketingForm.get("locality")?.updateValueAndValidity(),this.marketingForm.get("pincode")?.updateValueAndValidity(),this.cdr.detectChanges()}trackByTaskTypeId(e,i){return i.taskTypeId}trackByLocationId(e,i){return i.locationId}get campaignManager(){return this.marketingForm.get("campaignManager")}get employeeCode(){return this.marketingForm.get("employeeCode")}get taskDescription(){return this.marketingForm.get("taskDescription")}get taskDate(){return this.marketingForm.get("taskDate")}get deadline(){return this.marketingForm.get("deadline")}get priority(){return this.marketingForm.get("priority")}get state(){return this.marketingForm.get("state")}get city(){return this.marketingForm.get("city")}get area(){return this.marketingForm.get("area")}get locality(){return this.marketingForm.get("locality")}get pincode(){return this.marketingForm.get("pincode")}get clientName(){return this.marketingForm.get("clientName")}get projectCode(){return this.marketingForm.get("projectCode")}get consultantName(){return this.marketingForm.get("consultantName")}get campCode(){return this.marketingForm.get("campCode")}get consultantFeedback(){return this.marketingForm.get("consultantFeedback")}getUniqueLocalities(e){const i=new Set;return e.filter(o=>{const r=(o.localityName||"").trim().toLowerCase();return!(!r||i.has(r)||(i.add(r),0))})}loadAllLocalitiesFromDatabase(){console.log("Loading all localities from database..."),fetch(`${gt.apiUrl}/location/localities`).then(e=>e.json()).then(e=>{if(e.success){const i=this.getUniqueLocalities(e.data);this.localities=i,this.filteredLocalities=i,console.log("Localities loaded from database:",this.localities.length)}else{console.error("Error loading localities:",e.message);const i=this.getUniqueLocalities(this.localities);this.localities=i,this.filteredLocalities=i}}).catch(e=>{console.error("Error loading localities from database:",e);const i=this.getUniqueLocalities(this.localities);this.localities=i,this.filteredLocalities=i})}searchLocalitiesFromDatabase(e){console.log("Searching localities in database with term:",e),fetch(`${gt.apiUrl}/location/localities/search?term=${encodeURIComponent(e)}`).then(i=>i.json()).then(i=>{i.success?(this.filteredLocalities=i.data,console.log("Filtered localities from database:",this.filteredLocalities.length)):(console.error("Error searching localities:",i.message),this.filteredLocalities=this.localities.filter(o=>o.localityName&&o.localityName.toLowerCase().includes(e)))}).catch(i=>{console.error("Error searching localities from database:",i),this.filteredLocalities=this.localities.filter(o=>o.localityName&&o.localityName.toLowerCase().includes(e))})}loadAllPincodesFromDatabase(){console.log("Loading all pincodes from database..."),fetch(`${gt.apiUrl}/location/pincodes`).then(e=>e.json()).then(e=>{e.success?(this.allPincodeData=e.data,this.pincodes=e.data,this.filteredPincodes=e.data,console.log("Pincodes loaded from database:",this.allPincodeData.length)):(console.error("Error loading pincodes:",e.message),this.loadComprehensivePincodes())}).catch(e=>{console.error("Error loading pincodes from database:",e),this.loadComprehensivePincodes()})}searchPincodesFromDatabase(e){console.log("Searching pincodes in database with term:",e),fetch(`${gt.apiUrl}/location/pincodes/search?term=${encodeURIComponent(e)}`).then(i=>i.json()).then(i=>{i.success?(this.filteredPincodes=i.data,console.log("Filtered pincodes from database:",this.filteredPincodes.length)):(console.error("Error searching pincodes:",i.message),this.filteredPincodes=this.allPincodeData.filter(o=>o.pincode.toString().includes(e)||o.localityName.toLowerCase().includes(e)))}).catch(i=>{console.error("Error searching pincodes from database:",i),this.filteredPincodes=this.allPincodeData.filter(o=>o.pincode.toString().includes(e)||o.localityName.toLowerCase().includes(e))})}loadPincodesForLocalityFromDatabase(e){console.log("Loading pincodes for locality from database:",e),fetch(`${gt.apiUrl}/location/pincodes/by-locality?locality=${encodeURIComponent(e)}`).then(i=>i.json()).then(i=>{i.success?(this.pincodes=i.data,this.filteredPincodes=i.data,console.log("Pincodes loaded for locality from database:",this.pincodes.length),1===this.pincodes.length&&(this.marketingForm.patchValue({pincode:this.pincodes[0].pincode}),console.log("Auto-selected pincode from database:",this.pincodes[0].pincode))):(console.error("Error loading pincodes for locality:",i.message),this.loadPincodesForLocality(e))}).catch(i=>{console.error("Error loading pincodes for locality from database:",i),this.loadPincodesForLocality(e)})}updateCurrentDateTime(){this.currentDateTime=(new Date).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}getCurrentDateTime(){return this.currentDateTime}onStateChange(e){const i=Number(e);if(console.log("\u{1f50d} STATE CHANGED TO:",i),!i)return this.cities=[],this.localitySuggestions=[],this.pincodeOptions=[],this.marketingForm.patchValue({city:"",locality:"",pincode:""}),void console.log("\u26a0\ufe0f State cleared, cities reset");this.localitySuggestions=[],this.pincodeOptions=[],this.selectedStateId=i,this.marketingForm.patchValue({city:"",locality:"",pincode:""}),console.log("\u{1f4e1} Fetching cities for stateId:",i),this.locationService.getCitiesByState(i).subscribe({next:o=>{console.log("\u{1f3d9}\ufe0f CITIES LOADED:",o),this.cities=o,this.cdr.detectChanges(),console.log("\u2705 Cities dropdown should now show",this.cities.length,"cities")},error:o=>{console.error("\u274c ERROR loading cities:",o),this.cities=[]}})}onCityChange(e){const i=Number(e);if(console.log("\u{1f3d9}\ufe0f CITY CHANGED TO:",i),!i)return this.localitySuggestions=[],this.marketingForm.patchValue({locality:"",pincode:""}),this.pincodeOptions=[],void console.log("\u26a0\ufe0f City cleared, localities reset");this.selectedCityId=i,this.marketingForm.patchValue({locality:"",pincode:""}),console.log("\u{1f4e1} Fetching localities for cityId:",i),this.locationHierarchyService.getLocalitiesByCity(i).subscribe({next:o=>{console.log("\u{1f3d8}\ufe0f LOCALITIES LOADED:",o),this.localitySuggestions=o.map(r=>r.name),this.localityObjects=o,this.cdr.detectChanges(),console.log("\u2705 Localities dropdown should now show",this.localitySuggestions.length,"localities")},error:o=>{console.error("\u274c ERROR loading localities:",o),this.localitySuggestions=[]}})}onLocalityChange(e){if(console.log("\u{1f3d8}\ufe0f LOCALITY CHANGED TO:",e),!e)return this.pincodeOptions=[],this.marketingForm.patchValue({pincode:""}),void console.log("\u26a0\ufe0f Locality cleared, pincodes reset");const i=this.localityObjects||[],o=i.find(r=>r.name===e);if(console.log("\u{1f50d} Looking for locality object:",e,"in",i),console.log("\u2705 Found locality:",o),o){const r=o.id;console.log("\u{1f4e1} Fetching pincodes for localityId:",r),this.locationHierarchyService.getPincodesByLocality(r).subscribe({next:s=>{console.log("\u{1f4ee} PINCODES LOADED:",s),this.pincodeOptions=s.map(l=>l.value||l.pincode),this.cdr.detectChanges(),1===this.pincodeOptions.length&&(this.marketingForm.patchValue({pincode:this.pincodeOptions[0]}),console.log("\u2705\u2705\u2705 AUTO-SELECTED PINCODE:",this.pincodeOptions[0])),console.log("\u2705 Pincodes dropdown should now show",this.pincodeOptions.length,"pincodes")},error:s=>{console.error("\u274c ERROR loading pincodes:",s),this.pincodeOptions=[]}})}else console.warn("\u26a0\ufe0f Locality object not found for:",e)}onManualToggle(){this.manualLocationEntry=!this.manualLocationEntry,console.log("\u{1f504} Manual entry toggled:",this.manualLocationEntry),this.manualLocationEntry&&this.marketingForm.patchValue({state:"",city:"",locality:"",pincode:""})}getStateName(e){const i=this.states.find(o=>o.id===Number(e));return i?i.name:""}getCityName(e){const i=this.cities.find(o=>o.id===Number(e));return i?i.name:""}static{this.\u0275fac=function(i){return new(i||t)(j(zc),j(fn),j(cf),j(rw),j(cl),j(Js),j(wA),j(ji))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-marketing-form"]],decls:215,vars:34,consts:[[1,"marketing-form-container"],[1,"form-header"],[1,"header-content"],[1,"title-section"],[1,"icon-wrapper"],[1,"fas","fa-rocket"],[1,"title-text"],[1,"form-title"],[1,"form-subtitle"],[1,"generation-info"],[1,"fas","fa-clock"],[1,"progress-indicator"],[1,"progress-step","active"],[1,"step-number"],[1,"step-label"],[1,"progress-line"],[1,"progress-step"],[1,"marketing-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"fas","fa-info-circle"],[1,"form-row"],[1,"form-group"],["for","campaignManager",1,"form-label"],[1,"input-wrapper"],[1,"fas","fa-user","input-icon"],["type","text","id","campaignManager","formControlName","campaignManager","placeholder","Enter campaign manager name",1,"form-control"],["class","error-message",4,"ngIf"],["for","employeeCode",1,"form-label"],[1,"fas","fa-id-badge","input-icon"],["type","text","id","employeeCode","formControlName","employeeCode","placeholder","Enter employee ID",1,"form-control"],[1,"form-group","full-width"],["for","taskDescription",1,"form-label"],[1,"fas","fa-align-left","input-icon"],["id","taskDescription","formControlName","taskDescription","rows","4","placeholder","Describe the marketing campaign details, objectives, and target audience...",1,"form-control"],["for","taskDate",1,"form-label"],[1,"fas","fa-calendar-alt","input-icon"],["type","date","id","taskDate","formControlName","taskDate",1,"form-control"],["for","deadline",1,"form-label"],[1,"fas","fa-calendar-check","input-icon"],["type","date","id","deadline","formControlName","deadline",1,"form-control"],["for","priority",1,"form-label"],[1,"fas","fa-flag","input-icon"],["id","priority","formControlName","priority",1,"form-control"],["value","Low"],["value","Medium"],["value","High"],["value","Urgent"],[1,"form-label"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","isUrgent",1,"checkbox-input",3,"change","checked"],[1,"checkbox-custom"],[1,"checkbox-text"],[1,"fas","fa-building"],["for","clientName",1,"form-label"],[1,"fas","fa-building","input-icon"],["type","text","id","clientName","formControlName","clientName","placeholder","Enter client or department name",1,"form-control"],["for","projectCode",1,"form-label"],[1,"fas","fa-code","input-icon"],["type","text","id","projectCode","formControlName","projectCode","placeholder","e.g., MKT-2024-001",1,"form-control"],["for","consultantName",1,"form-label"],[1,"fas","fa-user-tie","input-icon"],["type","text","id","consultantName","formControlName","consultantName","placeholder","Enter consultant name",1,"form-control"],["for","campCode",1,"form-label"],[1,"fas","fa-tag","input-icon"],["type","text","id","campCode","formControlName","campCode","placeholder","Enter campaign code",1,"form-control"],[2,"margin","30px 0","padding","30px","background","#f8f9fa","border-radius","12px","border","1px solid #e0e0e0"],[2,"display","flex","align-items","center","gap","12px","margin-bottom","25px","padding-bottom","15px","border-bottom","2px solid #ddd"],[1,"fas","fa-map-marked-alt",2,"font-size","1.5rem","color","#5b7cff"],[2,"margin","0","color","#5b7cff","font-size","1.3rem","font-weight","600"],[2,"margin-bottom","25px"],[2,"display","flex","align-items","center","gap","10px","cursor","pointer","font-size","0.95rem"],["type","checkbox",2,"width","18px","height","18px","cursor","pointer",3,"change","checked"],["style","display: grid; grid-template-columns: 1fr 1fr; gap: 25px;",4,"ngIf"],["style","display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; background: #fff9e6; border-radius: 8px; border: 2px solid #ffd966;",4,"ngIf"],["style","margin-top: 25px; padding: 15px; background: #e8f4fd; border: 1px solid #b3d9f2; border-radius: 6px;",4,"ngIf"],[1,"multi-select-container"],["class","loading-text",4,"ngIf"],["class","checkbox-group",4,"ngFor","ngForOf","ngForTrackBy"],["for","expectedReach",1,"form-label"],["type","number","id","expectedReach","formControlName","expectedReach","placeholder","e.g., 10000",1,"form-control"],["for","conversionGoal",1,"form-label"],["type","text","id","conversionGoal","formControlName","conversionGoal","placeholder","e.g., 5%",1,"form-control"],["for","estimatedHours",1,"form-label"],["type","number","id","estimatedHours","formControlName","estimatedHours","placeholder","e.g., 40","step","0.5",1,"form-control"],["for","budgetCode",1,"form-label"],["type","text","id","budgetCode","formControlName","budgetCode","placeholder","e.g., BUD-2024-MKT",1,"form-control"],["for","kpis",1,"form-label"],["id","kpis","formControlName","kpis","rows","2","placeholder","Enter KPIs for this campaign..."],["for","marketingMaterials",1,"form-label"],["id","marketingMaterials","formControlName","marketingMaterials","rows","2","placeholder","List all marketing materials needed..."],["for","approvalContact",1,"form-label"],["type","email","id","approvalContact","formControlName","approvalContact","placeholder","approver@company.com",1,"form-control"],["for","approvalRequired",1,"form-label"],[1,"checkbox-container"],["type","checkbox","id","approvalRequired","formControlName","approvalRequired",1,"checkbox-input",3,"change","checked"],["for","approvalRequired",1,"checkbox-label"],["for","additionalNotes",1,"form-label"],["id","additionalNotes","formControlName","additionalNotes","rows","3","placeholder","Any additional notes or special instructions..."],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","button",1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-print"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner",4,"ngIf"],["class","fas fa-save",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-message","style","background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%); color: white; padding: 20px 30px; border-radius: 15px; margin: 20px 0; display: flex; align-items: center; gap: 15px; box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);",4,"ngIf"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","25px"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","8px","font-weight","600","color","#333"],[1,"fas","fa-map-marker-alt"],[2,"color","red"],["formControlName","state",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-city"],["formControlName","city",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],[1,"fas","fa-search-location"],["formControlName","locality",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white",3,"change"],[1,"fas","fa-envelope-open-text"],["formControlName","pincode",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem","background","white"],[3,"value"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","20px","padding","20px","background","#fff9e6","border-radius","8px","border","2px solid #ffd966"],[2,"display","block","margin-bottom","8px","font-weight","600","color","#333"],["type","text","placeholder","Type State Name","formControlName","customLocation",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type City Name","formControlName","customLocation",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type Locality","formControlName","customLocation",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],["type","text","placeholder","Type Pincode","maxlength","6","formControlName","customLocation",2,"width","100%","padding","10px","border","1px solid #ccc","border-radius","6px","font-size","0.95rem"],[2,"margin-top","25px","padding","15px","background","#e8f4fd","border","1px solid #b3d9f2","border-radius","6px"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","10px"],[1,"fas","fa-info-circle",2,"color","#1976d2"],[2,"color","#1976d2"],[2,"display","flex","flex-wrap","wrap","gap","10px"],["style","display: inline-flex; align-items: center; gap: 6px; background: white; padding: 6px 12px; border-radius: 4px; border: 1px solid #ddd;",4,"ngIf"],[2,"display","inline-flex","align-items","center","gap","6px","background","white","padding","6px 12px","border-radius","4px","border","1px solid #ddd"],[1,"fas","fa-map-marker-alt",2,"color","#5b7cff"],[1,"fas","fa-city",2,"color","#5b7cff"],[1,"fas","fa-search-location",2,"color","#5b7cff"],[1,"fas","fa-envelope-open-text",2,"color","#5b7cff"],[1,"loading-text"],["type","checkbox",1,"checkbox-input",3,"change","value","checked"],[1,"spinner"],[1,"fas","fa-save"],[1,"success-message"],[1,"fas","fa-check-circle"],[1,"error-message",2,"background","linear-gradient(135deg, #e53e3e 0%, #c53030 100%)","color","white","padding","20px 30px","border-radius","15px","margin","20px 0","display","flex","align-items","center","gap","15px","box-shadow","0 4px 15px rgba(229, 62, 62, 0.3)"],[2,"margin","0","font-size","1.2rem","font-weight","600"]],template:function(i,o){if(1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),k(5,"i",5),p(),m(6,"div",6)(7,"h1",7),v(8,"Marketing Campaign Form"),p(),m(9,"p",8),v(10,"Action Medical Institute & Action Cancer Hospital"),p(),m(11,"div",9),k(12,"i",10),m(13,"span"),v(14),p()()()(),m(15,"div",11)(16,"div",12)(17,"span",13),v(18,"1"),p(),m(19,"span",14),v(20,"Campaign Info"),p()(),k(21,"div",15),m(22,"div",16)(23,"span",13),v(24,"2"),p(),m(25,"span",14),v(26,"Location"),p()(),k(27,"div",15),m(28,"div",16)(29,"span",13),v(30,"3"),p(),m(31,"span",14),v(32,"Marketing Details"),p()()()()(),m(33,"form",17),B("ngSubmit",function(){return o.onSubmit()}),m(34,"div",18)(35,"h3",19),k(36,"i",20),v(37," Campaign Information "),p(),m(38,"div",21)(39,"div",22)(40,"label",23),v(41,"Campaign Manager *"),p(),m(42,"div",24),k(43,"i",25)(44,"input",26),p(),R(45,Tee,3,0,"div",27),p(),m(46,"div",22)(47,"label",28),v(48,"Employee ID"),p(),m(49,"div",24),k(50,"i",29)(51,"input",30),p()()(),m(52,"div",21)(53,"div",31)(54,"label",32),v(55,"Campaign Description *"),p(),m(56,"div",24),k(57,"i",33),m(58,"textarea",34),v(59,"            "),p()(),R(60,See,3,0,"div",27),p()(),m(61,"div",21)(62,"div",22)(63,"label",35),v(64,"Campaign Start Date *"),p(),m(65,"div",24),k(66,"i",36)(67,"input",37),p(),R(68,Mee,3,0,"div",27),p(),m(69,"div",22)(70,"label",38),v(71,"Campaign End Date *"),p(),m(72,"div",24),k(73,"i",39)(74,"input",40),p(),R(75,kee,3,0,"div",27),p()(),m(76,"div",21)(77,"div",22)(78,"label",41),v(79,"Campaign Priority *"),p(),m(80,"div",24),k(81,"i",42),m(82,"select",43)(83,"option",44),v(84,"\u{1f7e2} Low Priority"),p(),m(85,"option",45),v(86,"\u{1f7e1} Medium Priority"),p(),m(87,"option",46),v(88,"\u{1f7e0} High Priority"),p(),m(89,"option",47),v(90,"\u{1f534} Urgent"),p()()(),R(91,Eee,3,0,"div",27),p(),m(92,"div",22)(93,"label",48),v(94,"Campaign Status"),p(),m(95,"div",49)(96,"label",50)(97,"input",51),B("change",function(s){return o.onCheckboxChange(s,"isUrgent")}),p(),k(98,"span",52),m(99,"span",53),v(100,"\u{1f6a8} Mark as Urgent Campaign"),p()()()()()(),m(101,"div",18)(102,"h3",19),k(103,"i",54),v(104," Project & Client Information "),p(),m(105,"div",21)(106,"div",22)(107,"label",55),v(108,"Client/Department Name"),p(),m(109,"div",24),k(110,"i",56)(111,"input",57),p()(),m(112,"div",22)(113,"label",58),v(114,"Project Code"),p(),m(115,"div",24),k(116,"i",59)(117,"input",60),p()()(),m(118,"div",21)(119,"div",22)(120,"label",61),v(121,"Consultant Name"),p(),m(122,"div",24),k(123,"i",62)(124,"input",63),p()(),m(125,"div",22)(126,"label",64),v(127,"Campaign Code"),p(),m(128,"div",24),k(129,"i",65)(130,"input",66),p()()()(),m(131,"div",67)(132,"div",68),k(133,"i",69),m(134,"h3",70),v(135,"Location Details"),p()(),m(136,"div",71)(137,"label",72)(138,"input",73),B("change",function(){return o.onManualToggle()}),p(),m(139,"span"),v(140,"Location not found? Add Manually"),p()()(),R(141,Pee,37,5,"div",74)(142,Aee,21,0,"div",75)(143,Vee,10,4,"div",76),p(),m(144,"div",18)(145,"h3",19),v(146,"Campaign Types & Locations"),p(),m(147,"div",21)(148,"div",22)(149,"label",48),v(150,"Campaign Types (Select all that apply)"),p(),m(151,"div",77),R(152,jee,2,0,"div",78)(153,$ee,6,3,"div",79),p()()()(),m(154,"div",18)(155,"h3",19),v(156,"Campaign Details"),p(),m(157,"div",21)(158,"div",22)(159,"label",80),v(160,"Expected Reach"),p(),k(161,"input",81),p(),m(162,"div",22)(163,"label",82),v(164,"Conversion Goal (%)"),p(),k(165,"input",83),p()(),m(166,"div",21)(167,"div",22)(168,"label",84),v(169,"Estimated Hours"),p(),k(170,"input",85),p(),m(171,"div",22)(172,"label",86),v(173,"Budget Code"),p(),k(174,"input",87),p()(),m(175,"div",21)(176,"div",31)(177,"label",88),v(178,"Key Performance Indicators (KPIs)"),p(),k(179,"textarea",89),p()(),m(180,"div",21)(181,"div",31)(182,"label",90),v(183,"Marketing Materials Required"),p(),k(184,"textarea",91),p()(),m(185,"div",21)(186,"div",22)(187,"label",92),v(188,"Approval Contact"),p(),k(189,"input",93),p(),m(190,"div",22)(191,"label",94),v(192,"Approval Required"),p(),m(193,"div",95)(194,"input",96),B("change",function(s){return o.onCheckboxChange(s,"approvalRequired")}),p(),m(195,"label",97),v(196,"Requires approval"),p()()()(),m(197,"div",21)(198,"div",31)(199,"label",98),v(200,"Additional Notes"),p(),k(201,"textarea",99),p()()(),m(202,"div",100)(203,"button",101),B("click",function(){return o.resetForm()}),k(204,"i",102),v(205," Reset Form "),p(),m(206,"button",103),B("click",function(){return o.printForm()}),k(207,"i",104),v(208," Print Form "),p(),m(209,"button",105),R(210,Hee,1,0,"span",106)(211,Uee,1,0,"i",107),v(212),p()(),R(213,zee,6,1,"div",108)(214,Gee,7,1,"div",109),p()()),2&i){let r,s,l;b(14),q("Generated on: ",o.getCurrentDateTime(),""),b(19),M("formGroup",o.marketingForm),b(11),Z("error",(null==o.campaignManager?null:o.campaignManager.invalid)&&(null==o.campaignManager?null:o.campaignManager.touched)),b(),M("ngIf",(null==o.campaignManager?null:o.campaignManager.invalid)&&(null==o.campaignManager?null:o.campaignManager.touched)),b(13),Z("error",(null==o.taskDescription?null:o.taskDescription.invalid)&&(null==o.taskDescription?null:o.taskDescription.touched)),b(2),M("ngIf",(null==o.taskDescription?null:o.taskDescription.invalid)&&(null==o.taskDescription?null:o.taskDescription.touched)),b(7),Z("error",(null==o.taskDate?null:o.taskDate.invalid)&&(null==o.taskDate?null:o.taskDate.touched)),b(),M("ngIf",(null==o.taskDate?null:o.taskDate.invalid)&&(null==o.taskDate?null:o.taskDate.touched)),b(6),Z("error",(null==o.deadline?null:o.deadline.invalid)&&(null==o.deadline?null:o.deadline.touched)),b(),M("ngIf",(null==o.deadline?null:o.deadline.invalid)&&(null==o.deadline?null:o.deadline.touched)),b(7),Z("error",(null==o.priority?null:o.priority.invalid)&&(null==o.priority?null:o.priority.touched)),b(9),M("ngIf",(null==o.priority?null:o.priority.invalid)&&(null==o.priority?null:o.priority.touched)),b(6),M("checked",null==(r=o.marketingForm.get("isUrgent"))?null:r.value),b(41),M("checked",o.manualLocationEntry),b(3),M("ngIf",!o.manualLocationEntry),b(),M("ngIf",o.manualLocationEntry),b(),M("ngIf",(null==(s=o.marketingForm.get("state"))?null:s.value)||(null==(s=o.marketingForm.get("city"))?null:s.value)||(null==(s=o.marketingForm.get("locality"))?null:s.value)||(null==(s=o.marketingForm.get("pincode"))?null:s.value)),b(9),M("ngIf",0===o.taskTypes.length),b(),M("ngForOf",o.taskTypes)("ngForTrackBy",o.trackByTaskTypeId),b(41),M("checked",null==(l=o.marketingForm.get("approvalRequired"))?null:l.value),b(9),M("disabled",o.isLoading),b(3),M("disabled",o.isLoading),b(3),M("disabled",o.isLoading||!o.marketingForm.valid),b(),M("ngIf",o.isLoading),b(),M("ngIf",!o.isLoading),b(),q(" ",o.isLoading?"Creating Campaign...":"Create Marketing Campaign"," "),b(),M("ngIf",o.showSuccess&&o.successMessage),b(),M("ngIf",o.errorMessage)}},dependencies:[Wr,co,Ws,Za,Ka,fo,Uc,wh,Zs,Ro,Gs,Ih,Yr,qs],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{box-sizing:border-box}.marketing-form-container[_ngcontent-%COMP%]{max-width:1400px;margin:20px auto;padding:0;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:30px;box-shadow:0 30px 60px #0003;overflow:hidden;position:relative;border:1px solid rgba(255,255,255,.1);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.marketing-form-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#ff6b6b,#4ecdc4,#45b7d1,#96ceb4,#feca57);animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shimmer{0%,to{opacity:1}50%{opacity:.7}}.form-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:50px 40px;position:relative;overflow:hidden}.form-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-30px) rotate(180deg)}}.header-content[_ngcontent-%COMP%]{position:relative;z-index:2}.title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px;margin-bottom:40px}.icon-wrapper[_ngcontent-%COMP%]{width:90px;height:90px;background:#ffffff26;border-radius:25px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:2px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #0000001a;transition:all .3s ease}.icon-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 15px 40px #0003}.icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)}.title-text[_ngcontent-%COMP%]{flex:1}.form-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:3.2rem;font-weight:900;color:#fff;margin:0 0 15px;text-shadow:0 4px 8px rgba(0,0,0,.3);letter-spacing:-1px;line-height:1.1}.form-subtitle[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1.3rem;color:#fffffff2;margin:0 0 15px;font-weight:400;line-height:1.6;max-width:600px}.generation-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-family:Inter,sans-serif;font-size:.95rem;color:#fffc;background:#ffffff1a;padding:8px 16px;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);display:inline-flex;margin-top:10px}.generation-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffe6}.progress-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin-top:30px}.progress-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;opacity:.6;transition:all .3s ease}.progress-step.active[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.3)}.progress-step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#ffffff4d;box-shadow:0 4px 15px #0003}.step-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.progress-line[_ngcontent-%COMP%]{width:40px;height:2px;background:#ffffff4d;border-radius:1px}.marketing-form[_ngcontent-%COMP%]{background:#fff;padding:50px 40px;position:relative}.form-section[_ngcontent-%COMP%]{margin-bottom:50px;padding:30px;background:#fafbfc;border-radius:20px;border:1px solid #e8ecf0;box-shadow:0 4px 20px #0000000d;transition:all .3s ease;position:relative}.form-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2,#f093fb);border-radius:20px 20px 0 0}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #0000001a;transform:translateY(-2px)}.section-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:1.8rem;font-weight:700;color:#2d3748;margin:0 0 25px;display:flex;align-items:center;gap:12px;padding-bottom:15px;border-bottom:3px solid #667eea;position:relative}.section-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-3px;left:0;width:60px;height:3px;background:linear-gradient(90deg,#ff6b6b,#4ecdc4);border-radius:2px}.section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:25px;margin-bottom:25px}.form-row.single[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.form-group[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#e2e8f0,transparent);opacity:0;transition:opacity .3s ease}.form-group[_ngcontent-%COMP%]:focus-within:after{opacity:1}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1rem;font-weight:600;color:#4a5568;margin-bottom:8px;display:block;transition:color .3s ease}.form-group[_ngcontent-%COMP%]:focus-within   .form-label[_ngcontent-%COMP%]{color:#667eea}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:15px;color:#a0aec0;font-size:1.1rem;z-index:2;transition:all .3s ease}.form-group[_ngcontent-%COMP%]:focus-within   .input-icon[_ngcontent-%COMP%]{color:#667eea;transform:scale(1.1)}.form-control[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1rem;width:100%;padding:15px 15px 15px 50px;border:2px solid #e2e8f0;border-radius:12px;background:#fff;color:#2d3748;transition:all .3s ease;outline:none;box-shadow:0 2px 4px #00000005}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-1px)}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e;box-shadow:0 0 0 3px #e53e3e1a}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0;font-style:italic}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:120px;padding-top:15px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#e53e3e;font-size:.9rem;font-weight:500;margin-top:8px;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:20px 0;padding:15px 20px;background:#f7fafc;border-radius:12px;border:2px solid #e2e8f0;transition:all .3s ease;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;accent-color:#667eea;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1rem;font-weight:500;color:#4a5568;cursor:pointer;margin:0}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding-top:30px;border-top:2px solid #e2e8f0}.btn[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1.1rem;font-weight:600;padding:15px 40px;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;position:relative;overflow:hidden;min-width:160px;z-index:1}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#fff3;border-radius:50%;transform:translate(-50%,-50%);transition:width .6s,height .6s;z-index:-1}.btn[_ngcontent-%COMP%]:active:after{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea66}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #667eea99}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a0aec0,#718096);color:#fff;box-shadow:0 4px 15px #a0aec066}.btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #a0aec099}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);color:#fff;box-shadow:0 4px 15px #4299e166}.btn-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #4299e199}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.loading[_ngcontent-%COMP%]{position:relative;pointer-events:none}.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px 0 0 -10px;border:2px solid transparent;border-top:2px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:8px}.success-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;padding:20px 30px;border-radius:15px;margin:20px 0;display:flex;align-items:center;gap:15px;box-shadow:0 4px 15px #48bb784d;animation:_ngcontent-%COMP%_successSlideIn .6s ease}@keyframes _ngcontent-%COMP%_successSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.9)}50%{transform:translateY(-10px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.success-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.form-control[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 8px 25px #667eea26}.marketing-form.loading[_ngcontent-%COMP%]{position:relative}.marketing-form.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#fffc;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:1000;display:flex;align-items:center;justify-content:center}.marketing-form.loading[_ngcontent-%COMP%]:after{content:"Processing...";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:Inter,sans-serif;font-size:1.2rem;font-weight:600;color:#667eea;z-index:1001}.form-section[_ngcontent-%COMP%]{transition:all .4s cubic-bezier(.4,0,.2,1)}.form-section[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 40px #0000001f}@media (max-width: 768px){.marketing-form-container[_ngcontent-%COMP%]{margin:10px;border-radius:20px}.form-header[_ngcontent-%COMP%]{padding:30px 20px}.title-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:20px}.form-title[_ngcontent-%COMP%]{font-size:2.2rem}.form-subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.marketing-form[_ngcontent-%COMP%]{padding:30px 20px}.form-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:30px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:100%;max-width:300px}}@media (max-width: 480px){.form-title[_ngcontent-%COMP%]{font-size:1.8rem}.section-title[_ngcontent-%COMP%]{font-size:1.4rem}.form-control[_ngcontent-%COMP%]{padding:12px 12px 12px 45px}.input-icon[_ngcontent-%COMP%]{left:12px}}@media print{.marketing-form-container[_ngcontent-%COMP%]{box-shadow:none;border:2px solid #000;background:#fff!important}.form-header[_ngcontent-%COMP%]{background:#fff!important;color:#000!important}.form-actions[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .progress-indicator[_ngcontent-%COMP%]{display:none}.generation-info[_ngcontent-%COMP%]{background:#f5f5f5!important;color:#333!important;border:1px solid #ccc!important}}select[_ngcontent-%COMP%], select[_ngcontent-%COMP%]:focus{appearance:none;-webkit-appearance:none;-moz-appearance:none;box-shadow:none;background-image:none!important}',".searchable-dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.dropdown-options[_ngcontent-%COMP%]{position:absolute!important;top:calc(100% + 2px)!important;left:0!important;right:0!important;width:100%!important;background:#fff!important;border:2px solid #667eea!important;border-top:1px solid #e2e8f0!important;border-radius:0 0 12px 12px!important;max-height:400px!important;overflow-y:auto!important;overflow-x:hidden!important;z-index:99999!important;box-shadow:0 8px 25px #667eea40!important;margin:0!important;padding:0!important;animation:_ngcontent-%COMP%_dropdownSlideIn .3s ease!important;display:block!important;visibility:visible!important;opacity:1!important}@keyframes _ngcontent-%COMP%_dropdownSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-option[_ngcontent-%COMP%]{padding:18px 20px!important;min-height:56px!important;cursor:pointer!important;border-bottom:1px solid #f0f4f8!important;transition:background-color .15s ease,padding-left .15s ease!important;background:#fff!important;font-size:1.1rem!important;font-family:Inter,sans-serif!important;font-weight:500!important;color:#2d3748!important;display:block!important;line-height:1.4!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;margin:0!important;box-sizing:border-box!important}.dropdown-option[_ngcontent-%COMP%]:last-child{border-bottom:none!important;border-radius:0 0 10px 10px!important}.dropdown-option[_ngcontent-%COMP%]:hover, .dropdown-option.highlighted[_ngcontent-%COMP%]{background:#f0f7ff!important;color:#06c!important;font-weight:600!important;border-left:4px solid #667eea!important;padding-left:24px!important}.dropdown-option[_ngcontent-%COMP%]:active{background:#e0f0ff!important}.dropdown-option.no-results[_ngcontent-%COMP%]{background:#fffbeb!important;color:#92400e!important;font-weight:600!important;text-align:center!important;padding:24px!important;cursor:default!important;border-left:4px solid #fbbf24!important;min-height:80px!important}.dropdown-option.no-results[_ngcontent-%COMP%]:hover{background:#fffbeb!important;padding-left:24px!important;border-left:4px solid #fbbf24!important}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px!important}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9!important;border-radius:0 0 12px!important}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea!important;border-radius:10px!important}.dropdown-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#5568d3!important}input[formControlName=pincode][_ngcontent-%COMP%]{background:#f7fafc!important;border:2px solid #4CAF50!important;font-weight:600!important;font-family:Courier New,monospace!important;font-size:1.15rem!important;color:#2c3e50!important}input[formControlName=pincode][_ngcontent-%COMP%]:disabled, input[formControlName=pincode][readonly][_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)!important;cursor:not-allowed!important;border:2px solid #66BB6A!important;color:#1b5e20!important;font-weight:700!important;opacity:1!important}input[formControlName=campCode][_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb)!important;border:2px solid #2196F3!important;font-weight:700!important;font-family:Courier New,monospace!important;font-size:1.15rem!important;color:#0d47a1!important;cursor:not-allowed!important;opacity:1!important}@media (max-width: 768px){.dropdown-options[_ngcontent-%COMP%]{max-height:300px!important}.dropdown-option[_ngcontent-%COMP%]{padding:16px 18px!important;min-height:50px!important;font-size:1rem!important}}@media (max-width: 480px){.dropdown-options[_ngcontent-%COMP%]{max-height:250px!important}.dropdown-option[_ngcontent-%COMP%]{padding:14px 16px!important;min-height:48px!important;font-size:.95rem!important}}"]})}}return t})();var wr=X(244);let qee=(()=>{class t{constructor(e){this.http=e,this.locationSubject=new vt(null),this.currentlyTrackedEmployeeId=null,this.baseUrl=`${gt.apiUrl}/tracking`,this.locationUpdates$=this.locationSubject.asObservable().pipe(nn(i=>null!==i))}connect(e){return this.currentlyTrackedEmployeeId=e,this.hubConnection&&this.hubConnection.state===Rt.Connected?Promise.resolve():(this.hubConnection||(this.hubConnection=this.buildHubConnection(gt.trackingHubUrl??gt.signalRHubUrl),this.hubConnection.on("ReceiveLocationUpdate",i=>{i&&(this.currentlyTrackedEmployeeId&&i.employeeId!==this.currentlyTrackedEmployeeId||this.locationSubject.next(i))})),this.hubConnection.start().catch(i=>{if(console.error("Tracking hub connection failed, retrying with LAN URL...",i),gt.lanTrackingHubUrl)return this.hubConnection=this.buildHubConnection(gt.lanTrackingHubUrl),this.hubConnection.on("ReceiveLocationUpdate",o=>{o&&(this.currentlyTrackedEmployeeId&&o.employeeId!==this.currentlyTrackedEmployeeId||this.locationSubject.next(o))}),this.hubConnection.start();throw i}))}disconnect(){this.hubConnection&&this.hubConnection.state!==Rt.Disconnected&&this.hubConnection.stop().catch(e=>console.error("Error stopping tracking hub",e))}getLatestLocation(e){return this.http.get(`${this.baseUrl}/${e}/latest`)}getRecentLocations(e,i=4,o=200){return this.http.get(`${this.baseUrl}/${e}/history`,{params:{hours:i,max:o}})}simulateTrip(e){return this.http.post(`${this.baseUrl}/simulate-trip`,e)}buildHubConnection(e){const i=localStorage.getItem("token")??"";return(new bA).withUrl(e,{accessTokenFactory:()=>i}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>Math.min(2e3*(o.previousRetryCount+1),1e4)}).configureLogging(U.Information).build()}static{this.\u0275fac=function(i){return new(i||t)(oe(ho))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Zee(t,n){if(1&t&&(m(0,"option",38),v(1),p()),2&t){const e=n.$implicit;M("value",e.employeeId),b(),Ps(" ",e.name," (",e.employeeCode||"ID "+e.employeeId,") ")}}function Kee(t,n){if(1&t&&(m(0,"small",39),v(1),Ba(2,"date"),p()),2&t){const e=I();b(),q(" Last update: ",Ku(2,1,e.latestLocation.timestamp,"shortTime")," ")}}function Yee(t,n){1&t&&k(0,"span",40)}function Qee(t,n){if(1&t&&(m(0,"div",41)(1,"div",42)(2,"div",43),k(3,"i",44),p(),m(4,"div")(5,"div",45),v(6,"Current Coordinates"),p(),m(7,"div",46),v(8),Ba(9,"number"),Ba(10,"number"),p(),m(11,"small",39),v(12),Ba(13,"date"),p()()()()),2&t){const e=I();b(8),Ps(" ",Ku(9,3,e.latestLocation.latitude,"1.4-4"),", ",Ku(10,6,e.latestLocation.longitude,"1.4-4")," "),b(4),q(" ",Ku(13,9,e.latestLocation.timestamp,"medium")," ")}}const DA=wr.icon({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[13,41]});wr.Marker.prototype.options.icon=DA;let Jee=(()=>{class t{constructor(e,i,o){this.employeeService=e,this.trackingService=i,this.fb=o,this.employees=[],this.selectedEmployeeId=null,this.latestLocation=null,this.statusMessage="Select an employee to start live tracking.",this.isConnecting=!1,this.isSimulating=!1,this.pathPoints=[],this.destroy$=new Ge,this.indiaBounds=wr.latLngBounds([6,68],[37,97]),this.defaultRouteId=1,this.demoRoutes={1:{start:[28.6139,77.209],end:[28.667756,77.116316],waypoints:80,intervalSeconds:1,label:"Connaught Place \u2192 Sri Balaji Action Medical Institute"},14:{start:[28.6412,77.2195],end:[28.667756,77.116316],waypoints:70,intervalSeconds:1,label:"Test Route to Sri Balaji Action Medical Institute (Paschim Vihar)"}},this.simulationForm=this.fb.group({startLatitude:[28.6139,[ce.required,ce.min(-90),ce.max(90)]],startLongitude:[77.209,[ce.required,ce.min(-180),ce.max(180)]],endLatitude:[28.4595,[ce.required,ce.min(-90),ce.max(90)]],endLongitude:[77.0266,[ce.required,ce.min(-180),ce.max(180)]],waypoints:[60,[ce.required,ce.min(50),ce.max(500)]],intervalSeconds:[1,[ce.required,ce.min(1),ce.max(2)]]}),this.applyDemoRouteForEmployee(this.defaultRouteId,!1)}ngOnInit(){this.loadEmployees(),this.initMap(),this.applyDemoRouteForEmployee(this.defaultRouteId),this.trackingService.locationUpdates$.pipe(Vt(this.destroy$)).subscribe(e=>this.handleLocationUpdate(e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.trackingService.disconnect(),this.map&&this.map.remove()}onEmployeeChange(e){const i=Number(e.target.value);this.selectedEmployeeId=Number.isNaN(i)?null:i,this.applyDemoRouteForEmployee(this.selectedEmployeeId),this.selectedEmployeeId?this.startTracking(this.selectedEmployeeId):this.statusMessage="Select a valid employee to begin tracking."}startSimulation(){if(!this.selectedEmployeeId)return void(this.statusMessage="Select an employee before simulating a trip.");if(this.simulationForm.invalid)return void this.simulationForm.markAllAsTouched();this.isSimulating=!0;const e={employeeId:this.selectedEmployeeId,...this.simulationForm.value};this.trackingService.simulateTrip(e).subscribe({next:()=>{this.statusMessage="Simulation initiated. Watch the map for live updates.",this.isSimulating=!1},error:i=>{console.error("Simulation error",i),this.statusMessage="Unable to start simulation. Please verify backend connectivity.",this.isSimulating=!1}})}loadEmployees(){this.employeeService.getEmployees().subscribe({next:e=>{this.employees=e,e.length&&!this.selectedEmployeeId&&(this.selectedEmployeeId=e[0].employeeId,this.startTracking(this.selectedEmployeeId))},error:e=>{console.error("Unable to load employees",e),this.statusMessage="Unable to load employees. Please ensure backend is reachable."}})}startTracking(e){this.isConnecting=!0,this.statusMessage="Connecting to live tracking service...",this.trackingService.connect(e).then(()=>{this.isConnecting=!1,this.statusMessage="Live tracking active."}).catch(i=>{console.error("Tracking connection error",i),this.isConnecting=!1,this.statusMessage="Unable to connect to tracking hub. Please retry."}),this.trackingService.getLatestLocation(e).subscribe({next:i=>{i?this.handleLocationUpdate(i):this.handleMissingHistory(e)},error:i=>{404===i.status?this.handleMissingHistory(e):(console.error("Unable to load latest location",i),this.statusMessage="Unable to load the latest location. Please try again.")}})}initMap(){this.map||(this.map=wr.map("trackingMap",{zoomControl:!0,maxBounds:this.indiaBounds,maxBoundsViscosity:1}).setView([28.6139,77.209],6),wr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",minZoom:4,maxZoom:18}).addTo(this.map),this.map.whenReady(()=>{if(this.latestLocation){const e=wr.latLng(this.latestLocation.latitude,this.latestLocation.longitude);this.renderMarkerAt(e,!1)}}))}handleLocationUpdate(e){this.latestLocation=e;const i=wr.latLng(e.latitude,e.longitude);this.indiaBounds.contains(i)?(this.renderMarkerAt(i,!0),this.statusMessage=`Live location for employee ${e.employeeId}: ${i.lat.toFixed(4)}, ${i.lng.toFixed(4)}`):this.statusMessage="Received coordinates outside India bounds."}handleMissingHistory(e){this.latestLocation=null,this.statusMessage='No location history yet. Use "Simulate Trip" to generate a sample route.',this.applyDemoRouteForEmployee(e)}applyDemoRouteForEmployee(e,i=!0){const o=e&&this.demoRoutes[e]||this.demoRoutes[this.defaultRouteId];o&&(this.simulationForm.patchValue({startLatitude:o.start[0],startLongitude:o.start[1],endLatitude:o.end[0],endLongitude:o.end[1],waypoints:o.waypoints,intervalSeconds:o.intervalSeconds},{emitEvent:!1}),i&&this.previewStaticPosition(o))}previewStaticPosition(e){const i=wr.latLng(e.end[0],e.end[1]);this.map||this.initMap(),this.map&&this.map.whenReady(()=>{setTimeout(()=>{this.renderMarkerAt(i,!1)},100)}),this.statusMessage=`Previewing ${e.label}. Click "Simulate Trip" to animate the route.`}renderMarkerAt(e,i=!0){if(this.map||this.initMap(),this.map){if(this.marker){this.marker.setLatLng(e);const o=this.employees.find(r=>r.employeeId===this.selectedEmployeeId)?.name||"Employee";this.marker.setPopupContent(`<strong>${o}</strong><br>Lat: ${e.lat.toFixed(6)}<br>Lng: ${e.lng.toFixed(6)}`)}else{this.marker=wr.marker(e,{icon:DA,zIndexOffset:1e3,riseOnHover:!0}).addTo(this.map);const o=this.employees.find(r=>r.employeeId===this.selectedEmployeeId)?.name||"Employee";this.marker.bindPopup(`<strong>${o}</strong><br>Lat: ${e.lat.toFixed(6)}<br>Lng: ${e.lng.toFixed(6)}`).openPopup()}this.marker&&!this.map.hasLayer(this.marker)&&this.marker.addTo(this.map),this.pathLine?i?(this.pathPoints.push(e),this.pathPoints.length>200&&this.pathPoints.shift(),this.pathLine.setLatLngs(this.pathPoints)):(this.pathPoints=[e],this.pathLine.setLatLngs(this.pathPoints)):(this.pathLine=wr.polyline([e],{color:"#06b6d4",weight:4,opacity:.8}).addTo(this.map),this.pathPoints=[e]),this.map.flyTo(e,14,{duration:1,animate:!0})}else console.error("Map not initialized")}static{this.\u0275fac=function(i){return new(i||t)(j(lf),j(qee),j(zc))}}static{this.\u0275cmp=Ft({type:t,selectors:[["app-tracking"]],decls:62,vars:12,consts:[[1,"tracking-page","container-fluid","py-4"],[1,"row","g-4"],[1,"col-lg-4"],[1,"card","control-card","shadow-sm","h-100"],[1,"card-body"],[1,"card-title","d-flex","align-items-center","gap-2","mb-3"],[1,"bi","bi-geo-fill","text-info"],[1,"mb-4"],[1,"form-label","fw-semibold"],[1,"bi","bi-person-bounding-box","me-1","text-primary"],[1,"form-select",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"status-banner","mb-4"],[1,"status-indicator"],[1,"mb-0","fw-semibold"],["class","text-muted",4,"ngIf"],[1,"simulation-form"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","fw-semibold","text-uppercase","text-muted"],[1,"badge","bg-info","bg-opacity-25","text-info"],[3,"ngSubmit","formGroup"],[1,"row","g-2"],[1,"col-6"],[1,"form-label","small","text-muted"],["type","number","formControlName","startLatitude","step","0.0001",1,"form-control","form-control-sm"],["type","number","formControlName","startLongitude","step","0.0001",1,"form-control","form-control-sm"],["type","number","formControlName","endLatitude","step","0.0001",1,"form-control","form-control-sm"],["type","number","formControlName","endLongitude","step","0.0001",1,"form-control","form-control-sm"],["type","number","formControlName","waypoints","min","50","max","500",1,"form-control","form-control-sm"],["type","number","formControlName","intervalSeconds","min","1","max","2",1,"form-control","form-control-sm"],["type","submit",1,"btn","btn-primary","w-100","mt-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","telemetry-card mt-4",4,"ngIf"],[1,"col-lg-8"],[1,"card","map-card","shadow-sm","h-100"],[1,"card-body","p-0"],["id","trackingMap",1,"tracking-map"],[3,"value"],[1,"text-muted"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"telemetry-card","mt-4"],[1,"d-flex","align-items-center","gap-3"],[1,"telemetry-icon"],[1,"bi","bi-compass"],[1,"fw-semibold","text-uppercase","text-muted","small","mb-1"],[1,"fw-bold","fs-6"]],template:function(i,o){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),k(6,"i",6),v(7," Live Tracking Controls "),p(),m(8,"div",7)(9,"label",8),k(10,"i",9),v(11,"Employee "),p(),m(12,"select",10),B("change",function(s){return o.onEmployeeChange(s)}),m(13,"option",11),v(14,"Select employee"),p(),R(15,Zee,2,3,"option",12),p()(),m(16,"div",13),k(17,"div",14),m(18,"div")(19,"p",15),v(20),p(),R(21,Kee,3,4,"small",16),p()(),m(22,"div",17)(23,"div",18)(24,"h6",19),v(25,"Simulate Trip"),p(),m(26,"span",20),v(27," Generates 50+ waypoints "),p()(),m(28,"form",21),B("ngSubmit",function(){return o.startSimulation()}),m(29,"div",22)(30,"div",23)(31,"label",24),v(32,"Start Latitude"),p(),k(33,"input",25),p(),m(34,"div",23)(35,"label",24),v(36,"Start Longitude"),p(),k(37,"input",26),p(),m(38,"div",23)(39,"label",24),v(40,"End Latitude"),p(),k(41,"input",27),p(),m(42,"div",23)(43,"label",24),v(44,"End Longitude"),p(),k(45,"input",28),p(),m(46,"div",23)(47,"label",24),v(48,"Waypoints"),p(),k(49,"input",29),p(),m(50,"div",23)(51,"label",24),v(52,"Interval (seconds)"),p(),k(53,"input",30),p()(),m(54,"button",31),R(55,Yee,1,0,"span",32),v(56," Simulate Trip "),p()()(),R(57,Qee,14,12,"div",33),p()()(),m(58,"div",34)(59,"div",35)(60,"div",36),k(61,"div",37),p()()()()()),2&i&&(b(12),M("value",o.selectedEmployeeId||""),b(3),M("ngForOf",o.employees),b(),Z("active",o.isConnecting),b(),Z("live",!o.isConnecting),b(3),ne(o.statusMessage),b(),M("ngIf",o.latestLocation),b(7),M("formGroup",o.simulationForm),b(26),M("disabled",o.isSimulating||!o.selectedEmployeeId),b(),M("ngIf",o.isSimulating),b(2),M("ngIf",o.latestLocation))},dependencies:[Wr,co,Ws,Za,Ka,fo,Uc,Ro,Gs,xh,ym,Yr,qs,Rb,LE],styles:[".tracking-page[_ngcontent-%COMP%]{min-height:calc(100vh - 120px)}.map-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;border:none}.tracking-map[_ngcontent-%COMP%]{width:100%;height:75vh;min-height:500px}.control-card[_ngcontent-%COMP%]{border-radius:20px;border:none}.status-banner[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.85rem 1rem;border-radius:16px;background:#0d6efd14;border:1px solid rgba(13,110,253,.15);align-items:center}.status-banner.active[_ngcontent-%COMP%]{background:#ffc10726;border-color:#ffc10759}.status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:999px;background:#ffc107;box-shadow:0 0 10px #ffc107b3}.status-indicator.live[_ngcontent-%COMP%]{background:#28a745;box-shadow:0 0 10px #28a745b3}.simulation-form[_ngcontent-%COMP%]{padding:1rem;border-radius:16px;background:#f8f9fa;border:1px solid #eef0f2}.telemetry-card[_ngcontent-%COMP%]{padding:1rem;border-radius:16px;background:#0dcaf0;background:linear-gradient(135deg,#0dcaf0,#0d6efd);color:#fff;box-shadow:0 10px 30px #0d6efd40}.telemetry-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:#fff3;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.leaflet-marker-icon[_ngcontent-%COMP%]{z-index:1000!important;position:relative}.leaflet-marker-shadow[_ngcontent-%COMP%]{z-index:999!important}.tracking-employee-marker[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;z-index:1000!important}.tracking-employee-dot[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:50%;background:#ff6b6b;border:3px solid #ffffff;box-shadow:0 0 12px #ff6b6bcc;animation:_ngcontent-%COMP%_pulse 1.5s infinite;display:inline-flex}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.95);box-shadow:0 0 #ff6b6bb3}70%{transform:scale(1);box-shadow:0 0 0 12px #ff6b6b00}to{transform:scale(.95);box-shadow:0 0 #ff6b6b00}}@media (max-width: 991.98px){.tracking-map[_ngcontent-%COMP%]{height:50vh}}"]})}}return t})(),aw=(()=>{class t{constructor(e,i){this.authService=e,this.router=i}canActivate(){return!!this.authService.isLoggedIn()||(this.router.navigate(["/login"]),!1)}static{this.\u0275fac=function(i){return new(i||t)(oe(Qs),oe(fn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lw=(()=>{class t{constructor(e,i){this.authService=e,this.router=i}canActivate(e){const i=e.data.role,o=this.authService.getCurrentUser();return!(!o||o.role!==i)||(this.router.navigate("Admin"===o?.role?["/admin/dashboard"]:"Employee"===o?.role?["/employee/dashboard"]:["/login"]),!1)}static{this.\u0275fac=function(i){return new(i||t)(oe(Qs),oe(fn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Xee=(()=>{class t{constructor(e){this.router=e}intercept(e,i){const o=localStorage.getItem("token");let r=e.headers;!r.has("Content-Type")&&!(e.body instanceof FormData)&&(r=r.set("Content-Type","application/json")),o&&!r.has("Authorization")&&(r=r.set("Authorization",`Bearer ${o}`));const s=e.clone({headers:r});return i.handle(s).pipe(Bt(l=>{if(401===l.status){localStorage.removeItem("token"),localStorage.removeItem("user");try{this.router.navigate(["/login"])}catch{}}return Fo(()=>l)}))}static{this.\u0275fac=function(i){return new(i||t)(oe(fn))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();const ete=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:vQ},{path:"admin",canActivate:[aw,lw],data:{role:"Admin"},children:[{path:"dashboard",component:Dee},{path:"assign-task",component:xJ},{path:"marketing-form",component:Wee},{path:"tracking",component:Jee},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"employee",canActivate:[aw,lw],data:{role:"Employee"},children:[{path:"dashboard",component:pX},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"**",redirectTo:"/login"}];let tte=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=nt({type:t,bootstrap:[hQ]})}static{this.\u0275inj=Ae({providers:[Qs,cl,lf,cf,rw,Js,aw,lw,{provide:_I,useClass:Xee,multi:!0}],imports:[lx,dU,T7,xz,Ez,YG.forRoot(ete),SY]})}}return t})();d$().bootstrapModule(tte).catch(t=>console.error(t))},244:function(uf,hf){!function(X){"use strict";function de(a){var d,h,g,y;for(h=1,g=arguments.length;h<g;h++)for(d in y=arguments[h])a[d]=y[d];return a}var _d=Object.create||function(){function a(){}return function(d){return a.prototype=d,new a}}();function xe(a,d){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var g=h.call(arguments,2);return function(){return a.apply(d,g.length?g.concat(h.call(arguments)):arguments)}}var es=0;function He(a){return"_leaflet_id"in a||(a._leaflet_id=++es),a._leaflet_id}function zo(a,d,h){var g,y,D,E;return E=function(){g=!1,y&&(D.apply(h,y),y=!1)},D=function(){g?y=arguments:(a.apply(h,arguments),setTimeout(E,d),g=!0)},D}function ke(a,d,h){var g=d[1],y=d[0],D=g-y;return a===g&&h?a:((a-y)%D+D)%D+y}function $t(){return!1}function Qi(a,d){if(!1===d)return a;var h=Math.pow(10,void 0===d?6:d);return Math.round(a*h)/h}function ff(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Tr(a){return ff(a).split(/\s+/)}function _t(a,d){for(var h in Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?_d(a.options):{}),d)a.options[h]=d[h];return a.options}function pf(a,d,h){var g=[];for(var y in a)g.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(a[y]));return(d&&-1!==d.indexOf("?")?"&":"?")+g.join("&")}var gf=/\{ *([\w_ -]+) *\}/g;function vd(a,d){return a.replace(gf,function(h,g){var y=d[g];if(void 0===y)throw new Error("No value provided for variable "+h);return"function"==typeof y&&(y=y(d)),y})}var mi=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};function fl(a,d){for(var h=0;h<a.length;h++)if(a[h]===d)return h;return-1}var Xs="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pl(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var gl=0;function yd(a){var d=+new Date,h=Math.max(0,16-(d-gl));return gl=d+h,window.setTimeout(a,h)}var ml=window.requestAnimationFrame||pl("RequestAnimationFrame")||yd,ea=window.cancelAnimationFrame||pl("CancelAnimationFrame")||pl("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function rn(a,d,h){if(!h||ml!==yd)return ml.call(window,xe(a,d));a.call(d)}function _n(a){a&&ea.call(window,a)}var mf={__proto__:null,extend:de,create:_d,bind:xe,get lastId(){return es},stamp:He,throttle:zo,wrapNum:ke,falseFn:$t,formatNum:Qi,trim:ff,splitWords:Tr,setOptions:_t,getParamString:pf,template:vd,isArray:mi,indexOf:fl,emptyImageUrl:Xs,requestFn:ml,cancelFn:ea,requestAnimFrame:rn,cancelAnimFrame:_n};function Go(){}Go.extend=function(a){var d=function(){_t(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=d.__super__=this.prototype,g=_d(h);for(var y in g.constructor=d,d.prototype=g,this)Object.prototype.hasOwnProperty.call(this,y)&&"prototype"!==y&&"__super__"!==y&&(d[y]=this[y]);return a.statics&&de(d,a.statics),a.includes&&(function dw(a){if(!(typeof L>"u")&&L&&L.Mixin){a=mi(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(a.includes),de.apply(null,[g].concat(a.includes))),de(g,a),delete g.statics,delete g.includes,g.options&&(g.options=h.options?_d(h.options):{},de(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,E=g._initHooks.length;D<E;D++)g._initHooks[D].call(this)}},d},Go.include=function(a){var d=this.prototype.options;return de(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},Go.mergeOptions=function(a){return de(this.prototype.options,a),this},Go.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),h="function"==typeof a?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};var _i={on:function(a,d,h){if("object"==typeof a)for(var g in a)this._on(g,a[g],d);else for(var y=0,D=(a=Tr(a)).length;y<D;y++)this._on(a[y],d,h);return this},off:function(a,d,h){if(arguments.length)if("object"==typeof a)for(var g in a)this._off(g,a[g],d);else{a=Tr(a);for(var y=1===arguments.length,D=0,E=a.length;D<E;D++)y?this._off(a[D]):this._off(a[D],d,h)}else delete this._events;return this},_on:function(a,d,h,g){if("function"==typeof d){if(!1===this._listens(a,d,h)){h===this&&(h=void 0);var y={fn:d,ctx:h};g&&(y.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(y)}}else console.warn("wrong listener type: "+typeof d)},_off:function(a,d,h){var g,y,D;if(this._events&&(g=this._events[a])){if(1===arguments.length){if(this._firingCount)for(y=0,D=g.length;y<D;y++)g[y].fn=$t;return void delete this._events[a]}if("function"!=typeof d)return void console.warn("wrong listener type: "+typeof d);var E=this._listens(a,d,h);!1!==E&&(this._firingCount&&(g[E].fn=$t,this._events[a]=g=g.slice()),g.splice(E,1))}},fire:function(a,d,h){if(!this.listens(a,h))return this;var g=de({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var y=this._events[a];if(y){this._firingCount=this._firingCount+1||1;for(var D=0,E=y.length;D<E;D++){var A=y[D],V=A.fn;A.once&&this.off(a,V,A.ctx),V.call(A.ctx||this,g)}this._firingCount--}}return h&&this._propagateEvent(g),this},listens:function(a,d,h,g){"string"!=typeof a&&console.warn('"string" type argument expected');var y=d;"function"!=typeof d&&(g=!!d,y=void 0,h=void 0);var D=this._events&&this._events[a];if(D&&D.length&&!1!==this._listens(a,y,h))return!0;if(g)for(var E in this._eventParents)if(this._eventParents[E].listens(a,d,h,g))return!0;return!1},_listens:function(a,d,h){if(!this._events)return!1;var g=this._events[a]||[];if(!d)return!!g.length;h===this&&(h=void 0);for(var y=0,D=g.length;y<D;y++)if(g[y].fn===d&&g[y].ctx===h)return y;return!1},once:function(a,d,h){if("object"==typeof a)for(var g in a)this._on(g,a[g],d,!0);else for(var y=0,D=(a=Tr(a)).length;y<D;y++)this._on(a[y],d,h,!0);return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[He(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[He(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,de({layer:a.target,propagatedFrom:a.target},a),!0)}};_i.addEventListener=_i.on,_i.removeEventListener=_i.clearAllEventListeners=_i.off,_i.addOneTimeEventListener=_i.once,_i.fireEvent=_i.fire,_i.hasEventListeners=_i.listens;var ta=Go.extend(_i);function Ie(a,d,h){this.x=h?Math.round(a):a,this.y=h?Math.round(d):d}var s_=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};function Me(a,d,h){return a instanceof Ie?a:mi(a)?new Ie(a[0],a[1]):null==a?a:"object"==typeof a&&"x"in a&&"y"in a?new Ie(a.x,a.y):new Ie(a,d,h)}function Tt(a,d){if(a)for(var h=d?[a,d]:a,g=0,y=h.length;g<y;g++)this.extend(h[g])}function Zn(a,d){return!a||a instanceof Tt?a:new Tt(a,d)}function Pn(a,d){if(a)for(var h=d?[a,d]:a,g=0,y=h.length;g<y;g++)this.extend(h[g])}function Zt(a,d){return a instanceof Pn?a:new Pn(a,d)}function ut(a,d,h){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,void 0!==h&&(this.alt=+h)}function Ze(a,d,h){return a instanceof ut?a:mi(a)&&"object"!=typeof a[0]?3===a.length?new ut(a[0],a[1],a[2]):2===a.length?new ut(a[0],a[1]):null:null==a?a:"object"==typeof a&&"lat"in a?new ut(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===d?null:new ut(a,d,h)}Ie.prototype={clone:function(){return new Ie(this.x,this.y)},add:function(a){return this.clone()._add(Me(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Me(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Ie(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Ie(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=s_(this.x),this.y=s_(this.y),this},distanceTo:function(a){var d=(a=Me(a)).x-this.x,h=a.y-this.y;return Math.sqrt(d*d+h*h)},equals:function(a){return(a=Me(a)).x===this.x&&a.y===this.y},contains:function(a){return a=Me(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+Qi(this.x)+", "+Qi(this.y)+")"}},Tt.prototype={extend:function(a){var d,h;if(!a)return this;if(a instanceof Ie||"number"==typeof a[0]||"x"in a)d=h=Me(a);else if(h=(a=Zn(a)).max,!(d=a.min)||!h)return this;return this.min||this.max?(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)):(this.min=d.clone(),this.max=h.clone()),this},getCenter:function(a){return Me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Me(this.min.x,this.max.y)},getTopRight:function(){return Me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,h;return(a="number"==typeof a[0]||a instanceof Ie?Me(a):Zn(a))instanceof Tt?(d=a.min,h=a.max):d=h=a,d.x>=this.min.x&&h.x<=this.max.x&&d.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=Zn(a);var d=this.min,h=this.max,g=a.min,y=a.max;return y.x>=d.x&&g.x<=h.x&&y.y>=d.y&&g.y<=h.y},overlaps:function(a){a=Zn(a);var d=this.min,h=this.max,g=a.min,y=a.max;return y.x>d.x&&g.x<h.x&&y.y>d.y&&g.y<h.y},isValid:function(){return!(!this.min||!this.max)},pad:function(a){var d=this.min,h=this.max,g=Math.abs(d.x-h.x)*a,y=Math.abs(d.y-h.y)*a;return Zn(Me(d.x-g,d.y-y),Me(h.x+g,h.y+y))},equals:function(a){return!!a&&(a=Zn(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight()))}},Pn.prototype={extend:function(a){var g,y,d=this._southWest,h=this._northEast;if(a instanceof ut)g=a,y=a;else{if(!(a instanceof Pn))return a?this.extend(Ze(a)||Zt(a)):this;if(y=a._northEast,!(g=a._southWest)||!y)return this}return d||h?(d.lat=Math.min(g.lat,d.lat),d.lng=Math.min(g.lng,d.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)):(this._southWest=new ut(g.lat,g.lng),this._northEast=new ut(y.lat,y.lng)),this},pad:function(a){var d=this._southWest,h=this._northEast,g=Math.abs(d.lat-h.lat)*a,y=Math.abs(d.lng-h.lng)*a;return new Pn(new ut(d.lat-g,d.lng-y),new ut(h.lat+g,h.lng+y))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof ut||"lat"in a?Ze(a):Zt(a);var g,y,d=this._southWest,h=this._northEast;return a instanceof Pn?(g=a.getSouthWest(),y=a.getNorthEast()):g=y=a,g.lat>=d.lat&&y.lat<=h.lat&&g.lng>=d.lng&&y.lng<=h.lng},intersects:function(a){a=Zt(a);var d=this._southWest,h=this._northEast,g=a.getSouthWest(),y=a.getNorthEast();return y.lat>=d.lat&&g.lat<=h.lat&&y.lng>=d.lng&&g.lng<=h.lng},overlaps:function(a){a=Zt(a);var d=this._southWest,h=this._northEast,g=a.getSouthWest(),y=a.getNorthEast();return y.lat>d.lat&&g.lat<h.lat&&y.lng>d.lng&&g.lng<h.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return!!a&&(a=Zt(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d))},isValid:function(){return!(!this._southWest||!this._northEast)}},ut.prototype={equals:function(a,d){return!!a&&(a=Ze(a),Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(void 0===d?1e-9:d))},toString:function(a){return"LatLng("+Qi(this.lat,a)+", "+Qi(this.lng,a)+")"},distanceTo:function(a){return Sr.distance(this,Ze(a))},wrap:function(){return Sr.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,h=d/Math.cos(Math.PI/180*this.lat);return Zt([this.lat-d,this.lng-h],[this.lat+d,this.lng+h])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};var a,mo={latLngToPoint:function(a,d){var h=this.projection.project(a),g=this.scale(d);return this.transformation._transform(h,g)},pointToLatLng:function(a,d){var h=this.scale(d),g=this.transformation.untransform(a,h);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,h=this.scale(a);return new Tt(this.transformation.transform(d.min,h),this.transformation.transform(d.max,h))},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?ke(a.lng,this.wrapLng,!0):a.lng;return new ut(this.wrapLat?ke(a.lat,this.wrapLat,!0):a.lat,d,a.alt)},wrapLatLngBounds:function(a){var d=a.getCenter(),h=this.wrapLatLng(d),g=d.lat-h.lat,y=d.lng-h.lng;if(0===g&&0===y)return a;var D=a.getSouthWest(),E=a.getNorthEast();return new Pn(new ut(D.lat-g,D.lng-y),new ut(E.lat-g,E.lng-y))}},Sr=de({},mo,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var h=Math.PI/180,g=a.lat*h,y=d.lat*h,D=Math.sin((d.lat-a.lat)*h/2),E=Math.sin((d.lng-a.lng)*h/2),A=D*D+Math.cos(g)*Math.cos(y)*E*E,V=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*V}}),bd={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,h=this.MAX_LATITUDE,g=Math.max(Math.min(h,a.lat),-h),y=Math.sin(g*d);return new Ie(this.R*a.lng*d,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(a){var d=180/Math.PI;return new ut((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(a=6378137*Math.PI,new Tt([-a,-a],[a,a]))};function vf(a,d,h,g){if(mi(a))return this._a=a[0],this._b=a[1],this._c=a[2],void(this._d=a[3]);this._a=a,this._b=d,this._c=h,this._d=g}function ts(a,d,h,g){return new vf(a,d,h,g)}vf.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return a.x=(d=d||1)*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return new Ie((a.x/(d=d||1)-this._b)/this._a,(a.y/d-this._d)/this._c)}};var wd=de({},Sr,{code:"EPSG:3857",projection:bd,transformation:function(){var a=.5/(Math.PI*bd.R);return ts(a,.5,-a,.5)}()}),uw=de({},wd,{code:"EPSG:900913"});function Ke(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function _l(a,d){var g,y,D,E,A,V,h="";for(g=0,D=a.length;g<D;g++){for(y=0,E=(A=a[g]).length;y<E;y++)h+=(y?"L":"M")+(V=A[y]).x+" "+V.y;h+=d?ge.svg?"z":"x":""}return h||"M0 0"}var na=document.documentElement.style,Mr="ActiveXObject"in window,An=Mr&&!document.addEventListener,Cd="msLaunchUri"in navigator&&!("documentMode"in document),vl=vt("webkit"),Dd=vt("android"),Wo=vt("android 2")||vt("android 3"),yl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yf=Dd&&vt("Google")&&yl<537&&!("AudioNode"in window),kr=!!window.opera,bf=!Cd&&vt("chrome"),wf=vt("gecko")&&!vl&&!kr&&!Mr,a_=!bf&&vt("safari"),bl=vt("phantom"),qo="OTransition"in na,wl=0===navigator.platform.indexOf("Win"),Cf=Mr&&"transition"in na,ia="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Wo,Df="MozPerspective"in na,Td=!window.L_DISABLE_3D&&(Cf||ia||Df)&&!qo&&!bl,oa=typeof orientation<"u"||vt("mobile"),Sd=oa&&vl,Cl=oa&&ia,Tf=!window.PointerEvent&&window.MSPointerEvent,Dl=!(!window.PointerEvent&&!Tf),Sf="ontouchstart"in window||!!window.TouchEvent,Md=!window.L_NO_TOUCH&&(Sf||Dl),Ji=oa&&kr,l_=oa&&wf,Mf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rt=function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",$t,d),window.removeEventListener("testPassiveEventSupport",$t,d)}catch{}return a}(),kf=!!document.createElement("canvas").getContext,kd=!(!document.createElementNS||!Ke("svg").createSVGRect),c_=!!kd&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(a.firstChild&&a.firstChild.namespaceURI)}(),d_=!kd&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&"object"==typeof d.adj}catch{return!1}}();function vt(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ge={ie:Mr,ielt9:An,edge:Cd,webkit:vl,android:Dd,android23:Wo,androidStock:yf,opera:kr,chrome:bf,gecko:wf,safari:a_,phantom:bl,opera12:qo,win:wl,ie3d:Cf,webkit3d:ia,gecko3d:Df,any3d:Td,mobile:oa,mobileWebkit:Sd,mobileWebkit3d:Cl,msPointer:Tf,pointer:Dl,touch:Md,touchNative:Sf,mobileOpera:Ji,mobileGecko:l_,retina:Mf,passiveEvents:rt,canvas:kf,svg:kd,vml:d_,inlineSvg:c_,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Ot=ge.msPointer?"MSPointerDown":"pointerdown",st=ge.msPointer?"MSPointerMove":"pointermove",xf=ge.msPointer?"MSPointerUp":"pointerup",le=ge.msPointer?"MSPointerCancel":"pointercancel",If={touchstart:Ot,touchmove:st,touchend:xf,touchcancel:le},Ed={touchstart:function ns(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&vn(d),vo(a,d)},touchmove:vo,touchend:vo,touchcancel:vo},F={},Er=!1;function Tl(a,d,h){return"touchstart"===d&&function _o(){Er||(document.addEventListener(Ot,hw,!0),document.addEventListener(st,fw,!0),document.addEventListener(xf,xd,!0),document.addEventListener(le,xd,!0),Er=!0)}(),Ed[d]?(h=Ed[d].bind(this,h),a.addEventListener(If[d],h,!1),h):(console.warn("wrong event specified:",d),$t)}function hw(a){F[a.pointerId]=a}function fw(a){F[a.pointerId]&&(F[a.pointerId]=a)}function xd(a){delete F[a.pointerId]}function vo(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){for(var h in d.touches=[],F)d.touches.push(F[h]);d.changedTouches=[d],a(d)}}var Of=200;var Sl,sa,Af,_e,Ff,Pf=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),We=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),u_="webkitTransition"===We||"OTransition"===We?We+"End":"transitionend";function h_(a){return"string"==typeof a?document.getElementById(a):a}function Ye(a,d){var h=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!h||"auto"===h)&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);h=g?g[d]:null}return"auto"===h?null:h}function et(a,d,h){var g=document.createElement(a);return g.className=d||"",h&&h.appendChild(g),g}function Oe(a){var d=a.parentNode;d&&d.removeChild(a)}function rs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ra(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function ss(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function qe(a,d){if(void 0!==a.classList)return a.classList.contains(d);var h=Nd(a);return h.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(h)}function K(a,d){if(void 0!==a.classList)for(var h=Tr(d),g=0,y=h.length;g<y;g++)a.classList.add(h[g]);else if(!qe(a,d)){var D=Nd(a);$n(a,(D?D+" ":"")+d)}}function St(a,d){void 0!==a.classList?a.classList.remove(d):$n(a,ff((" "+Nd(a)+" ").replace(" "+d+" "," ")))}function $n(a,d){void 0===a.className.baseVal?a.className=d:a.className.baseVal=d}function Nd(a){return a.correspondingElement&&(a=a.correspondingElement),void 0===a.className.baseVal?a.className:a.className.baseVal}function vi(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&function pw(a,d){var h=!1,g="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(g)}catch{if(1===d)return}d=Math.round(100*d),h?(h.Enabled=100!==d,h.Opacity=d):a.style.filter+=" progid:"+g+"(opacity="+d+")"}(a,d)}function Ei(a){for(var d=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in d)return a[h];return!1}function as(a,d,h){var g=d||new Ie(0,0);a.style[Pf]=(ge.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(h?" scale("+h+")":"")}function Kt(a,d){a._leaflet_pos=d,ge.any3d?as(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ls(a){return a._leaflet_pos||new Ie(0,0)}if("onselectstart"in document)Sl=function(){Pe(window,"selectstart",vn)},sa=function(){at(window,"selectstart",vn)};else{var aa=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Sl=function(){if(aa){var a=document.documentElement.style;Af=a[aa],a[aa]="none"}},sa=function(){aa&&(document.documentElement.style[aa]=Af,Af=void 0)}}function Rf(){Pe(window,"dragstart",vn)}function Hn(){at(window,"dragstart",vn)}function Lf(a){for(;-1===a.tabIndex;)a=a.parentNode;a.style&&(Od(),_e=a,Ff=a.style.outlineStyle,a.style.outlineStyle="none",Pe(window,"keydown",Od))}function Od(){_e&&(_e.style.outlineStyle=Ff,_e=void 0,Ff=void 0,at(window,"keydown",Od))}function f_(a){do{a=a.parentNode}while(!(a.offsetWidth&&a.offsetHeight||a===document.body));return a}function Bf(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var W={__proto__:null,TRANSFORM:Pf,TRANSITION:We,TRANSITION_END:u_,get:h_,getStyle:Ye,create:et,remove:Oe,empty:rs,toFront:ra,toBack:ss,hasClass:qe,addClass:K,removeClass:St,setClass:$n,getClass:Nd,setOpacity:vi,testProp:Ei,setTransform:as,setPosition:Kt,getPosition:ls,get disableTextSelection(){return Sl},get enableTextSelection(){return sa},disableImageDrag:Rf,enableImageDrag:Hn,preventOutline:Lf,restoreOutline:Od,getSizedParentNode:f_,getScale:Bf};function Pe(a,d,h,g){if(d&&"object"==typeof d)for(var y in d)Pd(a,y,d[y],h);else for(var D=0,E=(d=Tr(d)).length;D<E;D++)Pd(a,d[D],h,g);return this}var Ae="_leaflet_events";function at(a,d,h,g){if(1===arguments.length)Vf(a),delete a[Ae];else if(d&&"object"==typeof d)for(var y in d)cs(a,y,d[y],h);else if(d=Tr(d),2===arguments.length)Vf(a,function(A){return-1!==fl(d,A)});else for(var D=0,E=d.length;D<E;D++)cs(a,d[D],h,g);return this}function Vf(a,d){for(var h in a[Ae]){var g=h.split(/\d/)[0];(!d||d(g))&&cs(a,g,null,null,h)}}var Ml={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pd(a,d,h,g){var y=d+He(h)+(g?"_"+He(g):"");if(a[Ae]&&a[Ae][y])return this;var D=function(A){return h.call(g||a,A||window.event)},E=D;!ge.touchNative&&ge.pointer&&0===d.indexOf("touch")?D=Tl(a,d,D):ge.touch&&"dblclick"===d?D=function Id(a,d){a.addEventListener("dblclick",d);var g,h=0;function y(D){if(1===D.detail){if("mouse"!==D.pointerType&&(!D.sourceCapabilities||D.sourceCapabilities.firesTouchEvents)){var E=kl(D);if(!E.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})||E.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement})){var A=Date.now();A-h<=Of?2==++g&&d(function is(a){var h,g,d={};for(g in a)d[g]=(h=a[g])&&h.bind?h.bind(a):h;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}(D)):g=1,h=A}}}else g=D.detail}return a.addEventListener("click",y),{dblclick:d,simDblclick:y}}(a,D):"addEventListener"in a?"touchstart"===d||"touchmove"===d||"wheel"===d||"mousewheel"===d?a.addEventListener(Ml[d]||d,D,!!ge.passiveEvents&&{passive:!1}):"mouseenter"===d||"mouseleave"===d?a.addEventListener(Ml[d],D=function(A){A=A||window.event,Ad(a,A)&&E(A)},!1):a.addEventListener(d,E,!1):a.attachEvent("on"+d,D),a[Ae]=a[Ae]||{},a[Ae][y]=D}function cs(a,d,h,g,y){y=y||d+He(h)+(g?"_"+He(g):"");var D=a[Ae]&&a[Ae][y];if(!D)return this;!ge.touchNative&&ge.pointer&&0===d.indexOf("touch")?function Nf(a,d,h){If[d]?a.removeEventListener(If[d],h,!1):console.warn("wrong event specified:",d)}(a,d,D):ge.touch&&"dblclick"===d?function os(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}(a,D):"removeEventListener"in a?a.removeEventListener(Ml[d]||d,D,!1):a.detachEvent("on"+d,D),a[Ae][y]=null}function Xi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function la(a){return Pd(a,"wheel",Xi),this}function ds(a){return Pe(a,"mousedown touchstart dblclick contextmenu",Xi),a._leaflet_disable_click=!0,this}function vn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function ee(a){return vn(a),Xi(a),this}function kl(a){if(a.composedPath)return a.composedPath();for(var d=[],h=a.target;h;)d.push(h),h=h.parentNode;return d}function El(a,d){if(!d)return new Ie(a.clientX,a.clientY);var h=Bf(d),g=h.boundingClientRect;return new Ie((a.clientX-g.left)/h.x-d.clientLeft,(a.clientY-g.top)/h.y-d.clientTop)}var jf=ge.linux&&ge.chrome?window.devicePixelRatio:ge.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xl(a){return ge.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/jf:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0}function Ad(a,d){var h=d.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch{return!1}return h!==a}var Rd={__proto__:null,on:Pe,off:at,stopPropagation:Xi,disableScrollPropagation:la,disableClickPropagation:ds,preventDefault:vn,stop:ee,getPropagationPath:kl,getMousePosition:El,getWheelDelta:xl,isExternalTarget:Ad,addListener:Pe,removeListener:at},p_=ta.extend({run:function(a,d,h,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=ls(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=rn(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,h=1e3*this._duration;d<h?this._runFrame(this._easeOut(d/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var h=this._startPos.add(this._offset.multiplyBy(a));d&&h._round(),Kt(this._el,h),this.fire("step")},_complete:function(){_n(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Qe=ta.extend({options:{crs:wd,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=_t(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=xe(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),void 0!==d.zoom&&(this._zoom=this._limitZoom(d.zoom)),d.center&&void 0!==d.zoom&&this.setView(Ze(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=We&&ge.any3d&&!ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,u_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,h){return d=void 0===d?this._zoom:this._limitZoom(d),a=this._limitCenter(Ze(a),d,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&!0!==h&&(void 0!==h.animate&&(h.zoom=de({animate:h.animate},h.zoom),h.pan=de({animate:h.animate,duration:h.duration},h.pan)),this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,h.zoom):this._tryAnimatedPan(a,h.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(a,d,h.pan&&h.pan.noMoveStart),this)},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return this.setZoom(this._zoom+(a=a||(ge.any3d?this.options.zoomDelta:1)),d)},zoomOut:function(a,d){return this.setZoom(this._zoom-(a=a||(ge.any3d?this.options.zoomDelta:1)),d)},setZoomAround:function(a,d,h){var g=this.getZoomScale(d),y=this.getSize().divideBy(2),E=(a instanceof Ie?a:this.latLngToContainerPoint(a)).subtract(y).multiplyBy(1-1/g),A=this.containerPointToLatLng(y.add(E));return this.setView(A,d,{zoom:h})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Zt(a);var h=Me(d.paddingTopLeft||d.padding||[0,0]),g=Me(d.paddingBottomRight||d.padding||[0,0]),y=this.getBoundsZoom(a,!1,h.add(g));if((y="number"==typeof d.maxZoom?Math.min(d.maxZoom,y):y)===1/0)return{center:a.getCenter(),zoom:y};var D=g.subtract(h).divideBy(2),E=this.project(a.getSouthWest(),y),A=this.project(a.getNorthEast(),y);return{center:this.unproject(E.add(A).divideBy(2).add(D),y),zoom:y}},fitBounds:function(a,d){if(!(a=Zt(a)).isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,d);return this.setView(h.center,h.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(d=d||{},!(a=Me(a).round()).x&&!a.y)return this.fire("moveend");if(!0!==d.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new p_,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),!1!==d.animate){K(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,h){if(!1===(h=h||{}).animate||!ge.any3d)return this.setView(a,d,h);this._stop();var g=this.project(this.getCenter()),y=this.project(a),D=this.getSize(),E=this._zoom;a=Ze(a),d=void 0===d?E:d;var A=Math.max(D.x,D.y),V=A*this.getZoomScale(E,d),G=y.distanceTo(g)||1,se=1.42,be=se*se;function Be(qt){var Wd=(V*V-A*A+(qt?-1:1)*be*be*G*G)/(2*(qt?V:A)*be*G),Gl=Math.sqrt(Wd*Wd+1)-Wd;return Gl<1e-9?-18:Math.log(Gl)}function Ht(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function an(qt){return(Math.exp(qt)+Math.exp(-qt))/2}var bn=Be(0);function zd(qt){return A*(an(bn)*function Yn(qt){return Ht(qt)/an(qt)}(bn+se*qt)-Ht(bn))/be}var wn=Date.now(),Pr=(Be(1)-bn)/se,Gd=h.duration?1e3*h.duration:1e3*Pr*.8;return this._moveStart(!0,h.noMoveStart),function np(){var qt=(Date.now()-wn)/Gd,Da=function zl(qt){return 1-Math.pow(1-qt,1.5)}(qt)*Pr;qt<=1?(this._flyToFrame=rn(np,this),this._move(this.unproject(g.add(y.subtract(g).multiplyBy(zd(Da)/G)),E),this.getScaleZoom(A/function bs(qt){return A*(an(bn)/an(bn+se*qt))}(Da),E),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}.call(this),this},flyToBounds:function(a,d){var h=this._getBoundsCenterZoom(a,d);return this.flyTo(h.center,h.zoom,d)},setMaxBounds:function(a){return a=Zt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var h=this.getCenter(),g=this._limitCenter(h,this._zoom,Zt(a));return h.equals(g)||this.panTo(g,d),this._enforcingBounds=!1,this},panInside:function(a,d){var h=Me((d=d||{}).paddingTopLeft||d.padding||[0,0]),g=Me(d.paddingBottomRight||d.padding||[0,0]),y=this.project(this.getCenter()),D=this.project(a),E=this.getPixelBounds(),A=Zn([E.min.add(h),E.max.subtract(g)]),V=A.getSize();if(!A.contains(D)){this._enforcingBounds=!0;var G=D.subtract(A.getCenter()),se=A.extend(D).getSize().subtract(V);y.x+=G.x<0?-se.x:se.x,y.y+=G.y<0?-se.y:se.y,this.panTo(this.unproject(y),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=de({animate:!1,pan:!0},!0===a?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),g=d.divideBy(2).round(),y=h.divideBy(2).round(),D=g.subtract(y);return D.x||D.y?(a.animate&&a.pan?this.panBy(D):(a.pan&&this._rawPanBy(D),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(xe(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:h})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=de({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=xe(this._handleGeolocationResponse,this),h=xe(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,h,a):navigator.geolocation.getCurrentPosition(d,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,h=a.message||(1===d?"permission denied":2===d?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var g=new ut(a.coords.latitude,a.coords.longitude),y=g.toBounds(2*a.coords.accuracy),D=this._locateOptions;if(D.setView){var E=this.getBoundsZoom(y);this.setView(g,D.maxZoom?Math.min(E,D.maxZoom):E)}var A={latlng:g,bounds:y,timestamp:a.timestamp};for(var V in a.coords)"number"==typeof a.coords[V]&&(A[V]=a.coords[V]);this.fire("locationfound",A)}},addHandler:function(a,d){if(!d)return this;var h=this[a]=new d(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var a;for(a in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(_n(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[a].remove();for(a in this._panes)Oe(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var g=et("div","leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds();return new Pn(this.unproject(a.getBottomLeft()),this.unproject(a.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,h){a=Zt(a),h=Me(h||[0,0]);var g=this.getZoom()||0,y=this.getMinZoom(),D=this.getMaxZoom(),E=a.getNorthWest(),A=a.getSouthEast(),V=this.getSize().subtract(h),G=Zn(this.project(A,g),this.project(E,g)).getSize(),se=ge.any3d?this.options.zoomSnap:1,be=V.x/G.x,Be=V.y/G.y,Ht=d?Math.max(be,Be):Math.min(be,Be);return g=this.getScaleZoom(Ht,g),se&&(g=Math.round(g/(se/100))*(se/100),g=d?Math.ceil(g/se)*se:Math.floor(g/se)*se),Math.max(y,Math.min(D,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var h=this._getTopLeftPoint(a,d);return new Tt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var h=this.options.crs;return d=void 0===d?this._zoom:d,h.scale(a)/h.scale(d)},getScaleZoom:function(a,d){var h=this.options.crs,g=h.zoom(a*h.scale(d=void 0===d?this._zoom:d));return isNaN(g)?1/0:g},project:function(a,d){return d=void 0===d?this._zoom:d,this.options.crs.latLngToPoint(Ze(a),d)},unproject:function(a,d){return d=void 0===d?this._zoom:d,this.options.crs.pointToLatLng(Me(a),d)},layerPointToLatLng:function(a){var d=Me(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){return this.project(Ze(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Ze(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Zt(a))},distance:function(a,d){return this.options.crs.distance(Ze(a),Ze(d))},containerPointToLayerPoint:function(a){return Me(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Me(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(Me(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ze(a)))},mouseEventToContainerPoint:function(a){return El(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=h_(a);if(!d)throw new Error("Map container not found.");if(d._leaflet_id)throw new Error("Map container is already initialized.");Pe(d,"scroll",this._onScroll,this),this._containerId=He(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ge.any3d,K(a,"leaflet-container"+(ge.touch?" leaflet-touch":"")+(ge.retina?" leaflet-retina":"")+(ge.ielt9?" leaflet-oldie":"")+(ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Ye(a,"position");"absolute"!==d&&"relative"!==d&&"fixed"!==d&&"sticky"!==d&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kt(this._mapPane,new Ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(K(a.markerPane,"leaflet-zoom-hide"),K(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,h){Kt(this._mapPane,new Ie(0,0));var g=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var y=this._zoom!==d;this._moveStart(y,h)._move(a,d)._moveEnd(y),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,h,g){void 0===d&&(d=this._zoom);var y=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return _n(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Kt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[He(this._container)]=this;var d=a?at:Pe;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),ge.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){_n(this._resizeRequest),this._resizeRequest=rn(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var g,h=[],y="mouseout"===d||"mouseover"===d,D=a.target||a.srcElement,E=!1;D;){if((g=this._targets[He(D)])&&("click"===d||"preclick"===d)&&this._draggableMoved(g)){E=!0;break}if(g&&g.listens(d,!0)&&(y&&!Ad(D,a)||(h.push(g),y))||D===this._container)break;D=D.parentNode}return!h.length&&!E&&!y&&this.listens(d,!0)&&(h=[this]),h},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||"click"===a.type&&this._isClickDisabled(d))){var h=a.type;"mousedown"===h&&Lf(d),this._fireDOMEvent(a,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,h){if("click"===a.type){var g=de({},a);g.type="preclick",this._fireDOMEvent(g,g.type,h)}var y=this._findEventTargets(a,d);if(h){for(var D=[],E=0;E<h.length;E++)h[E].listens(d,!0)&&D.push(h[E]);y=D.concat(y)}if(y.length){"contextmenu"===d&&vn(a);var A=y[0],V={originalEvent:a};if("keypress"!==a.type&&"keydown"!==a.type&&"keyup"!==a.type){var G=A.getLatLng&&(!A._radius||A._radius<=10);V.containerPoint=G?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(a),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=G?A.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(E=0;E<y.length;E++)if(y[E].fire(d,V,!0),V.originalEvent._stopped||!1===y[E].options.bubblingMouseEvents&&-1!==fl(this._mouseEvents,d))return}},_draggableMoved:function(a){return(a=a.dragging&&a.dragging.enabled()?a:this).dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ls(this._mapPane)||new Ie(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){return(a&&void 0!==d?this._getNewPixelOrigin(a,d):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var h=this.getSize()._divideBy(2);return this.project(a,d)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,h){var g=this._getNewPixelOrigin(h,d);return this.project(a,d)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,d,h){var g=this._getNewPixelOrigin(h,d);return Zn([this.project(a.getSouthWest(),d)._subtract(g),this.project(a.getNorthWest(),d)._subtract(g),this.project(a.getSouthEast(),d)._subtract(g),this.project(a.getNorthEast(),d)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,h){if(!h)return a;var g=this.project(a,d),y=this.getSize().divideBy(2),D=new Tt(g.subtract(y),g.add(y)),E=this._getBoundsOffset(D,h,d);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?a:this.unproject(g.add(E),d)},_limitOffset:function(a,d){if(!d)return a;var h=this.getPixelBounds(),g=new Tt(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(g,d))},_getBoundsOffset:function(a,d,h){var g=Zn(this.project(d.getNorthEast(),h),this.project(d.getSouthWest(),h)),y=g.min.subtract(a.min),D=g.max.subtract(a.max);return new Ie(this._rebound(y.x,-D.x),this._rebound(y.y,-D.y))},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),h=this.getMaxZoom(),g=ge.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(d,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){St(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var h=this._getCenterOffset(a)._trunc();return!(!0!==(d&&d.animate)&&!this.getSize().contains(h)||(this.panBy(h,d),0))},_createAnimProxy:function(){var a=this._proxy=et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var h=Pf,g=this._proxy.style[h];as(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),g===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();as(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||!1===h.animate||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(d),y=this._getCenterOffset(a)._divideBy(1-1/g);return!(!0!==h.animate&&!this.getSize().contains(y)||(rn(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(a,d,!0)},this),0))},_animateZoom:function(a,d,h,g){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,K(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(xe(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&St(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var eo=Go.extend({options:{position:"topright"},initialize:function(a){_t(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),h=this.getPosition(),g=a._controlCorners[h];return K(d,"leaflet-control"),-1!==h.indexOf("bottom")?g.insertBefore(d,g.firstChild):g.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),xr=function(a){return new eo(a)};Qe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",h=this._controlContainer=et("div",d+"control-container",this._container);function g(y,D){a[y+D]=et("div",d+y+" "+d+D,h)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Oe(this._controlCorners[a]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var us=eo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,h,g){return h<g?-1:g<h?1:0}},initialize:function(a,d,h){for(var g in _t(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,a)this._addLayer(a[g],g);for(g in d)this._addLayer(d[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return eo.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(He(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){K(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(K(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):St(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return St(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=et("div",a),h=this.options.collapsed;d.setAttribute("aria-haspopup",!0),ds(d),la(d);var g=this._section=et("section",a+"-list");h&&(this._map.on("click",this.collapse,this),Pe(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=et("a",a+"-toggle",d);y.href="#",y.title="Layers",y.setAttribute("role","button"),Pe(y,{keydown:function(D){13===D.keyCode&&this._expandSafely()},click:function(D){vn(D),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=et("div",a+"-base",g),this._separator=et("div",a+"-separator",g),this._overlaysList=et("div",a+"-overlays",g),d.appendChild(g)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&He(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:h}),this.options.sortLayers&&this._layers.sort(xe(function(g,y){return this.options.sortFunction(g.layer,y.layer,g.name,y.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rs(this._baseLayersList),rs(this._overlaysList),this._layerControlInputs=[];var a,d,h,g,y=0;for(h=0;h<this._layers.length;h++)this._addItem(g=this._layers[h]),d=d||g.overlay,a=a||!g.overlay,y+=g.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(a=a&&y>1)?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(He(a.target)),h=d.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;h&&this._map.fire(h,d)},_createRadioElement:function(a,d){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=h,g.firstChild},_addItem:function(a){var g,d=document.createElement("label"),h=this._map.hasLayer(a.layer);a.overlay?((g=document.createElement("input")).type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=h):g=this._createRadioElement("leaflet-base-layers_"+He(this),h),this._layerControlInputs.push(g),g.layerId=He(a.layer),Pe(g,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+a.name;var D=document.createElement("span");return d.appendChild(D),D.appendChild(g),D.appendChild(y),(a.overlay?this._overlaysList:this._baseLayersList).appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var d,h,a=this._layerControlInputs,g=[],y=[];this._handlingClick=!0;for(var D=a.length-1;D>=0;D--)h=this._getLayer((d=a[D]).layerId).layer,d.checked?g.push(h):d.checked||y.push(h);for(D=0;D<y.length;D++)this._map.hasLayer(y[D])&&this._map.removeLayer(y[D]);for(D=0;D<g.length;D++)this._map.hasLayer(g[D])||this._map.addLayer(g[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d,h,a=this._layerControlInputs,g=this._map.getZoom(),y=a.length-1;y>=0;y--)h=this._getLayer((d=a[y]).layerId).layer,d.disabled=void 0!==h.options.minZoom&&g<h.options.minZoom||void 0!==h.options.maxZoom&&g>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Pe(a,"click",vn),this.expand();var d=this;setTimeout(function(){at(a,"click",vn),d._preventClick=!1})}}),ca=eo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",h=et("div",d+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,d+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,d+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,h,g,y){var D=et("a",h,g);return D.innerHTML=a,D.href="#",D.title=d,D.setAttribute("role","button"),D.setAttribute("aria-label",d),ds(D),Pe(D,"click",ee),Pe(D,"click",y,this),Pe(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";St(this._zoomInButton,d),St(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(K(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(K(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ca,this.addControl(this.zoomControl))});var to=eo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",h=et("div",d),g=this.options;return this._addScales(g,d+"-line",h),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,h){a.metric&&(this._mScale=et("div",d,h)),a.imperial&&(this._iScale=et("div",d,h))},_update:function(){var a=this._map,d=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a);this._updateScale(this._mScale,d<1e3?d+" m":d/1e3+" km",d/a)},_updateImperial:function(a){var h,g,y,d=3.2808399*a;d>5280?(g=this._getRoundNum(h=d/5280),this._updateScale(this._iScale,g+" mi",g/h)):(y=this._getRoundNum(d),this._updateScale(this._iScale,y+" ft",y/d))},_updateScale:function(a,d,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),h=a/d;return d*(h>=10?10:h>=5?5:h>=3?3:h>=2?2:1)}}),Ce=eo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ge.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(a){_t(this,a),this._attributions={}},onAdd:function(a){for(var d in a.attributionControl=this,this._container=et("div","leaflet-control-attribution"),ds(this._container),a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&(new Ce).addTo(this)});eo.Layers=us,eo.Zoom=ca,eo.Scale=to,eo.Attribution=Ce,xr.layers=function(a,d,h){return new us(a,d,h)},xr.zoom=function(a){return new ca(a)},xr.scale=function(a){return new to(a)},xr.attribution=function(a){return new Ce(a)};var yo=Go.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yo.addTo=function(a,d){return a.addHandler(d,this),this};var g_={Events:_i},Uf=ge.touch?"touchstart mousedown":"mousedown",Ir=ta.extend({options:{clickTolerance:3},initialize:function(a,d,h,g){_t(this,g),this._element=a,this._dragStartTarget=d||a,this._preventOutline=h},enable:function(){this._enabled||(Pe(this._dragStartTarget,Uf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ir._dragging===this&&this.finishDrag(!0),at(this._dragStartTarget,Uf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!qe(this._element,"leaflet-zoom-anim"))){if(a.touches&&1!==a.touches.length)return void(Ir._dragging===this&&this.finishDrag());if(!(Ir._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(Ir._dragging=this,this._preventOutline&&Lf(this._element),Rf(),Sl(),this._moving))){this.fire("down");var d=a.touches?a.touches[0]:a,h=f_(this._element);this._startPoint=new Ie(d.clientX,d.clientY),this._startPos=ls(this._element),this._parentScale=Bf(h);var g="mousedown"===a.type;Pe(document,g?"mousemove":"touchmove",this._onMove,this),Pe(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var d=a.touches&&1===a.touches.length?a.touches[0]:a,h=new Ie(d.clientX,d.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,vn(a),this._moved||(this.fire("dragstart"),this._moved=!0,K(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),K(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Kt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){St(document.body,"leaflet-dragging"),this._lastTarget&&(St(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),at(document,"mousemove touchmove",this._onMove,this),at(document,"mouseup touchend touchcancel",this._onUp,this),Hn(),sa();var d=this._moved&&this._moving;this._moving=!1,Ir._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function zf(a,d,h){var g,D,E,A,V,G,se,be,Be,y=[1,4,2,8];for(D=0,se=a.length;D<se;D++)a[D]._code=Nr(a[D],d);for(A=0;A<4;A++){for(be=y[A],g=[],D=0,E=(se=a.length)-1;D<se;E=D++)G=a[E],(V=a[D])._code&be?G._code&be||((Be=Ol(G,V,be,d,h))._code=Nr(Be,d),g.push(Be)):(G._code&be&&((Be=Ol(G,V,be,d,h))._code=Nr(Be,d),g.push(Be)),g.push(V));a=g}return a}function Il(a,d){var h,g,y,D,E,A,V,G;if(!a||0===a.length)throw new Error("latlngs not passed");yn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var be=Ze([0,0]),Be=Zt(a);Be.getNorthWest().distanceTo(Be.getSouthWest())*Be.getNorthEast().distanceTo(Be.getNorthWest())<1700&&(be=Le(a));var an=a.length,Yn=[];for(h=0;h<an;h++){var bn=Ze(a[h]);Yn.push(d.project(Ze([bn.lat-be.lat,bn.lng-be.lng])))}for(A=V=G=0,h=0,g=an-1;h<an;g=h++)V+=((y=Yn[h]).x+(D=Yn[g]).x)*(E=y.y*D.x-D.y*y.x),G+=(y.y+D.y)*E,A+=3*E;var bs=d.unproject(Me(0===A?Yn[0]:[V/A,G/A]));return Ze([bs.lat+be.lat,bs.lng+be.lng])}function Le(a){for(var d=0,h=0,g=0,y=0;y<a.length;y++){var D=Ze(a[y]);d+=D.lat,h+=D.lng,g++}return Ze([d/g,h/g])}var Nl,Ld={__proto__:null,clipPolygon:zf,polygonCenter:Il,centroid:Le};function Bd(a,d){if(!d||!a.length)return a.slice();var h=d*d;return function mw(a,d){var h=a.length,y=new(typeof Uint8Array<"u"?Uint8Array:Array)(h);y[0]=y[h-1]=1,Wf(a,y,d,0,h-1);var D,E=[];for(D=0;D<h;D++)y[D]&&E.push(a[D]);return E}(a=function ua(a,d){for(var h=[a[0]],g=1,y=0,D=a.length;g<D;g++)m_(a[g],a[y])>d&&(h.push(a[g]),y=g);return y<D-1&&h.push(a[D-1]),h}(a,h),h)}function Un(a,d,h){return Math.sqrt(hs(a,d,h,!0))}function Wf(a,d,h,g,y){var E,A,V,D=0;for(A=g+1;A<=y-1;A++)(V=hs(a[A],a[g],a[y],!0))>D&&(E=A,D=V);D>h&&(d[E]=1,Wf(a,d,h,g,E),Wf(a,d,h,E,y))}function ha(a,d,h,g,y){var A,V,G,D=g?Nl:Nr(a,h),E=Nr(d,h);for(Nl=E;;){if(!(D|E))return[a,d];if(D&E)return!1;G=Nr(V=Ol(a,d,A=D||E,h,y),h),A===D?(a=V,D=G):(d=V,E=G)}}function Ol(a,d,h,g,y){var G,se,D=d.x-a.x,E=d.y-a.y,A=g.min,V=g.max;return 8&h?(G=a.x+D*(V.y-a.y)/E,se=V.y):4&h?(G=a.x+D*(A.y-a.y)/E,se=A.y):2&h?(G=V.x,se=a.y+E*(V.x-a.x)/D):1&h&&(G=A.x,se=a.y+E*(A.x-a.x)/D),new Ie(G,se,y)}function Nr(a,d){var h=0;return a.x<d.min.x?h|=1:a.x>d.max.x&&(h|=2),a.y<d.min.y?h|=4:a.y>d.max.y&&(h|=8),h}function m_(a,d){var h=d.x-a.x,g=d.y-a.y;return h*h+g*g}function hs(a,d,h,g){var G,y=d.x,D=d.y,E=h.x-y,A=h.y-D,V=E*E+A*A;return V>0&&((G=((a.x-y)*E+(a.y-D)*A)/V)>1?(y=h.x,D=h.y):G>0&&(y+=E*G,D+=A*G)),E=a.x-y,A=a.y-D,g?E*E+A*A:new Ie(y,D)}function yn(a){return!mi(a[0])||"object"!=typeof a[0][0]&&typeof a[0][0]<"u"}function qf(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yn(a)}function bo(a,d){var h,g,y,D,E,A,V,G;if(!a||0===a.length)throw new Error("latlngs not passed");yn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var se=Ze([0,0]),be=Zt(a);be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest())<1700&&(se=Le(a));var Ht=a.length,an=[];for(h=0;h<Ht;h++){var Yn=Ze(a[h]);an.push(d.project(Ze([Yn.lat-se.lat,Yn.lng-se.lng])))}for(h=0,g=0;h<Ht-1;h++)g+=an[h].distanceTo(an[h+1])/2;if(0===g)G=an[0];else for(h=0,D=0;h<Ht-1;h++)if((D+=y=(E=an[h]).distanceTo(A=an[h+1]))>g){G=[A.x-(V=(D-g)/y)*(A.x-E.x),A.y-V*(A.y-E.y)];break}var bn=d.unproject(Me(G));return Ze([bn.lat+se.lat,bn.lng+se.lng])}var __={__proto__:null,simplify:Bd,pointToSegmentDistance:Un,closestPointOnSegment:function Gf(a,d,h){return hs(a,d,h)},clipSegment:ha,_getEdgeIntersection:Ol,_getBitCode:Nr,_sqClosestPointOnSegment:hs,isFlat:yn,_flat:qf,polylineCenter:bo},oe={project:function(a){return new Ie(a.lng,a.lat)},unproject:function(a){return new ut(a.y,a.x)},bounds:new Tt([-180,-90],[180,90])},Pl={R:6378137,R_MINOR:6356752.314245179,bounds:new Tt([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var d=Math.PI/180,h=this.R,g=a.lat*d,y=this.R_MINOR/h,D=Math.sqrt(1-y*y),E=D*Math.sin(g),A=Math.tan(Math.PI/4-g/2)/Math.pow((1-E)/(1+E),D/2);return g=-h*Math.log(Math.max(A,1e-10)),new Ie(a.lng*d*h,g)},unproject:function(a){for(var G,d=180/Math.PI,h=this.R,g=this.R_MINOR/h,y=Math.sqrt(1-g*g),D=Math.exp(-a.y/h),E=Math.PI/2-2*Math.atan(D),A=0,V=.1;A<15&&Math.abs(V)>1e-7;A++)G=y*Math.sin(E),G=Math.pow((1-G)/(1+G),y/2),E+=V=Math.PI/2-2*Math.atan(D*G)-E;return new ut(E*d,a.x*d/h)}},N={__proto__:null,LonLat:oe,Mercator:Pl,SphericalMercator:bd},Al=de({},Sr,{code:"EPSG:3395",projection:Pl,transformation:function(){var a=.5/(Math.PI*Pl.R);return ts(a,.5,-a,.5)}()}),Rl=de({},Sr,{code:"EPSG:4326",projection:oe,transformation:ts(1/180,1,-1/180,.5)}),fa=de({},mo,{projection:oe,transformation:ts(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var h=d.lng-a.lng,g=d.lat-a.lat;return Math.sqrt(h*h+g*g)},infinite:!0});mo.Earth=Sr,mo.EPSG3395=Al,mo.EPSG3857=wd,mo.EPSG900913=uw,mo.EPSG4326=Rl,mo.Simple=fa;var xi=ta.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[He(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[He(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var h=this.getEvents();d.on(h,this),this.once("remove",function(){d.off(h,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=He(a);return this._layers[d]||(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a)),this},removeLayer:function(a){var d=He(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return He(a)in this._layers},eachLayer:function(a,d){for(var h in this._layers)a.call(d,this._layers[h]);return this},_addLayers:function(a){for(var d=0,h=(a=a?mi(a)?a:[a]:[]).length;d<h;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[He(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=He(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,h=this._getZoomSpan();for(var g in this._zoomBoundLayers){var y=this._zoomBoundLayers[g].options;a=void 0===y.minZoom?a:Math.min(a,y.minZoom),d=void 0===y.maxZoom?d:Math.max(d,y.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fs=xi.extend({initialize:function(a,d){var h,g;if(_t(this,d),this._layers={},a)for(h=0,g=a.length;h<g;h++)this.addLayer(a[h])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){return("number"==typeof a?a:this.getLayerId(a))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h,g,d=Array.prototype.slice.call(arguments,1);for(h in this._layers)(g=this._layers[h])[a]&&g[a].apply(g,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var h in this._layers)a.call(d,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return He(a)}}),wo=fs.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),fs.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),fs.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Pn;for(var d in this._layers){var h=this._layers[d];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),ps=Go.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){_t(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var h=this._getIconUrl(a);if(!h){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(h,d&&"IMG"===d.tagName?d:null);return this._setIconStyles(g,a),(this.options.crossOrigin||""===this.options.crossOrigin)&&(g.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),g},_setIconStyles:function(a,d){var h=this.options,g=h[d+"Size"];"number"==typeof g&&(g=[g,g]);var y=Me(g),D=Me("shadow"===d&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(h.className||""),D&&(a.style.marginLeft=-D.x+"px",a.style.marginTop=-D.y+"px"),y&&(a.style.width=y.x+"px",a.style.height=y.y+"px")},_createImg:function(a,d){return(d=d||document.createElement("img")).src=a,d},_getIconUrl:function(a){return ge.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});var pa=ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return"string"!=typeof pa.imagePath&&(pa.imagePath=this._detectIconPath()),(this.options.imagePath||pa.imagePath)+ps.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(h,g,y){var D=g.exec(h);return D&&D[y]};return(a=d(a,/^url\((['"])?(.+)\1\)$/,2))&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=et("div","leaflet-default-icon-path",document.body),d=Ye(a,"background-image")||Ye(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d))return d;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Zo=yo.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ir(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),K(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&St(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,h=d._map,g=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,D=ls(d._icon),E=h.getPixelBounds(),A=h.getPixelOrigin(),V=Zn(E.min._subtract(A).add(y),E.max._subtract(A).subtract(y));if(!V.contains(D)){var G=Me((Math.max(V.max.x,D.x)-V.max.x)/(E.max.x-V.max.x)-(Math.min(V.min.x,D.x)-V.min.x)/(E.min.x-V.min.x),(Math.max(V.max.y,D.y)-V.max.y)/(E.max.y-V.max.y)-(Math.min(V.min.y,D.y)-V.min.y)/(E.min.y-V.min.y)).multiplyBy(g);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),Kt(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=rn(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(_n(this._panRequest),this._panRequest=rn(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,h=d._shadow,g=ls(d._icon),y=d._map.layerPointToLatLng(g);h&&Kt(h,g),d._latlng=y,a.latlng=y,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){_n(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Bl=xi.extend({options:{icon:new pa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){_t(this,d),this._latlng=Ze(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Ze(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),g=!1;h!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(h.title=a.title),"IMG"===h.tagName&&(h.alt=a.alt||"")),K(h,d),a.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(h,"focus",this._panOnFocus,this);var y=a.icon.createShadow(this._shadow),D=!1;y!==this._shadow&&(this._removeShadow(),D=!0),y&&(K(y,d),y.alt=""),this._shadow=y,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&D&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Kt(this._icon,a),this._shadow&&Kt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(K(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&vi(this._icon,a),this._shadow&&vi(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,h=d.iconSize?Me(d.iconSize):Me(0,0),g=d.iconAnchor?Me(d.iconAnchor):Me(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:h.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var ri=xi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return _t(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=ri.extend({options:{fill:!0,radius:10},initialize:function(a,d){_t(this,d),this._latlng=Ze(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Ze(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return ri.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,h=this._clickTolerance(),g=[a+h,d+h];this._pxBounds=new Tt(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var gs=ga.extend({initialize:function(a,d,h){if("number"==typeof d&&(d=de({},h,{radius:d})),_t(this,d),this._latlng=Ze(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Pn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:ri.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,h=this._map,g=h.options.crs;if(g.distance===Sr.distance){var y=Math.PI/180,D=this._mRadius/Sr.R/y,E=h.project([d+D,a]),A=h.project([d-D,a]),V=E.add(A).divideBy(2),G=h.unproject(V).lat,se=Math.acos((Math.cos(D*y)-Math.sin(d*y)*Math.sin(G*y))/(Math.cos(d*y)*Math.cos(G*y)))/y;(isNaN(se)||0===se)&&(se=D/Math.cos(Math.PI/180*d)),this._point=V.subtract(h.getPixelOrigin()),this._radius=isNaN(se)?0:V.x-h.project([G,a-se]).x,this._radiusY=V.y-E.y}else{var be=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(be).x}this._updateBounds()}});var Ko=ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){_t(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var y,D,d=1/0,h=null,g=hs,E=0,A=this._parts.length;E<A;E++)for(var V=this._parts[E],G=1,se=V.length;G<se;G++){var be=g(a,y=V[G-1],D=V[G],!0);be<d&&(d=be,h=g(a,y,D))}return h&&(h.distance=Math.sqrt(d)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Ze(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Pn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return yn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],h=yn(a),g=0,y=a.length;g<y;g++)h?(d[g]=Ze(a[g]),this._bounds.extend(d[g])):d[g]=this._convertLatLngs(a[g]);return d},_project:function(){var a=new Tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new Ie(a,a);this._rawPxBounds&&(this._pxBounds=new Tt([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,h){var D,E,y=a.length;if(a[0]instanceof ut){for(E=[],D=0;D<y;D++)E[D]=this._map.latLngToLayerPoint(a[D]),h.extend(E[D]);d.push(E)}else for(D=0;D<y;D++)this._projectLatlngs(a[D],d,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var h,g,y,D,E,A,V,d=this._parts;for(h=0,y=0,D=this._rings.length;h<D;h++)for(g=0,E=(V=this._rings[h]).length;g<E-1;g++)(A=ha(V[g],V[g+1],a,g,!0))&&(d[y]=d[y]||[],d[y].push(A[0]),(A[1]!==V[g+1]||g===E-2)&&(d[y].push(A[1]),y++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,h=0,g=a.length;h<g;h++)a[h]=Bd(a[h],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var h,g,y,D,E,A,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,D=this._parts.length;h<D;h++)for(g=0,y=(E=(A=this._parts[h]).length)-1;g<E;y=g++)if((d||0!==g)&&Un(a,A[y],A[g])<=V)return!0;return!1}});Ko._flat=qf;var ma=Ko.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Il(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Ko.prototype._convertLatLngs.call(this,a),h=d.length;return h>=2&&d[0]instanceof ut&&d[0].equals(d[h-1])&&d.pop(),d},_setLatLngs:function(a){Ko.prototype._setLatLngs.call(this,a),yn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,h=new Ie(d,d);if(a=new Tt(a.min.subtract(h),a.max.add(h)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var D,g=0,y=this._rings.length;g<y;g++)(D=zf(this._rings[g],a,!0)).length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h,g,y,D,E,A,V,G,d=!1;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(D=0,V=this._parts.length;D<V;D++)for(E=0,A=(G=(h=this._parts[D]).length)-1;E<G;A=E++)(g=h[E]).y>a.y!=(y=h[A]).y>a.y&&a.x<(y.x-g.x)*(a.y-g.y)/(y.y-g.y)+g.x&&(d=!d);return d||Ko.prototype._containsPoint.call(this,a,!0)}});var Ii=wo.extend({initialize:function(a,d){_t(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var h,g,y,d=mi(a)?a:a.features;if(d){for(h=0,g=d.length;h<g;h++)((y=d[h]).geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var D=this.options;if(D.filter&&!D.filter(a))return this;var E=Co(a,D);return E?(E.feature=ms(a),E.defaultOptions=E.options,this.resetStyle(E),D.onEachFeature&&D.onEachFeature(a,E),this.addLayer(E)):this},resetStyle:function(a){return void 0===a?this.eachLayer(this.resetStyle,this):(a.options=de({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&("function"==typeof d&&(d=d(a.feature)),a.setStyle(d))}});function Co(a,d){var A,V,G,se,h="Feature"===a.type?a.geometry:a,g=h?h.coordinates:null,y=[],D=d&&d.pointToLayer,E=d&&d.coordsToLatLng||jl;if(!g&&!h)return null;switch(h.type){case"Point":return y_(D,a,A=E(g),d);case"MultiPoint":for(G=0,se=g.length;G<se;G++)A=E(g[G]),y.push(y_(D,a,A,d));return new wo(y);case"LineString":case"MultiLineString":return V=ai(g,"LineString"===h.type?0:1,E),new Ko(V,d);case"Polygon":case"MultiPolygon":return V=ai(g,"Polygon"===h.type?1:2,E),new ma(V,d);case"GeometryCollection":for(G=0,se=h.geometries.length;G<se;G++){var be=Co({geometry:h.geometries[G],type:"Feature",properties:a.properties},d);be&&y.push(be)}return new wo(y);case"FeatureCollection":for(G=0,se=h.features.length;G<se;G++){var Be=Co(h.features[G],d);Be&&y.push(Be)}return new wo(y);default:throw new Error("Invalid GeoJSON object.")}}function y_(a,d,h,g){return a?a(d,h):new Bl(h,g&&g.markersInheritOptions&&g)}function jl(a){return new ut(a[1],a[0],a[2])}function ai(a,d,h){for(var E,g=[],y=0,D=a.length;y<D;y++)E=d?ai(a[y],d-1,h):(h||jl)(a[y]),g.push(E);return g}function Ue(a,d){return void 0!==(a=Ze(a)).alt?[Qi(a.lng,d),Qi(a.lat,d),Qi(a.alt,d)]:[Qi(a.lng,d),Qi(a.lat,d)]}function no(a,d,h,g){for(var y=[],D=0,E=a.length;D<E;D++)y.push(d?no(a[D],yn(a[D])?0:d-1,h,g):Ue(a[D],g));return!d&&h&&y.length>0&&y.push(y[0].slice()),y}function Or(a,d){return a.feature?de({},a.feature,{geometry:d}):ms(d)}function ms(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}var _s={toGeoJSON:function(a){return Or(this,{type:"Point",coordinates:Ue(this.getLatLng(),a)})}};function _a(a,d){return new Ii(a,d)}Bl.include(_s),gs.include(_s),ga.include(_s),Ko.include({toGeoJSON:function(a){var d=!yn(this._latlngs);return Or(this,{type:(d?"Multi":"")+"LineString",coordinates:no(this._latlngs,d?1:0,!1,a)})}}),ma.include({toGeoJSON:function(a){var d=!yn(this._latlngs),h=d&&!yn(this._latlngs[0]),g=no(this._latlngs,h?2:d?1:0,!0,a);return d||(g=[g]),Or(this,{type:(h?"Multi":"")+"Polygon",coordinates:g})}}),fs.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(h){d.push(h.toGeoJSON(a).geometry.coordinates)}),Or(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===d)return this.toMultiPoint(a);var h="GeometryCollection"===d,g=[];return this.eachLayer(function(y){if(y.toGeoJSON){var D=y.toGeoJSON(a);if(h)g.push(D.geometry);else{var E=ms(D);"FeatureCollection"===E.type?g.push.apply(g,E.features):g.push(E)}}}),h?Or(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});var Ni=_a,Je=xi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,h){this._url=a,this._bounds=Zt(d),_t(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(K(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ra(this._image),this},bringToBack:function(){return this._map&&ss(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Zt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a="IMG"===this._url.tagName,d=this._image=a?this._url:et("img");K(d,"leaflet-image-layer"),this._zoomAnimated&&K(d,"leaflet-zoom-animated"),this.options.className&&K(d,this.options.className),d.onselectstart=$t,d.onmousemove=$t,d.onload=xe(this.fire,this,"load"),d.onerror=xe(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(d.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a?this._url=d.src:(d.src=this._url,d.alt=this.options.alt)},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;as(this._image,h,d)},_reset:function(){var a=this._image,d=new Tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=d.getSize();Kt(a,d.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){vi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),$l=Je.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a="VIDEO"===this._url.tagName,d=this._image=a?this._url:et("video");if(K(d,"leaflet-image-layer"),this._zoomAnimated&&K(d,"leaflet-zoom-animated"),this.options.className&&K(d,this.options.className),d.onselectstart=$t,d.onmousemove=$t,d.onloadeddata=xe(this.fire,this,"load"),a){for(var h=d.getElementsByTagName("source"),g=[],y=0;y<h.length;y++)g.push(h[y].src);this._url=h.length>0?g:[d.src]}else{mi(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var E=et("source");E.src=this._url[D],d.appendChild(E)}}}});var jd=Je.extend({_initImage:function(){var a=this._image=this._url;K(a,"leaflet-image-layer"),this._zoomAnimated&&K(a,"leaflet-zoom-animated"),this.options.className&&K(a,this.options.className),a.onselectstart=$t,a.onmousemove=$t}});var Oi=xi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof ut||mi(a))?(this._latlng=Ze(a),_t(this,d)):(_t(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return(a=arguments.length?a:this._source._map).hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&vi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&vi(this._container,1),this.bringToFront(),this.options.interactive&&(K(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(vi(this._container,0),this._removeTimeout=setTimeout(xe(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Ze(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ra(this._container),this},bringToBack:function(){return this._map&&ss(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof wo){d=null;var h=this._source._layers;for(var g in h)if(h[g]._map){d=h[g];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else{if(!d.getBounds)throw new Error("Unable to get source layer LatLng.");a=d.getBounds().getCenter()}return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof d)a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=Me(this.options.offset),h=this._getAnchor();this._zoomAnimated?Kt(this._container,a.add(h)):d=d.add(a).add(h);var g=this._containerBottom=-d.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=g+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(a,d,h,g){var y=d;return y instanceof a||(y=new a(g).setContent(d)),h&&y.setLatLng(h),y}}),xi.include({_initOverlay:function(a,d,h,g){var y=h;return y instanceof a?(_t(y,g),y._source=this):(y=d&&!g?d:new a(g,this)).setContent(h),y}});var ya=Oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return!(a=arguments.length?a:this._source._map).hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Oi.prototype.openOn.call(this,a)},onAdd:function(a){Oi.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ri||this._source.on("preclick",Xi))},onRemove:function(a){Oi.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ri||this._source.off("preclick",Xi))},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=et("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=et("div",a+"-content-wrapper",d);if(this._contentNode=et("div",a+"-content",h),ds(d),la(this._contentNode),Pe(d,"contextmenu",Xi),this._tipContainer=et("div",a+"-tip-container",d),this._tip=et("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=et("a",a+"-close-button",d);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(g,"click",function(y){vn(y),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),d.width=h+1+"px",d.whiteSpace="",d.height="";var y=this.options.maxHeight,D="leaflet-popup-scrolled";y&&a.offsetHeight>y?(d.height=y+"px",K(a,D)):St(a,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();Kt(this._container,d.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var a=this._map,d=parseInt(Ye(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+d,g=this._containerWidth,y=new Ie(this._containerLeft,-h-this._containerBottom);y._add(ls(this._container));var D=a.layerPointToContainerPoint(y),E=Me(this.options.autoPanPadding),A=Me(this.options.autoPanPaddingTopLeft||E),V=Me(this.options.autoPanPaddingBottomRight||E),G=a.getSize(),se=0,be=0;D.x+g+V.x>G.x&&(se=D.x+g-G.x+V.x),D.x-se-A.x<0&&(se=D.x-A.x),D.y+h+V.y>G.y&&(be=D.y+h-G.y+V.y),D.y-be-A.y<0&&(be=D.y-A.y),(se||be)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([se,be]))}},_getAnchor:function(){return Me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(a,d,h){return this._initOverlay(ya,a,d,h).openOn(this),this},closePopup:function(a){return(a=arguments.length?a:this._popup)&&a.close(),this}}),xi.include({bindPopup:function(a,d){return this._popup=this._initOverlay(ya,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof wo||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(this._popup&&this._map){ee(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof ri))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng));this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){13===a.originalEvent.keyCode&&this._openPopup(a)}});var vs=Oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Oi.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Oi.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){this._contentNode=this._container=et("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+He(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,h,g=this._map,y=this._container,D=g.latLngToContainerPoint(g.getCenter()),E=g.layerPointToContainerPoint(a),A=this.options.direction,V=y.offsetWidth,G=y.offsetHeight,se=Me(this.options.offset),be=this._getAnchor();"top"===A?(d=V/2,h=G):"bottom"===A?(d=V/2,h=0):"center"===A?(d=V/2,h=G/2):"right"===A?(d=0,h=G/2):"left"===A?(d=V,h=G/2):E.x<D.x?(A="right",d=0,h=G/2):(A="left",d=V+2*(se.x+be.x),h=G/2),a=a.subtract(Me(d,h,!0)).add(se).add(be),St(y,"leaflet-tooltip-right"),St(y,"leaflet-tooltip-left"),St(y,"leaflet-tooltip-top"),St(y,"leaflet-tooltip-bottom"),K(y,"leaflet-tooltip-"+A),Kt(y,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&vi(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return Me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Qe.include({openTooltip:function(a,d,h){return this._initOverlay(vs,a,d,h).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),xi.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vs,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var d=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[d](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof wo||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d="function"==typeof a.getElement&&a.getElement();d&&(Pe(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Pe(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d="function"==typeof a.getElement&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;return void this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)})}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var h,g,d=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(h),d=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(d)}});var Yf=ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&"DIV"===a.tagName?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(rs(d),d.appendChild(h.html)):d.innerHTML=!1!==h.html?h.html:"",h.bgPos){var g=Me(h.bgPos);d.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});ps.Default=pa;var ba=xi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){_t(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Oe(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ra(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ss(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=zo(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Ie?a:new Ie(a,a)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var D,d=this.getPane().children,h=-a(-1/0,1/0),g=0,y=d.length;g<y;g++)D=d[g].style.zIndex,d[g]!==this._container&&D&&(h=a(h,+D));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ge.ielt9){vi(this._container,this.options.opacity);var a=+new Date,d=!1,h=!1;for(var g in this._tiles){var y=this._tiles[g];if(y.current&&y.loaded){var D=Math.min(1,(a-y.loaded)/200);vi(y.el,D),D<1?d=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),d&&(_n(this._fadeFrame),this._fadeFrame=rn(this._updateOpacity,this))}},_onOpaqueTile:$t,_initContainer:function(){this._container||(this._container=et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(void 0!==a){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=d-Math.abs(a-h),this._onUpdateLevel(h)):(Oe(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var g=this._levels[a],y=this._map;return g||((g=this._levels[a]={}).el=et("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=d,g.origin=y.project(y.unproject(y.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,y.getCenter(),y.getZoom()),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:$t,_onRemoveLevel:$t,_onCreateLevel:$t,_pruneTiles:function(){if(this._map){var a,d,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)(d=this._tiles[a]).retain=d.current;for(a in this._tiles)if((d=this._tiles[a]).current&&!d.active){var g=d.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Oe(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,h,g){var y=Math.floor(a/2),D=Math.floor(d/2),E=h-1,A=new Ie(+y,+D);A.z=+E;var V=this._tileCoordsToKey(A),G=this._tiles[V];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),E>g&&this._retainParent(y,D,E,g))},_retainChildren:function(a,d,h,g){for(var y=2*a;y<2*a+2;y++)for(var D=2*d;D<2*d+2;D++){var E=new Ie(y,D);E.z=h+1;var A=this._tileCoordsToKey(E),V=this._tiles[A];V&&V.active?V.retain=!0:(V&&V.loaded&&(V.retain=!0),h+1<g&&this._retainChildren(y,D,h+1,g))}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return void 0!==d.minNativeZoom&&a<d.minNativeZoom?d.minNativeZoom:void 0!==d.maxNativeZoom&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,h,g){var y=Math.round(d);y=void 0!==this.options.maxZoom&&y>this.options.maxZoom||void 0!==this.options.minZoom&&y<this.options.minZoom?void 0:this._clampZoom(y),(!g||this.options.updateWhenZooming&&y!==this._tileZoom)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==y&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,d)},_setZoomTransform:function(a,d,h){var g=this._map.getZoomScale(h,a.zoom),y=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(d,h)).round();ge.any3d?as(a.el,y,g):Kt(a.el,y)},_resetGrid:function(){var a=this._map,d=a.options.crs,h=this._tileSize=this.getTileSize(),g=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],g).x/h.x),Math.ceil(a.project([0,d.wrapLng[1]],g).x/h.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],g).y/h.x),Math.ceil(a.project([d.wrapLat[1],0],g).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,h=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),g=d.getZoomScale(h,this._tileZoom),y=d.project(a,this._tileZoom).floor(),D=d.getSize().divideBy(2*g);return new Tt(y.subtract(D),y.add(D))},_update:function(a){var d=this._map;if(d){var h=this._clampZoom(d.getZoom());if(void 0===a&&(a=d.getCenter()),void 0!==this._tileZoom){var g=this._getTiledPixelBounds(a),y=this._pxBoundsToTileRange(g),D=y.getCenter(),E=[],A=this.options.keepBuffer,V=new Tt(y.getBottomLeft().subtract([A,-A]),y.getTopRight().add([A,-A]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var se=this._tiles[G].coords;(se.z!==this._tileZoom||!V.contains(new Ie(se.x,se.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1)return void this._setView(a,h);for(var be=y.min.y;be<=y.max.y;be++)for(var Be=y.min.x;Be<=y.max.x;Be++){var Ht=new Ie(Be,be);if(Ht.z=this._tileZoom,this._isValidTile(Ht)){var an=this._tiles[this._tileCoordsToKey(Ht)];an?an.current=!0:E.push(Ht)}}if(E.sort(function(bn,bs){return bn.distanceTo(D)-bs.distanceTo(D)}),0!==E.length){this._loading||(this._loading=!0,this.fire("loading"));var Yn=document.createDocumentFragment();for(Be=0;Be<E.length;Be++)this._addTile(E[Be],Yn);this._level.el.appendChild(Yn)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var h=this._globalTileRange;if(!d.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!d.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return Zt(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,h=this.getTileSize(),g=a.scaleBy(h),y=g.add(h);return[d.unproject(g,a.z),d.unproject(y,a.z)]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),h=new Pn(d[0],d[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),h=new Ie(+d[0],+d[1]);return h.z=+d[2],h},_removeTile:function(a){var d=this._tiles[a];d&&(Oe(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){K(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=$t,a.onmousemove=$t,ge.ielt9&&this.options.opacity<1&&vi(a,this.options.opacity)},_addTile:function(a,d){var h=this._getTilePos(a),g=this._tileCoordsToKey(a),y=this.createTile(this._wrapCoords(a),xe(this._tileReady,this,a));this._initTile(y),this.createTile.length<2&&rn(xe(this._tileReady,this,a,null,y)),Kt(y,h),this._tiles[g]={el:y,coords:a,current:!0},d.appendChild(y),this.fire("tileloadstart",{tile:y,coords:a})},_tileReady:function(a,d,h){d&&this.fire("tileerror",{error:d,tile:h,coords:a});var g=this._tileCoordsToKey(a);(h=this._tiles[g])&&(h.loaded=+new Date,this._map._fadeAnimated?(vi(h.el,0),_n(this._fadeFrame),this._fadeFrame=rn(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),d||(K(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ge.ielt9||!this._map._fadeAnimated?rn(this._pruneTiles,this):setTimeout(xe(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new Ie(this._wrapX?ke(a.x,this._wrapX):a.x,this._wrapY?ke(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new Tt(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});var ys=ba.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,(d=_t(this,d)).detectRetina&&ge.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),"string"==typeof d.subdomains&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&void 0===d&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var h=document.createElement("img");return Pe(h,"load",xe(this._tileOnLoad,this,d,h)),Pe(h,"error",xe(this._tileOnError,this,d,h)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(h.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(a),h},getTileUrl:function(a){var d={r:ge.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=h),d["-y"]=h}return vd(this._url,de(d,this.options))},_tileOnLoad:function(a,d){ge.ielt9?setTimeout(xe(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,h){var g=this.options.errorTileUrl;g&&d.getAttribute("src")!==g&&(d.src=g),a(h,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom;return this.options.zoomReverse&&(a=this.options.maxZoom-a),a+this.options.zoomOffset},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&((d=this._tiles[a].el).onload=$t,d.onerror=$t,!d.complete)){d.src=Xs;var h=this._tiles[a].coords;Oe(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:h})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",Xs),ba.prototype._removeTile.call(this,a)},_tileReady:function(a,d,h){if(this._map&&(!h||h.getAttribute("src")!==Xs))return ba.prototype._tileReady.call(this,a,d,h)}});function Jf(a,d){return new ys(a,d)}var Xf=ys.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var h=de({},this.defaultWmsParams);for(var g in d)g in this.options||(h[g]=d[g]);var y=(d=_t(this,d)).detectRetina&&ge.retina?2:1,D=this.getTileSize();h.width=D.x*y,h.height=D.y*y,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ys.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),h=this._crs,g=Zn(h.project(d[0]),h.project(d[1])),y=g.min,D=g.max,E=(this._wmsVersion>=1.3&&this._crs===Rl?[y.y,y.x,D.y,D.x]:[y.x,y.y,D.x,D.y]).join(","),A=ys.prototype.getTileUrl.call(this,a);return A+pf(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(a,d){return de(this.wmsParams,a),d||this.redraw(),this}});ys.WMS=Xf,Jf.wms=function D_(a,d){return new Xf(a,d)};var io=xi.extend({options:{padding:.1},initialize:function(a){_t(this,a),He(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),K(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var h=this._map.getZoomScale(d,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,d),D=g.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(a,d));ge.any3d?as(this._container,D,h):Kt(this._container,D)},_reset:function(){for(var a in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),h=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new Tt(h,h.add(d.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ep=io.extend({options:{tolerance:0},getEvents:function(){var a=io.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){io.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Pe(a,"mousemove",this._onMouseMove,this),Pe(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){_n(this._redrawRequest),delete this._ctx,Oe(this._container),at(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var d in this._redrawBounds=null,this._layers)this._layers[d]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){io.prototype._update.call(this);var a=this._bounds,d=this._container,h=a.getSize(),g=ge.retina?2:1;Kt(d,a.min),d.width=g*h.x,d.height=g*h.y,d.style.width=h.x+"px",d.style.height=h.y+"px",ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){io.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[He(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,h=d.next,g=d.prev;h?h.prev=g:this._drawLast=g,g?g.next=h:this._drawFirst=h,delete a._order,delete this._layers[He(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if("string"==typeof a.options.dashArray){var g,y,d=a.options.dashArray.split(/[, ]+/),h=[];for(y=0;y<d.length;y++){if(g=Number(d[y]),isNaN(g))return;h.push(g)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||rn(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Tt,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var h=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var h,g,y,D,E=a._parts,A=E.length,V=this._ctx;if(A){for(V.beginPath(),h=0;h<A;h++){for(g=0,y=E[h].length;g<y;g++)V[g?"lineTo":"moveTo"]((D=E[h][g]).x,D.y);d&&V.closePath()}this._fillStroke(V,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var d=a._point,h=this._ctx,g=Math.max(Math.round(a._radius),1),y=(Math.max(Math.round(a._radiusY),1)||g)/g;1!==y&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(d.x,d.y/y,g,0,2*Math.PI,!1),1!==y&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,d){var h=d.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&0!==h.weight&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var h,g,d=this._map.mouseEventToLayerPoint(a),y=this._drawFirst;y;y=y.next)(h=y.layer).options.interactive&&h._containsPoint(d)&&("click"!==a.type&&"preclick"!==a.type||!this._map._draggableMoved(h))&&(g=h);this._fireEvent(!!g&&[g],a)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(St(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var h,g,y=this._drawFirst;y;y=y.next)(h=y.layer).options.interactive&&h._containsPoint(d)&&(g=h);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(K(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],a),this._mouseHoverThrottled=!0,setTimeout(xe(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,h){this._map._fireDOMEvent(d,h||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var h=d.next,g=d.prev;if(!h)return;h.prev=g,g?g.next=h:h&&(this._drawFirst=h),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var h=d.next,g=d.prev;if(!g)return;g.next=h,h?h.prev=g:g&&(this._drawLast=g),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function tp(a){return ge.canvas?new ep(a):null}var wa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ft={_initContainer:function(){this._container=et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(io.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=wa("shape");K(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=wa("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[He(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;Oe(d),a.removeInteractiveTarget(d),delete this._layers[He(a)]},_updateStyle:function(a){var d=a._stroke,h=a._fill,g=a.options,y=a._container;y.stroked=!!g.stroke,y.filled=!!g.fill,g.stroke?(d||(d=a._stroke=wa("stroke")),y.appendChild(d),d.weight=g.weight+"px",d.color=g.color,d.opacity=g.opacity,d.dashStyle=g.dashArray?mi(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):"",d.endcap=g.lineCap.replace("butt","flat"),d.joinstyle=g.lineJoin):d&&(y.removeChild(d),a._stroke=null),g.fill?(h||(h=a._fill=wa("fill")),y.appendChild(h),h.color=g.fillColor||g.color,h.opacity=g.fillOpacity):h&&(y.removeChild(h),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),h=Math.round(a._radius),g=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+h+","+g+" 0,23592600")},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){ra(a._container)},_bringToBack:function(a){ss(a._container)}},Hl=ge.vml?wa:Ke,Ca=io.extend({_initContainer:function(){this._container=Hl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),at(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){io.prototype._update.call(this);var a=this._bounds,d=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,h.setAttribute("width",d.x),h.setAttribute("height",d.y)),Kt(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Hl("path");a.options.className&&K(d,a.options.className),a.options.interactive&&K(d,"leaflet-interactive"),this._updateStyle(a),this._layers[He(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Oe(a._path),a.removeInteractiveTarget(a._path),delete this._layers[He(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,h=a.options;d&&(h.stroke?(d.setAttribute("stroke",h.color),d.setAttribute("stroke-opacity",h.opacity),d.setAttribute("stroke-width",h.weight),d.setAttribute("stroke-linecap",h.lineCap),d.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?d.setAttribute("stroke-dasharray",h.dashArray):d.removeAttribute("stroke-dasharray"),h.dashOffset?d.setAttribute("stroke-dashoffset",h.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),h.fill?(d.setAttribute("fill",h.fillColor||h.color),d.setAttribute("fill-opacity",h.fillOpacity),d.setAttribute("fill-rule",h.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,_l(a._parts,d))},_updateCircle:function(a){var d=a._point,h=Math.max(Math.round(a._radius),1),y="a"+h+","+(Math.max(Math.round(a._radiusY),1)||h)+" 0 1,0 ",D=a._empty()?"M0 0":"M"+(d.x-h)+","+d.y+y+2*h+",0 "+y+2*-h+",0 ";this._setPath(a,D)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){ra(a._path)},_bringToBack:function(a){ss(a._path)}});function nt(a){return ge.svg||ge.vml?new Ca(a):null}ge.vml&&Ca.include(Ft),Qe.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var d=this._paneRenderers[a];return void 0===d&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&tp(a)||nt(a)}});var $d=ma.extend({initialize:function(a,d){ma.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return[(a=Zt(a)).getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});Ca.create=Hl,Ca.pointsToPath=_l,Ii.geometryToLayer=Co,Ii.coordsToLatLng=jl,Ii.coordsToLatLngs=ai,Ii.latLngToCoords=Ue,Ii.latLngsToCoords=no,Ii.getFeature=Or,Ii.asFeature=ms,Qe.mergeOptions({boxZoom:!0});var zn=yo.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._clearDeferredResetState(),this._resetState(),Sl(),Rf(),this._startPoint=this._map.mouseEventToContainerPoint(a),Pe(document,{contextmenu:ee,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=et("div","leaflet-zoom-box",this._container),K(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new Tt(this._point,this._startPoint),h=d.getSize();Kt(this._box,d.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Oe(this._box),St(this._container,"leaflet-crosshair")),sa(),Hn(),at(document,{contextmenu:ee,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(xe(this._resetState,this),0);var d=new Pn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",zn),Qe.mergeOptions({doubleClickZoom:!0});var Re=yo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,h=d.getZoom(),g=d.options.zoomDelta,y=a.originalEvent.shiftKey?h-g:h+g;"center"===d.options.doubleClickZoom?d.setZoom(y):d.setZoomAround(a.containerPoint,y)}});Qe.addInitHook("addHandler","doubleClickZoom",Re),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wt=yo.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ir(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}K(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){St(this._map._container,"leaflet-grab"),St(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Zt(this._map.options.maxBounds);this._offsetLimit=Zn(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),h=this._initialWorldOffset,g=this._draggable._newPos.x,y=(g-d+h)%a+d-h,D=(g+d+h)%a-d-h,E=Math.abs(y+h)<Math.abs(D+h)?y:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(a){var d=this._map,h=d.options,g=!h.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),g)d.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),E=h.easeLinearity,A=y.multiplyBy(E/((this._lastTime-this._times[0])/1e3)),V=A.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,V),se=A.multiplyBy(G/V),be=G/(h.inertiaDeceleration*E),Be=se.multiplyBy(-be/2).round();Be.x||Be.y?(Be=d._limitOffset(Be,d.options.maxBounds),rn(function(){d.panBy(Be,{duration:be,easeLinearity:E,noMoveStart:!0,animate:!0})})):d.fire("moveend")}}});Qe.addInitHook("addHandler","dragging",Wt),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sn=yo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Pe(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),at(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,h=a.scrollTop||d.scrollTop,g=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(g,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var g,y,d=this._panKeys={},h=this.keyCodes;for(g=0,y=h.left.length;g<y;g++)d[h.left[g]]=[-1*a,0];for(g=0,y=h.right.length;g<y;g++)d[h.right[g]]=[a,0];for(g=0,y=h.down.length;g<y;g++)d[h.down[g]]=[0,a];for(g=0,y=h.up.length;g<y;g++)d[h.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var g,y,d=this._zoomKeys={},h=this.keyCodes;for(g=0,y=h.zoomIn.length;g<y;g++)d[h.zoomIn[g]]=a;for(g=0,y=h.zoomOut.length;g<y;g++)d[h.zoomOut[g]]=-a},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){at(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var g,d=a.keyCode,h=this._map;if(d in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(g=this._panKeys[d],a.shiftKey&&(g=Me(g).multiplyBy(3)),h.options.maxBounds&&(g=h._limitOffset(Me(g),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(g)));h.panTo(y)}else h.panBy(g)}else if(d in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else{if(27!==d||!h._popup||!h._popup.options.closeOnEscapeKey)return;h.closePopup()}ee(a)}}});Qe.addInitHook("addHandler","keyboard",sn),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Do=yo.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=xl(a),h=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(xe(this._performZoom,this),g),ee(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var y=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,D=h?Math.ceil(y/h)*h:y,E=a._limitZoom(d+(this._delta>0?D:-D))-d;this._delta=0,this._startTime=null,E&&("center"===a.options.scrollWheelZoom?a.setZoom(d+E):a.setZoomAround(this._lastMousePos,d+E))}});Qe.addInitHook("addHandler","scrollWheelZoom",Do);Qe.mergeOptions({tapHold:ge.touchNative&&ge.safari&&ge.mobile,tapTolerance:15});var Hd=yo.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),1===a.touches.length){var d=a.touches[0];this._startPos=this._newPos=new Ie(d.clientX,d.clientY),this._holdTimeout=setTimeout(xe(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",vn),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),600),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){at(document,"touchend",vn),at(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new Ie(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var h=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});h._simulated=!0,d.target.dispatchEvent(h)}});Qe.addInitHook("addHandler","tapHold",Hd),Qe.mergeOptions({touchZoom:ge.touch,bounceAtZoomLimits:!0});var Ud=yo.extend({addHooks:function(){K(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){St(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(a.touches&&2===a.touches.length&&!d._animatingZoom&&!this._zooming){var h=d.mouseEventToContainerPoint(a.touches[0]),g=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),"center"!==d.options.touchZoom&&(this._pinchStartLatLng=d.containerPointToLatLng(h.add(g)._divideBy(2))),this._startDist=h.distanceTo(g),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),vn(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var d=this._map,h=d.mouseEventToContainerPoint(a.touches[0]),g=d.mouseEventToContainerPoint(a.touches[1]),y=h.distanceTo(g)/this._startDist;if(this._zoom=d.getScaleZoom(y,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&y<1||this._zoom>d.getMaxZoom()&&y>1)&&(this._zoom=d._limitZoom(this._zoom)),"center"===d.options.touchZoom){if(this._center=this._startLatLng,1===y)return}else{var D=h._add(g)._divideBy(2)._subtract(this._centerPoint);if(1===y&&0===D.x&&0===D.y)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),_n(this._animRequest);var E=xe(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=rn(E,this,!0),vn(a)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,_n(this._animRequest),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Qe.addInitHook("addHandler","touchZoom",Ud),Qe.BoxZoom=zn,Qe.DoubleClickZoom=Re,Qe.Drag=Wt,Qe.Keyboard=sn,Qe.ScrollWheelZoom=Do,Qe.TapHold=Hd,Qe.TouchZoom=Ud,X.Bounds=Tt,X.Browser=ge,X.CRS=mo,X.Canvas=ep,X.Circle=gs,X.CircleMarker=ga,X.Class=Go,X.Control=eo,X.DivIcon=Yf,X.DivOverlay=Oi,X.DomEvent=Rd,X.DomUtil=W,X.Draggable=Ir,X.Evented=ta,X.FeatureGroup=wo,X.GeoJSON=Ii,X.GridLayer=ba,X.Handler=yo,X.Icon=ps,X.ImageOverlay=Je,X.LatLng=ut,X.LatLngBounds=Pn,X.Layer=xi,X.LayerGroup=fs,X.LineUtil=__,X.Map=Qe,X.Marker=Bl,X.Mixin=g_,X.Path=ri,X.Point=Ie,X.PolyUtil=Ld,X.Polygon=ma,X.Polyline=Ko,X.Popup=ya,X.PosAnimation=p_,X.Projection=N,X.Rectangle=$d,X.Renderer=io,X.SVG=Ca,X.SVGOverlay=jd,X.TileLayer=ys,X.Tooltip=vs,X.Transformation=vf,X.Util=mf,X.VideoOverlay=$l,X.bind=xe,X.bounds=Zn,X.canvas=tp,X.circle=function Vd(a,d,h){return new gs(a,d,h)},X.circleMarker=function Vl(a,d){return new ga(a,d)},X.control=xr,X.divIcon=function Pi(a){return new Yf(a)},X.extend=de,X.featureGroup=function(a,d){return new wo(a,d)},X.geoJSON=_a,X.geoJson=Ni,X.gridLayer=function Qf(a){return new ba(a)},X.icon=function Ll(a){return new ps(a)},X.imageOverlay=function(a,d,h){return new Je(a,d,h)},X.latLng=Ze,X.latLngBounds=Zt,X.layerGroup=function(a,d){return new fs(a,d)},X.map=function gw(a,d){return new Qe(a,d)},X.marker=function Kn(a,d){return new Bl(a,d)},X.point=Me,X.polygon=function si(a,d){return new ma(a,d)},X.polyline=function Zf(a,d){return new Ko(a,d)},X.popup=function(a,d){return new ya(a,d)},X.rectangle=function te(a,d){return new $d(a,d)},X.setOptions=_t,X.stamp=He,X.svg=nt,X.svgOverlay=function va(a,d,h){return new jd(a,d,h)},X.tileLayer=Jf,X.tooltip=function(a,d){return new vs(a,d)},X.transformation=ts,X.version="1.9.4",X.videoOverlay=function Kf(a,d,h){return new $l(a,d,h)};var Ul=window.L;X.noConflict=function(){return window.L=Ul,this},window.L=X}(hf)}},uf=>{uf(uf.s=64)}]);